Opal.modules["active_support/core_ext/array/extract_options"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.truthy,i=e.hash2;return e.add_stubs(["$instance_of?","$is_a?","$last","$extractable_options?","$pop"]),function(t,$super,n){function a(){}var i,o=a=r(t,null,"Hash",a),$=(o.$$proto,[o].concat(n));e.defn(o,"$extractable_options?",i=function(){return this["$instance_of?"](e.const_get_relative($,"Hash"))},i.$$arity=0)}(t[0],0,t),function(t,$super,o){function $(){}var s,c=$=r(t,null,"Array",$),l=(c.$$proto,[c].concat(o));return e.defn(c,"$extract_options!",s=function(){var t,n=this;return a(a(t=n.$last()["$is_a?"](e.const_get_relative(l,"Hash")))?n.$last()["$extractable_options?"]():t)?n.$pop():i([],{})},s.$$arity=0),n&&"extract_options!"}(t[0],0,t)},Opal.modules["active_support/core_ext/array/wrap"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.klass),r=e.truthy;return e.add_stubs(["$nil?","$respond_to?","$to_ary"]),function(t,$super,a){function i(){}var o,$=i=n(t,null,"Array",i);$.$$proto,[$].concat(a);return e.defs($,"$wrap",o=function(e){var t;return r(e["$nil?"]())?[]:r(e["$respond_to?"]("to_ary"))&&r(t=e.$to_ary())?t:[e]},o.$$arity=1)}(t[0],0,t)},Opal.modules["active_support/core_ext/array/grouping"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var i=[],o=e.nil,$=(e.breaker,e.slice,e.klass),s=e.send,c=e.truthy;return e.add_stubs(["$==","$%","$-","$size","$concat","$dup","$*","$each_slice","$<<","$div","$times","$+","$>","$slice","$!=","$each","$inject","$call","$last"]),function(i,$super,l){function u(){}var _,f,p,d=u=$(i,null,"Array",u);d.$$proto,[d].concat(l);return e.defn(d,"$in_groups_of",_=function(r,a){var i,$,c=this,l=_.$$p,u=l||o,f=o,p=o,d=o;return null==a&&(a=o),l&&(_.$$p=null),a["$=="](!1)?f=c:(p=t(r,c.$size()["$%"](r))["$%"](r),f=c.$dup().$concat(n([a],p))),u!==o?s(f,"each_slice",[r],((i=function(t){i.$$s;return null==t&&(t=o),e.yield1(u,t)}).$$s=c,i.$$arity=1,i)):(d=[],s(f,"each_slice",[r],(($=function(e){$.$$s;return null==e&&(e=o),d["$<<"](e)}).$$s=c,$.$$arity=1,$)),d)},_.$$arity=-2),e.defn(d,"$in_groups",f=function(t,n){var i,$,l=this,u=f.$$p,_=u||o,p=o,d=o,v=o,h=o;return null==n&&(n=o),u&&(f.$$p=null),p=l.$size().$div(t),d=l.$size()["$%"](t),v=[],h=0,s(t,"times",[],((i=function(e){var t,$,s=i.$$s||this,l=o,u=o;return null==e&&(e=o),l=r(p,c(c(t=a(d,0))?a(d,e):t)?1:0),v["$<<"](u=s.$slice(h,l)),c(c(t=c($=n["$!="](!1))?a(d,0):$)?l["$=="](p):t)&&u["$<<"](n),h=r(h,l)}).$$s=l,i.$$arity=1,i)),_!==o?s(v,"each",[],(($=function(t){$.$$s;return null==t&&(t=o),e.yield1(_,t)}).$$s=l,$.$$arity=1,$)):v},f.$$arity=-2),e.defn(d,"$split",p=function(e){var t,n=this,r=p.$$p,a=r||o;return null==e&&(e=o),r&&(p.$$p=null),s(n,"inject",[[[]]],((t=function(n,r){var i,$;t.$$s;return null==n&&(n=o),null==r&&(r=o),c(c(i=c($=a)?a.$call(r):$)?i:e["$=="](r))?n["$<<"]([]):n.$last()["$<<"](r),n}).$$s=n,t.$$arity=2,t))},p.$$arity=-1),o&&"split"}(i[0],0,i)},Opal.modules["active_support/core_ext/array"]=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/array/extract_options"),t.$require("active_support/core_ext/array/wrap"),t.$require("active_support/core_ext/array/grouping")},Opal.modules["active_support/core_ext/kernel/singleton_class"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.send;return e.add_stubs(["$class_eval","$singleton_class","$to_proc"]),function(t,i){var o,$=r(t,"Kernel");$.$$proto,[$].concat(i);e.defn($,"$class_eval",o=function(){var t,r=this,i=o.$$p,$=i||n,s=arguments.length,c=s-0;c<0&&(c=0),t=new Array(c);for(var l=0;l<s;l++)t[l-0]=arguments[l];return i&&(o.$$p=null),a(r.$singleton_class(),"class_eval",e.to_a(t),$.$to_proc())},o.$$arity=-1)}(t[0],t)},Opal.modules["active_support/core_ext/module/remove_method"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.truthy,i=e.send;return e.add_stubs(["$method_defined?","$private_method_defined?","$undef_method","$remove_possible_method","$define_method","$to_proc"]),function(t,$super,o){function $(){}var s,c,l=$=r(t,null,"Module",$);l.$$proto,[l].concat(o);return e.defn(l,"$remove_possible_method",s=function(e){var t,r=this;return a(a(t=r["$method_defined?"](e))?t:r["$private_method_defined?"](e))?r.$undef_method(e):n},s.$$arity=1),e.defn(l,"$redefine_method",c=function(e){var t=this,r=c.$$p,a=r||n;return r&&(c.$$p=null),t.$remove_possible_method(e),i(t,"define_method",[e],a.$to_proc())},c.$$arity=1),n&&"redefine_method"}(t[0],0,t)},Opal.modules["active_support/core_ext/class/attribute"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.truthy,o=e.send;return e.add_stubs(["$require","$extract_options!","$fetch","$each","$define_singleton_method","$!","$public_send","$class_eval","$singleton_class","$remove_possible_method","$define_method","$singleton_class?","$instance_variable_defined?","$instance_variable_get","$send","$class","$attr_writer","$private","$respond_to?","$!=","$first","$ancestors"]),t.$require("active_support/core_ext/kernel/singleton_class"),t.$require("active_support/core_ext/module/remove_method"),t.$require("active_support/core_ext/array/extract_options"),function(t,$super,n){function $(){}var s,c,l=$=a(t,null,"Class",$);l.$$proto,[l].concat(n);return e.defn(l,"$class_attribute",s=function(){var e,t,n,a=this,$=r,s=r,c=r,l=r,u=arguments.length,_=u-0;_<0&&(_=0),n=new Array(_);for(var f=0;f<u;f++)n[f-0]=arguments[f];return $=n["$extract_options!"](),s=i(e=$.$fetch("instance_accessor",!0))?$.$fetch("instance_reader",!0):e,c=i(e=$.$fetch("instance_accessor",!0))?$.$fetch("instance_writer",!0):e,l=$.$fetch("instance_predicate",!0),o(n,"each",[],((t=function(e){var n,a,$,u,_,f=t.$$s||this,p=r;return null==e&&(e=r),o(f,"define_singleton_method",[e],((n=function(){n.$$s;return r}).$$s=f,n.$$arity=0,n)),i(l)&&o(f,"define_singleton_method",[e+"?"],((a=function(){return(a.$$s||this).$public_send(e)["$!"]()["$!"]()}).$$s=f,a.$$arity=0,a)),p="@"+e,o(f,"define_singleton_method",[e+"="],(($=function(t){var n,a,s=$.$$s||this;return null==t&&(t=r),o(s.$singleton_class(),"class_eval",[],((n=function(){var r,a=n.$$s||this;return a.$remove_possible_method(e),o(a,"define_method",[e],((r=function(){r.$$s;return t}).$$s=a,r.$$arity=0,r))}).$$s=s,n.$$arity=0,n)),i(s["$singleton_class?"]())&&o(s,"class_eval",[],((a=function(){var t,n=a.$$s||this;return n.$remove_possible_method(e),o(n,"define_method",[e],((t=function(){var n=t.$$s||this;return i(n["$instance_variable_defined?"](p))?n.$instance_variable_get(p):n.$singleton_class().$send(e)}).$$s=n,t.$$arity=0,t))}).$$s=s,a.$$arity=0,a)),t}).$$s=f,$.$$arity=1,$)),i(s)&&(f.$remove_possible_method(e),o(f,"define_method",[e],((u=function(){var t=u.$$s||this;return i(t["$instance_variable_defined?"](p))?t.$instance_variable_get(p):t.$class().$public_send(e)}).$$s=f,u.$$arity=0,u)),i(l)&&o(f,"define_method",[e+"?"],((_=function(){return(_.$$s||this).$public_send(e)["$!"]()["$!"]()}).$$s=f,_.$$arity=0,_))),i(c)?f.$attr_writer(e):r}).$$s=a,t.$$arity=1,t))},s.$$arity=-1),l.$private(),i(l["$respond_to?"]("singleton_class?"))?r:(e.defn(l,"$singleton_class?",c=function(){var e,t=this;return i(e=!0)?e:t.$ancestors().$first()["$!="](t)},c.$$arity=0),r&&"singleton_class?")}(n[0],0,n)},Opal.modules["active_support/core_ext/class"]=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/class/attribute")},Opal.modules["active_support/core_ext/enumerable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=e.breaker,i=(e.slice,e.module),o=e.send;return e.add_stubs(["$enum_for","$new","$destructure","$[]=","$-"]),function(n,$){var s,c=i(n,"Enumerable"),l=(c.$$proto,[c].concat($));e.defn(c,"$index_by",s=function(){var n,i=this,$=s.$$p,c=$||r,u=r,_=r;return $&&(s.$$p=null),c===r?i.$enum_for("index_by"):(u=e.const_get_relative(l,"Hash").$new(),i.$each._p=function(){var r=e.const_get_relative(l,"Opal").$destructure(arguments),i=$opal.$yield1(c,r);if(i===a)return n=a.$v,a;_=[i,r],o(u,"[]=",e.to_a(_)),_[t(_.length,1)]},i.$each(),n!==undefined?n:u)},s.$$arity=0)}(n[0],n)},Opal.modules["active_support/hash_with_indifferent_access"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.send,s=e.hash2;return e.add_stubs(["$dup","$respond_to?","$update","$to_hash","$tap","$new","$default","$default=","$-","$default_proc","$default_proc="]),function(n,c){var l=a(n,"ActiveSupport"),u=(l.$$proto,[l].concat(c));!function(n,$super,a){function c(){}var l,u,_,f,p,d=c=i(n,$super,"HashWithIndifferentAccess",c);d.$$proto,[d].concat(a);e.defn(d,"$extractable_options?",l=function(){return!0},l.$$arity=0),e.defn(d,"$with_indifferent_access",u=function(){return this.$dup()},u.$$arity=0),e.defn(d,"$nested_under_indifferent_access",_=function(){return this},_.$$arity=0),e.defn(d,"$initialize",f=function(t){var n=this,r=f.$$p;return null==t&&(t=s([],{})),r&&(f.$$p=null),o(t["$respond_to?"]("to_hash"))?($(n,e.find_super_dispatcher(n,"initialize",f,!1),[],null),n.$update(t)):$(n,e.find_super_dispatcher(n,"initialize",f,!1),[t],null)},f.$$arity=-1),e.defs(d,"$new_from_hash_copying_default",p=function(n){var a,i=this;return n=n.$to_hash(),$(i.$new(n),"tap",[],((a=function(i){a.$$s;var s=r;return null==i&&(i=r),s=[n.$default()],$(i,"default=",e.to_a(s)),s[t(s.length,1)],o(n.$default_proc())?(s=[n.$default_proc()],$(i,"default_proc=",e.to_a(s)),s[t(s.length,1)]):r}).$$s=i,a.$$arity=1,a))},p.$$arity=1)}(u[0],e.const_get_relative(u,"Hash"),u)}(n[0],n)},Opal.modules["active_support/core_ext/hash/indifferent_access"]=function(e){var t=e.top,n=[],r=(e.nil,e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$new_from_hash_copying_default"]),t.$require("active_support/hash_with_indifferent_access"),function(t,$super,n){function a(){}var i,o=a=r(t,null,"Hash",a),$=(o.$$proto,[o].concat(n));return e.defn(o,"$with_indifferent_access",i=function(){var t=this;return e.const_get_qualified(e.const_get_relative($,"ActiveSupport"),"HashWithIndifferentAccess").$new_from_hash_copying_default(t)},i.$$arity=0),e.alias(o,"nested_under_indifferent_access","with_indifferent_access")}(n[0],0,n)},Opal.modules["active_support/core_ext/hash"]=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/hash/indifferent_access")},Opal.modules["active_support/core_ext/numeric/time"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var a=[],i=(e.nil,e.breaker,e.slice,e.klass);return e.add_stubs(["$*","$hours","$days","$weeks","$-","$current","$+"]),function(a,$super,o){function $(){}var s,c,l,u,_,f,p,d,v=$=i(a,null,"Numeric",$);v.$$proto,[v].concat(o);return e.defn(v,"$seconds",s=function(){return this},s.$$arity=0),e.alias(v,"second","seconds"),e.defn(v,"$minutes",c=function(){return t(this,60)},c.$$arity=0),e.alias(v,"minute","minutes"),e.defn(v,"$hours",l=function(){return t(this,3600)},l.$$arity=0),e.alias(v,"hour","hours"),e.defn(v,"$days",u=function(){return t(this,24..$hours())},u.$$arity=0),e.alias(v,"day","days"),e.defn(v,"$weeks",_=function(){return t(this,7..$days())},_.$$arity=0),e.alias(v,"week","weeks"),e.defn(v,"$fortnights",f=function(){return t(this,2..$weeks())},f.$$arity=0),e.alias(v,"fortnight","fortnights"),e.defn(v,"$ago",p=function(t){var r=this;return null==t&&(t=e.const_get_qualified("::","Time").$current()),n(t,r)},p.$$arity=-1),e.alias(v,"until","ago"),e.defn(v,"$since",d=function(t){var n=this;return null==t&&(t=e.const_get_qualified("::","Time").$current()),r(t,n)},d.$$arity=-1),e.alias(v,"from_now","since")}(a[0],0,a)},Opal.modules["active_support/core_ext/integer/time"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}var n=e.top,r=[],a=(e.nil,e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$*","$days"]),n.$require("active_support/core_ext/numeric/time"),function(n,$super,r){function i(){}var o,$,s=i=a(n,null,"Numeric",i);s.$$proto,[s].concat(r);return e.defn(s,"$months",o=function(){return t(this,30..$days())},o.$$arity=0),e.alias(s,"month","months"),e.defn(s,"$years",$=function(){return t(this,365.25.$days())},$.$$arity=0),e.alias(s,"year","years")}(r[0],0,r)},Opal.modules["active_support/core_ext/integer"]=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/integer/time")},Opal.modules["active_support/core_ext/kernel"]=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/kernel/singleton_class")},Opal.modules.set=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}e.top;var a=[],i=e.nil,o=(e.breaker,e.slice,e.klass),$=e.truthy,s=e.send,c=e.module;return e.add_stubs(["$include","$new","$nil?","$===","$raise","$each","$add","$call","$merge","$class","$respond_to?","$subtract","$dup","$join","$to_a","$equal?","$instance_of?","$==","$instance_variable_get","$is_a?","$size","$all?","$include?","$[]=","$-","$enum_for","$[]","$<<","$replace","$delete","$select","$each_key","$to_proc","$empty?","$eql?","$instance_eval","$clear","$<","$<=","$keys"]),function(a,$super,c){function l(){}var u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C,I,D,H,z,P,R=l=o(a,null,"Set",l),j=R.$$proto,B=[R].concat(c);j.hash=i,R.$include(e.const_get_relative(B,"Enumerable")),e.defs(R,"$[]",u=function(){var e,t=this,n=arguments.length,r=n-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<n;a++)e[a-0]=arguments[a];return t.$new(e)},u.$$arity=-1),e.defn(R,"$initialize",_=function(t){var n,r=this,a=_.$$p,o=a||i;return null==t&&(t=i),a&&(_.$$p=null),r.hash=e.const_get_relative(B,"Hash").$new(),$(t["$nil?"]())?i:($(e.const_get_relative(B,"Enumerable")["$==="](t))||r.$raise(e.const_get_relative(B,"ArgumentError"),"value must be enumerable"),$(o)?s(t,"each",[],((n=function(e){var t=n.$$s||this;return null==e&&(e=i),t.$add(o.$call(e))}).$$s=r,n.$$arity=1,n)):r.$merge(t))},_.$$arity=-1),e.defn(R,"$dup",f=function(){var e=this;return e.$class().$new().$merge(e)},f.$$arity=0),e.defn(R,"$-",p=function(t){var n=this;return $(t["$respond_to?"]("each"))||n.$raise(e.const_get_relative(B,"ArgumentError"),"value must be enumerable"),n.$dup().$subtract(t)},p.$$arity=1),e.alias(R,"difference","-"),e.defn(R,"$inspect",d=function(){return"#<Set: {"+this.$to_a().$join(",")+"}>"},d.$$arity=0),e.defn(R,"$==",v=function(t){var n,r,a=this;return!!$(a["$equal?"](t))||($(t["$instance_of?"](a.$class()))?a.hash["$=="](t.$instance_variable_get("@hash")):!!$($(n=t["$is_a?"](e.const_get_relative(B,"Set")))?a.$size()["$=="](t.$size()):n)&&s(t,"all?",[],((r=function(e){var t=r.$$s||this;return null==t.hash&&(t.hash=i),null==e&&(e=i),t.hash["$include?"](e)}).$$s=a,r.$$arity=1,r)))},v.$$arity=1),e.defn(R,"$add",h=function(n){var r=this,a=i;return a=[n,!0],s(r.hash,"[]=",e.to_a(a)),a[t(a.length,1)],r},h.$$arity=1),e.alias(R,"<<","add"),e.defn(R,"$classify",y=function(){var n,r,a=this,o=y.$$p,$=o||i,c=i;return o&&(y.$$p=null),$===i?a.$enum_for("classify"):(c=s(e.const_get_relative(B,"Hash"),"new",[],((n=function(r,a){var o=n.$$s||this,$=i;return null==r&&(r=i),null==a&&(a=i),$=[a,o.$class().$new()],s(r,"[]=",e.to_a($)),$[t($.length,1)]}).$$s=a,n.$$arity=2,n)),s(a,"each",[],((r=function(t){r.$$s;return null==t&&(t=i),c["$[]"](e.yield1($,t)).$add(t)}).$$s=a,r.$$arity=1,r)),c)},y.$$arity=0),e.defn(R,"$collect!",m=function(){var t,n=this,r=m.$$p,a=r||i,o=i;return r&&(m.$$p=null),a===i?n.$enum_for("collect!"):(o=n.$class().$new(),s(n,"each",[],((t=function(n){t.$$s;return null==n&&(n=i),o["$<<"](e.yield1(a,n))}).$$s=n,t.$$arity=1,t)),n.$replace(o))},m.$$arity=0),e.alias(R,"map!","collect!"),e.defn(R,"$delete",g=function(e){var t=this;return t.hash.$delete(e),t},g.$$arity=1),e.defn(R,"$delete?",b=function(e){var t=this;return $(t["$include?"](e))?(t.$delete(e),t):i},b.$$arity=1),e.defn(R,"$delete_if",w=function(){try{var t,n,r=this,a=w.$$p,o=a||i;return a&&(w.$$p=null),$(o!==i)||e.ret(r.$enum_for("delete_if")),s(s(r,"select",[],((t=function(n){t.$$s;return null==n&&(n=i),e.yield1(o,n)}).$$s=r,t.$$arity=1,t)),"each",[],((n=function(e){var t=n.$$s||this;return null==t.hash&&(t.hash=i),null==e&&(e=i),t.hash.$delete(e)}).$$s=r,n.$$arity=1,n)),r}catch(c){if(c===e.returner)return c.$v;throw c}},w.$$arity=0),e.defn(R,"$add?",k=function(e){var t=this;return $(t["$include?"](e))?i:t.$add(e)},k.$$arity=1),e.defn(R,"$each",O=function(){var e=this,t=O.$$p,n=t||i;return t&&(O.$$p=null),n===i?e.$enum_for("each"):(s(e.hash,"each_key",[],n.$to_proc()),e)},O.$$arity=0),e.defn(R,"$empty?",q=function(){return this.hash["$empty?"]()},q.$$arity=0),e.defn(R,"$eql?",E=function(e){var t,n=this;return n.hash["$eql?"](s(e,"instance_eval",[],((t=function(){var e=t.$$s||this;return null==e.hash&&(e.hash=i),e.hash}).$$s=n,t.$$arity=0,t)))},E.$$arity=1),e.defn(R,"$clear",x=function(){var e=this;return e.hash.$clear(),e},x.$$arity=0),e.defn(R,"$include?",A=function(e){return this.hash["$include?"](e)},A.$$arity=1),e.alias(R,"member?","include?"),e.defn(R,"$merge",S=function(e){var t,n=this;return s(e,"each",[],((t=function(e){var n=t.$$s||this;return null==e&&(e=i),n.$add(e)}).$$s=n,t.$$arity=1,t)),n},S.$$arity=1),e.defn(R,"$replace",M=function(e){var t=this;return t.$clear(),t.$merge(e),t},M.$$arity=1),e.defn(R,"$size",N=function(){return this.hash.$size()},N.$$arity=0),e.alias(R,"length","size"),e.defn(R,"$subtract",T=function(e){var t,n=this;return s(e,"each",[],((t=function(e){var n=t.$$s||this;return null==e&&(e=i),n.$delete(e)}).$$s=n,t.$$arity=1,t)),n},T.$$arity=1),e.defn(R,"$|",C=function(t){var n=this;return $(t["$respond_to?"]("each"))||n.$raise(e.const_get_relative(B,"ArgumentError"),"value must be enumerable"),n.$dup().$merge(t)},C.$$arity=1),e.defn(R,"$superset?",I=function(t){var r,a=this;return $(t["$is_a?"](e.const_get_relative(B,"Set")))||a.$raise(e.const_get_relative(B,"ArgumentError"),"value must be a set"),!$(n(a.$size(),t.$size()))&&s(t,"all?",[],((r=function(e){var t=r.$$s||this;return null==e&&(e=i),t["$include?"](e)}).$$s=a,r.$$arity=1,r))},I.$$arity=1),e.alias(R,">=","superset?"),e.defn(R,"$proper_superset?",D=function(t){var n,a=this;return $(t["$is_a?"](e.const_get_relative(B,"Set")))||a.$raise(e.const_get_relative(B,"ArgumentError"),"value must be a set"),!$(r(a.$size(),t.$size()))&&s(t,"all?",[],((n=function(e){var t=n.$$s||this;return null==e&&(e=i),t["$include?"](e)}).$$s=a,n.$$arity=1,n))},D.$$arity=1),e.alias(R,">","proper_superset?"),e.defn(R,"$subset?",H=function(t){var r,a=this;return $(t["$is_a?"](e.const_get_relative(B,"Set")))||a.$raise(e.const_get_relative(B,"ArgumentError"),"value must be a set"),!$(n(t.$size(),a.$size()))&&s(a,"all?",[],((r=function(e){r.$$s;return null==e&&(e=i),t["$include?"](e)}).$$s=a,r.$$arity=1,r))},H.$$arity=1),e.alias(R,"<=","subset?"),e.defn(R,"$proper_subset?",z=function(t){var n,a=this;return $(t["$is_a?"](e.const_get_relative(B,"Set")))||a.$raise(e.const_get_relative(B,"ArgumentError"),"value must be a set"),!$(r(t.$size(),a.$size()))&&s(a,"all?",[],((n=function(e){n.$$s;return null==e&&(e=i),t["$include?"](e)}).$$s=a,n.$$arity=1,n))},z.$$arity=1),e.alias(R,"<","proper_subset?"),e.alias(R,"+","|"),e.alias(R,"union","|"),e.defn(R,"$to_a",P=function(){return this.hash.$keys()},P.$$arity=0)}(a[0],0,a),function(t,n){var r,a=c(t,"Enumerable"),o=(a.$$proto,[a].concat(n));e.defn(a,"$to_set",r=function(t){var n,a=this,$=r.$$p,c=$||i;null==t&&(t=e.const_get_relative(o,"Set"));var l=arguments.length,u=l-1;u<0&&(u=0),n=new Array(u);for(var _=1;_<l;_++)n[_-1]=arguments[_];return $&&(r.$$p=null),s(t,"new",[a].concat(e.to_a(n)),c.$to_proc())},r.$$arity=-1)}(a[0],a)},Opal.modules["active_support/inflector/inflections"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var r=e.top,a=[],i=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass,s=e.hash2,c=e.send,l=e.truthy,u=e.range;return e.add_stubs(["$require","$extend","$add","$map","$flatten","$to_proc","$concat","$include?","$downcase","$new","$[]","$[]=","$-","$attr_reader","$each","$instance_variable_set","$dup","$send","$is_a?","$delete","$unshift","$==","$upcase","$plural","$+","$singular","$===","$instance"]),r.$require("set"),function(r,a){var _=o(r,"ActiveSupport"),f=(_.$$proto,[_].concat(a));!function(r,a){var _,f=o(r,"Inflector"),p=(f.$$proto,[f].concat(a));f.$extend(f),function(r,$super,a){function o(){}var _,f,p,d,v,h,y,m,g,b=o=$(r,null,"Inflections",o),w=b.$$proto,k=[b].concat(a);w.uncountables=w.plurals=w.singulars=w.humans=i,b.__instance__=s([],{}),function(t,$super,n){function r(){}var a,o,s,l,u=r=$(t,$super,"Uncountables",r),_=(u.$$proto,[u].concat(n));e.defn(u,"$<<",a=function(){var e,t=this,n=arguments.length,r=n-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<n;a++)e[a-0]=arguments[a];return t.$add(e)},a.$$arity=-1),e.defn(u,"$add",o=function(e){var t=this;return e=c(e.$flatten(),"map",[],"downcase".$to_proc()),t.$concat(e),t},o.$$arity=1),e.defn(u,"$uncountable?",s=function(e){return this["$include?"](e.$downcase())},s.$$arity=1),e.defn(u,"$dup",l=function(){var t=this,n=i;return(n=e.const_get_relative(_,"Uncountables").$new()).$add(t),n},l.$$arity=0)}(k[0],e.const_get_relative(k,"Array"),k),e.defs(b,"$instance",_=function(n){var r,a=this,o=i;return null==a.__instance__&&(a.__instance__=i),l(r=a.__instance__["$[]"](n))?r:(o=[n,a.$new()],c(a.__instance__,"[]=",e.to_a(o)),o[t(o.length,1)])},_.$$arity=1),b.$attr_reader("plurals","singulars","uncountables","humans"),e.defn(b,"$initialize",f=function(){var t,n=this;return t=[[],[],e.const_get_relative(k,"Uncountables").$new(),[]],n.plurals=t[0],n.singulars=t[1],n.uncountables=t[2],n.humans=t[3],t},f.$$arity=0),e.defn(b,"$initialize_dup",p=function(e){var t,n=this;return c(["plurals","singulars","uncountables","humans"],"each",[],((t=function(n){var r=t.$$s||this;return null==n&&(n=i),r.$instance_variable_set("@"+n,e.$send(n).$dup())}).$$s=n,t.$$arity=1,t))},p.$$arity=1),e.defn(b,"$plural",d=function(t,n){var r=this;return l(t["$is_a?"](e.const_get_relative(k,"String")))&&r.uncountables.$delete(t),r.uncountables.$delete(n),r.plurals.$unshift([t,n])},d.$$arity=2),e.defn(b,"$singular",v=function(t,n){var r=this;return l(t["$is_a?"](e.const_get_relative(k,"String")))&&r.uncountables.$delete(t),r.uncountables.$delete(n),r.singulars.$unshift([t,n])},v.$$arity=2),e.defn(b,"$uncountable",h=function(){var e,t=this,n=arguments.length,r=n-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<n;a++)e[a-0]=arguments[a];return t.uncountables.$add(e)},h.$$arity=-1),e.defn(b,"$human",y=function(e,t){return this.humans.$unshift([e,t])},y.$$arity=2),e.defn(b,"$irregular",m=function(e,t){var r=this,a=i,o=i,$=i,s=i;return r.uncountables.$delete(e),r.uncountables.$delete(t),a=e["$[]"](0),o=e["$[]"](u(1,-1,!1)),$=t["$[]"](0),s=t["$[]"](u(1,-1,!1)),a.$upcase()["$=="]($.$upcase())?(r.$plural(new RegExp("("+a+")"+o+"$","i"),n("\\1",s)),r.$plural(new RegExp("("+$+")"+s+"$","i"),n("\\1",s)),r.$singular(new RegExp("("+a+")"+o+"$","i"),n("\\1",o)),r.$singular(new RegExp("("+$+")"+s+"$","i"),n("\\1",o))):(r.$plural(new RegExp(""+a.$upcase()+o+"$","i"),n($.$upcase(),s)),r.$plural(new RegExp(""+a.$downcase()+o+"$","i"),n($.$downcase(),s)),r.$plural(new RegExp(""+$.$upcase()+s+"$","i"),n($.$upcase(),s)),r.$plural(new RegExp(""+$.$downcase()+s+"$","i"),n($.$downcase(),s)),r.$singular(new RegExp(""+a.$upcase()+o+"$","i"),n(a.$upcase(),o)),r.$singular(new RegExp(""+a.$downcase()+o+"$","i"),n(a.$downcase(),o)),r.$singular(new RegExp(""+$.$upcase()+s+"$","i"),n(a.$upcase(),o)),r.$singular(new RegExp(""+$.$downcase()+s+"$","i"),n(a.$downcase(),o)))},m.$$arity=2),e.defn(b,"$clear",g=function(t){var n,r=this,a=i;return null==t&&(t="all"),a=t,"all"["$==="](a)?(n=[[],[],e.const_get_relative(k,"Uncountables").$new(),[]],r.plurals=n[0],r.singulars=n[1],r.uncountables=n[2],r.humans=n[3],n):r.$instance_variable_set("@"+t,[])},g.$$arity=-1)}(p[0],0,p),e.defn(f,"$inflections",_=function(t){var n=_.$$p,r=n||i;return null==t&&(t="en"),n&&(_.$$p=null),r!==i?e.yield1(r,e.const_get_relative(p,"Inflections").$instance(t)):e.const_get_relative(p,"Inflections").$instance(t)},_.$$arity=-1)}(f[0],f)}(a[0],a)},Opal.modules["active_support/inflections"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.send;return e.add_stubs(["$require","$inflections","$plural","$singular","$irregular","$uncountable"]),t.$require("active_support/inflector/inflections"),function(t,n){var o,$=a(t,"ActiveSupport"),s=($.$$proto,[$].concat(n));i(e.const_get_relative(s,"Inflector"),"inflections",["en"],((o=function(e){o.$$s;return null==e&&(e=r),e.$plural(/$/,"s"),e.$plural(/s$/i,"s"),e.$plural(/^(ax|test)is$/i,"\\1es"),e.$plural(/(octop|vir)us$/i,"\\1i"),e.$plural(/(octop|vir)i$/i,"\\1i"),e.$plural(/(alias|status)$/i,"\\1es"),e.$plural(/(bu)s$/i,"\\1ses"),e.$plural(/(buffal|tomat)o$/i,"\\1oes"),e.$plural(/([ti])um$/i,"\\1a"),e.$plural(/([ti])a$/i,"\\1a"),e.$plural(/sis$/i,"ses"),e.$plural(/(?:([^f])fe|([lr])f)$/i,"\\1\\2ves"),e.$plural(/(hive)$/i,"\\1s"),e.$plural(/([^aeiouy]|qu)y$/i,"\\1ies"),e.$plural(/(x|ch|ss|sh)$/i,"\\1es"),e.$plural(/(matr|vert|ind)(?:ix|ex)$/i,"\\1ices"),e.$plural(/^(m|l)ouse$/i,"\\1ice"),e.$plural(/^(m|l)ice$/i,"\\1ice"),e.$plural(/^(ox)$/i,"\\1en"),e.$plural(/^(oxen)$/i,"\\1"),e.$plural(/(quiz)$/i,"\\1zes"),e.$singular(/s$/i,""),e.$singular(/(ss)$/i,"\\1"),e.$singular(/(n)ews$/i,"\\1ews"),e.$singular(/([ti])a$/i,"\\1um"),e.$singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"\\1sis"),e.$singular(/(^analy)(sis|ses)$/i,"\\1sis"),e.$singular(/([^f])ves$/i,"\\1fe"),e.$singular(/(hive)s$/i,"\\1"),e.$singular(/(tive)s$/i,"\\1"),e.$singular(/([lr])ves$/i,"\\1f"),e.$singular(/([^aeiouy]|qu)ies$/i,"\\1y"),e.$singular(/(s)eries$/i,"\\1eries"),e.$singular(/(m)ovies$/i,"\\1ovie"),e.$singular(/(x|ch|ss|sh)es$/i,"\\1"),e.$singular(/^(m|l)ice$/i,"\\1ouse"),e.$singular(/(bus)(es)?$/i,"\\1"),e.$singular(/(o)es$/i,"\\1"),e.$singular(/(shoe)s$/i,"\\1"),e.$singular(/(cris|test)(is|es)$/i,"\\1is"),e.$singular(/^(a)x[ie]s$/i,"\\1xis"),e.$singular(/(octop|vir)(us|i)$/i,"\\1us"),e.$singular(/(alias|status)(es)?$/i,"\\1"),e.$singular(/^(ox)en/i,"\\1"),e.$singular(/(vert|ind)ices$/i,"\\1ex"),e.$singular(/(matr)ices$/i,"\\1ix"),e.$singular(/(quiz)zes$/i,"\\1"),e.$singular(/(database)s$/i,"\\1"),e.$irregular("person","people"),e.$irregular("man","men"),e.$irregular("child","children"),e.$irregular("sex","sexes"),e.$irregular("move","moves"),e.$irregular("zombie","zombies"),e.$uncountable(["equipment","information","rice","money","species","series","fish","sheep","jeans","police"])}).$$s=$,o.$$arity=1,o))}(n[0],n)},Opal.modules["active_support/inflector/methods"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var r=e.top,a=[],i=e.nil,o=(e.breaker,e.slice,e.module),$=e.truthy,s=e.send,c=e.gvars,l=e.hash2,u=e.range;return e.add_stubs(["$require","$extend","$apply_inflections","$plurals","$inflections","$singulars","$to_s","$sub","$capitalize","$downcase","$gsub","$freeze","$match?","$tr","$dup","$each","$humans","$is_a?","$=~","$==","$upcase","$>","$length","$+","$[]","$humanize","$underscore","$pluralize","$camelize","$singularize","$rindex","$demodulize","$split","$empty?","$raise","$size","$first","$shift","$inject","$const_get","$const_defined?","$ancestors","$constantize","$name","$!","$include?","$const_regexp","$message","$abs","$to_i","$%","$===","$ordinal","$private","$blank?","$escape","$pop","$reverse","$uncountable?","$uncountables"]),r.$require("active_support/inflections"),function(r,a){var _=o(r,"ActiveSupport"),f=(_.$$proto,[_].concat(a));!function(r,a){var _,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N=o(r,"Inflector"),T=(N.$$proto,[N].concat(a));N.$extend(N),e.defn(N,"$pluralize",_=function(e,t){var n=this;return null==t&&(t="en"),n.$apply_inflections(e,n.$inflections(t).$plurals(),t)},_.$$arity=-2),e.defn(N,"$singularize",f=function(e,t){var n=this;return null==t&&(t="en"),n.$apply_inflections(e,n.$inflections(t).$singulars(),t)},f.$$arity=-2),e.defn(N,"$camelize",p=function(e,t){var n,r,a=this,o=i;return null==t&&(t=!0),o=e.$to_s(),o=$(t)?s(o,"sub",[/^[a-z\d]*/],((n=function(e){n.$$s;return null==e&&(e=i),e.$capitalize()}).$$s=a,n.$$arity=1,n)):o.$downcase(),o=(o=s(o,"gsub",[/(?:_|(\/))([a-z\d]*)/i],((r=function(){var e;r.$$s;return""+((e=c["~"])===i?i:e["$[]"](1))+((e=c["~"])===i?i:e["$[]"](2)).$capitalize()}).$$s=a,r.$$arity=0,r))).$gsub("/".$freeze(),"::".$freeze())},p.$$arity=-2),e.defn(N,"$underscore",d=function(e){return $(/[A-Z-]|::/["$match?"](e))?e.$to_s().$gsub("::".$freeze(),"/".$freeze()).$gsub(/([A-Z\d]+)([A-Z][a-z])/,"\\1_\\2".$freeze()).$gsub(/([a-z\d])([A-Z])/,"\\1_\\2".$freeze()).$tr("-".$freeze(),"_".$freeze()).$downcase():e},d.$$arity=1),e.defn(N,"$humanize",v=function(t,n){var r,a,o,c,u,_=this,f=i;if(null==n||!n.$$is_hash){if(null!=n)throw e.ArgumentError.$new("expected kwargs");n=l([],{})}return null==(c=n.$$smap.capitalize)&&(c=!0),null==(u=n.$$smap.keep_id_suffix)&&(u=!1),f=t.$to_s().$dup(),function(){var t=e.new_brk();try{s(_.$inflections().$humans(),"each",[],((r=function(n){var a,o,s,c,l;r.$$s;if(null==n&&(n=i),n=e.to_ary(n),null==(o=(a=e.slice.call(n,0,n.length)).splice(0,1)[0])&&(o=i),null==(s=a.splice(0,1)[0])&&(s=i),!$($(c=$(l=o["$is_a?"](e.const_get_relative(T,"Regexp")))?f["$=~"](o):l)?c:$(l=o["$is_a?"](e.const_get_relative(T,"String")))?f["$=="](o):l))return i;f=f.$sub(o,s),e.brk(i,t)}).$$s=_,r.$$brk=t,r.$$arity=1,r.$$has_top_level_mlhs_arg=!0,r))}catch(n){if(n===t)return n.$v;throw n}}(),f=f.$sub(/^_+/,"".$freeze()),$(u)||(f=f.$sub(/_id$/,"".$freeze())),f=f.$tr("_".$freeze()," ".$freeze()),f=s(f,"gsub",[/([a-z\d]*)/i],((a=function(e){a.$$s;return null==e&&(e=i),""+e.$downcase()}).$$s=_,a.$$arity=1,a)),$(c)&&(f=s(f,"sub",[/^\w/],((o=function(e){o.$$s;return null==e&&(e=i),e.$upcase()}).$$s=_,o.$$arity=1,o))),f},v.$$arity=-2),e.defn(N,"$upcase_first",h=function(e){return $(t(e.$length(),0))?n(e["$[]"](0).$upcase(),e["$[]"](u(1,-1,!1))):""},h.$$arity=1),e.defn(N,"$titleize",y=function(t,n){var r,a,o=this;if(null==n||!n.$$is_hash){if(null!=n)throw e.ArgumentError.$new("expected kwargs");n=l([],{})}return null==(a=n.$$smap.keep_id_suffix)&&(a=!1),s(o.$humanize(o.$underscore(t),l(["keep_id_suffix"],{keep_id_suffix:a})),"gsub",[/([a-zA-Z'\u2019`])[a-z]*/],((r=function(e){r.$$s;return null==e&&(e=i),e.$capitalize()}).$$s=o,r.$$arity=1,r))},y.$$arity=-2),e.defn(N,"$tableize",m=function(e){var t=this;return t.$pluralize(t.$underscore(e))},m.$$arity=1),e.defn(N,"$classify",g=function(e){var t=this;return t.$camelize(t.$singularize(e.$to_s().$sub(/.*\./,"".$freeze())))},g.$$arity=1),e.defn(N,"$dasherize",b=function(e){return e.$tr("_".$freeze(),"-".$freeze())},b.$$arity=1),e.defn(N,"$demodulize",w=function(t){var r=i;return t=t.$to_s(),$(r=t.$rindex("::"))?t["$[]"](e.Range.$new(n(r,2),-1,!1)):t},w.$$arity=1),e.defn(N,"$deconstantize",k=function(e){var t;return e.$to_s()["$[]"](0,$(t=e.$rindex("::"))?t:0)},k.$$arity=1),e.defn(N,"$foreign_key",O=function(e,t){var r=this;return null==t&&(t=!0),n(r.$underscore(r.$demodulize(e)),$(t)?"_id":"id")},O.$$arity=-2),e.defn(N,"$constantize",q=function(n){var r,a,o=this,c=i;return c=n.$split("::"),$(c["$empty?"]())&&o.$raise(e.const_get_relative(T,"NameError"),"wrong constant name "),$($(r=t(c.$size(),1))?c.$first()["$empty?"]():r)&&c.$shift(),function(){var t=e.new_brk();try{return s(c,"inject",[e.const_get_relative(T,"Object")],((a=function(t,n){var r,o=a.$$s||this,c=i;return null==t&&(t=i),null==n&&(n=i),t["$=="](e.const_get_relative(T,"Object"))?t.$const_get(n):(c=t.$const_get(n),$(t["$const_defined?"](n,!1))?c:$(e.const_get_relative(T,"Object")["$const_defined?"](n))?(t=function(){var a=e.new_brk();try{return s(t.$ancestors(),"inject",[t],((r=function(t,o){r.$$s;return null==t&&(t=i),null==o&&(o=i),
o["$=="](e.const_get_relative(T,"Object"))&&e.brk(t,a),$(o["$const_defined?"](n,!1))&&e.brk(o,a),t}).$$s=o,r.$$brk=a,r.$$arity=2,r))}catch(c){if(c===a)return c.$v;throw c}}()).$const_get(n,!1):c)}).$$s=o,a.$$brk=t,a.$$arity=2,a))}catch(n){if(n===t)return n.$v;throw n}}()},q.$$arity=1),e.defn(N,"$safe_constantize",E=function(t){var n,r,a=this,o=i;try{return a.$constantize(t)}catch(s){if(e.rescue(s,[e.const_get_relative(T,"NameError")])){o=s;try{return $($(n=o.$name())?($(r=t.$to_s().$split("::")["$include?"](o.$name().$to_s()))?r:o.$name().$to_s()["$=="](t.$to_s()))["$!"]():n)?a.$raise():i}finally{e.pop_exception()}}else{if(!e.rescue(s,[e.const_get_relative(T,"ArgumentError")]))throw s;o=s;try{return $(new RegExp("not missing constant "+a.$const_regexp(t)+"!$")["$match?"](o.$message()))?i:a.$raise()}finally{e.pop_exception()}}}},E.$$arity=1),e.defn(N,"$ordinal",x=function(e){var t=i,n=i;return t=e.$to_i().$abs(),$(u(11,13,!1)["$include?"](t["$%"](100)))?"th":(n=t["$%"](10),1["$==="](n)?"st":2["$==="](n)?"nd":3["$==="](n)?"rd":"th")},x.$$arity=1),e.defn(N,"$ordinalize",A=function(e){return""+e+this.$ordinal(e)},A.$$arity=1),N.$private(),e.defn(N,"$const_regexp",S=function(t){var n,r=this,a=i,o=i;return a=t.$split("::".$freeze()),$(a["$blank?"]())?e.const_get_relative(T,"Regexp").$escape(t):(o=a.$pop(),s(a.$reverse(),"inject",[o],((n=function(e,t){n.$$s;return null==e&&(e=i),null==t&&(t=i),$(t["$empty?"]())?e:t+"(::"+e+")?"}).$$s=r,n.$$arity=2,n)))},S.$$arity=1),e.defn(N,"$apply_inflections",M=function(t,n,r){var a,o,c=this,l=i;return null==r&&(r="en"),l=t.$to_s().$dup(),$($(a=t["$empty?"]())?a:c.$inflections(r).$uncountables()["$uncountable?"](l))?l:(function(){var t=e.new_brk();try{s(n,"each",[],((o=function(n){var r,a,s,c,u;o.$$s;if(null==n&&(n=i),n=e.to_ary(n),null==(a=(r=e.slice.call(n,0,n.length)).splice(0,1)[0])&&(a=i),null==(s=r.splice(0,1)[0])&&(s=i),!$($(c=$(u=a["$is_a?"](e.const_get_relative(T,"Regexp")))?l["$=~"](a):u)?c:$(u=a["$is_a?"](e.const_get_relative(T,"String")))?l["$=="](a):u))return i;l=l.$sub(a,s),e.brk(i,t)}).$$s=c,o.$$brk=t,o.$$arity=1,o.$$has_top_level_mlhs_arg=!0,o))}catch(r){if(r===t)return r.$v;throw r}}(),l)},M.$$arity=-3)}(f[0],f)}(a[0],a)},Opal.modules["active_support/core_ext/string/inflections"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.truthy,o=e.hash2;return e.add_stubs(["$require","$is_a?","$==","$dup","$pluralize","$singularize","$constantize","$safe_constantize","$===","$camelize","$raise","$alias_method","$titleize","$underscore","$dasherize","$demodulize","$deconstantize","$tableize","$classify","$humanize","$upcase_first","$foreign_key"]),t.$require("active_support/inflector"),function(t,$super,n){function $(){}var s,c,l,u,_,f,p,d,v,h,y,m,g,b,w,k=$=a(t,null,"String",$),O=(k.$$proto,[k].concat(n));return e.defn(k,"$pluralize",s=function(t,n){var a=this;return null==t&&(t=r),null==n&&(n="en"),i(t["$is_a?"](e.const_get_relative(O,"Symbol")))&&(n=t),t["$=="](1)?a.$dup():e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$pluralize(a,n)},s.$$arity=-1),e.defn(k,"$singularize",c=function(t){var n=this;return null==t&&(t="en"),e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$singularize(n,t)},c.$$arity=-1),e.defn(k,"$constantize",l=function(){var t=this;return e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$constantize(t)},l.$$arity=0),e.defn(k,"$safe_constantize",u=function(){var t=this;return e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$safe_constantize(t)},u.$$arity=0),e.defn(k,"$camelize",_=function(t){var n=this,a=r;return null==t&&(t="upper"),a=t,"upper"["$==="](a)?e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$camelize(n,!0):"lower"["$==="](a)?e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$camelize(n,!1):n.$raise(e.const_get_relative(O,"ArgumentError"),"Invalid option, use either :upper or :lower.")},_.$$arity=-1),k.$alias_method("camelcase","camelize"),e.defn(k,"$titleize",f=function(t){var n,r=this;if(null==t||!t.$$is_hash){if(null!=t)throw e.ArgumentError.$new("expected kwargs");t=o([],{})}return null==(n=t.$$smap.keep_id_suffix)&&(n=!1),e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$titleize(r,o(["keep_id_suffix"],{keep_id_suffix:n}))},f.$$arity=-1),k.$alias_method("titlecase","titleize"),e.defn(k,"$underscore",p=function(){var t=this;return e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$underscore(t)},p.$$arity=0),e.defn(k,"$dasherize",d=function(){var t=this;return e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$dasherize(t)},d.$$arity=0),e.defn(k,"$demodulize",v=function(){var t=this;return e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$demodulize(t)},v.$$arity=0),e.defn(k,"$deconstantize",h=function(){var t=this;return e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$deconstantize(t)},h.$$arity=0),e.defn(k,"$tableize",y=function(){var t=this;return e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$tableize(t)},y.$$arity=0),e.defn(k,"$classify",m=function(){var t=this;return e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$classify(t)},m.$$arity=0),e.defn(k,"$humanize",g=function(t){var n,r,a=this;if(null==t||!t.$$is_hash){if(null!=t)throw e.ArgumentError.$new("expected kwargs");t=o([],{})}return null==(n=t.$$smap.capitalize)&&(n=!0),null==(r=t.$$smap.keep_id_suffix)&&(r=!1),e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$humanize(a,o(["capitalize","keep_id_suffix"],{capitalize:n,keep_id_suffix:r}))},g.$$arity=-1),e.defn(k,"$upcase_first",b=function(){var t=this;return e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$upcase_first(t)},b.$$arity=0),e.defn(k,"$foreign_key",w=function(t){var n=this;return null==t&&(t=!0),e.const_get_qualified(e.const_get_relative(O,"ActiveSupport"),"Inflector").$foreign_key(n,t)},w.$$arity=-1),r&&"foreign_key"}(n[0],0,n)},Opal.modules["active_support/inflector"]=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("active_support/inflector/inflections"),t.$require("active_support/inflector/methods"),t.$require("active_support/inflections"),t.$require("active_support/core_ext/string/inflections")},Opal.modules["active_support/core_ext/module/introspection"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}var n=e.top,r=[],a=e.nil,i=(e.breaker,e.slice,e.klass),o=e.truthy,$=e.gvars;return e.add_stubs(["$require","$=~","$name","$freeze","$parent_name","$constantize","$split","$empty?","$<<","$*","$pop","$include?","$constants"]),n.$require("active_support/inflector"),function(n,$super,r){function s(){}var c,l,u,_,f=s=i(n,null,"Module",s),p=f.$$proto,d=[f].concat(r);return p.parent_name=a,e.defn(f,"$parent_name",c=function(){var e,t,n=this;return o(null!=(e=n.parent_name)&&e!==a?"instance-variable":a)?n.parent_name:n.parent_name=o(n.$name()["$=~"](/::[^:]+$/))?((t=$["~"])===a?a:t.$pre_match()).$freeze():a},c.$$arity=0),e.defn(f,"$parent",l=function(){var t=this;return o(t.$parent_name())?e.const_get_qualified(e.const_get_relative(d,"ActiveSupport"),"Inflector").$constantize(t.$parent_name()):e.const_get_relative(d,"Object")},l.$$arity=0),e.defn(f,"$parents",u=function(){var n=this,r=a,i=a;if(r=[],o(n.$parent_name()))for(i=n.$parent_name().$split("::");!o(i["$empty?"]());)r["$<<"](e.const_get_qualified(e.const_get_relative(d,"ActiveSupport"),"Inflector").$constantize(t(i,"::"))),i.$pop();return o(r["$include?"](e.const_get_relative(d,"Object")))||r["$<<"](e.const_get_relative(d,"Object")),r},u.$$arity=0),e.defn(f,"$local_constants",_=function(){return this.$constants(!1)},_.$$arity=0),a&&"local_constants"}(r[0],0,r)},Opal.modules["active_support/core_ext/module/delegation"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.truthy,o=e.send,$=e.range;return e.add_stubs(["$pop","$is_a?","$[]","$raise","$values_at","$==","$=~","$to_s","$each","$+","$lambda","$start_with?","$__send__","$new","$inspect","$define_method","$to_proc"]),function(n,$super,s){function c(){}var l,u=c=a(n,null,"Module",c),_=(u.$$proto,[u].concat(s));return function(e,$super,t){function n(){}var r=n=a(e,$super,"DelegationError",n);r.$$proto,[r].concat(t)}(_[0],e.const_get_relative(_,"NoMethodError"),_),e.defn(u,"$delegate",l=function(){var n,a,s,c,l=this,u=r,f=r,p=r,d=r,v=r,h=arguments.length,y=h-0;y<0&&(y=0),c=new Array(y);for(var m=0;m<h;m++)c[m-0]=arguments[m];return u=c.$pop(),i(i(n=u["$is_a?"](e.const_get_relative(_,"Hash")))?f=u["$[]"]("to"):n)||l.$raise(e.const_get_relative(_,"ArgumentError"),"Delegation needs a target. Supply an options hash with a :to key as the last argument (e.g. delegate :hello, to: :greeter)."),a=u.$values_at("prefix","allow_nil"),n=e.to_ary(a),p=null==n[0]?r:n[0],d=null==n[1]?r:n[1],i((n=p["$=="](!0))?f["$=~"](/^[^a-z_]/):p["$=="](!0))&&l.$raise(e.const_get_relative(_,"ArgumentError"),"Can only automatically set the delegation prefix when delegating to a method."),v=i(p)?(p["$=="](!0)?f:p)+"_":"",f=f.$to_s(),o(c,"each",[],((s=function(n){var a,c,l,u,p=s.$$s||this,h=r,y=r,m=r,g=r;return null==n&&(n=r),h=!i(n["$=~"](/[^\]]=$/)),y=t(v,n),m=o(p,"lambda",[],((a=function(e){a.$$s;return null==e&&(e=r),i(f["$start_with?"]("@"))?e[f["$[]"]($(1,-1,!1))]:e.$__send__(f)}).$$s=p,a.$$arity=1,a)),g=o(p,"lambda",[],((c=function(t){c.$$s;return null==t&&(t=r),e.const_get_relative(_,"DelegationError").$new(""+t+y+" delegated to "+f+"."+n+" but "+f+" is nil: "+t.$inspect(),y)}).$$s=p,c.$$arity=1,c)),i(h)?o(p,"define_method",[y],((l=function(){var t,a,$=l.$$s||this,s=r;(t=l.$$p||r)&&(l.$$p=null);var c=arguments.length,u=c-0;u<0&&(u=0),a=new Array(u);for(var _=0;_<c;_++)a[_-0]=arguments[_];if(s=m["$[]"]($),i(s));else{if(i(d))return r;$.$raise(g["$[]"]($))}return o(s,"__send__",[n].concat(e.to_a(a)),t.$to_proc())}).$$s=p,l.$$arity=-1,l)):o(p,"define_method",[y],((u=function(e){var t=u.$$s||this,a=r;if(null==e&&(e=r),a=m["$[]"](t),i(a));else{if(i(d))return r;t.$raise(g["$[]"](t))}return a.$__send__(n,e)}).$$s=p,u.$$arity=1,u))}).$$s=l,s.$$arity=1,s))},l.$$arity=-1),r&&"delegate"}(n[0],0,n)},Opal.modules["active_support/core_ext/module"]=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/module/introspection"),t.$require("active_support/core_ext/module/remove_method"),t.$require("active_support/core_ext/module/delegation")},Opal.modules["active_support/core_ext/numeric/calculations"]=function(e){e.top;var t=[];e.nil,e.breaker,e.slice;return function(t,n){t.$$proto,[t].concat(n);return e.alias(t,"current","now")}(e.get_singleton_class(e.const_get_relative(t,"Time")),t)},Opal.modules["active_support/core_ext/numeric"]=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/numeric/time"),t.$require("active_support/core_ext/numeric/calculations")},Opal.modules["active_support/core_ext/object/blank"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.truthy;return e.add_stubs(["$respond_to?","$empty?","$!","$blank?","$present?","$==","$alias_method","$!~"]),function(t,$super,i){function o(){}var $,s,c,l=o=r(t,null,"Object",o);l.$$proto,[l].concat(i);e.defn(l,"$blank?",$=function(){var e=this;return a(e["$respond_to?"]("empty?"))?e["$empty?"]():e["$!"]()},$.$$arity=0),e.defn(l,"$present?",s=function(){return this["$blank?"]()["$!"]()},s.$$arity=0),e.defn(l,"$presence",c=function(){var e=this;return a(e["$present?"]())?e:n},c.$$arity=0)}(t[0],0,t),function(t,$super,n){function a(){}var i,o=a=r(t,null,"NilClass",a);o.$$proto,[o].concat(n);e.defn(o,"$blank?",i=function(){return!0},i.$$arity=0)}(t[0],0,t),function(t,$super,n){function a(){}var i,o=a=r(t,null,"Boolean",a);o.$$proto,[o].concat(n);e.defn(o,"$blank?",i=function(){return this["$=="](!1)},i.$$arity=0)}(t[0],0,t),function(e,$super,t){function n(){}var a=n=r(e,null,"Array",n);a.$$proto,[a].concat(t);a.$alias_method("blank?","empty?")}(t[0],0,t),function(e,$super,t){function n(){}var a=n=r(e,null,"Hash",n);a.$$proto,[a].concat(t);a.$alias_method("blank?","empty?")}(t[0],0,t),function(t,$super,n){function a(){}var i,o=a=r(t,null,"String",a);o.$$proto,[o].concat(n);e.defn(o,"$blank?",i=function(){return this["$!~"](/[^\s\u3000]/)},i.$$arity=0)}(t[0],0,t),function(t,$super,a){function i(){}var o,$=i=r(t,null,"Numeric",i);$.$$proto,[$].concat(a);return e.defn($,"$blank?",o=function(){return!1},o.$$arity=0),n&&"blank?"}(t[0],0,t)},Opal.modules["active_support/core_ext/object/try"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.truthy,i=e.send;return e.add_stubs(["$empty?","$respond_to?","$first","$try!","$to_proc","$zero?","$arity","$instance_eval","$public_send"]),function(t,$super,o){function $(){}var s,c,l=$=r(t,null,"Object",$);l.$$proto,[l].concat(o);e.defn(l,"$try",s=function(){var t,r,o=this,$=s.$$p,c=$||n,l=arguments.length,u=l-0;u<0&&(u=0),r=new Array(u);for(var _=0;_<l;_++)r[_-0]=arguments[_];return $&&(s.$$p=null),a(a(t=r["$empty?"]())?t:o["$respond_to?"](r.$first()))?i(o,"try!",e.to_a(r),c.$to_proc()):n},s.$$arity=-1),e.defn(l,"$try!",c=function(){var t,r,o=this,$=c.$$p,s=$||n,l=arguments.length,u=l-0;u<0&&(u=0),r=new Array(u);for(var _=0;_<l;_++)r[_-0]=arguments[_];return $&&(c.$$p=null),a(a(t=r["$empty?"]())?s!==n:t)?a(s.$arity()["$zero?"]())?i(o,"instance_eval",[],s.$to_proc()):e.yield1(s,o):i(o,"public_send",e.to_a(r),s.$to_proc())},c.$$arity=-1)}(t[0],0,t),function(t,$super,a){function i(){}var o,$,s=i=r(t,null,"NilClass",i);s.$$proto,[s].concat(a);return e.defn(s,"$try",o=function(){var e,t=arguments.length,r=t-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<t;a++)e[a-0]=arguments[a];return n},o.$$arity=-1),e.defn(s,"$try!",$=function(){var e,t=arguments.length,r=t-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<t;a++)e[a-0]=arguments[a];return n},$.$$arity=-1),n&&"try!"}(t[0],0,t)},Opal.modules["active_support/core_ext/object"]=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/object/blank"),t.$require("active_support/core_ext/object/try")},Opal.modules["active_support/core_ext/string/filters"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.klass),o=e.truthy,$=e.hash2;return e.add_stubs(["$>","$length","$dup","$[]","$-","$rindex"]),function(r,$super,s){function c(){}var l,u=c=i(r,null,"String",c);u.$$proto,[u].concat(s);return e.defn(u,"$truncate",l=function(e,r){var i,s=this,c=a,l=a,u=a;return null==r&&(r=$([],{})),o(t(s.$length(),e))?(c=o(i=r["$[]"]("omission"))?i:"...",l=n(e,c.$length()),u=o(r["$[]"]("separator"))&&o(i=s.$rindex(r["$[]"]("separator"),l))?i:l,""+s["$[]"](0,u)+c):s.$dup()},l.$$arity=-2),a&&"truncate"}(r[0],0,r)},Opal.modules["active_support/core_ext/string"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$gsub","$strip","$downcase"]),t.$require("active_support/core_ext/string/filters"),t.$require("active_support/core_ext/string/inflections"),function(t,$super,n){function i(){}var o,$=i=a(t,null,"String",i);$.$$proto,[$].concat(n);return e.defn($,"$parameterize",o=function(){return this.$downcase().$strip().$gsub(/\W+/,"-")},o.$$arity=0),r&&"parameterize"}(n[0],0,n)},Opal.modules["active_support/core_ext"]=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/array"),t.$require("active_support/core_ext/class"),t.$require("active_support/core_ext/enumerable"),t.$require("active_support/core_ext/hash"),t.$require("active_support/core_ext/integer"),t.$require("active_support/core_ext/kernel"),t.$require("active_support/core_ext/module"),t.$require("active_support/core_ext/numeric"),t.$require("active_support/core_ext/object"),t.$require("active_support/core_ext/string")},Opal.modules.active_support=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("active_support/core_ext")},Opal.modules.time=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$strftime"]),function(t,$super,a){function i(){}var o,$,s=i=r(t,null,"Time",i);s.$$proto,[s].concat(a);return e.defs(s,"$parse",o=function(e){return new Date(Date.parse(e))},o.$$arity=1),e.defn(s,"$iso8601",$=function(){return this.$strftime("%FT%T%z")},$.$$arity=0),n&&"iso8601"}(t[0],0,t)},Opal.modules.date=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.top;var o=[],$=e.nil,s=(e.breaker,e.slice,e.klass),c=e.send,l=e.truthy;return e.add_stubs(["$include","$<=>","$nonzero?","$d","$zero?","$new","$class","$-@","$+@","$===","$coerce","$==","$>","$+","$allocate","$join","$compact","$map","$to_proc","$downcase","$wrap","$raise","$clone","$jd","$>>","$wday","$-","$to_s","$alias_method","$to_i","$<","$*","$reverse","$step","$abs","$each"]),function(o,$super,u){function _(){}function f(e,t){return[31,e%4==0&&e%100!=0||e%400==0?29:28,31,30,31,30,31,31,30,31,30,31][t]}var p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C,I,D,H,z,P,R,j,B,L,U,F,W,Y,G,K,X,V=_=s(o,null,"Date",_),J=V.$$proto,Z=[V].concat(u);J.date=$,V.$include(e.const_get_relative(Z,"Comparable")),function(n,$super,r){function a(){}var i,o,u,_,f,p,d,v,h,y,m,g,b=a=s(n,$super,"Infinity",a),w=b.$$proto,k=[b].concat(r);w.d=$,b.$include(e.const_get_relative(k,"Comparable")),e.defn(b,"$initialize",i=function(e){return null==e&&(e=1),this.d=e["$<=>"](0)},i.$$arity=-1),e.defn(b,"$d",o=function(){return this.d},o.$$arity=0),e.defn(b,"$zero?",u=function(){return!1},u.$$arity=0),e.defn(b,"$finite?",_=function(){return!1},_.$$arity=0),e.defn(b,"$infinite?",f=function(){return this.$d()["$nonzero?"]()},f.$$arity=0),e.defn(b,"$nan?",p=function(){return this.$d()["$zero?"]()},p.$$arity=0),e.defn(b,"$abs",d=function(){return this.$class().$new()},d.$$arity=0),e.defn(b,"$-@",v=function(){var e=this;return e.$class().$new(e.$d()["$-@"]())},v.$$arity=0),e.defn(b,"$+@",h=function(){var e=this;return e.$class().$new(e.$d()["$+@"]())},h.$$arity=0),e.defn(b,"$<=>",y=function(t){var n,r,a=this,i=$,o=$,s=$;if(i=t,e.const_get_relative(k,"Infinity")["$==="](i))return a.$d()["$<=>"](t.$d());if(e.const_get_relative(k,"Numeric")["$==="](i))return a.$d();try{return r=t.$coerce(a),o=null==(n=e.to_ary(r))[0]?$:n[0],s=null==n[1]?$:n[1],o["$<=>"](s)}catch(c){if(!e.rescue(c,[e.const_get_relative(k,"NoMethodError")]))throw c;e.pop_exception()}return $},y.$$arity=1),e.defn(b,"$coerce",m=function(t){var n=this,r=m.$$p,a=$,i=$,o=$,s=$;for(r&&(m.$$p=null),o=0,s=arguments.length,i=new Array(s);o<s;o++)i[o]=arguments[o];return a=t,e.const_get_relative(k,"Numeric")["$==="](a)?[n.$d()["$-@"](),n.$d()]:c(n,e.find_super_dispatcher(n,"coerce",m,!1),i,r)},m.$$arity=1),e.defn(b,"$to_f",g=function(){var n=this;return n.d["$=="](0)?0:l(t(n.d,0))?e.const_get_qualified(e.const_get_relative(k,"Float"),"INFINITY"):e.const_get_qualified(e.const_get_relative(k,"Float"),"INFINITY")["$-@"]()},g.$$arity=0)}(Z[0],e.const_get_relative(Z,"Numeric"),Z),e.const_set(Z[0],"JULIAN",e.const_get_relative(Z,"Infinity").$new()),e.const_set(Z[0],"GREGORIAN",e.const_get_relative(Z,"Infinity").$new()["$-@"]()),e.const_set(Z[0],"ITALY",2299161),e.const_set(Z[0],"ENGLAND",2361222),e.const_set(Z[0],"MONTHNAMES",n([$],["January","February","March","April","May","June","July","August","September","October","November","December"])),e.const_set(Z[0],"ABBR_MONTHNAMES",["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]),e.const_set(Z[0],"DAYNAMES",["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),e.const_set(Z[0],"ABBR_DAYNAMES",["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),function(t,n){t.$$proto;var r,a,i,o,s=[t].concat(n);e.alias(t,"civil","new"),e.defn(t,"$wrap",r=function(e){var t=$;return(t=this.$allocate()).date=e,t},r.$$arity=1),e.defn(t,"$parse",a=function(t,n){function r(e){return e[1]}function a(e){return e[2]}function i(e){return e[3]}function o(e){return e[4]}function $(e){return function(t){var n=e(t);return n+=n>=69?1900:2e3}}function l(t){return function(n){var r=t(n).toLowerCase();return e.const_get_relative(s,"ABBR_MONTHNAMES").indexOf(r)+1}}function u(e){return function(t){var n=e(t);return parseInt(n,10)}}function _(e){return function(t){var r=e(t);return n?r+2e3:r}}function f(t){return function(n){var r=t(n),a=c(e.const_get_relative(s,"DAYNAMES"),"map",[],"downcase".$to_proc()).indexOf(r.$downcase());return g-k+a}}function p(t){return function(n){var r=t(n);return c(e.const_get_relative(s,"MONTHNAMES").$compact(),"map",[],"downcase".$to_proc()).indexOf(r.$downcase())+1}}var d=this;null==n&&(n=!0);var v,h,y,m=new Date,g=m.getDate(),b=m.getMonth(),w=m.getFullYear(),k=m.getDay(),O=e.const_get_relative(s,"MONTHNAMES").$compact().$join("|"),q=[{regexp:/^(\d{2})$/,year:w,month:b,day:u(r)},{regexp:/^(\d{3})$/,year:w,month:0,day:u(r)},{regexp:/^(\d{2})(\d{2})$/,year:w,month:u(r),day:u(a)},{regexp:/^(\d{2})(\d{3})$/,year:$(u(r)),month:0,day:u(a)},{regexp:/^(\d{2})(\d{2})(\d{2})$/,year:$(u(r)),month:u(a),day:u(i)},{regexp:/^(\d{4})(\d{3})$/,year:u(r),month:0,day:u(a)},{regexp:/^(\d{4})(\d{2})(\d{2})$/,year:u(r),month:u(a),day:u(i)},{regexp:/^([a-z]{3})[\s\.\/\-](\d{3,4})$/,year:u(a),month:l(r),day:1},{regexp:/^(\d{1,2})[\s\.\/\-]([a-z]{3})[\s\.\/\-](\d{3,4})$/i,year:u(i),month:l(a),day:u(r)},{regexp:/^([a-z]{3})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{3,4})$/i,year:u(i),month:l(r),day:u(a)},{regexp:/^(\d{3,4})[\s\.\/\-]([a-z]{3})[\s\.\/\-](\d{1,2})$/i,year:u(r),month:l(a),day:u(i)},{regexp:/^(\-?\d{3,4})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{1,2})$/,year:u(r),month:u(a),day:u(i)},{regexp:/^(\d{2})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{1,2})$/,year:_(u(r)),month:u(a),day:u(i)},{regexp:/^(\d{1,2})[\s\.\/\-](\d{1,2})[\s\.\/\-](\-?\d{3,4})$/,year:u(i),month:u(a),day:u(r)},{regexp:new RegExp("^("+e.const_get_relative(s,"DAYNAMES").$join("|")+")$","i"),year:w,month:b,day:f(r)},{regexp:new RegExp("^("+O+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)[\\s\\.\\/\\-](\\-?\\d{3,4})$","i"),year:u(o),month:p(r),day:u(a)},{regexp:new RegExp("^("+O+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)","i"),year:w,month:p(r),day:u(a)},{regexp:new RegExp("^(\\d{1,2})(th|nd|rd)[\\s\\.\\/\\-]("+O+")[\\s\\.\\/\\-](\\-?\\d{3,4})$","i"),year:u(o),month:p(i),day:u(r)},{regexp:new RegExp("^(\\-?\\d{3,4})[\\s\\.\\/\\-]("+O+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)$","i"),year:u(r),month:p(a),day:u(i)}];for(h=0;h<q.length;h++)if(y=(v=q[h]).regexp.exec(t)){var E=v.year;"function"==typeof E&&(E=E(y));var x=v.month;"function"==typeof x&&(x=x(y)-1);var A=v.day;"function"==typeof A&&(A=A(y));var S=new Date(E,x,A);return E>=0&&E<=1970&&S.setFullYear(E),d.$wrap(S)}return d.$raise(e.const_get_relative(s,"ArgumentError"),"invalid date")},a.$$arity=-2),e.defn(t,"$today",i=function(){return this.$wrap(new Date)},i.$$arity=0),e.defn(t,"$gregorian_leap?",o=function(e){return new Date(e,1,29).getMonth()-1==0},o.$$arity=1)}(e.get_singleton_class(V),Z),e.defn(V,"$initialize",p=function(t,n,r,a){var i=this;return null==t&&(t=-4712),null==n&&(n=1),null==r&&(r=1),null==a&&(a=e.const_get_relative(Z,"ITALY")),i.date=new Date(t,n-1,r)},p.$$arity=-1),e.defn(V,"$-",d=function(t){var n=this;if(t.$$is_number){var r=n.$clone();return r.date.setDate(n.date.getDate()-t),r}if(t.date)return Math.round((n.date-t.date)/864e5);n.$raise(e.const_get_relative(Z,"TypeError"))},d.$$arity=1),e.defn(V,"$+",v=function(t){var n=this;if(t.$$is_number){var r=n.$clone();return r.date.setDate(n.date.getDate()+t),r}n.$raise(e.const_get_relative(Z,"TypeError"))},v.$$arity=1),e.defn(V,"$<",h=function(e){var t=this.date,n=e.date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t<n},h.$$arity=1),e.defn(V,"$<=",y=function(e){var t=this.date,n=e.date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t<=n},y.$$arity=1),e.defn(V,"$>",m=function(e){var t=this.date,n=e.date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t>n},m.$$arity=1),e.defn(V,"$>=",g=function(e){var t=this.date,n=e.date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t>=n},g.$$arity=1),e.defn(V,"$<=>",b=function(t){var n=this;if(t.$$is_number)return n.$jd()["$<=>"](t);if(e.const_get_relative(Z,"Date")["$==="](t)){var r=n.date,a=t.date;return r.setHours(0,0,0,0),a.setHours(0,0,0,0),r<a?-1:r>a?1:0}return $},b.$$arity=1),e.defn(V,"$>>",w=function(t){var n=this;t.$$is_number||n.$raise(e.const_get_relative(Z,"TypeError"));var r=n.$clone(),a=r.date,i=a.getDate();return a.setDate(1),a.setMonth(a.getMonth()+t),a.setDate(Math.min(i,f(a.getFullYear(),a.getMonth()))),r},w.$$arity=1),e.defn(V,"$<<",k=function(t){var n=this;return t.$$is_number||n.$raise(e.const_get_relative(Z,"TypeError")),n["$>>"](-t)},k.$$arity=1),e.alias(V,"eql?","=="),e.defn(V,"$clone",O=function(){var t=this;return e.const_get_relative(Z,"Date").$wrap(new Date(t.date.getTime()))},O.$$arity=0),e.defn(V,"$day",q=function(){return this.date.getDate()},q.$$arity=0),e.defn(V,"$friday?",E=function(){return this.$wday()["$=="](5)},E.$$arity=0),e.defn(V,"$jd",x=function(){var e,t,n,r,a,i=this,o=i.date.getMonth()+1,$=i.date.getDate(),s=i.date.getFullYear(),c=12;return c=c+0/60+0/3600,e=1,s<=1585&&(e=0),a=-1*Math.floor(7*(Math.floor((o+9)/12)+s)/4),t=1,o-9<0&&(t=-1),n=Math.abs(o-9),r=Math.floor(s+t*Math.floor(n/7)),r=-1*Math.floor(3*(Math.floor(r/100)+1)/4),a=(a=a+Math.floor(275*o/9)+$+e*r)+1721027+2*e+367*s-.5,a+=c/24},x.$$arity=0),e.defn(V,"$julian?",A=function(){return this.date<new Date(1582,9,15,12)},A.$$arity=0),e.defn(V,"$monday?",S=function(){return this.$wday()["$=="](1)},S.$$arity=0),e.defn(V,"$month",M=function(){return this.date.getMonth()+1},M.$$arity=0),e.defn(V,"$next",N=function(){return n(this,1)},N.$$arity=0),e.defn(V,"$next_day",T=function(e){return null==e&&(e=1),n(this,e)},T.$$arity=-1),e.defn(V,"$next_month",C=function(){var e=this.$clone(),t=e.date,n=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(Math.min(n,f(t.getFullYear(),t.getMonth()))),e},C.$$arity=0),e.defn(V,"$prev_day",I=function(e){return null==e&&(e=1),r(this,e)},I.$$arity=-1),e.defn(V,"$prev_month",D=function(){var e=this.$clone(),t=e.date,n=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()-1),t.setDate(Math.min(n,f(t.getFullYear(),t.getMonth()))),e},D.$$arity=0),e.defn(V,"$saturday?",H=function(){return this.$wday()["$=="](6)},H.$$arity=0),e.defn(V,"$strftime",z=function(e){var t=this;return null==e&&(e=""),""==e?t.$to_s():t.date.$strftime(e)},z.$$arity=-1),V.$alias_method("succ","next"),e.defn(V,"$sunday?",P=function(){return this.$wday()["$=="](0)},P.$$arity=0),e.defn(V,"$thursday?",R=function(){return this.$wday()["$=="](4)},R.$$arity=0),e.defn(V,"$to_s",j=function(){var e=this.date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return n<10&&(n="0"+n),r<10&&(r="0"+r),t+"-"+n+"-"+r},j.$$arity=0),e.defn(V,"$tuesday?",B=function(){return this.$wday()["$=="](2)},B.$$arity=0),e.defn(V,"$step",L=function(t,o){var s,u,_,f=this,p=L.$$p,d=p||$,v=$,h=$,y=$;return null==o&&(o=1),p&&(L.$$p=null),v=r(t,f).$to_i(),h=l(a(i(v,o),0))?[]:l(a(v,0))?c(e.Range.$new(0,v["$-@"](),!1).$step(o.$abs()),"map",[],(s=function(e){s.$$s;return null==e&&(e=$),e["$-@"]()},s.$$s=f,s.$$arity=1,s)).$reverse():e.Range.$new(0,v,!1).$step(o.$abs()),y=c(h,"map",[],((u=function(e){var t=u.$$s||this;return null==e&&(e=$),n(t,e)}).$$s=f,u.$$arity=1,u)),d!==$?(c(y,"each",[],((_=function(t){_.$$s;return null==t&&(t=$),e.yield1(d,t)}).$$s=f,_.$$arity=1,_)),f):y},L.$$arity=-2),e.defn(V,"$upto",U=function(e){var t=this,n=U.$$p,r=n||$;return n&&(U.$$p=null),c(t,"step",[e,1],r.$to_proc())},U.$$arity=1),e.defn(V,"$downto",F=function(e){var t=this,n=F.$$p,r=n||$;return n&&(F.$$p=null),c(t,"step",[e,-1],r.$to_proc())},F.$$arity=1),e.defn(V,"$wday",W=function(){return this.date.getDay()},W.$$arity=0),e.defn(V,"$wednesday?",Y=function(){return this.$wday()["$=="](3)},Y.$$arity=0),e.defn(V,"$year",G=function(){return this.date.getFullYear()},G.$$arity=0),e.defn(V,"$cwday",K=function(){return this.date.getDay()||7},K.$$arity=0),e.defn(V,"$cweek",X=function(){var e=new Date(this.date);return e.setHours(0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7)),Math.ceil(((e-new Date(e.getFullYear(),0,1))/864e5+1)/7)},X.$$arity=0)}(o[0],0,o)},Opal.modules.native=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}var r=e.top,a=[],i=e.nil,o=(e.breaker,e.slice,e.module),$=e.truthy,s=e.send,c=e.range,l=e.hash2,u=e.klass,_=e.gvars;return e.add_stubs(["$try_convert","$native?","$respond_to?","$to_n","$raise","$inspect","$Native","$proc","$map!","$end_with?","$define_method","$[]","$convert","$call","$to_proc","$new","$each","$native_reader","$native_writer","$extend","$is_a?","$map","$alias_method","$to_a","$_Array","$include","$method_missing","$bind","$instance_method","$slice","$-","$length","$[]=","$enum_for","$===","$>=","$<<","$each_pair","$_initialize","$name","$exiting_mid","$native_module"]),function(t,n){var r,a,u,_,f,p,d,v,h=o(t,"Native"),y=(h.$$proto,[h].concat(n));e.defs(h,"$is_a?",r=function(e,t){var n=this;try{return e instanceof n.$try_convert(t)}catch(r){return!1}},r.$$arity=2),e.defs(h,"$try_convert",a=function(e,t){return null==t&&(t=i),this["$native?"](e)?e:e["$respond_to?"]("to_n")?e.$to_n():t},a.$$arity=-2),e.defs(h,"$convert",u=function(t){var n=this;return n["$native?"](t)?t:t["$respond_to?"]("to_n")?t.$to_n():void n.$raise(e.const_get_relative(y,"ArgumentError"),t.$inspect()+" isn't native")},u.$$arity=1),e.defs(h,"$call",_=function(e,t){var n,r=this,a=_.$$p,o=a||i,$=arguments.length,s=$-2;s<0&&(s=0),n=new Array(s);for(var c=2;c<$;c++)n[c-2]=arguments[c];a&&(_.$$p=null);var l=e[t];if(l instanceof Function){for(var u=new Array(n.length),f=0,p=n.length;f<p;f++){var d=n[f],v=r.$try_convert(d);u[f]=v===i?d:v}return o!==i&&u.push(o),r.$Native(l.apply(e,u))}return r.$Native(l)},_.$$arity=-3),e.defs(h,"$proc",f=function(){var t,n=this,r=f.$$p,a=r||i;return r&&(f.$$p=null),$(a)||n.$raise(e.const_get_relative(y,"LocalJumpError"),"no block given"),s(e.const_get_qualified("::","Kernel"),"proc",[],((t=function(){var n,r,o=t.$$s||this,$=i,c=arguments.length,l=c-0;l<0&&(l=0),n=new Array(l);for(var u=0;u<c;u++)n[u-0]=arguments[u];if(s(n,"map!",[],((r=function(e){var t=r.$$s||this;return null==e&&(e=i),t.$Native(e)}).$$s=o,r.$$arity=1,r)),$=o.$Native(this),this===e.global)return a.apply(o,n);var _=a.$$s;a.$$s=null;try{return a.apply($,n)}finally{a.$$s=_}}).$$s=n,t.$$arity=-1,t))},f.$$arity=0),function(t,n){var r,a,u,_,f=o(t,"Helpers"),p=(f.$$proto,[f].concat(n));e.defn(f,"$alias_native",r=function(t,n,r){var a,o,u,_,f,d,v=this;if(_=e.slice.call(arguments,1,arguments.length),null==(r=e.extract_kwargs(_))||!r.$$is_hash){if(null!=r)throw e.ArgumentError.$new("expected kwargs");r=l([],{})}return null==(f=r.$$smap.as)&&(f=i),0<_.length&&(d=_.splice(0,1)[0]),null==d&&(d=t),$(d["$end_with?"]("="))?s(v,"define_method",[t],((a=function(t){var n=a.$$s||this;return null==n.native&&(n.native=i),null==t&&(t=i),n.native[d["$[]"](c(0,-2,!1))]=e.const_get_relative(p,"Native").$convert(t),t}).$$s=v,a.$$arity=1,a)):$(f)?s(v,"define_method",[t],((o=function(){var t,n,r=o.$$s||this,a=i;null==r.native&&(r.native=i),(t=o.$$p||i)&&(o.$$p=null);var c=arguments.length,l=c-0;l<0&&(l=0),n=new Array(l);for(var u=0;u<c;u++)n[u-0]=arguments[u];return $(a=s(e.const_get_relative(p,"Native"),"call",[r.native,d].concat(e.to_a(n)),t.$to_proc()))?f.$new(a.$to_n()):i}).$$s=v,o.$$arity=-1,o)):s(v,"define_method",[t],((u=function(){var t,n,r=u.$$s||this;null==r.native&&(r.native=i),(t=u.$$p||i)&&(u.$$p=null);var a=arguments.length,o=a-0;o<0&&(o=0),n=new Array(o);for(var $=0;$<a;$++)n[$-0]=arguments[$];return s(e.const_get_relative(p,"Native"),"call",[r.native,d].concat(e.to_a(n)),t.$to_proc())}).$$s=v,u.$$arity=-1,u))},r.$$arity=-2),e.defn(f,"$native_reader",a=function(){var e,t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var o=0;o<r;o++)t[o-0]=arguments[o];return s(t,"each",[],((e=function(t){var n,r=e.$$s||this
;return null==t&&(t=i),s(r,"define_method",[t],((n=function(){var e=n.$$s||this;return null==e.native&&(e.native=i),e.$Native(e.native[t])}).$$s=r,n.$$arity=0,n))}).$$s=n,e.$$arity=1,e))},a.$$arity=-1),e.defn(f,"$native_writer",u=function(){var e,t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var o=0;o<r;o++)t[o-0]=arguments[o];return s(t,"each",[],((e=function(t){var n,r=e.$$s||this;return null==t&&(t=i),s(r,"define_method",[t+"="],((n=function(e){var r=n.$$s||this;return null==r.native&&(r.native=i),null==e&&(e=i),r.$Native(r.native[t]=e)}).$$s=r,n.$$arity=1,n))}).$$s=n,e.$$arity=1,e))},u.$$arity=-1),e.defn(f,"$native_accessor",_=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return s(n,"native_reader",e.to_a(t)),s(n,"native_writer",e.to_a(t))},_.$$arity=-1)}(y[0],y),e.defs(h,"$included",p=function(t){return t.$extend(e.const_get_relative(y,"Helpers"))},p.$$arity=1),e.defn(h,"$initialize",d=function(t){var n=this;return $(e.const_get_qualified("::","Kernel")["$native?"](t))||e.const_get_qualified("::","Kernel").$raise(e.const_get_relative(y,"ArgumentError"),t.$inspect()+" isn't native"),n.native=t},d.$$arity=1),e.defn(h,"$to_n",v=function(){var e=this;return null==e.native&&(e.native=i),e.native},v.$$arity=0)}(a[0],a),function(t,n){var r,a,c,l=o(t,"Kernel"),u=(l.$$proto,[l].concat(n));e.defn(l,"$native?",r=function(e){return null==e||!e.$$class},r.$$arity=1),e.defn(l,"$Native",a=function(t){var n,r,a=this;return $(null==t)?i:$(a["$native?"](t))?e.const_get_qualified(e.const_get_relative(u,"Native"),"Object").$new(t):$(t["$is_a?"](e.const_get_relative(u,"Array")))?s(t,"map",[],((n=function(e){var t=n.$$s||this;return null==e&&(e=i),t.$Native(e)}).$$s=a,n.$$arity=1,n)):$(t["$is_a?"](e.const_get_relative(u,"Proc")))?s(a,"proc",[],((r=function(){var n,a,o=r.$$s||this;(n=r.$$p||i)&&(r.$$p=null);var $=arguments.length,c=$-0;c<0&&(c=0),a=new Array(c);for(var l=0;l<$;l++)a[l-0]=arguments[l];return o.$Native(s(t,"call",e.to_a(a),n.$to_proc()))}).$$s=a,r.$$arity=-1,r)):t},a.$$arity=1),l.$alias_method("_Array","Array"),e.defn(l,"$Array",c=function(t){var n,r=this,a=c.$$p,o=a||i,l=arguments.length,_=l-1;_<0&&(_=0),n=new Array(_);for(var f=1;f<l;f++)n[f-1]=arguments[f];return a&&(c.$$p=null),$(r["$native?"](t))?s(e.const_get_qualified(e.const_get_relative(u,"Native"),"Array"),"new",[t].concat(e.to_a(n)),o.$to_proc()).$to_a():r.$_Array(t)},c.$$arity=-2)}(a[0],a),function(n,$super,r){function a(){}var o,c,_,f,p,d,v,h,y,m,g,b,w,k,O,q=a=u(n,$super,"Object",a),E=q.$$proto;[q].concat(r);E.native=i,q.$include(e.const_get_qualified("::","Native")),e.defn(q,"$==",o=function(t){return this.native===e.const_get_qualified("::","Native").$try_convert(t)},o.$$arity=1),e.defn(q,"$has_key?",c=function(t){var n=this;return e.hasOwnProperty.call(n.native,t)},c.$$arity=1),e.alias(q,"key?","has_key?"),e.alias(q,"include?","has_key?"),e.alias(q,"member?","has_key?"),e.defn(q,"$each",_=function(){var t,n=this,r=_.$$p,a=r||i,o=arguments.length,$=o-0;$<0&&($=0),t=new Array($);for(var c=0;c<o;c++)t[c-0]=arguments[c];if(r&&(_.$$p=null),a!==i){for(var l in n.native)e.yieldX(a,[l,n.native[l]]);return n}return s(n,"method_missing",["each"].concat(e.to_a(t)))},_.$$arity=-1),e.defn(q,"$[]",f=function(t){var n=this,r=n.native[t];return r instanceof Function?r:e.const_get_qualified("::","Native").$call(n.native,t)},f.$$arity=1),e.defn(q,"$[]=",p=function(t,n){var r=this,a=i;return a=e.const_get_qualified("::","Native").$try_convert(n),$(a===i)?r.native[t]=n:r.native[t]=a},p.$$arity=2),e.defn(q,"$merge!",d=function(t){var n=this;for(var r in t=e.const_get_qualified("::","Native").$convert(t))n.native[r]=t[r];return n},d.$$arity=1),e.defn(q,"$respond_to?",v=function(t,n){var r=this;return null==n&&(n=!1),e.const_get_qualified("::","Kernel").$instance_method("respond_to?").$bind(r).$call(t,n)},v.$$arity=-2),e.defn(q,"$respond_to_missing?",h=function(t,n){var r=this;return null==n&&(n=!1),e.hasOwnProperty.call(r.native,t)},h.$$arity=-2),e.defn(q,"$method_missing",y=function(n){var r,a=this,o=y.$$p,$=o||i,c=i,l=arguments.length,u=l-1;u<0&&(u=0),r=new Array(u);for(var _=1;_<l;_++)r[_-1]=arguments[_];return o&&(y.$$p=null),"="===n.charAt(n.length-1)?(c=[n.$slice(0,t(n.$length(),1)),r["$[]"](0)],s(a,"[]=",e.to_a(c)),c[t(c.length,1)]):s(e.const_get_qualified("::","Native"),"call",[a.native,n].concat(e.to_a(r)),$.$to_proc())},y.$$arity=-2),e.defn(q,"$nil?",m=function(){return!1},m.$$arity=0),e.defn(q,"$is_a?",g=function(t){var n=this;return e.is_a(n,t)},g.$$arity=1),e.alias(q,"kind_of?","is_a?"),e.defn(q,"$instance_of?",b=function(e){return this.$$class===e},b.$$arity=1),e.defn(q,"$class",w=function(){return this.$$class},w.$$arity=0),e.defn(q,"$to_a",k=function(t){var n=this,r=k.$$p,a=r||i;return null==t&&(t=l([],{})),r&&(k.$$p=null),s(e.const_get_qualified(e.const_get_qualified("::","Native"),"Array"),"new",[n.native,t],a.$to_proc()).$to_a()},k.$$arity=-1),e.defn(q,"$inspect",O=function(){return"#<Native:"+String(this.native)+">"},O.$$arity=0)}(e.const_get_relative(a,"Native"),e.const_get_relative(a,"BasicObject"),a),function(r,$super,a){function o(){}var c,_,f,p,d,v,h,y=o=u(r,null,"Array",o),m=y.$$proto,g=[y].concat(a);m.named=m.native=m.get=m.block=m.set=m.length=i,y.$include(e.const_get_relative(g,"Native")),y.$include(e.const_get_relative(g,"Enumerable")),e.defn(y,"$initialize",c=function(t,n){var r,a=this,o=c.$$p,u=o||i;return null==n&&(n=l([],{})),o&&(c.$$p=null),s(a,e.find_super_dispatcher(a,"initialize",c,!1),[t],null),a.get=$(r=n["$[]"]("get"))?r:n["$[]"]("access"),a.named=n["$[]"]("named"),a.set=$(r=n["$[]"]("set"))?r:n["$[]"]("access"),a.length=$(r=n["$[]"]("length"))?r:"length",a.block=u,$(null==a.$length())?a.$raise(e.const_get_relative(g,"ArgumentError"),"no length found on the array-like object"):i},c.$$arity=-2),e.defn(y,"$each",_=function(){var t=this,n=_.$$p,r=n||i;if(n&&(_.$$p=null),!$(r))return t.$enum_for("each");for(var a=0,o=t.$length();a<o;a++)e.yield1(r,t["$[]"](a));return t},_.$$arity=0),e.defn(y,"$[]",f=function(t){var n=this,r=i,a=i;return a=t,r=e.const_get_relative(g,"String")["$==="](a)||e.const_get_relative(g,"Symbol")["$==="](a)?$(n.named)?n.native[n.named](t):n.native[t]:e.const_get_relative(g,"Integer")["$==="](a)?$(n.get)?n.native[n.get](t):n.native[t]:i,$(r)?$(n.block)?n.block.$call(r):n.$Native(r):i},f.$$arity=1),e.defn(y,"$[]=",p=function(t,n){var r=this;return $(r.set)?r.native[r.set](t,e.const_get_relative(g,"Native").$convert(n)):r.native[t]=e.const_get_relative(g,"Native").$convert(n)},p.$$arity=2),e.defn(y,"$last",d=function(e){var r=this,a=i,o=i;if(null==e&&(e=i),$(e)){for(a=t(r.$length(),1),o=[];$(n(a,0));)o["$<<"](r["$[]"](a)),a=t(a,1);return o}return r["$[]"](t(r.$length(),1))},d.$$arity=-1),e.defn(y,"$length",v=function(){var e=this;return e.native[e.length]},v.$$arity=0),e.alias(y,"to_ary","to_a"),e.defn(y,"$inspect",h=function(){return this.$to_a().$inspect()},h.$$arity=0)}(e.const_get_relative(a,"Native"),0,a),function(t,$super,n){function r(){}var a,i=r=u(t,null,"Numeric",r);i.$$proto,[i].concat(n);e.defn(i,"$to_n",a=function(){return this.valueOf()},a.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,i=r=u(t,null,"Proc",r);i.$$proto,[i].concat(n);e.defn(i,"$to_n",a=function(){return this},a.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,i=r=u(t,null,"String",r);i.$$proto,[i].concat(n);e.defn(i,"$to_n",a=function(){return this.valueOf()},a.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,i=r=u(t,null,"Regexp",r);i.$$proto,[i].concat(n);e.defn(i,"$to_n",a=function(){return this.valueOf()},a.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,o=r=u(t,null,"MatchData",r),$=o.$$proto;[o].concat(n);$.matches=i,e.defn(o,"$to_n",a=function(){return this.matches},a.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,o=r=u(t,null,"Struct",r),$=(o.$$proto,[o].concat(n));e.defn(o,"$to_n",a=function(){var t,n=this,r=i;return r={},s(n,"each_pair",[],((t=function(n,a){t.$$s;return null==n&&(n=i),null==a&&(a=i),r[n]=e.const_get_relative($,"Native").$try_convert(a,a)}).$$s=n,t.$$arity=2,t)),r},a.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,i=r=u(t,null,"Array",r),o=(i.$$proto,[i].concat(n));e.defn(i,"$to_n",a=function(){for(var t=this,n=[],r=0,a=t.length;r<a;r++){var i=t[r];n.push(e.const_get_relative(o,"Native").$try_convert(i,i))}return n},a.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,i=r=u(t,null,"Boolean",r);i.$$proto,[i].concat(n);e.defn(i,"$to_n",a=function(){return this.valueOf()},a.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,i=r=u(t,null,"Time",r);i.$$proto,[i].concat(n);e.defn(i,"$to_n",a=function(){return this},a.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,i=r=u(t,null,"NilClass",r);i.$$proto,[i].concat(n);e.defn(i,"$to_n",a=function(){return null},a.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,o,$=r=u(t,null,"Hash",r),c=($.$$proto,[$].concat(n));$.$alias_method("_initialize","initialize"),e.defn($,"$initialize",a=function(t){var n=this,r=a.$$p,o=r||i;if(r&&(a.$$p=null),null!=t&&(t.constructor===undefined||t.constructor===Object)){var $,l,u=n.$$smap,_=n.$$keys;for($ in t)!(l=t[$])||l.constructor!==undefined&&l.constructor!==Object?l&&l.$$is_array?(l=l.map(function(t){return!t||t.constructor!==undefined&&t.constructor!==Object?n.$Native(t):e.const_get_relative(c,"Hash").$new(t)}),u[$]=l):u[$]=n.$Native(l):u[$]=e.const_get_relative(c,"Hash").$new(l),_.push($);return n}return s(n,"_initialize",[t],o.$to_proc())},a.$$arity=-1),e.defn($,"$to_n",o=function(){for(var t,n,r=this,a={},i=r.$$keys,o=r.$$smap,$=0,s=i.length;$<s;$++)n=(t=i[$]).$$is_string?o[t]:(t=t.key).value,a[t]=e.const_get_relative(c,"Native").$try_convert(n,n);return a},o.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,i=r=u(t,null,"Module",r);i.$$proto,[i].concat(n);e.defn(i,"$native_module",a=function(){var t=this;return e.global[t.$name()]=t},a.$$arity=0)}(a[0],0,a),function(t,$super,n){function r(){}var a,i,o=r=u(t,null,"Class",r),$=(o.$$proto,[o].concat(n));e.defn(o,"$native_alias",a=function(t,n){var r=this,a=r.$$proto["$"+n];a||r.$raise(e.const_get_relative($,"NameError").$new("undefined method `"+n+"' for class `"+r.$inspect()+"'",r.$exiting_mid())),r.$$proto[t]=a},a.$$arity=2),e.defn(o,"$native_class",i=function(){var e=this;return e.$native_module(),e["new"]=e.$new},i.$$arity=0)}(a[0],0,a),_.$=_.global=r.$Native(e.global)},Opal.modules["opal/jquery/constants"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.truthy);return e.add_stubs(["$require","$raise"]),t.$require("native"),a(e.const_get_relative(n,"JQUERY_CLASS","skip_raise")?"constant":r)?r:a(!!e.global.jQuery)?e.const_set(n[0],"JQUERY_CLASS",e.const_set(n[0],"JQUERY_SELECTOR",e.global.jQuery)):a(!!e.global.Zepto)?(e.const_set(n[0],"JQUERY_SELECTOR",e.global.Zepto),e.const_set(n[0],"JQUERY_CLASS",e.global.Zepto.zepto.Z)):t.$raise(e.const_get_relative(n,"NameError"),"Can't find jQuery or Zepto. jQuery must be included before opal-jquery")},Opal.modules["opal/jquery/element"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.truthy;return e.add_stubs(["$require","$to_n","$include","$each","$alias_native","$attr_reader","$call","$nil?","$raise","$is_a?","$has_key?","$delete","$from_object","$gsub","$upcase","$[]","$compact","$map","$respond_to?","$<<","$Native","$arity","$new"]),t.$require("native"),t.$require("opal/jquery/constants"),function(t,$super,n){function $(){}var s,c,l,u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C,I,D,H,z,P,R,j,B,L,U,F,W,Y,G,K,X,V,J,Z,Q=$=a(t,$super,"Element",$),ee=(Q.$$proto,[Q].concat(n)),te=e.const_get_relative(ee,"JQUERY_SELECTOR").$to_n();return Q.$include(e.const_get_relative(ee,"Enumerable")),e.defs(Q,"$find",s=function(e){return te(e)},s.$$arity=1),e.defs(Q,"$[]",c=function(e){return te(e)},c.$$arity=1),e.defs(Q,"$id",l=function(e){var t=document.getElementById(e);return t?te(t):r},l.$$arity=1),e.defs(Q,"$new",u=function(e){return null==e&&(e="div"),te(document.createElement(e))},u.$$arity=-1),e.defs(Q,"$parse",_=function(e){return te.parseHTML?te(te.parseHTML(e)):te(e)},_.$$arity=1),e.defs(Q,"$expose",f=function(){var e,t,n=this,a=arguments.length,o=a-0;o<0&&(o=0),t=new Array(o);for(var $=0;$<a;$++)t[$-0]=arguments[$];return i(t,"each",[],((e=function(t){var n=e.$$s||this;return null==t&&(t=r),n.$alias_native(t)}).$$s=n,e.$$arity=1,e))},f.$$arity=-1),Q.$attr_reader("selector"),Q.$alias_native("after"),Q.$alias_native("before"),Q.$alias_native("parent"),Q.$alias_native("parents"),Q.$alias_native("prev"),Q.$alias_native("remove"),Q.$alias_native("hide"),Q.$alias_native("show"),Q.$alias_native("toggle"),Q.$alias_native("children"),Q.$alias_native("blur"),Q.$alias_native("closest"),Q.$alias_native("detach"),Q.$alias_native("focus"),Q.$alias_native("find"),Q.$alias_native("next"),Q.$alias_native("siblings"),Q.$alias_native("text"),Q.$alias_native("trigger"),Q.$alias_native("append"),Q.$alias_native("prepend"),Q.$alias_native("serialize"),Q.$alias_native("is"),Q.$alias_native("filter"),Q.$alias_native("not"),Q.$alias_native("last"),Q.$alias_native("wrap"),Q.$alias_native("stop"),Q.$alias_native("clone"),Q.$alias_native("empty"),Q.$alias_native("get"),e.defn(Q,"$prop",p=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var o=0;o<r;o++)t[o-0]=arguments[o];return i(e.const_get_relative(ee,"Native"),"call",[n,"prop"].concat(e.to_a(t)))},p.$$arity=-1),e.alias(Q,"succ","next"),e.alias(Q,"<<","append"),Q.$alias_native("add_class","addClass"),Q.$alias_native("append_to","appendTo"),Q.$alias_native("has_class?","hasClass"),Q.$alias_native("html=","html"),Q.$alias_native("index"),Q.$alias_native("is?","is"),Q.$alias_native("remove_attr","removeAttr"),Q.$alias_native("remove_class","removeClass"),Q.$alias_native("submit"),Q.$alias_native("click"),Q.$alias_native("text=","text"),Q.$alias_native("toggle_class","toggleClass"),Q.$alias_native("value=","val"),Q.$alias_native("scroll_top=","scrollTop"),Q.$alias_native("scroll_top","scrollTop"),Q.$alias_native("scroll_left=","scrollLeft"),Q.$alias_native("scroll_left","scrollLeft"),Q.$alias_native("remove_attribute","removeAttr"),Q.$alias_native("slide_down","slideDown"),Q.$alias_native("slide_up","slideUp"),Q.$alias_native("slide_toggle","slideToggle"),Q.$alias_native("fade_toggle","fadeToggle"),Q.$alias_native("height=","height"),Q.$alias_native("width=","width"),Q.$alias_native("outer_width","outerWidth"),Q.$alias_native("outer_height","outerHeight"),e.defn(Q,"$to_n",d=function(){return this},d.$$arity=0),e.defn(Q,"$[]",v=function(e){var t=this.attr(e);return t===undefined?r:t},v.$$arity=1),e.defn(Q,"$[]=",h=function(e,t){var n=this;return o(t["$nil?"]())?n.removeAttr(e):n.attr(e,t)},h.$$arity=2),e.defn(Q,"$attr",y=function(){var t,n=this,a=arguments.length,i=a-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<a;o++)t[o-0]=arguments[o];switch(t.length){case 1:var $=n.attr(t[0]);return null==$?r:$;case 2:return n.attr(t[0],t[1]);default:n.$raise(e.const_get_relative(ee,"ArgumentError"),"#attr only accepts 1 or 2 arguments")}},y.$$arity=-1),e.defn(Q,"$has_attribute?",m=function(e){return this.attr(e)!==undefined},m.$$arity=1),e.defn(Q,"$append_to_body",g=function(){return this.appendTo(document.body)},g.$$arity=0),e.defn(Q,"$append_to_head",b=function(){return this.appendTo(document.head)},b.$$arity=0),e.defn(Q,"$at",w=function(e){var t=this,n=t.length;return e<0&&(e+=n),e<0||e>=n?r:te(t[e])},w.$$arity=1),e.defn(Q,"$class_name",k=function(){var e=this[0];return e&&e.className||""},k.$$arity=0),e.defn(Q,"$class_name=",O=function(e){for(var t=this,n=0,r=t.length;n<r;n++)t[n].className=e;return t},O.$$arity=1),e.defn(Q,"$css",q=function(t,n){var a,i=this;return null==n&&(n=r),o(o(a=n["$nil?"]())?t["$is_a?"](e.const_get_relative(ee,"String")):a)?i.css(t):(o(t["$is_a?"](e.const_get_relative(ee,"Hash")))?i.css(t.$to_n()):i.css(t,n),i)},q.$$arity=-2),e.defn(Q,"$animate",E=function(e){var t=this,n=E.$$p,a=n||r,i=r;return n&&(E.$$p=null),i=o(e["$has_key?"]("speed"))?e.$delete("speed"):400,a!==r?t.animate(e.$to_n(),i,a):t.animate(e.$to_n(),i)},E.$$arity=1),e.defn(Q,"$data",x=function(){var t,n=this,a=arguments.length,i=a-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<a;o++)t[o-0]=arguments[o];var $=n.data.apply(n,t);return"object"!=typeof $||$ instanceof e.const_get_relative(ee,"JQUERY_CLASS")||($=e.const_get_relative(ee,"JSON").$from_object($)),null==$?r:$},x.$$arity=-1),e.defn(Q,"$effect",A=function(e){var t,n,a,$=this,s=A.$$p,c=s||r,l=arguments.length,u=l-1;u<0&&(u=0),a=new Array(u);for(var _=1;_<l;_++)a[_-1]=arguments[_];return s&&(A.$$p=null),e=i(e,"gsub",[/_\w/],((t=function(e){t.$$s;return null==e&&(e=r),e["$[]"](1).$upcase()}).$$s=$,t.$$arity=1,t)),(a=i(a,"map",[],(n=function(e){n.$$s;return null==e&&(e=r),o(e["$respond_to?"]("to_n"))?e.$to_n():r},n.$$s=$,n.$$arity=1,n)).$compact())["$<<"](function(){c!==r&&c.$call()}),$[e].apply($,a)},A.$$arity=-2),e.defn(Q,"$visible?",S=function(){return this.is(":visible")},S.$$arity=0),e.defn(Q,"$offset",M=function(){var e=this;return e.$Native(e.offset())},M.$$arity=0),e.defn(Q,"$each",N=function(){var t=this,n=N.$$p,a=n||r;n&&(N.$$p=null);for(var i=0,o=t.length;i<o;i++)e.yield1(a,te(t[i]));return t},N.$$arity=0),e.defn(Q,"$first",T=function(){var e=this;return e.length?e.first():r},T.$$arity=0),e.defn(Q,"$html",C=function(e){var t=this;return null!=e?t.html(e):t.html()||""},C.$$arity=-1),e.defn(Q,"$id",I=function(){var e=this[0];return e&&e.id||""},I.$$arity=0),e.defn(Q,"$id=",D=function(e){var t=this,n=t[0];return n&&(n.id=e),t},D.$$arity=1),e.defn(Q,"$tag_name",H=function(){var e=this;return e.length>0?e[0].tagName.toLowerCase():r},H.$$arity=0),e.defn(Q,"$inspect",z=function(){var e=this;if(e[0]===document)return"#<Element [document]>";if(e[0]===window)return"#<Element [window]>";for(var t,n,r,a=[],i=0,o=e.length;i<o;i++){if(!(n=e[i]).tagName)return"#<Element ["+n.toString()+"]";r="<"+n.tagName.toLowerCase(),(t=n.id)&&(r+=' id="'+t+'"'),(t=n.className)&&(r+=' class="'+t+'"'),a.push(r+">")}return"#<Element ["+a.join(", ")+"]>"},z.$$arity=0),e.defn(Q,"$to_s",P=function(){for(var e,t=this,n=[],r=0,a=t.length;r<a;r++)e=t[r],n.push(e.outerHTML);return n.join(", ")},P.$$arity=0),e.defn(Q,"$length",R=function(){return this.length},R.$$arity=0),e.defn(Q,"$any?",j=function(){return this.length>0},j.$$arity=0),e.defn(Q,"$empty?",B=function(){return 0===this.length},B.$$arity=0),e.alias(Q,"empty?","none?"),e.defn(Q,"$on",L=function(t,n){var a=this,i=L.$$p,o=i||r;null==n&&(n=r),i&&(L.$$p=null);var $=0!==o.$arity(),s=function(){for(var t=new Array(arguments.length),n=0,r=t.length;n<r;n++)t[n]=arguments[n];return $&&t[0].preventDefault&&(t[0]=e.const_get_relative(ee,"Event").$new(t[0])),o.apply(null,t)};return o.$$jqwrap=s,n==r?a.on(t,s):a.on(t,n,s),o},L.$$arity=-2),e.defn(Q,"$one",U=function(t,n){var a=this,i=U.$$p,o=i||r;null==n&&(n=r),i&&(U.$$p=null);var $=0!==o.$arity(),s=function(){for(var t=new Array(arguments.length),n=0,r=t.length;n<r;n++)t[n]=arguments[n];return $&&t[0].preventDefault&&(t[0]=e.const_get_relative(ee,"Event").$new(t[0])),o.apply(null,t)};return o.$$jqwrap=s,n==r?a.one(t,s):a.one(t,n,s),o},U.$$arity=-2),e.defn(Q,"$off",F=function(e,t,n){var a=this;return null==n&&(n=r),null==t?a.off(e):n===r?a.off(e,t.$$jqwrap):a.off(e,t,n.$$jqwrap)},F.$$arity=-3),e.defn(Q,"$serialize_array",W=function(){var t,n=this;return i(n.serializeArray(),"map",[],((t=function(n){t.$$s;return null==n&&(n=r),e.const_get_relative(ee,"Hash").$new(n)}).$$s=n,t.$$arity=1,t))},W.$$arity=0),e.alias(Q,"size","length"),e.defn(Q,"$value",Y=function(){var e;return o(e=this.val())?e:""},Y.$$arity=0),e.defn(Q,"$height",G=function(){var e;return o(e=this.height())?e:r},G.$$arity=0),e.defn(Q,"$width",K=function(){var e;return o(e=this.width())?e:r},K.$$arity=0),e.defn(Q,"$position",X=function(){var e=this;return e.$Native(e.position())},X.$$arity=0),e.defn(Q,"$==",V=function(e){return this.is(e)},V.$$arity=1),e.defn(Q,"$respond_to_missing?",J=function(t){var n=this,a=J.$$p,o=r,$=r,s=r;for(a&&(J.$$p=null),$=0,s=arguments.length,o=new Array(s);$<s;$++)o[$]=arguments[$];return"function"==typeof n[t]||i(n,e.find_super_dispatcher(n,"respond_to_missing?",J,!1),o,a)},J.$$arity=2),e.defn(Q,"$method_missing",Z=function(t){var n,a=this,o=Z.$$p,$=o||r,s=r,c=r,l=r,u=arguments.length,_=u-1;_<0&&(_=0),n=new Array(_);for(var f=1;f<u;f++)n[f-1]=arguments[f];for(o&&(Z.$$p=null),c=0,l=arguments.length,s=new Array(l);c<l;c++)s[c]=arguments[c];$!==r&&n["$<<"]($);var p=a[t];return"function"==typeof p?p.apply(a,n.$to_n()):i(a,e.find_super_dispatcher(a,"method_missing",Z,!1),s,o)},Z.$$arity=-2),r&&"method_missing"}(n[0],e.const_get_relative(n,"JQUERY_CLASS").$to_n(),n)},Opal.modules["opal/jquery/window"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.send,s=e.gvars;return e.add_stubs(["$require","$include","$find","$on","$element","$to_proc","$off","$trigger","$new"]),t.$require("opal/jquery/element"),function(t,n){var s=a(t,"Browser"),c=(s.$$proto,[s].concat(n));!function(t,$super,n){function a(){}var s,c,l,u,_,f=a=i(t,null,"Window",a),p=f.$$proto,d=[f].concat(n);p.element=r,f.$include(o((s=e.const_get_relative(d,"Native","skip_raise"))&&e.const_get_qualified(s,"Wrapper","skip_raise")?"constant":r)?e.const_get_qualified(e.const_get_relative(d,"Native"),"Wrapper"):e.const_get_relative(d,"Native")),e.defn(f,"$element",c=function(){var t,n=this;return n.element=o(t=n.element)?t:e.const_get_relative(d,"Element").$find(window)},c.$$arity=0),e.defn(f,"$on",l=function(){var t,n=this,a=l.$$p,i=a||r,o=arguments.length,s=o-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<o;c++)t[c-0]=arguments[c];return a&&(l.$$p=null),$(n.$element(),"on",e.to_a(t),i.$to_proc())},l.$$arity=-1),e.defn(f,"$off",u=function(){var t,n=this,a=u.$$p,i=a||r,o=arguments.length,s=o-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<o;c++)t[c-0]=arguments[c];return a&&(u.$$p=null),$(n.$element(),"off",e.to_a(t),i.$to_proc())},u.$$arity=-1),e.defn(f,"$trigger",_=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return $(n.$element(),"trigger",e.to_a(t))},_.$$arity=-1)}(c[0],0,c)}(n[0],n),e.const_set(n[0],"Window",e.const_get_qualified(e.const_get_relative(n,"Browser"),"Window").$new(window)),s.window=e.const_get_relative(n,"Window")},Opal.modules["opal/jquery/document"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.truthy,o=e.send,$=e.gvars;return e.add_stubs(["$require","$to_n","$call","$new","$ready?","$resolve","$module_function","$find","$extend"]),t.$require("opal/jquery/constants"),t.$require("opal/jquery/element"),function(t,n){var $=a(t,"Browser"),s=($.$$proto,[$].concat(n));!function(t,n){var $,s,c,l,u,_,f,p,d=$=a(t,"DocumentMethods"),v=(d.$$proto,[d].concat(n)),h=e.const_get_relative(v,"JQUERY_SELECTOR").$to_n();e.defn(d,"$ready?",s=function(){var e,t=s.$$p,n=t||r;return t&&(s.$$p=null),n!==r?i(null==(e=$.$$cvars["@@__isReady"])?r:e)?n.$call():h(n):r},s.$$arity=0),e.defn(d,"$ready",c=function(){var t,n=this,a=r;return a=e.const_get_relative(v,"Promise").$new(),o(e.const_get_relative(v,"Document"),"ready?",[],((t=function(){t.$$s;return a.$resolve()}).$$s=n,t.$$arity=0,t)),a},c.$$arity=0),d.$module_function("ready?"),o(d,"ready?",[],((l=function(){l.$$s;return e.class_variable_set($,"@@__isReady",!0)}).$$s=d,l.$$arity=0,l)),e.defn(d,"$title",u=function(){return document.title},u.$$arity=0),e.defn(d,"$title=",_=function(e){return document.title=e},_.$$arity=1),e.defn(d,"$head",f=function(){return e.const_get_relative(v,"Element").$find(document.head)},f.$$arity=0),e.defn(d,"$body",p=function(){return e.const_get_relative(v,"Element").$find(document.body)},p.$$arity=0)}(s[0],s)}(n[0],n),e.const_set(n[0],"Document",e.const_get_relative(n,"Element").$find(document)),e.const_get_relative(n,"Document").$extend(e.const_get_qualified(e.const_get_relative(n,"Browser"),"DocumentMethods")),$.document=e.const_get_relative(n,"Document")},Opal.modules["opal/jquery/event"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$to_n","$stop","$prevent"]),t.$require("opal/jquery/constants"),function(t,$super,n){function i(){}var o,$,s,c,l,u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A=i=a(t,null,"Event",i),S=A.$$proto,M=[A].concat(n);S.native=r;var N=e.const_get_relative(M,"JQUERY_SELECTOR").$to_n();return e.defn(A,"$initialize",o=function(e){return this.native=e},o.$$arity=1),e.defn(A,"$to_n",$=function(){return this.native},$.$$arity=0),e.defn(A,"$[]",s=function(e){return this.native[e]},s.$$arity=1),e.defn(A,"$type",c=function(){return this.native.type},c.$$arity=0),e.defn(A,"$element",l=function(){return N(this.native.currentTarget)},l.$$arity=0),e.alias(A,"current_target","element"),e.defn(A,"$target",u=function(){return N(this.native.target)},u.$$arity=0),e.defn(A,"$prevented?",_=function(){return this.native.isDefaultPrevented()},_.$$arity=0),e.defn(A,"$prevent",f=function(){return this.native.preventDefault()},f.$$arity=0),e.defn(A,"$stopped?",p=function(){return this.native.isPropagationStopped()},p.$$arity=0),e.defn(A,"$stop",d=function(){return this.native.stopPropagation()},d.$$arity=0),e.defn(A,"$stop_immediate",v=function(){return this.native.stopImmediatePropagation()},v.$$arity=0),e.defn(A,"$kill",h=function(){var e=this;return e.$stop(),e.$prevent()},h.$$arity=0),e.defn(A,"$page_x",y=function(){return this.native.pageX},y.$$arity=0),e.defn(A,"$page_y",m=function(){return this.native.pageY},m.$$arity=0),e.defn(A,"$touch_x",g=function(){return this.native.originalEvent.touches[0].pageX},g.$$arity=0),e.defn(A,"$touch_y",b=function(){return this.native.originalEvent.touches[0].pageY},b.$$arity=0),e.defn(A,"$ctrl_key",w=function(){return this.native.ctrlKey},w.$$arity=0),e.defn(A,"$meta_key",k=function(){return this.native.metaKey},k.$$arity=0),e.defn(A,"$alt_key",O=function(){return this.native.altKey},O.$$arity=0),e.defn(A,"$shift_key",q=function(){return this.native.shiftKey},q.$$arity=0),e.defn(A,"$key_code",E=function(){return this.native.keyCode},E.$$arity=0),e.defn(A,"$which",x=function(){return this.native.which},x.$$arity=0),e.alias(A,"default_prevented?","prevented?"),e.alias(A,"prevent_default","prevent"),e.alias(A,"propagation_stopped?","stopped?"),e.alias(A,"stop_propagation","stop"),e.alias(A,"stop_immediate_propagation","stop_immediate")}(n[0],0,n)},Opal.modules.json=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send,$=e.truthy,s=e.hash2;return e.add_stubs(["$raise","$new","$push","$[]=","$-","$[]","$create_id","$json_create","$const_get","$attr_accessor","$create_id=","$===","$parse","$generate","$from_object","$merge","$to_json","$responds_to?","$to_io","$write","$to_s","$to_a","$strftime"]),function(n,c){function l(t){try{return JSON.parse(t)}catch(n){m.$raise(e.const_get_qualified(e.const_get_relative(g,"JSON"),"ParserError"),n.message)}}function u(n,a){var i,$,s,c,l,_;switch(typeof n){case"string":case"number":return n;case"boolean":return!!n;case"null":return r;case"object":if(!n)return r;if(n.$$is_array){for($=a.array_class.$new(),c=0,l=n.length;c<l;c++)$.$push(u(n[c],a));return $}for(_ in s=a.object_class.$new(),n)w.call(n,_)&&(b=[_,u(n[_],a)],o(s,"[]=",e.to_a(b)),b[t(b.length,1)]);return a.parse||(i=s["$[]"](e.const_get_relative(g,"JSON").$create_id()))==r?s:e.const_get_qualified("::","Object").$const_get(i).$json_create(s)}}var _,f,p,d,v,h,y,m=a(n,"JSON"),g=(m.$$proto,[m].concat(c)),b=r;!function(e,$super,t){function n(){}var r=n=i(e,$super,"JSONError",n);r.$$proto,[r].concat(t)}(g[0],e.const_get_relative(g,"StandardError"),g),function(e,$super,t){function n(){}var r=n=i(e,$super,"ParserError",n);r.$$proto,[r].concat(t)}(g[0],e.const_get_relative(g,"JSONError"),g);var w=e.hasOwnProperty;!function(e,t){e.$$proto,[e].concat(t);e.$attr_accessor("create_id")}(e.get_singleton_class(m),g),b=["json_class"],o(m,"create_id=",e.to_a(b)),b[t(b.length,1)],e.defs(m,"$[]",_=function(t,n){var r=this;return null==n&&(n=s([],{})),$(e.const_get_relative(g,"String")["$==="](t))?r.$parse(t,n):r.$generate(t,n)},_.$$arity=-2),e.defs(m,"$parse",f=function(e,t){var n=this;return null==t&&(t=s([],{})),n.$from_object(l(e),t.$merge(s(["parse"],{parse:!0})))},f.$$arity=-2),e.defs(m,"$parse!",p=function(e,t){var n=this;return null==t&&(t=s([],{})),n.$parse(e,t)},p.$$arity=-2),e.defs(m,"$load",d=function(e,t){var n=this;return null==t&&(t=s([],{})),n.$from_object(l(e),t)},d.$$arity=-2),e.defs(m,"$from_object",v=function(n,a){var i=r;return null==a&&(a=s([],{})),$(a["$[]"]("object_class"))||(i=["object_class",e.const_get_relative(g,"Hash")],o(a,"[]=",e.to_a(i)),i[t(i.length,1)]),$(a["$[]"]("array_class"))||(i=["array_class",e.const_get_relative(g,"Array")],o(a,"[]=",e.to_a(i)),i[t(i.length,1)]),u(n,a.$$smap)},v.$$arity=-2),e.defs(m,"$generate",h=function(e,t){return null==t&&(t=s([],{})),e.$to_json(t)},h.$$arity=-2),e.defs(m,"$dump",y=function(e,t,n){var a=r;return null==t&&(t=r),null==n&&(n=r),a=this.$generate(e),$(t)?($(t["$responds_to?"]("to_io"))&&(t=t.$to_io()),t.$write(a),t):a},y.$$arity=-2)}(n[0],n),function(t,$super,n){function r(){}var a,o=r=i(t,null,"Object",r);o.$$proto,[o].concat(n);e.defn(o,"$to_json",a=function(){return this.$to_s().$to_json()},a.$$arity=0)}(n[0],0,n),function(t,n){var r,i=a(t,"Enumerable");i.$$proto,[i].concat(n);e.defn(i,"$to_json",r=function(){return this.$to_a().$to_json()},r.$$arity=0)}(n[0],n),function(t,$super,n){function r(){}var a,o=r=i(t,null,"Array",r);o.$$proto,[o].concat(n);e.defn(o,"$to_json",a=function(){for(var e=this,t=[],n=0,r=e.length;n<r;n++)t.push(e[n].$to_json());return"["+t.join(", ")+"]"},a.$$arity=0)}(n[0],0,n),function(t,$super,n){function r(){}var a,o=r=i(t,null,"Boolean",r);o.$$proto,[o].concat(n);e.defn(o,"$to_json",a=function(){return 1==this?"true":"false"},a.$$arity=0)}(n[0],0,n),function(t,$super,n){function r(){}var a,o=r=i(t,null,"Hash",r);o.$$proto,[o].concat(n);e.defn(o,"$to_json",a=function(){for(var e,t,n=this,r=[],a=0,i=n.$$keys,o=i.length;a<o;a++)(e=i[a]).$$is_string?t=n.$$smap[e]:(t=e.value,e=e.key),r.push(e.$to_s().$to_json()+":"+t.$to_json());return"{"+r.join(", ")+"}"},a.$$arity=0)}(n[0],0,n),function(t,$super,n){function r(){}var a,o=r=i(t,null,"NilClass",r);o.$$proto,[o].concat(n);e.defn(o,"$to_json",a=function(){return"null"},a.$$arity=0)}(n[0],0,n),function(t,$super,n){function r(){}var a,o=r=i(t,null,"Numeric",r);o.$$proto,[o].concat(n);e.defn(o,"$to_json",a=function(){return this.toString()},a.$$arity=0)}(n[0],0,n),function(t,$super,n){function r(){}var a=r=i(t,null,"String",r);a.$$proto,[a].concat(n);e.alias(a,"to_json","inspect")}(n[0],0,n),function(t,$super,n){function r(){}var a,o=r=i(t,null,"Time",r);o.$$proto,[o].concat(n);e.defn(o,"$to_json",a=function(){return this.$strftime("%FT%T%z").$to_json()},a.$$arity=0)}(n[0],0,n),function(t,$super,n){function a(){}var o,$,s=a=i(t,null,"Date",a);s.$$proto,[s].concat(n);return e.defn(s,"$to_json",o=function(){return this.$to_s().$to_json()},o.$$arity=0),e.defn(s,"$as_json",$=function(){return this.$to_s()},$.$$arity=0),r&&"as_json"}(n[0],0,n)},Opal.modules.promise=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var a=[],i=e.nil,o=(e.breaker,e.slice,e.klass),$=e.hash2,s=e.truthy,c=e.send;return e.add_stubs(["$resolve","$new","$reject","$attr_reader","$===","$value","$has_key?","$keys","$!","$==","$<<","$>>","$exception?","$[]","$resolved?","$rejected?","$error","$include?","$action","$realized?","$raise","$^","$call","$resolve!","$exception!","$any?","$each","$reject!","$there_can_be_only_one!","$then","$to_proc","$fail","$always","$trace","$class","$object_id","$+","$inspect","$act?","$nil?","$prev","$push","$concat","$it","$proc","$reverse","$pop","$<=","$length","$shift","$-","$wait","$map","$reduce","$try","$tap","$all?","$find"]),function(a,$super,l){function u(){}var _,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C,I,D,H,z,P,R,j,B=u=o(a,null,"Promise",u),L=B.$$proto,U=[B].concat(l);return L.value=L.action=L.exception=L.realized=L.next=L.delayed=L.error=L.prev=i,e.defs(B,"$value",_=function(e){return this.$new().$resolve(e)},_.$$arity=1),e.defs(B,"$error",f=function(e){return this.$new().$reject(e)},f.$$arity=1),e.defs(B,"$when",p=function(){var t,n=arguments.length,r=n-0;r<0&&(r=0),t=new Array(r)
;for(var a=0;a<n;a++)t[a-0]=arguments[a];return e.const_get_relative(U,"When").$new(t)},p.$$arity=-1),B.$attr_reader("error","prev","next"),e.defn(B,"$initialize",d=function(e){var t=this;return null==e&&(e=$([],{})),t.action=e,t.realized=!1,t.exception=!1,t.value=i,t.error=i,t.delayed=!1,t.prev=i,t.next=[]},d.$$arity=-1),e.defn(B,"$value",v=function(){var t=this;return s(e.const_get_relative(U,"Promise")["$==="](t.value))?t.value.$value():t.value},v.$$arity=0),e.defn(B,"$act?",h=function(){var e,t=this;return s(e=t.action["$has_key?"]("success"))?e:t.action["$has_key?"]("always")},h.$$arity=0),e.defn(B,"$action",y=function(){return this.action.$keys()},y.$$arity=0),e.defn(B,"$exception?",m=function(){return this.exception},m.$$arity=0),e.defn(B,"$realized?",g=function(){return this.realized["$!"]()["$!"]()},g.$$arity=0),e.defn(B,"$resolved?",b=function(){return this.realized["$=="]("resolve")},b.$$arity=0),e.defn(B,"$rejected?",w=function(){return this.realized["$=="]("reject")},w.$$arity=0),e.defn(B,"$^",k=function(e){var t=this;return e["$<<"](t),t["$>>"](e),e},k.$$arity=1),e.defn(B,"$<<",O=function(e){var t=this;return t.prev=e,t},O.$$arity=1),e.defn(B,"$>>",q=function(t){var n,r=this;return r.next["$<<"](t),s(r["$exception?"]())?t.$reject(r.delayed["$[]"](0)):s(r["$resolved?"]())?t.$resolve(s(r.delayed)?r.delayed["$[]"](0):r.$value()):s(r["$rejected?"]())&&(s(s(n=r.action["$has_key?"]("failure")["$!"]())?n:e.const_get_relative(U,"Promise")["$==="](s(r.delayed)?r.delayed["$[]"](0):r.error))?t.$reject(s(r.delayed)?r.delayed["$[]"](0):r.$error()):s(t.$action()["$include?"]("always"))&&t.$reject(s(r.delayed)?r.delayed["$[]"](0):r.$error())),r},q.$$arity=1),e.defn(B,"$resolve",E=function(t){var n,r=this,a=i,o=i;if(null==t&&(t=i),s(r["$realized?"]())&&r.$raise(e.const_get_relative(U,"ArgumentError"),"the promise has already been realized"),s(e.const_get_relative(U,"Promise")["$==="](t)))return t["$<<"](r.prev)["$^"](r);try{s(a=s(n=r.action["$[]"]("success"))?n:r.action["$[]"]("always"))&&(t=a.$call(t)),r["$resolve!"](t)}catch($){if(!e.rescue($,[e.const_get_relative(U,"Exception")]))throw $;o=$;try{r["$exception!"](o)}finally{e.pop_exception()}}return r},E.$$arity=-1),e.defn(B,"$resolve!",x=function(e){var t,n=this;return n.realized="resolve",n.value=e,s(n.next["$any?"]())?c(n.next,"each",[],((t=function(n){t.$$s;return null==n&&(n=i),n.$resolve(e)}).$$s=n,t.$$arity=1,t)):n.delayed=[e]},x.$$arity=1),e.defn(B,"$reject",A=function(t){var n,r=this,a=i,o=i;if(null==t&&(t=i),s(r["$realized?"]())&&r.$raise(e.const_get_relative(U,"ArgumentError"),"the promise has already been realized"),s(e.const_get_relative(U,"Promise")["$==="](t)))return t["$<<"](r.prev)["$^"](r);try{s(a=s(n=r.action["$[]"]("failure"))?n:r.action["$[]"]("always"))&&(t=a.$call(t)),s(r.action["$has_key?"]("always"))?r["$resolve!"](t):r["$reject!"](t)}catch($){if(!e.rescue($,[e.const_get_relative(U,"Exception")]))throw $;o=$;try{r["$exception!"](o)}finally{e.pop_exception()}}return r},A.$$arity=-1),e.defn(B,"$reject!",S=function(e){var t,n=this;return n.realized="reject",n.error=e,s(n.next["$any?"]())?c(n.next,"each",[],((t=function(n){t.$$s;return null==n&&(n=i),n.$reject(e)}).$$s=n,t.$$arity=1,t)):n.delayed=[e]},S.$$arity=1),e.defn(B,"$exception!",M=function(e){var t=this;return t.exception=!0,t["$reject!"](e)},M.$$arity=1),e.defn(B,"$then",N=function(){var t=this,n=N.$$p,r=n||i;return n&&(N.$$p=null),t["$^"](e.const_get_relative(U,"Promise").$new($(["success"],{success:r})))},N.$$arity=0),e.defn(B,"$then!",T=function(){var e=this,t=T.$$p,n=t||i;return t&&(T.$$p=null),e["$there_can_be_only_one!"](),c(e,"then",[],n.$to_proc())},T.$$arity=0),e.alias(B,"do","then"),e.alias(B,"do!","then!"),e.defn(B,"$fail",C=function(){var t=this,n=C.$$p,r=n||i;return n&&(C.$$p=null),t["$^"](e.const_get_relative(U,"Promise").$new($(["failure"],{failure:r})))},C.$$arity=0),e.defn(B,"$fail!",I=function(){var e=this,t=I.$$p,n=t||i;return t&&(I.$$p=null),e["$there_can_be_only_one!"](),c(e,"fail",[],n.$to_proc())},I.$$arity=0),e.alias(B,"rescue","fail"),e.alias(B,"catch","fail"),e.alias(B,"rescue!","fail!"),e.alias(B,"catch!","fail!"),e.defn(B,"$always",D=function(){var t=this,n=D.$$p,r=n||i;return n&&(D.$$p=null),t["$^"](e.const_get_relative(U,"Promise").$new($(["always"],{always:r})))},D.$$arity=0),e.defn(B,"$always!",H=function(){var e=this,t=H.$$p,n=t||i;return t&&(H.$$p=null),e["$there_can_be_only_one!"](),c(e,"always",[],n.$to_proc())},H.$$arity=0),e.alias(B,"finally","always"),e.alias(B,"ensure","always"),e.alias(B,"finally!","always!"),e.alias(B,"ensure!","always!"),e.defn(B,"$trace",z=function(t){var n=this,r=z.$$p,a=r||i;return null==t&&(t=i),r&&(z.$$p=null),n["$^"](e.const_get_relative(U,"Trace").$new(t,a))},z.$$arity=-1),e.defn(B,"$trace!",P=function(){var t,n=this,r=P.$$p,a=r||i,o=arguments.length,$=o-0;$<0&&($=0),t=new Array($);for(var s=0;s<o;s++)t[s-0]=arguments[s];return r&&(P.$$p=null),n["$there_can_be_only_one!"](),c(n,"trace",e.to_a(t),a.$to_proc())},P.$$arity=-1),e.defn(B,"$there_can_be_only_one!",R=function(){var t=this;return s(t.next["$any?"]())?t.$raise(e.const_get_relative(U,"ArgumentError"),"a promise has already been chained"):i},R.$$arity=0),e.defn(B,"$inspect",j=function(){var e,n=this,r=i;return r="#<"+n.$class()+"("+n.$object_id()+")",s(n.next["$any?"]())&&(r=t(r," >> "+n.next.$inspect())),r=s(n["$realized?"]())?t(r,": "+(s(e=n.value)?e:n.error).$inspect()+">"):t(r,">")},j.$$arity=0),function(t,$super,a){function l(){}var u,_,f=l=o(t,$super,"Trace",l),p=(f.$$proto,[f].concat(a));e.defs(f,"$it",u=function(e){var t,n=this,r=i,a=i;return r=[],s(s(t=e["$act?"]())?t:e.$prev()["$nil?"]())&&r.$push(e.$value()),s(a=e.$prev())?r.$concat(n.$it(a)):r},u.$$arity=1),e.defn(f,"$initialize",_=function(t,a){var o,l=this,u=_.$$p;return u&&(_.$$p=null),l.depth=t,c(l,e.find_super_dispatcher(l,"initialize",_,!1),[$(["success"],{success:c(l,"proc",[],(o=function(){var $,l=o.$$s||this,u=i;return(u=e.const_get_relative(p,"Trace").$it(l).$reverse()).$pop(),s(s($=t)?n(t,u.$length()):$)&&u.$shift(r(u.$length(),t)),c(a,"call",e.to_a(u))},o.$$s=l,o.$$arity=0,o))})],null)},_.$$arity=2)}(U[0],B,U),function(t,$super,n){function r(){}var a,$,l,u,_,f,p,d=r=o(t,$super,"When",r),v=d.$$proto,h=[d].concat(n);return v.wait=i,e.defn(d,"$initialize",a=function(t){var n,r=this,o=a.$$p;return null==t&&(t=[]),o&&(a.$$p=null),c(r,e.find_super_dispatcher(r,"initialize",a,!1),[],null),r.wait=[],c(t,"each",[],((n=function(e){var t=n.$$s||this;return null==e&&(e=i),t.$wait(e)}).$$s=r,n.$$arity=1,n))},a.$$arity=-1),e.defn(d,"$each",$=function(){var t,n=this,r=$.$$p,a=r||i;return r&&($.$$p=null),s(a)||n.$raise(e.const_get_relative(h,"ArgumentError"),"no block given"),c(n,"then",[],((t=function(e){t.$$s;return null==e&&(e=i),c(e,"each",[],a.$to_proc())}).$$s=n,t.$$arity=1,t))},$.$$arity=0),e.defn(d,"$collect",l=function(){var t,n=this,r=l.$$p,a=r||i;return r&&(l.$$p=null),s(a)||n.$raise(e.const_get_relative(h,"ArgumentError"),"no block given"),c(n,"then",[],((t=function(n){t.$$s;return null==n&&(n=i),e.const_get_relative(h,"When").$new(c(n,"map",[],a.$to_proc()))}).$$s=n,t.$$arity=1,t))},l.$$arity=0),e.defn(d,"$inject",u=function(){var t,n,r=this,a=u.$$p,o=a||i,$=arguments.length,s=$-0;s<0&&(s=0),n=new Array(s);for(var l=0;l<$;l++)n[l-0]=arguments[l];return a&&(u.$$p=null),c(r,"then",[],((t=function(r){t.$$s;return null==r&&(r=i),c(r,"reduce",e.to_a(n),o.$to_proc())}).$$s=r,t.$$arity=1,t))},u.$$arity=-1),e.alias(d,"map","collect"),e.alias(d,"reduce","inject"),e.defn(d,"$wait",_=function(t){var n,r=this;return s(e.const_get_relative(h,"Promise")["$==="](t))||(t=e.const_get_relative(h,"Promise").$value(t)),s(t["$act?"]())&&(t=t.$then()),r.wait["$<<"](t),c(t,"always",[],((n=function(){var e=n.$$s||this;return null==e.next&&(e.next=i),s(e.next["$any?"]())?e.$try():i}).$$s=r,n.$$arity=0,n)),r},_.$$arity=1),e.alias(d,"and","wait"),e.defn(d,"$>>",f=function(){var t,n=this,r=f.$$p,a=i,o=i,$=i;for(r&&(f.$$p=null),o=0,$=arguments.length,a=new Array($);o<$;o++)a[o]=arguments[o];return c(c(n,e.find_super_dispatcher(n,">>",f,!1),a,r),"tap",[],((t=function(){return(t.$$s||this).$try()}).$$s=n,t.$$arity=0,t))},f.$$arity=-1),e.defn(d,"$try",p=function(){var e=this,t=i;return s(c(e.wait,"all?",[],"realized?".$to_proc()))?s(t=c(e.wait,"find",[],"rejected?".$to_proc()))?e.$reject(t.$error()):e.$resolve(c(e.wait,"map",[],"value".$to_proc())):i},p.$$arity=0),i&&"try"}(U[0],B,U)}(a[0],0,a)},Opal.modules["opal/jquery/http"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.hash2,$=e.truthy;return e.add_stubs(["$require","$to_n","$each","$define_singleton_method","$send","$new","$define_method","$attr_reader","$delete","$update","$upcase","$succeed","$fail","$promise","$parse","$private","$tap","$proc","$ok?","$resolve","$reject","$from_object","$call"]),t.$require("json"),t.$require("native"),t.$require("promise"),t.$require("opal/jquery/constants"),function(t,$super,n){function s(){}var c,l,u,_,f,p,d,v,h,y,m,g,b=s=a(t,null,"HTTP",s),w=b.$$proto,k=[b].concat(n);w.settings=w.payload=w.url=w.method=w.handler=w.json=w.body=w.ok=w.xhr=w.promise=w.status_code=r;var O=e.const_get_relative(k,"JQUERY_SELECTOR").$to_n();return e.const_set(k[0],"ACTIONS",["get","post","put","delete","patch","head"]),i(e.const_get_relative(k,"ACTIONS"),"each",[],((c=function(e){var t,n,a=c.$$s||this;return null==e&&(e=r),i(a,"define_singleton_method",[e],((t=function(n,a){var i,$=t.$$s||this;return(i=t.$$p||r)&&(t.$$p=null),null==a&&(a=o([],{})),null==n&&(n=r),$.$new().$send(e,n,a,i)}).$$s=a,t.$$arity=-2,t)),i(a,"define_method",[e],((n=function(t,a){var i,$=n.$$s||this;return(i=n.$$p||r)&&(n.$$p=null),null==a&&(a=o([],{})),null==t&&(t=r),$.$send(e,t,a,i)}).$$s=a,n.$$arity=-2,n))}).$$s=b,c.$$arity=1,c)),e.defs(b,"$setup",l=function(){return e.const_get_relative(k,"Hash").$new(O.ajaxSetup())},l.$$arity=0),e.defs(b,"$setup=",u=function(e){return O.ajaxSetup(e.$to_n())},u.$$arity=1),b.$attr_reader("body","error_message","method","status_code","url","xhr"),e.defn(b,"$initialize",_=function(){var e=this;return e.settings=o([],{}),e.ok=!0},_.$$arity=0),e.defn(b,"$send",f=function(e,t,n,a){var i,o=this,s=r,c=r;return o.method=e,o.url=t,o.payload=n.$delete("payload"),o.handler=a,o.settings.$update(n),s=(i=[o.settings.$to_n(),o.payload])[0],"string"==typeof(c=i[1])?s.data=c:c!=r&&(s.data=c.$to_json(),s.contentType="application/json"),s.url=o.url,s.type=o.method.$upcase(),s.success=function(e,t,n){return o.$succeed(e,t,n)},s.error=function(e,t,n){return o.$fail(e,t,n)},O.ajax(s),$(o.handler)?o:o.$promise()},f.$$arity=4),e.defn(b,"$json",p=function(){var t,n=this;return n.json=$(t=n.json)?t:e.const_get_relative(k,"JSON").$parse(n.body)},p.$$arity=0),e.defn(b,"$ok?",d=function(){return this.ok},d.$$arity=0),e.defn(b,"$get_header",v=function(e){var t=this.xhr.getResponseHeader(e);return null===t?r:t},v.$$arity=1),e.defn(b,"$inspect",h=function(){var e=this;return"#<HTTP @url="+e.url+" @method="+e.method+">"},h.$$arity=0),b.$private(),e.defn(b,"$promise",y=function(){var t,n=this;return $(n.promise)?n.promise:n.promise=i(e.const_get_relative(k,"Promise").$new(),"tap",[],((t=function(e){var n,a=t.$$s||this;return null==e&&(e=r),a.handler=i(a,"proc",[],((n=function(t){n.$$s;return null==t&&(t=r),$(t["$ok?"]())?e.$resolve(t):e.$reject(t)}).$$s=a,n.$$arity=1,n))}).$$s=n,t.$$arity=1,t))},y.$$arity=0),e.defn(b,"$succeed",m=function(t,n,a){var i=this;return i.body=t,i.xhr=a,i.status_code=a.status,"object"==typeof t&&(i.json=e.const_get_relative(k,"JSON").$from_object(t)),$(i.handler)?i.handler.$call(i):r},m.$$arity=3),e.defn(b,"$fail",g=function(e){var t=this;return t.body=e.responseText,t.xhr=e,t.status_code=e.status,t.ok=!1,$(t.handler)?t.handler.$call(t):r},g.$$arity=3),r&&"fail"}(n[0],0,n)},Opal.modules["opal/jquery/kernel"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module);return function(t,a){var i,o=r(t,"Kernel");o.$$proto,[o].concat(a);e.defn(o,"$alert",i=function(e){return alert(e),n},i.$$arity=1)}(t[0],t)},Opal.modules["opal/jquery"]=function(e){var t=e.top,n=[],r=e.nil;e.breaker,e.slice;return e.add_stubs(["$==","$require"]),e.const_get_relative(n,"RUBY_ENGINE")["$=="]("opal")?(t.$require("opal/jquery/window"),t.$require("opal/jquery/document"),t.$require("opal/jquery/element"),t.$require("opal/jquery/event"),t.$require("opal/jquery/http"),t.$require("opal/jquery/kernel")):r},Opal.modules["opal-jquery"]=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("opal/jquery")},Opal.modules["paggio/utils"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.module,i=e.send,o=e.truthy;return e.add_stubs(["$size","$min","$scan","$gsub","$proc","$===","$merge","$to_proc","$merge!"]),function(t,$super,$){function s(){}var c=s=r(t,null,"Paggio",s),l=(c.$$proto,[c].concat($));return function(t,r){var $,s,c,l=a(t,"Utils"),u=(l.$$proto,[l].concat(r));e.defs(l,"$heredoc",$=function(t){var r=n;return r=function(){try{return t.$scan(/^[ \t]*(?=\S)/).$min().$size()}catch(n){if(!e.rescue(n,[e.const_get_relative(u,"StandardError")]))throw n;try{return 0}finally{e.pop_exception()}}}(),t.$gsub(new RegExp("^[ \\t]{"+r+"}"),"")},$.$$arity=1),e.defs(l,"$deep_merge",s=function(t,r){var a,$=this,s=n;return s=i($,"proc",[],((a=function(t,r,$){var c;a.$$s;return null==t&&(t=n),null==r&&(r=n),null==$&&($=n),o(o(c=e.const_get_relative(u,"Hash")["$==="](r))?e.const_get_relative(u,"Hash")["$==="]($):c)?i(r,"merge",[$],s.$to_proc()):$}).$$s=$,a.$$arity=3,a)),i(t,"merge",[r],s.$to_proc())},s.$$arity=2),e.defs(l,"$deep_merge!",c=function(t,r){var a,$=this,s=n;return s=i($,"proc",[],((a=function(t,r,$){var c;a.$$s;return null==t&&(t=n),null==r&&(r=n),null==$&&($=n),o(o(c=e.const_get_relative(u,"Hash")["$==="](r))?e.const_get_relative(u,"Hash")["$==="]($):c)?(i(r,"merge!",[$],s.$to_proc()),r):$}).$$s=$,a.$$arity=3,a)),i(t,"merge!",[r],s.$to_proc())},c.$$arity=2)}(l[0],l)}(t[0],0,t)},Opal.modules["paggio/html/helpers"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.truthy;return e.add_stubs(["$define_method","$instance_exec","$to_proc","$do","$defhelper","$[]=","$-"]),function(n,$super,$){function s(){}var c=s=a(n,null,"Paggio",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"HTML",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c,l,u=s=a(n,$super,"Element",s);u.$$proto,[u].concat($);return e.defs(u,"$defhelper",c=function(t){var n,a=this,$=c.$$p,s=$||r;return $&&(c.$$p=null),i(a,"define_method",[t],((n=function(){var t,a,$=n.$$s||this;(t=n.$$p||r)&&(n.$$p=null);var c=arguments.length,l=c-0;l<0&&(l=0),a=new Array(l);for(var u=0;u<c;u++)a[u-0]=arguments[u];return i($,"instance_exec",e.to_a(a),s.$to_proc()),o(t)&&i($,"do",[],t.$to_proc()),$}).$$s=a,n.$$arity=-1,n))},c.$$arity=1),e.defs(u,"$defhelper!",l=function(n,a){var o,$=this;return null==a&&(a=n),i($,"defhelper",[n+"!"],((o=function(){var n=o.$$s||this,$=r;return null==n.attributes&&(n.attributes=r),$=[a,!0],i(n.attributes,"[]=",e.to_a($)),$[t($.length,1)]}).$$s=$,o.$$arity=0,o))},l.$$arity=-2)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(n[0],0,n)},Opal.modules["paggio/html/element/a"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-","$defhelper!","$<<"]),function(n,$super,$){function s(){}var c=s=a(n,null,"Paggio",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"HTML",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"Element",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c,l,u=s=a(n,$super,"A",s);u.$$proto,[u].concat($);return i(o(["href","url","rel","relative","target","type","lang","language","media"],{href:"href",url:"href",rel:"rel",relative:"rel",target:"target",type:"type",lang:"hreflang",language:"hreflang",media:"media"}),"each",[],((c=function(n,a){var o,$=c.$$s||this;return null==n&&(n=r),null==a&&(a=r),i($,"defhelper",[n],((o=function(a){var $=o.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==a&&(a=r),s=[n,a.$to_s()],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,o.$$arity=1,o))}).$$s=u,c.$$arity=2,c)),u["$defhelper!"]("download"),u["$defhelper!"]("ping"),i(u,"defhelper",["text"],((l=function(e){var t=l.$$s||this;return null==e&&(e=r),t["$<<"](e)}).$$s=u,l.$$arity=1,l))}(l[0],c,l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(n[0],0,n)},Opal.modules["paggio/html/element/base"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-"]),function(n,$super,$){function s(){}var c=s=a(n,null,"Paggio",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"HTML",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"Element",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c,l=s=a(n,$super,"Base",s);l.$$proto,[l].concat($);return i(o(["href","url","target"],{href:"href",url:"href",target:"target"}),"each",[],((c=function(n,a){var o,$=c.$$s||this;return null==n&&(n=r),null==a&&(a=r),i($,"defhelper",[n],((o=function(a){var $=o.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==a&&(a=r),s=[n,a.$to_s()],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,o.$$arity=1,o))}).$$s=l,c.$$arity=2,c))}(l[0],c,l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(n[0],0,n)},Opal.modules["paggio/html/element/blockquote"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send;return e.add_stubs(["$defhelper","$to_s","$[]=","$-"]),function(n,$super,o){function $(){}var s=$=a(n,null,"Paggio",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s=$=a(n,$super,"HTML",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s=$=a(n,$super,"Element",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s,c=$=a(n,$super,"Blockquote",$);c.$$proto,[c].concat(o);return i(c,"defhelper",["cite"],((s=function(n){var a=s.$$s||this,o=r;return null==a.attributes&&(a.attributes=r),null==n&&(n=r),o=["cite",n.$to_s()],i(a.attributes,"[]=",e.to_a(o)),o[t(o.length,1)]}).$$s=c,s.$$arity=1,s))}(c[0],s,c)}(c[0],e.const_get_relative(c,"BasicObject"),c)}(c[0],e.const_get_relative(c,"BasicObject"),c)}(n[0],0,n)},Opal.modules["paggio/html/element/button"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-","$defhelper!"]),function(n,$super,$){function s(){}var c=s=a(n,null,"Paggio",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"HTML",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"Element",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c,l=s=a(n,$super,"Button",s);l.$$proto,[l].concat($);return i(o(["form","name","type","value","action","encoding","method","target"],{form:"form",name:"name",type:"type",value:"value",action:"formaction",encoding:"formenctype",method:"formmethod",target:"formtarget"}),"each",[],((c=function(n,a){var o,$=c.$$s||this;return null==n&&(n=r),null==a&&(a=r),i($,"defhelper",[n],((o=function(a){var $=o.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==a&&(a=r),s=[n,a.$to_s()],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,o.$$arity=1,o))}).$$s=l,c.$$arity=2,c)),l["$defhelper!"]("autofocus"),l["$defhelper!"]("disabled")}(l[0],c,l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(n[0],0,n)},Opal.modules["paggio/html/element/canvas"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-"]),function(n,$super,$){function s(){}var c=s=a(n,null,"Paggio",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"HTML",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"Element",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c,l=s=a(n,$super,"Canvas",s);l.$$proto,[l].concat($);return i(o(["width","height"],{width:"width",height:"height"}),"each",[],((c=function(n,a){var o,$=c.$$s||this;return null==n&&(n=r),null==a&&(a=r),i($,"defhelper",[n],((o=function(a){var $=o.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==a&&(a=r),s=[n,a.$to_s()],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,o.$$arity=1,o))}).$$s=l,c.$$arity=2,c))}(l[0],c,l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(n[0],0,n)},Opal.modules["paggio/html/element/embed"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$[]=","$-"]),function(n,$super,$){function s(){}var c=s=a(n,null,"Paggio",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"HTML",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"Element",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c,l=s=a(n,$super,"Embed",s);l.$$proto,[l].concat($);return i(o(["type","height","width"],{type:"type",height:"height",width:"width"}),"each",[],((c=function(n,a){var o,$=c.$$s||this;return null==n&&(n=r),null==a&&(a=r),i($,"defhelper",[n],((o=function(a){var $=o.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==a&&(a=r),s=[n,a],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,o.$$arity=1,o))}).$$s=l,c.$$arity=2,c))}(l[0],c,l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(n[0],0,n)},Opal.modules["paggio/html/element/img"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-"]),function(n,$super,$){function s(){}var c=s=a(n,null,"Paggio",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"HTML",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"Element",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c,l,u=s=a(n,$super,"Img",s);u.$$proto,[u].concat($);return i(o(["src","url","alt","description","height","width","map"],{src:"src",url:"src",alt:"alt",description:"alt",height:"height",width:"width",map:"usemap"}),"each",[],((c=function(n,a){var o,$=c.$$s||this;return null==n&&(n=r),null==a&&(a=r),i($,"defhelper",[n],((o=function(a){var $=o.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==a&&(a=r),s=[n,a.$to_s()],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,o.$$arity=1,o))}).$$s=u,c.$$arity=2,c)),i(u,"defhelper",["map!"],((l=function(){var n=l.$$s||this,a=r;return null==n.attributes&&(n.attributes=r),a=["ismap",!0],i(n.attributes,"[]=",e.to_a(a)),a[t(a.length,1)]}).$$s=u,l.$$arity=0,l))}(l[0],c,l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(n[0],0,n)},Opal.modules["paggio/html/element/input"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$[]=","$-"]),function(n,$super,$){function s(){}var c=s=a(n,null,"Paggio",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"HTML",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"Element",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c,l=s=a(n,$super,"Input",s);l.$$proto,[l].concat($);return i(o(["type","name","value","size","place_holder","read_only","required","limit"],{type:"type",name:"name",value:"value",size:"size",place_holder:"placeholder",read_only:"readonly",required:"required",limit:"maxlength"}),"each",[],((c=function(n,a){var o,$=c.$$s||this;return null==n&&(n=r),null==a&&(a=r),i($,"defhelper",[n],((o=function(a){var $=o.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==a&&(a=r),s=[n,a],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,o.$$arity=1,o))}).$$s=l,c.$$arity=2,c))}(l[0],c,l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(n[0],0,n)},Opal.modules["paggio/html/element/link"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-"]),function(n,$super,$){function s(){}var c=s=a(n,null,"Paggio",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"HTML",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"Element",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c,l=s=a(n,$super,"Link",s);l.$$proto,[l].concat($);return i(o(["cross_origin","href","href_lang","media","rel","sizes","type"],{cross_origin:"crossorigin",href:"href",href_lang:"hreflang",media:"media",rel:"rel",sizes:"sizes",type:"type"}),"each",[],((c=function(n,a){var o,$=c.$$s||this;return null==n&&(n=r),null==a&&(a=r),i($,"defhelper",[n],((o=function(a){var $=o.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==a&&(a=r),s=[n,a.$to_s()],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,o.$$arity=1,o))}).$$s=l,c.$$arity=2,c))}(l[0],c,l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(n[0],0,n)},Opal.modules["paggio/html/element/object"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$[]=","$-"]),function(n,$super,$){function s(){}var c=s=a(n,null,"Paggio",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"HTML",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c=s=a(n,$super,"Element",s),l=(c.$$proto,[c].concat($));return function(n,$super,$){function s(){}var c,l=s=a(n,$super,"Object",s);l.$$proto,[l].concat($);return i(o(["type","data","name","height","width"],{type:"type",data:"data",name:"name",height:"height",width:"width"}),"each",[],((c=function(n,a){var o,$=c.$$s||this;return null==n&&(n=r),null==a&&(a=r),i($,"defhelper",[n],((o=function(a){var $=o.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==a&&(a=r),s=[n,a],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,o.$$arity=1,o))}).$$s=l,c.$$arity=2,c))}(l[0],c,l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(l[0],e.const_get_relative(l,"BasicObject"),l)}(n[0],0,n)},Opal.modules["paggio/html/element/option"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send;return e.add_stubs(["$each","$defhelper","$[]=","$-","$defhelper!"]),function(n,$super,o){function $(){}var s=$=a(n,null,"Paggio",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s=$=a(n,$super,"HTML",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s=$=a(n,$super,"Element",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s,c=$=a(n,$super,"Option",$);c.$$proto,[c].concat(o);return i(["label","value"],"each",[],((s=function(n){var a,o=s.$$s||this;return null==n&&(n=r),i(o,"defhelper",[n],((a=function(o){var $=a.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==o&&(o=r),s=[n,o],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=c,s.$$arity=1,s)),c["$defhelper!"]("disabled"),c["$defhelper!"]("selected")}(c[0],s,c)}(c[0],e.const_get_relative(c,"BasicObject"),c)}(c[0],e.const_get_relative(c,"BasicObject"),c)}(n[0],0,n)},Opal.modules["paggio/html/element/optgroup"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send;return e.add_stubs(["$each","$defhelper","$[]=","$-","$defhelper!"]),function(n,$super,o){function $(){}var s=$=a(n,null,"Paggio",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s=$=a(n,$super,"HTML",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s=$=a(n,$super,"Element",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s,c=$=a(n,$super,"Optgroup",$);c.$$proto,[c].concat(o);return i(["label","value"],"each",[],((s=function(n){var a,o=s.$$s||this;return null==n&&(n=r),i(o,"defhelper",[n],((a=function(o){var $=a.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==o&&(o=r),s=[n,o],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=c,s.$$arity=1,s)),c["$defhelper!"]("disabled"),c["$defhelper!"]("selected")}(c[0],s,c)}(c[0],e.const_get_relative(c,"BasicObject"),c)}(c[0],e.const_get_relative(c,"BasicObject"),c)}(n[0],0,n)},Opal.modules["paggio/html/element/select"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send;return e.add_stubs(["$each","$defhelper","$[]=","$-","$defhelper!"]),function(n,$super,o){function $(){}var s=$=a(n,null,"Paggio",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s=$=a(n,$super,"HTML",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s=$=a(n,$super,"Element",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s,c=$=a(n,$super,"Select",$);c.$$proto,[c].concat(o);return i(["form","name","size"],"each",[],((s=function(n){var a,o=s.$$s||this;return null==n&&(n=r),i(o,"defhelper",[n],((a=function(o){var $=a.$$s||this,s=r;return null==$.attributes&&($.attributes=r),null==o&&(o=r),s=[n,o],i($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=c,s.$$arity=1,s)),c["$defhelper!"]("auto_focus","autofocus"),c["$defhelper!"]("disabled"),c["$defhelper!"]("required")}(c[0],s,c)}(c[0],e.const_get_relative(c,"BasicObject"),c)}(c[0],e.const_get_relative(c,"BasicObject"),c)}(n[0],0,n)},Opal.modules["paggio/html/element/td"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send;return e.add_stubs(["$defhelper","$to_s","$[]=","$-","$join"]),function(n,$super,o){function $(){}var s=$=a(n,null,"Paggio",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s=$=a(n,$super,"HTML",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s=$=a(n,$super,"Element",$),c=(s.$$proto,[s].concat(o));return function(n,$super,o){function $(){}var s,c,l,u=$=a(n,$super,"Td",$);u.$$proto,[u].concat(o);return i(u,"defhelper",["columns"],((s=function(n){var a=s.$$s||this,o=r;return null==a.attributes&&(a.attributes=r),null==n&&(n=r),o=["colspan",n.$to_s()],i(a.attributes,"[]=",e.to_a(o)),o[t(o.length,1)]}).$$s=u,s.$$arity=1,s)),i(u,"defhelper",["rows"],((c=function(n){var a=c.$$s||this,o=r;return null==a.attributes&&(a.attributes=r),null==n&&(n=r),o=["rowspan",n.$to_s()],i(a.attributes,"[]=",e.to_a(o)),o[t(o.length,1)]}).$$s=u,c.$$arity=1,c)),i(u,"defhelper",["headers"],((l=function(){var n,a=l.$$s||this,o=r;null==a.attributes&&(a.attributes=r);var $=arguments.length,s=$-0;s<0&&(s=0),n=new Array(s);for(var c=0;c<$;c++)n[c-0]=arguments[c];return o=["headers",n.$join(" ")],i(a.attributes,"[]=",e.to_a(o)),o[t(o.length,1)]}).$$s=u,l.$$arity=-1,l))
}(c[0],s,c)}(c[0],e.const_get_relative(c,"BasicObject"),c)}(c[0],e.const_get_relative(c,"BasicObject"),c)}(n[0],0,n)},Opal.modules["paggio/html/element"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n=e.top,r=[],a=e.nil,i=(e.breaker,e.slice,e.klass),o=e.send,$=e.truthy,s=e.hash2,c=e.range;return e.add_stubs(["$require","$==","$capitalize","$const_defined?","$new","$const_get","$each","$to_proc","$<<","$end_with?","$to_s","$[]","$[]=","$-","$===","$has_key?","$unshift","$|","$split","$delete","$to_a","$deep_merge!","$>>","$extend!","$pop","$join","$heredoc","$defhelper","$map","$empty?","$upcase","$inspect"]),n.$require("paggio/html/element/a"),n.$require("paggio/html/element/base"),n.$require("paggio/html/element/blockquote"),n.$require("paggio/html/element/button"),n.$require("paggio/html/element/canvas"),n.$require("paggio/html/element/embed"),n.$require("paggio/html/element/img"),n.$require("paggio/html/element/input"),n.$require("paggio/html/element/link"),n.$require("paggio/html/element/object"),n.$require("paggio/html/element/option"),n.$require("paggio/html/element/optgroup"),n.$require("paggio/html/element/select"),n.$require("paggio/html/element/td"),function(n,$super,r){function l(){}var u=l=i(n,null,"Paggio",l),_=(u.$$proto,[u].concat(r));return function(n,$super,r){function l(){}var u=l=i(n,$super,"HTML",l),_=(u.$$proto,[u].concat(r));return function(n,$super,r){function l(){}var u,_,f,p,d,v,h,y,m,g,b,w=l=i(n,$super,"Element",l),k=w.$$proto,O=[w].concat(r);return k.children=k.attributes=k.class_names=k.owner=k.name=a,e.defs(w,"$new",u=function(t,n,r){var i=this,c=u.$$p,_=a,f=a,p=a,d=a;for(null==r&&(r=s([],{})),c&&(u.$$p=null),p=0,d=arguments.length,f=new Array(d);p<d;p++)f[p]=arguments[p];return i["$=="](e.const_get_relative(O,"Element"))?(_=n.$capitalize(),$(i["$const_defined?"](_))?i.$const_get(_).$new(t,n,r):o(i,e.find_super_dispatcher(i,"new",u,!1,l),f,c)):o(i,e.find_super_dispatcher(i,"new",u,!1,l),f,c)},u.$$arity=-3),e.defn(w,"$initialize",_=function(e,t,n){var r=this;return null==n&&(n=s([],{})),r.owner=e,r.name=t,r.attributes=n,r.children=[],r.class_names=[]},_.$$arity=-3),e.defn(w,"$each",f=function(){var e=this,t=f.$$p,n=t||a;return t&&(f.$$p=null),o(e.children,"each",[],n.$to_proc())},f.$$arity=0),e.defn(w,"$<<",p=function(e){var t=this;return t.children["$<<"](e),t},p.$$arity=1),e.defn(w,"$method_missing",d=function(n,r){var i,s=this,l=d.$$p,u=l||a,_=a;return null==r&&(r=a),l&&(d.$$p=null),$(n.$to_s()["$end_with?"]("!"))?(_=["id",n["$[]"](c(0,-2,!1))],o(s.attributes,"[]=",e.to_a(_)),_[t(_.length,1)]):s.class_names["$<<"](n),$(e.const_get_qualified("::","Hash")["$==="](r))?($($(i=r["$has_key?"]("class"))?i:r["$has_key?"]("classes"))&&o(s.class_names,"unshift",e.to_a(r.$delete("class").$to_s().$split()["$|"](r.$delete("classes").$to_a()))),e.const_get_qualified(e.const_get_qualified("::","Paggio"),"Utils")["$deep_merge!"](s.attributes,r)):$(r)&&s["$>>"](r),$(u)&&o(s.owner,"extend!",[s],u.$to_proc()),s},d.$$arity=-2),e.defn(w,"$[]",v=function(){var t,n=this,r=a,i=arguments.length,o=i-0;o<0&&(o=0),t=new Array(o);for(var s=0;s<i;s++)t[s-0]=arguments[s];return $(r=n.class_names.$pop())&&n.class_names["$<<"]([r].concat(e.to_a(t)).$join("-")),n},v.$$arity=-1),e.defn(w,"$do",h=function(){var e=this,t=h.$$p,n=t||a;return t&&(h.$$p=null),o(e.owner,"extend!",[e],n.$to_proc()),e},h.$$arity=0),e.defn(w,"$>>",y=function(t){var n=this;return n["$<<"](e.const_get_qualified(e.const_get_qualified("::","Paggio"),"Utils").$heredoc(t.$to_s())),n},y.$$arity=1),o(w,"defhelper",["style"],((m=function(n){var r,i=m.$$s||this,$=a;return null==i.attributes&&(i.attributes=a),null==n&&(n=a),$=["style",o(n,"map",[],(r=function(e,t){r.$$s;return null==e&&(e=a),null==t&&(t=a),e+": "+t},r.$$s=i,r.$$arity=2,r)).$join(";")],o(i.attributes,"[]=",e.to_a($)),$[t($.length,1)]}).$$s=w,m.$$arity=1,m)),o(w,"defhelper",["data"],((g=function(n){var r,i=g.$$s||this;return null==n&&(n=a),o(n,"each",[],((r=function(n,i){var $=r.$$s||this,s=a;return null==$.attributes&&($.attributes=a),null==n&&(n=a),null==i&&(i=a),s=["data-"+n,i.$to_s()],o($.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=i,r.$$arity=2,r))}).$$s=w,g.$$arity=1,g)),e.defn(w,"$inspect",b=function(){var e=this;return $(e.children["$empty?"]())?"#<HTML::Element("+e.name.$upcase()+")>":"#<HTML::Element("+e.name.$upcase()+"): "+e.children.$inspect()["$[]"](c(1,-2,!1))+">"},b.$$arity=0),a&&"inspect"}(_[0],e.const_get_relative(_,"BasicObject"),_)}(_[0],e.const_get_relative(_,"BasicObject"),_)}(r[0],0,r)},Opal.modules["paggio/html"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.truthy,o=e.send,$=e.range;return e.add_stubs(["$require","$attr_reader","$raise","$==","$arity","$instance_exec","$to_proc","$call","$<<","$first","$===","$instance_eval","$each","$end_with?","$to_s","$empty?","$heredoc","$shift","$new","$[]","$inspect"]),t.$require("paggio/html/helpers"),t.$require("paggio/html/element"),function(t,$super,n){function s(){}var c=s=a(t,null,"Paggio",s),l=(c.$$proto,[c].concat(n));return function(t,$super,n){function s(){}var c,l,u,_,f,p,d,v,h,y=s=a(t,$super,"HTML",s),m=y.$$proto,g=[y].concat(n);return m.current=m.roots=m.version=r,y.$attr_reader("version"),e.defn(y,"$initialize",c=function(t){var n=this,a=c.$$p,$=a||r;return null==t&&(t=5),a&&(c.$$p=null),i($)||e.const_get_qualified("::","Kernel").$raise(e.const_get_qualified("::","ArgumentError"),"no block given"),n.version=t,n.roots=[],n.current=r,$.$arity()["$=="](0)?o(n,"instance_exec",[],$.$to_proc()):$.$call(n)},c.$$arity=-1),e.defn(y,"$<<",l=function(e){var t,n=this;return(i(t=n.current)?t:n.roots)["$<<"](e)},l.$$arity=1),e.defn(y,"$root!",u=function(){return this.roots.$first()},u.$$arity=0),e.defn(y,"$roots!",_=function(){return this.roots},_.$$arity=0),e.defn(y,"$element!",f=function(){return this.current},f.$$arity=0),e.defn(y,"$extend!",p=function(t){var n,a,$=this,s=p.$$p,c=s||r,l=r,u=r;return null==t&&(t=r),s&&(p.$$p=null),l=(n=[$.current,t])[0],$.current=n[1],u=c.$call($),i(e.const_get_qualified("::","String")["$==="](u))&&o($.current,"instance_eval",[],((a=function(){return(a.$$s||this).inner_html=u}).$$s=$,a.$$arity=0,a)),$.current=l,$},p.$$arity=-1),e.defn(y,"$each",d=function(){var e=this,t=d.$$p,n=t||r;return t&&(d.$$p=null),o(e.roots,"each",[],n.$to_proc())},d.$$arity=0),e.defn(y,"$method_missing",v=function(t){var n,a,$,s=this,c=v.$$p,l=c||r,u=r,_=r,f=r,p=r,d=r,h=r,y=r,m=arguments.length,b=m-1;b<0&&(b=0),$=new Array(b);for(var w=1;w<m;w++)$[w-1]=arguments[w];for(c&&(v.$$p=null),h=0,y=arguments.length,d=new Array(y);h<y;h++)d[h]=arguments[h];return i(t.$to_s()["$end_with?"]("!"))?o(s,e.find_super_dispatcher(s,"method_missing",v,!1),d,c):(i(i(n=$["$empty?"]())?n:e.const_get_qualified("::","Hash")["$==="]($.$first()))||(u=e.const_get_qualified(e.const_get_qualified("::","Paggio"),"Utils").$heredoc($.$shift().$to_s())),_=o(e.const_get_relative(g,"Element"),"new",[s,t].concat(e.to_a($))),i(u)&&_["$<<"](u),i(l)&&(f=s.current,s.current=_,p=l.$call(s),s.current=f,i(e.const_get_qualified("::","String")["$==="](p))&&o(_,"instance_eval",[],((a=function(){return(a.$$s||this).inner_html=p}).$$s=s,a.$$arity=0,a))),s["$<<"](_),_)},v.$$arity=-2),e.defn(y,"$inspect",h=function(){var e=this;return i(e.roots["$empty?"]())?"#<HTML("+e.version+")>":"#<HTML("+e.version+"): "+e.roots.$inspect()["$[]"]($(1,-2,!1))+">"},h.$$arity=0),r&&"inspect"}(l[0],e.const_get_relative(l,"BasicObject"),l)}(n[0],0,n)},Opal.modules["paggio/css/unit"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}var i,o=e.top,$=[],s=e.nil,c=(e.breaker,e.slice,e.klass),l=e.send,u=e.truthy;return e.add_stubs(["$map","$to_proc","$attr_reader","$===","$respond_to?","$raise","$class","$to_u","$new","$==","$convert","$type","$number","$hash","$each","$define_method","$+","$compatible?","$-","$*","$/","$to_i","$to_f","$private","$include?","$class_eval","$old_percent","$match","$[]","$__send__","$downcase"]),function(i,$super,o){function $(){}var _=$=c(i,null,"Paggio",$),f=(_.$$proto,[_].concat(o));(function(i,$super,o){function $(){}var _=$=c(i,$super,"CSS",$),f=(_.$$proto,[_].concat(o));(function(i,$super,o){function $(){}var _,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M=$=c(i,null,"Unit",$),N=M.$$proto,T=[M].concat(o);N.type=N.number=s,e.const_set(T[0],"TYPES",l(["em","ex","ch","rem","vh","vw","vmin","vmax","px","mm","cm","in","pt","pc","s","deg"],"map",[],"to_sym".$to_proc())),e.const_set(T[0],"COMPATIBLE",l(["in","pt","mm","cm","px","pc"],"map",[],"to_sym".$to_proc())),M.$attr_reader("type","number"),e.defn(M,"$initialize",_=function(e,t){var n=this;return n.number=e,n.type=t},_.$$arity=2),e.defn(M,"$coerce",f=function(e){return[this,e]},f.$$arity=1),e.defn(M,"$==",p=function(t){var n=this;return u(e.const_get_relative(T,"Unit")["$==="](t))||(u(t["$respond_to?"]("to_u"))||n.$raise(e.const_get_relative(T,"TypeError"),"no implicit conversion of "+t.$class()+" into Unit"),t=t.$to_u()),u(e.const_get_relative(T,"Unit")["$==="](t))||(t=e.const_get_relative(T,"Unit").$new(t,n.type)),n.number["$=="](n.$convert(t,n.type))},p.$$arity=1),e.defn(M,"$===",d=function(e){var t=this;return t.type["$=="](e.$type())?t.number["$=="](e.$number()):t.type["$=="](e.$type())},d.$$arity=1),e.alias(M,"eql?","=="),e.defn(M,"$hash",v=function(){var e=this;return[e.number,e.type].$hash()},v.$$arity=0),l(e.const_get_relative(T,"TYPES"),"each",[],((h=function(t){var n,r=h.$$s||this;return null==t&&(t=s),l(r,"define_method",[t],((n=function(){var r=n.$$s||this;return e.const_get_relative(T,"Unit").$new(r.$convert(r,t),t)}).$$s=r,n.$$arity=0,n))}).$$s=M,h.$$arity=1,h)),e.defn(M,"$+",y=function(n){var r,a=this;return u(e.const_get_relative(T,"Unit")["$==="](n))?a.type["$=="](n.$type())?e.const_get_relative(T,"Unit").$new(t(a.number,n.$number()),a.type):u(u(r=a["$compatible?"](a))?a["$compatible?"](n):r)?e.const_get_relative(T,"Unit").$new(t(a.number,a.$convert(n,a.type)),a.type):a.$raise(e.const_get_relative(T,"ArgumentError"),n.$type()+" isn't compatible with "+a.type):e.const_get_relative(T,"Unit").$new(t(a.number,n),a.type)},y.$$arity=1),e.defn(M,"$-",m=function(t){var r,a=this;return u(e.const_get_relative(T,"Unit")["$==="](t))?a.type["$=="](t.$type())?e.const_get_relative(T,"Unit").$new(n(a.number,t.$number()),a.type):u(u(r=a["$compatible?"](a))?a["$compatible?"](t):r)?e.const_get_relative(T,"Unit").$new(n(a.number,a.$convert(t,a.type)),a.type):a.$raise(e.const_get_relative(T,"ArgumentError"),t.$type()+" isn't compatible with "+a.type):e.const_get_relative(T,"Unit").$new(n(a.number,t),a.type)},m.$$arity=1),e.defn(M,"$*",g=function(t){var n,a=this;return u(e.const_get_relative(T,"Unit")["$==="](t))?a.type["$=="](t.$type())?e.const_get_relative(T,"Unit").$new(r(a.number,t.$number()),a.type):u(u(n=a["$compatible?"](a))?a["$compatible?"](t):n)?e.const_get_relative(T,"Unit").$new(r(a.number,a.$convert(t,a.type)),a.type):a.$raise(e.const_get_relative(T,"ArgumentError"),t.$type()+" isn't compatible with "+a.type):e.const_get_relative(T,"Unit").$new(r(a.number,t),a.type)},g.$$arity=1),e.defn(M,"$/",b=function(t){var n,r=this;return u(e.const_get_relative(T,"Unit")["$==="](t))?r.type["$=="](t.$type())?e.const_get_relative(T,"Unit").$new(a(r.number,t.$number()),r.type):u(u(n=r["$compatible?"](r))?r["$compatible?"](t):n)?e.const_get_relative(T,"Unit").$new(a(r.number,r.$convert(t,r.type)),r.type):r.$raise(e.const_get_relative(T,"ArgumentError"),t.$type()+" isn't compatible with "+r.type):e.const_get_relative(T,"Unit").$new(a(r.number,t),r.type)},b.$$arity=1),e.defn(M,"$-@",w=function(){var t=this;return e.const_get_relative(T,"Unit").$new(r(t.number,-1),t.type)},w.$$arity=0),e.defn(M,"$+@",k=function(){var t=this;return e.const_get_relative(T,"Unit").$new(t.number,t.type)},k.$$arity=0),e.defn(M,"$to_i",O=function(){return this.number.$to_i()},O.$$arity=0),e.defn(M,"$to_f",q=function(){return this.number.$to_f()},q.$$arity=0),e.defn(M,"$to_u",E=function(){return this},E.$$arity=0),e.defn(M,"$to_s",x=function(){var e=this;return""+e.number+e.type},x.$$arity=0),e.alias(M,"to_str","to_s"),e.alias(M,"inspect","to_s"),M.$private(),e.defn(M,"$compatible?",A=function(t){return e.const_get_relative(T,"COMPATIBLE")["$include?"](t.$type())},A.$$arity=1),e.defn(M,"$convert",S=function(e,t){var n=s,i=s,o=s;return n=e.$number(),e.$type()["$=="](t)?n:(o=e.$type(),i="in"["$==="](o)?r(n,96):"pt"["$==="](o)?a(r(n,4),3):"pc"["$==="](o)?a(r(a(n,12),4),3):"mm"["$==="](o)?r(n,3.77953):"cm"["$==="](o)?r(r(n,10),3.77953):"px"["$==="](o)?n:s,o=t,"in"["$==="](o)?a(i,96):"pt"["$==="](o)?a(a(i,4),3):"pc"["$==="](o)?a(a(r(i,12),4),3):"mm"["$==="](o)?a(i,3.77953):"cm"["$==="](o)?a(a(i,10),3.77953):"px"["$==="](o)?i:s)},S.$$arity=2)})(f[0],0,f)})(f[0],e.const_get_relative(f,"BasicObject"),f)}($[0],0,$),function(t,$super,n){function r(){}var a,i,o=r=c(t,null,"Numeric",r),$=(o.$$proto,[o].concat(n));l(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative($,"Paggio"),"CSS"),"Unit"),"TYPES"),"each",[],((a=function(t){var n,r=a.$$s||this;return null==t&&(t=s),l(r,"define_method",[t],((n=function(){var r=n.$$s||this;return e.const_get_qualified(e.const_get_qualified(e.const_get_relative($,"Paggio"),"CSS"),"Unit").$new(r,t)}).$$s=r,n.$$arity=0,n))}).$$s=o,a.$$arity=1,a)),e.defn(o,"$to_u",i=function(){return this},i.$$arity=0)}($[0],0,$),l([e.const_get_relative($,"Fixnum"),e.const_get_relative($,"Float")],"each",[],((i=function(t){var n,r=i.$$s||this;return null==t&&(t=s),l(t,"class_eval",[],((n=function(){var t,r=n.$$s||this;return e.alias(r,"old_percent","%"),e.def(r,"$%",t=function(t){var n=this;return null==t&&(t=s),u(t)?n.$old_percent(t):e.const_get_qualified(e.const_get_qualified(e.const_get_relative($,"Paggio"),"CSS"),"Unit").$new(n,"%")},t.$$arity=-1),s&&"%"}).$$s=r,n.$$arity=0,n))}).$$s=o,i.$$arity=1,i)),function(t,$super,n){function r(){}var a,i=r=c(t,null,"String",r);i.$$proto,[i].concat(n);e.defn(i,"$to_u",a=function(){var e=s,t=s,n=s;return u(e=this.$match(/^([\d+.]+)(.+)?$/))?(t=e["$[]"](1).$to_f(),u(n=e["$[]"](2))?t.$__send__(n.$downcase()):t):0},a.$$arity=0)}($[0],0,$),function(t,$super,n){function r(){}var a,i=r=c(t,null,"NilClass",r);i.$$proto,[i].concat(n);return e.defn(i,"$to_u",a=function(){return 0},a.$$arity=0),s&&"to_u"}($[0],0,$)},Opal.modules["paggio/css/color"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.send;return e.add_stubs(["$each","$map","$to_proc","$define_method","$new"]),function(t,$super,n){function a(){}var i=a=r(t,null,"Paggio",a),o=(i.$$proto,[i].concat(n));(function(t,$super,n){function a(){}var i=a=r(t,$super,"CSS",a),o=(i.$$proto,[i].concat(n));(function(t,$super,n){function a(){}var i,o=a=r(t,null,"Color",a);o.$$proto,[o].concat(n);e.defn(o,"$initialize",i=function(e,t){var n=this;return n.internal=e,n.type=t},i.$$arity=2)})(o[0],0,o)})(o[0],e.const_get_relative(o,"BasicObject"),o)}(t[0],0,t),function(t,$super,i){function o(){}var $,s=o=r(t,null,"String",o),c=(s.$$proto,[s].concat(i));a(a(["rgb","rgba","hsl","hsla"],"map",[],"to_sym".$to_proc()),"each",[],(($=function(t){var r,i=$.$$s||this;return null==t&&(t=n),a(i,"define_method",[t],((r=function(){var n=r.$$s||this;return e.const_get_qualified(e.const_get_qualified(e.const_get_relative(c,"Paggio"),"CSS"),"Color").$new(n,t)}).$$s=i,r.$$arity=0,r))}).$$s=s,$.$$arity=1,$))}(t[0],0,t),function(t,$super,i){function o(){}var $,s=o=r(t,null,"Array",o),c=(s.$$proto,[s].concat(i));return a(a(["rgb","rgba","hsl","hsla"],"map",[],"to_sym".$to_proc()),"each",[],(($=function(t){var r,i=$.$$s||this;return null==t&&(t=n),a(i,"define_method",[t],((r=function(){var n=r.$$s||this;return e.const_get_qualified(e.const_get_qualified(e.const_get_relative(c,"Paggio"),"CSS"),"Color").$new(n,t)}).$$s=i,r.$$arity=0,r))}).$$s=s,$.$$arity=1,$))}(t[0],0,t)},Opal.modules["paggio/css/definition"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.klass),o=e.truthy,$=e.send,s=e.range,c=e.hash2;return e.add_stubs(["$new","$==","$arity","$instance_exec","$to_proc","$call","$empty?","$each","$inspect","$to_s","$define_method","$a","$===","$first","$>","$length","$raise","$style","$name","$value","$[]","$join","$map","$to_i","$*","$end_with?","$__send__","$<<","$last","$pop","$!","$other","$shift","$horizontal?","$private"]),function(r,$super,l){function u(){}var _=u=i(r,null,"Paggio",u),f=(_.$$proto,[_].concat(l));return function(r,$super,l){function u(){}var _=u=i(r,$super,"CSS",u),f=(_.$$proto,[_].concat(l));return function(r,$super,l){function u(){}var _,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C,I=u=i(r,$super,"Definition",u),D=I.$$proto,H=[I].concat(l);return D.style=D.important=a,e.const_set(H[0],"Style",e.const_get_qualified("::","Struct").$new("name","value","important")),e.defn(I,"$initialize",_=function(){var e=this,t=_.$$p,n=t||a;return t&&(_.$$p=null),e.style=[],o(n)?n.$arity()["$=="](0)?$(e,"instance_exec",[],n.$to_proc()):n.$call(e):a},_.$$arity=0),e.defn(I,"$empty?",f=function(){return this.style["$empty?"]()},f.$$arity=0),e.defn(I,"$each",p=function(){var e=this,t=p.$$p,n=t||a;return t&&(p.$$p=null),$(e.style,"each",[],n.$to_proc())},p.$$arity=0),e.defn(I,"$gradient",d=function(){var t,n=arguments.length,r=n-0;r<0&&(r=0),t=new Array(r);for(var a=0;a<n;a++)t[a-0]=arguments[a];return $(e.const_get_relative(H,"Gradient"),"new",e.to_a(t))},d.$$arity=-1),e.defn(I,"$url",v=function(e){return"url("+e.$to_s().$inspect()+")"},v.$$arity=1),$(["url","blur","brightness","rotate","contrast","grayscale","invert","opacity","saturate","sepia"],"each",[],((h=function(e){var t,n=h.$$s||this;return null==e&&(e=a),$(n,"define_method",[e],((t=function(n){t.$$s;return null==n&&(n=a),e+"("+n+")"}).$$s=n,t.$$arity=1,t))}).$$s=I,h.$$arity=1,h)),e.defn(I,"$rgb",y=function(e,t,n){return"rgb("+e+", "+t+", "+n+", "+this.$a()+")"},y.$$arity=3),e.defn(I,"$rgba",m=function(e,t,n,r){return"rgba("+e+", "+t+", "+n+", "+r+")"},m.$$arity=4),$(["scale","skew","translate"],"each",[],((g=function(e){var t,n=g.$$s||this;return null==e&&(e=a),$(n,"define_method",[e],((t=function(n,r){t.$$s;return null==r&&(r=a),null==n&&(n=a),o(r)?e+"("+n+", "+r+")":e+"("+n+")"}).$$s=n,t.$$arity=-2,t))}).$$s=I,g.$$arity=1,g)),$(["translateX","translateY","translateZ","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY"],"each",[],((b=function(e){var t,n=b.$$s||this;return null==e&&(e=a),$(n,"define_method",[e],((t=function(n){t.$$s;return null==n&&(n=a),e+"("+n+")"}).$$s=n,t.$$arity=1,t))}).$$s=I,b.$$arity=1,b)),e.defn(I,"$background",w=function(){var n,r,i,s=this,c=arguments.length,l=c-0;l<0&&(l=0),i=new Array(l);for(var u=0;u<c;u++)i[u-0]=arguments[u];return o(e.const_get_relative(H,"Gradient")["$==="](i.$first()))?(o(t(i.$length(),1))&&s.$raise(e.const_get_relative(H,"NotImplementedError"),"multiple gradients not implemented yet"),$(i.$first(),"each",[],((n=function(e){var t,r=n.$$s||this;return null==e&&(e=a),r.$style(o(t=e.$name())?t:"background-image",e.$value())}).$$s=s,n.$$arity=1,n))):o(e.const_get_qualified("::","Hash")["$==="](i.$first()))?$(i.$first(),"each",[],((r=function(e,t){var n=r.$$s||this;return null==e&&(e=a),null==t&&(t=a),n.$style("background-"+e,t)}).$$s=s,r.$$arity=2,r)):s.$style("background",i)},w.$$arity=-1),e.defn(I,"$border",k=function(){var t,n,r=this,i=a,s=arguments.length,c=s-0;c<0&&(c=0),n=new Array(c);for(var l=0;l<s;l++)n[l-0]=arguments[l];return o(e.const_get_qualified("::","Hash")["$==="](n.$first()))?(n.$length()["$=="](1)&&(i=n.$first()),$(i,"each",[],((t=function(n,r){var i,s,c,l=t.$$s||this,u=a;return null==n&&(n=a),null==r&&(r=a),u=n,"top"["$==="](u)||"bottom"["$==="](u)||"left"["$==="](u)||"right"["$==="](u)?o(e.const_get_qualified("::","Hash")["$==="](r))?$(r,"each",[],((i=function(e,t){var r=i.$$s||this;return null==e&&(e=a),null==t&&(t=a),r.$style("border-"+n+"-"+e,t)}).$$s=l,i.$$arity=2,i)):l.$style("border-"+n,r):"radius"["$==="](u)?o(e.const_get_qualified("::","Hash")["$==="](r))?$(r,"each",[],((s=function(e,t){var n,r=s.$$s||this;return null==e&&(e=a),null==t&&(t=a),$(t,"each",[],((n=function(t,r){var i=n.$$s||this;return null==t&&(t=a),null==r&&(r=a),i.$style("-moz-border-radius-"+e+t,r),i.$style("-webkit-border-"+e+"-"+t+"-radius",r),i.$style("border-"+e+"-"+t+"-radius",r)}).$$s=r,n.$$arity=2,n))}).$$s=l,s.$$arity=2,s)):(l.$style("-moz-border-radius",r),l.$style("-webkit-border-radius",r),l.$style("border-radius",r)):"color"["$==="](u)?o(e.const_get_qualified("::","Hash")["$==="](r))?$(r,"each",[],((c=function(e,t){var n=c.$$s||this;return null==e&&(e=a),null==t&&(t=a),n.$style("border-"+e+"-color",t)}).$$s=l,c.$$arity=2,c)):l.$style("border-color",r):l.$style("border-"+n,r)}).$$s=r,t.$$arity=2,t))):r.$style("border",n)},k.$$arity=-1),e.defn(I,"$box",O=function(t){var n,r=this;return o(e.const_get_qualified("::","Hash")["$==="](t))?$(t,"each",[],((n=function(t,r){var i,s=n.$$s||this,c=a;return null==t&&(t=a),null==r&&(r=a),c=t,"shadow"["$==="](c)?(o(e.const_get_qualified("::","Array")["$==="](r))&&(r=o(e.const_get_qualified("::","Array")["$==="](r["$[]"](0)))?$(r,"map",[],(i=function(e){return i.$$s,null==e&&(e=a),e.$join(" ")},i.$$s=s,i.$$arity=1,i)).$join(", "):r.$join(" ")),s.$style("-moz-box-shadow",r),s.$style("-webkit-box-shadow",r),s.$style("box-shadow",r)):s.$style("box-"+t,r)}).$$s=r,n.$$arity=2,n)):r.$style("box",t)},O.$$arity=1),e.defn(I,"$opacity",q=function(e){var t=this;return t.$style("opacity",e),t.$style("-moz-opacity",e),t.$style("-ms-filter",'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+n(e,100).$to_i()+')"'),t.$style("filter","alpha(opacity="+n(e,100).$to_i()+")")},q.$$arity=1),e.defn(I,"$animation",E=function(){var t,n,r=this,i=a,s=arguments.length,c=s-0;c<0&&(c=0),n=new Array(c);for(var l=0;l<s;l++)n[l-0]=arguments[l];return o(e.const_get_relative(H,"Hash")["$==="](n.$first()))?(n.$length()["$=="](1)&&(i=n.$first()),$(i,"each",[],((t=function(e,n){var r=t.$$s||this;return null==e&&(e=a),null==n&&(n=a),r.$style("-webkit-animation-"+e,n),r.$style("animation-"+e,n)}).$$s=r,t.$$arity=2,t))):(r.$style("animation",n),r.$style("-webkit-animation",n))},E.$$arity=-1),e.defn(I,"$transition",x=function(){var e,t=this,n=arguments.length,r=n-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<n;a++)e[a-0]=arguments[a];return t.$style("transition",e),t.$style("-webkit-transition",e),t.$style("-moz-transition",e)},x.$$arity=-1),e.defn(I,"$user_select",A=function(){var e,t=this,n=arguments.length,r=n-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<n;a++)e[a-0]=arguments[a];return t.$style("user-select",e),t.$style("-webkit-user-select",e),t.$style("-moz-user-select",e),t.$style("-ms-user-select",e)},A.$$arity=-1),e.defn(I,"$transform",S=function(){var e,t=this,n=arguments.length,r=n-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<n;a++)e[a-0]=arguments[a];return t.$style("transform",e),t.$style("-webkit-transform",e),t.$style("-moz-transform",e),t.$style("-ms-transform",e),t.$style("-o-transform",e)},S.$$arity=-1),e.defn(I,"$filter",M=function(){var e,t=this,n=arguments.length,r=n-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<n;a++)e[a-0]=arguments[a];return t.$style("filter",e),t.$style("-webkit-filter",e),t.$style("-moz-filter",e),t.$style("-ms-filter",e),t.$style("-o-filter",e)},M.$$arity=-1),e.defn(I,"$method_missing",N=function(t){var n,r,i=this,c=N.$$p,l=c||a,u=a,_=arguments.length,f=_-1;f<0&&(f=0),r=new Array(f);for(var p=1;p<_;p++)r[p-1]=arguments[p];return c&&(N.$$p=null),t=t.$to_s(),o(t["$end_with?"]("!"))?(t=t["$[]"](s(0,-2,!1)),i.important=!0,$(i,"__send__",[t].concat(e.to_a(r)),l.$to_proc()),i.important=!1,a):(r.$length()["$=="](1)?(u=r.$first(),o(e.const_get_qualified("::","Hash")["$==="](u))?$(u,"each",[],((n=function(e,r){var i=n.$$s||this;return null==e&&(e=a),null==r&&(r=a),i.$style(t+"-"+e,r)}).$$s=i,n.$$arity=2,n)):i.$style(t,u)):i.$style(t,r.$join(" ")),i.important=!1,i)},N.$$arity=-2),e.defn(I,"$style",T=function(t,n,r){var i=this;return null==n&&(n=a),null==r&&(r=i.important),o(e.const_get_qualified("::","Array")["$==="](n))&&(n=n.$join(" ")),o(e.const_get_relative(H,"Style")["$==="](t))?i.style["$<<"](t):i.style["$<<"](e.const_get_relative(H,"Style").$new(t,n,r))},T.$$arity=-2),e.defn(I,"$style!",C=function(e,t){return null==t&&(t=a),this.$style(e,t,!0)},C.$$arity=-2),function(t,$super,n){function r(){}var s,l,u,_,f,p,d=r=i(t,null,"Gradient",r),v=d.$$proto,h=[d].concat(n);return v.to=v.from=v.start=v.end=a,e.defn(d,"$initialize",s=function(){var t,n,r=this,i=a,$=arguments.length,s=$-0;s<0&&(s=0),n=new Array(s);for(var l=0;l<$;l++)n[l-0]=arguments[l];return i=o(e.const_get_qualified("::","Hash")["$==="](n.$last()))?n.$pop():c([],{}),r.to=i["$[]"]("to"),r.from=i["$[]"]("from"),o(o(t=r.to)?r.from["$!"]():t)?r.from=r.$other(r.to):o(o(t=r.from)?r.to["$!"]():t)&&(r.to=r.$other(r.from)),r.start=n.$shift(),r.end=n.$shift()},s.$$arity=-1),e.defn(d,"$each",l=function(){var e=this,t=l.$$p,n=t||a;return t&&(l.$$p=null),n.$call(e.$style("-moz-linear-gradient("+e.to+", "+e.start+" 0%, "+e.end+" 100%)")),o(e["$horizontal?"]())?n.$call(e.$style("-webkit-gradient(linear, "+e.from+" top, "+e.to+" top, color-stop(0%, "+e.start+"), color-stop(100%, "+e.end+"))")):n.$call(e.$style("-webkit-gradient(linear, left "+e.from+", left "+e.to+", color-stop(0%, "+e.start+"), color-stop(100%, "+e.end+"))")),n.$call(e.$style("-webkit-linear-gradient("+e.to+", "+e.start+" 0%, "+e.end+" 100%)")),n.$call(e.$style("-o-linear-gradient("+e.to+", "+e.start+" 0%, "+e.end+" 100%)")),n.$call(e.$style("-ms-linear-gradient("+e.to+", "+e.start+" 0%, "+e.end+" 100%)")),n.$call(e.$style("linear-gradient(to "+e.to+", "+e.start+" 0%, "+e.end+" 100%)"))},l.$$arity=0),e.defn(d,"$horizontal?",u=function(){var e,t=this;return o(e=t.to["$=="]("left"))?e:t.to["$=="]("right")},u.$$arity=0),e.defn(d,"$vertical?",_=function(){var e,t=this;return o(e=t.to["$=="]("top"))?e:t.to["$=="]("bottom")},_.$$arity=0),d.$private(),e.defn(d,"$other",f=function(e){var t=a;return t=e,"left"["$==="](t)?"right":"right"["$==="](t)?"left":"top"["$==="](t)?"bottom":"bottom"["$==="](t)?"top":a},f.$$arity=1),e.defn(d,"$style",p=function(){var t,n=arguments.length,r=n-0;r<0&&(r=0),t=new Array(r);for(var i=0;i<n;i++)t[i-0]=arguments[i];return t.$length()["$=="](1)?e.const_get_relative(h,"Style").$new(a,t.$first()):$(e.const_get_relative(h,"Style"),"new",e.to_a(t))},p.$$arity=-1),a&&"style"}(H[0],0,H)}(f[0],e.const_get_relative(f,"BasicObject"),f)}(f[0],e.const_get_relative(f,"BasicObject"),f)}(r[0],0,r)},Opal.modules["paggio/css/rule"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.send;return e.add_stubs(["$attr_reader","$new","$__send__","$to_proc"]),function(t,$super,i){function o(){}var $=o=r(t,null,"Paggio",o),s=($.$$proto,[$].concat(i));return function(t,$super,i){function o(){}var $=o=r(t,$super,"CSS",o),s=($.$$proto,[$].concat(i));return function(t,$super,i){function o(){}var $,s,c=o=r(t,$super,"Rule",o),l=c.$$proto,u=[c].concat(i);return l.definition=n,c.$attr_reader("selector","media"),e.defn(c,"$initialize",$=function(t,n){var r=this;return r.selector=t,r.media=n,r.definition=e.const_get_relative(u,"Definition").$new()},$.$$arity=2),e.defn(c,"$method_missing",s=function(){var t,r=this,i=s.$$p,o=i||n,$=arguments.length,c=$-0;c<0&&(c=0),t=new Array(c);for(var l=0;l<$;l++)t[l-0]=arguments[l];return i&&(s.$$p=null),a(r.definition,"__send__",e.to_a(t),o.$to_proc())},s.$$arity=-1),n&&"method_missing"}(s[0],e.const_get_relative(s,"BasicObject"),s)}(s[0],e.const_get_relative(s,"BasicObject"),s)}(t[0],0,t)},Opal.modules["paggio/css/font"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.hash2,i=e.send;return e.add_stubs(["$attr_reader","$new","$font","$__send__","$to_proc"]),function(t,$super,o){function $(){}var s=$=r(t,null,"Paggio",$),c=(s.$$proto,[s].concat(o));return function(t,$super,o){function $(){}var s=$=r(t,$super,"CSS",$),c=(s.$$proto,[s].concat(o));return function(t,$super,o){function $(){}var s,c,l=$=r(t,$super,"Font",$),u=l.$$proto,_=[l].concat(o);return u.definition=n,l.$attr_reader("name"),e.defn(l,"$initialize",s=function(t){var n=this;return n.name=t,n.definition=e.const_get_relative(_,"Definition").$new(),n.$font(a(["family"],{family:t}))},s.$$arity=1),e.defn(l,"$method_missing",c=function(){var t,r=this,a=c.$$p,o=a||n,$=arguments.length,s=$-0;s<0&&(s=0),t=new Array(s);for(var l=0;l<$;l++)t[l-0]=arguments[l];return a&&(c.$$p=null),i(r.definition,"__send__",e.to_a(t),o.$to_proc())},c.$$arity=-1),n&&"method_missing"}(c[0],e.const_get_relative(c,"BasicObject"),c)}(c[0],e.const_get_relative(c,"BasicObject"),c)}(t[0],0,t)},Opal.modules["paggio/css/animation"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.send;return e.add_stubs(["$attr_reader","$new","$__send__","$to_proc","$<<","$call","$%","$last"]),function(t,$super,i){function o(){}var $=o=r(t,null,"Paggio",o),s=($.$$proto,[$].concat(i));return function(t,$super,i){function o(){}var $=o=r(t,$super,"CSS",o),s=($.$$proto,[$].concat(i));return function(t,$super,i){function o(){}var $,s,c,l,u,_=o=r(t,$super,"Animation",o),f=_.$$proto,p=[_].concat(i);return f.steps=n,function(t,$super,i){function o(){}var $,s,c=o=r(t,$super,"Step",o),l=c.$$proto,u=[c].concat(i);l.definition=n,c.$attr_reader("value"),e.defn(c,"$initialize",$=function(t){var n=this;return n.value=t,n.definition=e.const_get_relative(u,"Definition").$new()},$.$$arity=1),e.defn(c,"$method_missing",s=function(){var t,r=this,i=s.$$p,o=i||n,$=arguments.length,c=$-0;c<0&&(c=0),t=new Array(c);for(var l=0;l<$;l++)t[l-0]=arguments[l];return i&&(s.$$p=null),a(r.definition,"__send__",e.to_a(t),o.$to_proc())},s.$$arity=-1)}(p[0],e.const_get_relative(p,"BasicObject"),p),_.$attr_reader("name","steps"),e.defn(_,"$initialize",$=function(e){var t=this;return t.name=e,t.steps=[]},$.$$arity=1),e.defn(_,"$step",s=function(t){var r=this,a=s.$$p,i=a||n;return a&&(s.$$p=null),r.steps["$<<"](e.const_get_relative(p,"Step").$new(t)),i.$call()},s.$$arity=1),e.defn(_,"$from",c=function(){var t=this,r=c.$$p,a=r||n;return r&&(c.$$p=null),t.steps["$<<"](e.const_get_relative(p,"Step").$new((0)["$%"]())),a.$call()},c.$$arity=1),e.defn(_,"$to",l=function(){var t=this,r=l.$$p,a=r||n;return r&&(l.$$p=null),t.steps["$<<"](e.const_get_relative(p,"Step").$new(100["$%"]())),a.$call()},l.$$arity=1),e.defn(_,"$method_missing",u=function(){var t,r=this,i=u.$$p,o=i||n,$=arguments.length,s=$-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<$;c++)t[c-0]=arguments[c];return i&&(u.$$p=null),a(r.steps.$last(),"__send__",e.to_a(t),o.$to_proc())},u.$$arity=-1),n&&"method_missing"}(s[0],e.const_get_relative(s,"BasicObject"),s)}(s[0],e.const_get_relative(s,"BasicObject"),s)}(t[0],0,t)},Opal.modules["paggio/css"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var n=e.top,r=[],a=e.nil,i=(e.breaker,e.slice,e.klass),o=e.send,$=e.truthy,s=e.range;return e.add_stubs(["$require","$each","$start_with?","$+","$[]","$==","$attr_reader","$raise","$arity","$instance_exec","$to_proc","$call","$any?","$include?","$<<","$new","$selector","$pop","$method_missing","$__send__","$last"]),n.$require("paggio/css/unit"),n.$require("paggio/css/color"),n.$require("paggio/css/definition"),n.$require("paggio/css/rule"),n.$require("paggio/css/font"),n.$require("paggio/css/animation"),function(n,$super,r){function c(){}var l=c=i(n,null,"Paggio",c),u=(l.$$proto,[l].concat(r));return function(n,$super,r){function c(){}var l,u,_,f,p,d,v,h=c=i(n,$super,"CSS",c),y=h.$$proto,m=[h].concat(r);y.media=y.current=y.fonts=y.animations=a,e.defs(h,"$selector",l=function(e){var n,r=this,i=a;return i="",o(e,"each",[],((n=function(e){n.$$s;return null==e&&(e=a),i=$(e["$start_with?"]("&"))?t(i,e["$[]"](s(1,-1,!1))):t(i,t(" ",e))}).$$s=r,n.$$arity=1,n)),i["$[]"](0)["$=="](" ")?i["$[]"](s(1,-1,!1)):i},l.$$arity=1),h.$attr_reader("rules","media","fonts","animations"),e.defn(h,"$initialize",u=function(){var t=this,n=u.$$p,r=n||a;return n&&(u.$$p=null),$(r)||e.const_get_qualified("::","Kernel").$raise(e.const_get_qualified("::","ArgumentError"),"no block given"),t.selector=[],t.current=[],t.rules=[],t.fonts=[],t.animations=[],r.$arity()["$=="](0)?o(t,"instance_exec",[],r.$to_proc()):r.$call(t)},u.$$arity=0),e.defn(h,"$rule",_=function(){var t,n,r,i=this,s=_.$$p,c=s||a,l=arguments.length,u=l-0;u<0&&(u=0),r=new Array(u);for(var f=0;f<l;f++)r[f-0]=arguments[f]
;return s&&(_.$$p=null),$(c)?($(o(r,"any?",[],((t=function(e){t.$$s;return null==e&&(e=a),e["$include?"](",")}).$$s=i,t.$$arity=1,t)))&&e.const_get_qualified("::","Kernel").$raise(e.const_get_qualified("::","ArgumentError"),"selectors cannot contain commas"),o(r,"each",[],((n=function(t){var r=n.$$s||this;return null==r.selector&&(r.selector=a),null==r.current&&(r.current=a),null==r.media&&(r.media=a),null==r.rules&&(r.rules=a),null==t&&(t=a),r.selector["$<<"](t),r.current["$<<"](e.const_get_relative(m,"Rule").$new(e.const_get_relative(m,"CSS").$selector(r.selector),r.media)),c.$call(),r.selector.$pop(),r.rules["$<<"](r.current.$pop())}).$$s=i,n.$$arity=1,n))):a},_.$$arity=-1),e.defn(h,"$media",f=function(t){var n,r,i=this,s=f.$$p,c=s||a,l=a,u=arguments.length,_=u-1;_<0&&(_=0),r=new Array(_);for(var p=1;p<u;p++)r[p-1]=arguments[p];return s&&(f.$$p=null),$(c)?(l=(n=[i.media,t])[0],i.media=n[1],c.$call(),i.media=l):o(i,"method_missing",["media",t].concat(e.to_a(r)))},f.$$arity=-2),e.defn(h,"$font",p=function(t){var n,r=this,i=p.$$p,s=i||a,c=arguments.length,l=c-1;l<0&&(l=0),n=new Array(l);for(var u=1;u<c;u++)n[u-1]=arguments[u];return i&&(p.$$p=null),$(s)?(r.current["$<<"](e.const_get_relative(m,"Font").$new(t)),s.$call(),r.fonts["$<<"](r.current.$pop())):o(r,"method_missing",["font",t].concat(e.to_a(n)))},p.$$arity=-2),e.defn(h,"$animation",d=function(t){var n,r=this,i=d.$$p,s=i||a,c=arguments.length,l=c-1;l<0&&(l=0),n=new Array(l);for(var u=1;u<c;u++)n[u-1]=arguments[u];return i&&(d.$$p=null),$(s)?(r.current["$<<"](e.const_get_relative(m,"Animation").$new(t)),s.$call(),r.animations["$<<"](r.current.$pop())):o(r,"method_missing",["animation",t].concat(e.to_a(n)))},d.$$arity=-2),e.defn(h,"$method_missing",v=function(){var t,n=this,r=v.$$p,i=r||a,$=arguments.length,s=$-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<$;c++)t[c-0]=arguments[c];return r&&(v.$$p=null),o(n.current.$last(),"__send__",e.to_a(t),i.$to_proc())},v.$$arity=-1)}(u[0],e.const_get_relative(u,"BasicObject"),u),function(t,$super,n){function r(){}var s,c=r=i(t,$super,"HTML",r),l=c.$$proto,u=[c].concat(n);return l.current=l.roots=a,e.defn(c,"$style",s=function(){var t,n=this,r=s.$$p,i=r||a;return r&&(s.$$p=null),($(t=n.current)?t:n.roots)["$<<"](o(e.const_get_relative(u,"CSS"),"new",[],i.$to_proc()))},s.$$arity=0),a&&"style"}(u[0],e.const_get_relative(u,"BasicObject"),u)}(r[0],0,r)},Opal.modules.stringio=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var i=[],o=e.nil,$=(e.breaker,e.slice,e.klass),s=e.truthy;return e.add_stubs(["$include","$new","$call","$close","$attr_accessor","$length","$include?","$!","$check_readable","$==","$===","$>=","$raise","$>","$+","$-","$seek","$enum_for","$eof?","$ord","$[]","$check_writable","$String","$write","$closed_write?","$closed_read?"]),function(i,$super,c){function l(){}var u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S=l=$(i,$super,"StringIO",l),M=S.$$proto,N=[S].concat(c);return M.position=M.string=M.closed=o,S.$include(e.const_get_qualified(e.const_get_relative(N,"IO"),"Readable")),S.$include(e.const_get_qualified(e.const_get_relative(N,"IO"),"Writable")),e.defs(S,"$open",u=function(e,t){var n=this,r=u.$$p,a=r||o,i=o,$=o;return null==e&&(e=""),null==t&&(t=o),r&&(u.$$p=null),i=n.$new(e,t),$=a.$call(i),i.$close(),$},u.$$arity=-1),S.$attr_accessor("string"),e.defn(S,"$initialize",_=function(e,t){var n,r=this;return null==e&&(e=""),null==t&&(t="rw"),r.string=e,r.position=e.$length(),s(s(n=t["$include?"]("r"))?t["$include?"]("w")["$!"]():n)?r.closed="write":s(s(n=t["$include?"]("w"))?t["$include?"]("r")["$!"]():n)?r.closed="read":o},_.$$arity=-1),e.defn(S,"$eof?",f=function(){var e=this;return e.$check_readable(),e.position["$=="](e.string.$length())},f.$$arity=0),e.alias(S,"eof","eof?"),e.defn(S,"$seek",p=function(i,$){var c=this,l=o;return null==$&&($=e.const_get_qualified(e.const_get_relative(N,"IO"),"SEEK_SET")),l=$,e.const_get_qualified(e.const_get_relative(N,"IO"),"SEEK_SET")["$==="](l)?(s(t(i,0))||c.$raise(e.const_get_qualified(e.const_get_relative(N,"Errno"),"EINVAL")),c.position=i):e.const_get_qualified(e.const_get_relative(N,"IO"),"SEEK_CUR")["$==="](l)?s(n(r(c.position,i),c.string.$length()))?c.position=c.string.$length():c.position=r(c.position,i):e.const_get_qualified(e.const_get_relative(N,"IO"),"SEEK_END")["$==="](l)&&(s(n(i,c.string.$length()))?c.position=0:c.position=a(c.position,i)),0},p.$$arity=-2),e.defn(S,"$tell",d=function(){return this.position},d.$$arity=0),e.alias(S,"pos","tell"),e.alias(S,"pos=","seek"),e.defn(S,"$rewind",v=function(){return this.$seek(0)},v.$$arity=0),e.defn(S,"$each_byte",h=function(){var e=this,t=h.$$p,n=t||o,a=o;if(t&&(h.$$p=null),!s(n))return e.$enum_for("each_byte");for(e.$check_readable(),a=e.position;!s(e["$eof?"]());)n.$call(e.string["$[]"](a).$ord()),a=r(a,1);return e},h.$$arity=0),e.defn(S,"$each_char",y=function(){var e=this,t=y.$$p,n=t||o,a=o;if(t&&(y.$$p=null),!s(n))return e.$enum_for("each_char");for(e.$check_readable(),a=e.position;!s(e["$eof?"]());)n.$call(e.string["$[]"](a)),a=r(a,1);return e},y.$$arity=0),e.defn(S,"$write",m=function(t){var n=this,i=o,$=o;return n.$check_writable(),t=n.$String(t),n.string.$length()["$=="](n.position)?(n.string=r(n.string,t),n.position=r(n.position,t.$length())):(i=n.string["$[]"](e.Range.$new(0,a(n.position,1),!1)),$=n.string["$[]"](e.Range.$new(r(n.position,t.$length()),-1,!1)),n.string=r(r(i,t),$),n.position=r(n.position,t.$length()))},m.$$arity=1),e.defn(S,"$read",g=function(t,n){var a=this,i=o,$=o;return null==t&&(t=o),null==n&&(n=o),a.$check_readable(),s(a["$eof?"]())?o:(i=s(t)?($=a.string["$[]"](a.position,t),a.position=r(a.position,t),$):($=a.string["$[]"](e.Range.$new(a.position,-1,!1)),a.position=a.string.$length(),$),s(n)?n.$write(i):i)},g.$$arity=-1),e.defn(S,"$close",b=function(){return this.closed="both"},b.$$arity=0),e.defn(S,"$close_read",w=function(){var e=this;return e.closed["$=="]("write")?e.closed="both":e.closed="read"},w.$$arity=0),e.defn(S,"$close_write",k=function(){var e=this;return e.closed["$=="]("read")?e.closed="both":e.closed="write"},k.$$arity=0),e.defn(S,"$closed?",O=function(){return this.closed["$=="]("both")},O.$$arity=0),e.defn(S,"$closed_read?",q=function(){var e,t=this;return s(e=t.closed["$=="]("read"))?e:t.closed["$=="]("both")},q.$$arity=0),e.defn(S,"$closed_write?",E=function(){var e,t=this;return s(e=t.closed["$=="]("write"))?e:t.closed["$=="]("both")},E.$$arity=0),e.defn(S,"$check_writable",x=function(){var t=this;return s(t["$closed_write?"]())?t.$raise(e.const_get_relative(N,"IOError"),"not opened for writing"):o},x.$$arity=0),e.defn(S,"$check_readable",A=function(){var t=this;return s(t["$closed_read?"]())?t.$raise(e.const_get_relative(N,"IOError"),"not opened for reading"):o},A.$$arity=0),o&&"check_readable"}(i[0],e.const_get_relative(i,"IO"),i)},Opal.modules["paggio/formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}var a=e.top,i=[],o=e.nil,$=(e.breaker,e.slice,e.klass),s=e.truthy,c=e.hash2,l=e.send;return e.add_stubs(["$require","$[]=","$to_h","$-","$[]","$dup","$deep_merge!","$call","$replace","$===","$new","$merge","$each","$string","$indent?","$+","$lines","$puts","$*","$chomp","$print","$gsub","$to_s","$for","$version","$indent","$format","$instance_eval","$empty?","$map","$escape","$<<","$join","$include?","$downcase","$name","$value","$important","$fonts","$animations","$steps","$reverse","$rules","$media","$selector","$deindent"]),a.$require("stringio"),function(a,$super,i){function u(){}var _,f,p,d,v=u=$(a,null,"Paggio",u),h=(v.$$proto,[v].concat(i));return function(a,$super,i){function u(){}var _,f,p,d,v,h,y,m,g,b,w,k=u=$(a,null,"Formatter",u),O=k.$$proto,q=[k].concat(i);O.options=O.io=o,e.defs(k,"$to_h",_=function(){var e,t=this;return null==t.formatters&&(t.formatters=o),t.formatters=s(e=t.formatters)?e:c([],{})},_.$$arity=0),e.defs(k,"$for",f=function(n){var r=this,a=f.$$p,i=a||o,$=o;return a&&(f.$$p=null),s(i)?($=[n,i],l(r.$to_h(),"[]=",e.to_a($)),$[t($.length,1)]):r.$to_h()["$[]"](n)},f.$$arity=1),e.defs(k,"$options",p=function(t){var n=p.$$p,r=n||o,a=o,i=o;return n&&(p.$$p=null),a=e.const_get_relative(q,"OPTIONS").$dup(),e.const_get_relative(q,"Utils")["$deep_merge!"](e.const_get_relative(q,"OPTIONS"),t),i=r.$call(),e.const_get_relative(q,"OPTIONS").$replace(a),i},p.$$arity=1),e.const_set(q[0],"OPTIONS",c(["indent"],{indent:c(["level","with"],{level:0,"with":"\t"})})),e.defn(k,"$initialize",d=function(t,n){var r,a=this;return null==t&&(t=o),null==n&&(n=c([],{})),s(e.const_get_relative(q,"Hash")["$==="](t))?(a.io=e.const_get_relative(q,"StringIO").$new(),a.options=t):(a.io=s(r=t)?r:e.const_get_relative(q,"StringIO").$new(),a.options=n),a.options=e.const_get_relative(q,"OPTIONS").$merge(a.options)},d.$$arity=-1),e.defn(k,"$format",v=function(t){var n,r=this;return function(){var a=e.new_brk();try{l(e.const_get_relative(q,"Formatter").$to_h(),"each",[],((n=function(r,i){var $=n.$$s||this;if(null==r&&(r=o),null==i&&(i=o),!s(r["$==="](t)))return o;i.$call($,t),e.brk(o,a)}).$$s=r,n.$$brk=a,n.$$arity=2,n))}catch(i){if(i===a)return i.$v;throw i}}(),r},v.$$arity=1),e.defn(k,"$to_s",h=function(){return this.io.$string()},h.$$arity=0),e.defn(k,"$indent?",y=function(){var t=this,n=y.$$p;n&&(y.$$p=null);try{return t.options["$[]"]("indent")["$[]"]("level")}catch(r){if(!e.rescue(r,[e.const_get_relative(q,"StandardError")]))throw r;try{return!1}finally{e.pop_exception()}}},y.$$arity=0),e.defn(k,"$indent",m=function(){var r=this,a=m.$$p,i=a||o,$=o,c=o,u=o,_=o;return a&&(m.$$p=null),s(r["$indent?"]())?s(i)?(c=["level",n(($=r.options["$[]"]("indent"))["$[]"]("level"),1)],l($,"[]=",e.to_a(c)),c[t(c.length,1)],i.$call(),c=["level",t((u=r.options["$[]"]("indent"))["$[]"]("level"),1)],l(u,"[]=",e.to_a(c)),c[t(c.length,1)]):(c=["level",n((_=r.options["$[]"]("indent"))["$[]"]("level"),1)],l(_,"[]=",e.to_a(c)),c[t(c.length,1)]):s(i)?i.$call():o},m.$$arity=0),e.defn(k,"$deindent",g=function(){var n=this,r=o,a=o;return s(n["$indent?"]())?(a=["level",t((r=n.options["$[]"]("indent"))["$[]"]("level"),1)],l(r,"[]=",e.to_a(a)),a[t(a.length,1)]):o},g.$$arity=0),e.defn(k,"$print",b=function(e){var t,n=this,a=o;return s(a=n["$indent?"]())?l(e.$lines(),"each",[],((t=function(e){var n=t.$$s||this;return null==n.io&&(n.io=o),null==n.options&&(n.options=o),null==e&&(e=o),n.io.$puts(""+r(n.options["$[]"]("indent")["$[]"]("with"),a)+e.$chomp())}).$$s=n,t.$$arity=1,t)):n.io.$print(e)},b.$$arity=1),e.defn(k,"$escape",w=function(e){return e.$to_s().$gsub(/["><']|&(?!([a-zA-Z]+|(#\d+));)/,c(["&",">","<",'"',"'"],{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"}))},w.$$arity=1)}(h[0],0,h),l(e.const_get_relative(h,"Formatter"),"for",[e.const_get_relative(h,"HTML")],((_=function(e,t){var n,r=_.$$s||this,a=o;return null==e&&(e=o),null==t&&(t=o),a=t.$version(),5["$==="](a)&&e.$print("<!DOCTYPE html>"),e.$print("<html>"),l(e,"indent",[],((n=function(){var r,a=n.$$s||this;return l(t,"each",[],((r=function(t){r.$$s;return null==t&&(t=o),e.$format(t)}).$$s=a,r.$$arity=1,r))}).$$s=r,n.$$arity=0,n)),e.$print("</html>")}).$$s=v,_.$$arity=2,_)),l(e.const_get_relative(h,"Formatter"),"for",[e.const_get_qualified(e.const_get_relative(h,"HTML"),"Element")],((f=function(t,n){var r,a,i,$,c,u=f.$$s||this,_=o,p=o,d=o,v=o;return null==t&&(t=o),null==n&&(n=o),a=l(n,"instance_eval",[],((i=function(){var e=i.$$s||this;return null==e.name&&(e.name=o),null==e.attributes&&(e.attributes=o),null==e.class_names&&(e.class_names=o),[e.name,e.attributes,e.class_names]}).$$s=u,i.$$arity=0,i)),_=null==(r=e.to_ary(a))[0]?o:r[0],p=null==r[1]?o:r[1],d=null==r[2]?o:r[2],s(s(r=p["$empty?"]())?d["$empty?"]():r)?t.$print("<"+_+">"):(v=l(p,"map",[],(($=function(e,n){$.$$s;return null==e&&(e=o),null==n&&(n=o),t.$escape(e)+'="'+t.$escape(n)+'"'}).$$s=u,$.$$arity=2,$)),s(d["$empty?"]())||v["$<<"]('class="'+t.$escape(d.$join(" "))+'"'),t.$print("<"+_+" "+v.$join(" ")+">")),s(["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]["$include?"](_.$to_s().$downcase()))?o:(l(t,"indent",[],((c=function(){var r,a,i=c.$$s||this,$=o;return s($=l(n,"instance_eval",[],((r=function(){var e=r.$$s||this;return null==e.inner_html&&(e.inner_html=o),e.inner_html}).$$s=i,r.$$arity=0,r)))?t.$print($):l(n,"each",[],((a=function(n){var r,i=a.$$s||this,$=o;return null==n&&(n=o),$=n,e.const_get_relative(h,"String")["$==="]($)?t.$print(t.$escape(n)):e.const_get_relative(h,"CSS")["$==="]($)?(t.$print("<style>"),l(t,"indent",[],((r=function(){return r.$$s,t.$format(n)}).$$s=i,r.$$arity=0,r)),t.$print("</style>")):t.$format(n)}).$$s=i,a.$$arity=1,a))}).$$s=u,c.$$arity=0,c)),t.$print("</"+_+">"))}).$$s=v,f.$$arity=2,f)),l(e.const_get_relative(h,"Formatter"),"for",[e.const_get_qualified(e.const_get_qualified(e.const_get_relative(h,"CSS"),"Definition"),"Style")],((p=function(e,t){p.$$s;return null==e&&(e=o),null==t&&(t=o),e.$print(t.$name()+": "+t.$value()+(s(t.$important())?" !important":o)+";")}).$$s=v,p.$$arity=2,p)),l(e.const_get_relative(h,"Formatter"),"for",[e.const_get_relative(h,"CSS")],((d=function(e,t){var n,r,a,i=d.$$s||this;return null==e&&(e=o),null==t&&(t=o),l(t.$fonts(),"each",[],((n=function(t){var r,a=n.$$s||this;return null==t&&(t=o),e.$print("@font-face {"),l(e,"indent",[],((r=function(){var n,a=r.$$s||this;return l(t,"each",[],((n=function(t){n.$$s;return null==t&&(t=o),e.$format(t)}).$$s=a,n.$$arity=1,n))}).$$s=a,r.$$arity=0,r)),e.$print("}")}).$$s=i,n.$$arity=1,n)),l(t.$animations(),"each",[],((r=function(t){var n,a=r.$$s||this;return null==t&&(t=o),l(["","-webkit-","-moz-","-o-"],"each",[],((n=function(r){var a,i=n.$$s||this;return null==r&&(r=o),e.$print("@"+r+"keyframes "+t.$name()+" {"),l(t.$steps(),"each",[],((a=function(t){var n,r=a.$$s||this;return null==t&&(t=o),e.$print(t.$value()+" {"),l(t,"each",[],((n=function(t){n.$$s;return null==t&&(t=o),e.$format(t)}).$$s=r,n.$$arity=1,n)),e.$print("}")}).$$s=i,a.$$arity=1,a)),e.$print("}")}).$$s=a,n.$$arity=1,n))}).$$s=i,r.$$arity=1,r)),l(t.$rules().$reverse(),"each",[],((a=function(t){var n,r=a.$$s||this,i=o;return null==t&&(t=o),s(t["$empty?"]())?o:(s(i=t.$media())&&(e.$print("@media "+i+" {"),e.$indent()),e.$print(t.$selector()+" {"),l(e,"indent",[],((n=function(){var r,a=n.$$s||this;return l(t,"each",[],((r=function(t){r.$$s;return null==t&&(t=o),e.$format(t)}).$$s=a,r.$$arity=1,r))}).$$s=r,n.$$arity=0,n)),e.$print("}"),s(t.$media())?(e.$print("}"),e.$deindent()):o)}).$$s=i,a.$$arity=1,a))}).$$s=v,d.$$arity=2,d))}(i[0],0,i)},Opal.modules.paggio=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.send,o=e.hash2;return e.add_stubs(["$require","$options","$to_proc","$to_s","$format","$new","$tap","$each"]),t.$require("paggio/utils"),t.$require("paggio/html"),t.$require("paggio/css"),t.$require("paggio/formatter"),function(t,$super,n){function $(){}var s,c,l,u,_,f=$=a(t,null,"Paggio",$),p=(f.$$proto,[f].concat(n));return e.defs(f,"$options",s=function(t){var n=s.$$p,a=n||r;return n&&(s.$$p=null),i(e.const_get_relative(p,"Formatter"),"options",[t],a.$to_proc())},s.$$arity=1),e.defs(f,"$indent",c=function(e){var t=this,n=c.$$p,a=n||r;return n&&(c.$$p=null),i(t,"options",[o(["indent"],{indent:e})],a.$to_proc())},c.$$arity=1),e.defs(f,"$css",l=function(){var t,n=l.$$p,a=n||r,o=arguments.length,$=o-0;$<0&&($=0),t=new Array($);for(var s=0;s<o;s++)t[s-0]=arguments[s];return n&&(l.$$p=null),e.const_get_relative(p,"Formatter").$new().$format(i(e.const_get_relative(p,"CSS"),"new",e.to_a(t),a.$to_proc())).$to_s()},l.$$arity=-1),e.defs(f,"$html",u=function(){var t,n=u.$$p,a=n||r,o=arguments.length,$=o-0;$<0&&($=0),t=new Array($);for(var s=0;s<o;s++)t[s-0]=arguments[s];return n&&(u.$$p=null),e.const_get_relative(p,"Formatter").$new().$format(i(e.const_get_relative(p,"HTML"),"new",e.to_a(t),a.$to_proc())).$to_s()},u.$$arity=-1),e.defs(f,"$html!",_=function(){var t,n=this,a=_.$$p,o=a||r;return a&&(_.$$p=null),i(e.const_get_relative(p,"Formatter").$new(),"tap",[],(t=function(n){var a,$=t.$$s||this;return null==n&&(n=r),i(i(e.const_get_relative(p,"HTML"),"new",[],o.$to_proc()),"each",[],((a=function(e){a.$$s;return null==e&&(e=r),n.$format(e)}).$$s=$,a.$$arity=1,a))},t.$$s=n,t.$$arity=1,t)).$to_s()},_.$$arity=0)}(n[0],0,n)},Opal.modules["browser/version"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module);return function(t,r){var a=n(t,"Browser"),i=(a.$$proto,[a].concat(r));e.const_set(i[0],"VERSION","0.2.0")}(t[0],t)},Opal.modules["browser/utils"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.send;return e.add_stubs(["$new","$encode_uri","$to_s","$encode_uri_component","$[]","$map","$split","$decode_uri_component","$join"]),function(t,n){var a=r(t,"Browser"),i=(a.$$proto,[a].concat(n));e.const_set(i[0],"Size",e.const_get_relative(i,"Struct").$new("width","height")),e.const_set(i[0],"Position",e.const_get_relative(i,"Struct").$new("x","y"))}(t[0],t),function(t,$super,n){function r(){}var i,o,$=r=a(t,null,"Object",r);$.$$proto,[$].concat(n);e.defn($,"$encode_uri",i=function(){return this.$to_s().$encode_uri()},i.$$arity=0),e.defn($,"$encode_uri_component",o=function(){return this.$to_s().$encode_uri_component()},o.$$arity=0)}(t[0],0,t),function(t,$super,n){function r(){}var i,o,$,s,c=r=a(t,null,"String",r);c.$$proto,[c].concat(n);e.defn(c,"$encode_uri_component",i=function(){return encodeURIComponent(this)},i.$$arity=0),e.defn(c,"$encode_uri",o=function(){return encodeURI(this)},o.$$arity=0),e.defn(c,"$decode_uri_component",$=function(){return decodeURIComponent(this)},$.$$arity=0),e.defn(c,"$decode_uri",s=function(){return decodeURI(this)},s.$$arity=0)}(t[0],0,t),function(t,$super,r){function o(){}var $,s,c=o=a(t,null,"Hash",o);c.$$proto,[c].concat(r);return e.defs(c,"$decode_uri",$=function(t){var r,a=this;return a["$[]"](i(t.$split("&"),"map",[],((r=function(t){r.$$s;var a,i,o=n,$=n;return null==t&&(t=n),i=t.$split("="),o=null==(a=e.to_ary(i))[0]?n:a[0],$=null==a[1]?n:a[1],[o.$decode_uri_component(),$.$decode_uri_component()]}).$$s=a,r.$$arity=1,r)))},$.$$arity=1),e.defn(c,"$encode_uri",s=function(){var e,t=this;return i(t,"map",[],(e=function(t,r){e.$$s;return null==t&&(t=n),null==r&&(r=n),t.$to_s().$encode_uri_component()+"="+r.$to_s().$encode_uri_component()},e.$$s=t,e.$$arity=2,e)).$join("&")},s.$$arity=0),n&&"encode_uri"}(t[0],0,t)},Opal.modules["browser/support"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.truthy,i=e.gvars;return e.add_stubs(["$downcase","$===","$!","$supports?"]),e.const_set(t[0],"BROWSER_ENGINE",function(){try{return/MSIE|WebKit|Presto|Gecko/.exec(navigator.userAgent)[0].$downcase()}catch(n){if(!e.rescue(n,[e.const_get_relative(t,"StandardError")]))throw n;try{return"unknown"}finally{e.pop_exception()}}}()),function(t,o){var $,s,c=r(t,"Browser"),l=(c.$$proto,[c].concat(o));c.support={},e.defs(c,"$supports?",$=function(t){var r,o=this,$=n,s=n;return null==o.support&&(o.support=n),a("undefined"!=typeof o.support[t])?o.support[t]:($=function(){if(s=t,"MutationObserver"["$==="](s))return"undefined"!=typeof window.MutationObserver;if("WebSocket"["$==="](s))return"undefined"!=typeof window.WebSocket;if("EventSource"["$==="](s))return"undefined"!=typeof window.EventSource;if("XHR"["$==="](s))return"undefined"!=typeof window.XMLHttpRequest;if("ActiveX"["$==="](s))return"undefined"!=typeof window.ActiveXObject;if("WebSQL"["$==="](s))return"undefined"!=typeof window.openDatabase;if("Query.css"["$==="](s))return"undefined"!=typeof document.querySelectorAll;if("Query.xpath"["$==="](s))return"undefined"!=typeof document.evaluate;if("Storage.local"["$==="](s))return"undefined"!=typeof window.localStorage;if("Storage.global"["$==="](s))return"undefined"!=typeof window.globalStorage;if("Storage.session"["$==="](s))return"undefined"!=typeof window.sessionStorage;if("Immediate"["$==="](s))return"undefined"!=typeof window.setImmediate;if("Immediate (Internet Explorer)"["$==="](s))return"undefined"!=typeof window.msSetImmediate;if("Immediate (Firefox)"["$==="](s))return"undefined"!=typeof window.mozSetImmediate;if("Immediate (Opera)"["$==="](s))return"undefined"!=typeof window.oSetImmediate;if("Immediate (Chrome)"["$==="](s)||"setImmediate (Safari)"["$==="](s))return"undefined"!=typeof window.webkitSetImmediate;if("CSS.computed"["$==="](s))return"undefined"!=typeof window.getComputedStyle;if("CSS.current"["$==="](s))return"undefined"!=typeof document.documentElement.currentStyle;if("Window.send"["$==="](s))return"undefined"!=typeof window.postMessage;if("Window.send (Asynchronous)"["$==="](s)){if(a(a(r="undefined"!=typeof window.postMessage)?("undefined"!=typeof window.importScripts)["$!"]():r)){var $=!0,c=window.onmessage;return window.onmessage=function(){$=!1},window.postMessage("","*"),window.onmessage=c,$}return n}if("Window.send (Synchronous)"["$==="](s))return o["$supports?"]("Window.send (Asynchronous)")["$!"]();if("Window.innerSize"["$==="](s))return"undefined"!=typeof window.innerHeight;if("Window.outerSize"["$==="](s))return"undefined"!=typeof window.outerHeight;if("Window.scroll"["$==="](s))return"undefined"!=typeof document.documentElement.scrollLeft;if("Window.pageOffset"["$==="](s))return"undefined"!=typeof window.pageXOffset;var u,_;if("Attr.isId"["$==="](s))return(u=document.createElement("div")).setAttribute("id","xxxxxxxxxxxxx"),"undefined"!=typeof u.attributes.id.isId;if("Element.addBehavior"["$==="](s))return"undefined"!=typeof document.documentElement.addBehavior;if("Element.className"["$==="](s))return(u=document.createElement("div")).setAttribute("className","x"),"x"===u.className;if("Element.class"["$==="](s))return(u=document.createElement("div")).setAttribute("class","x"),"x"===u.className;if("Element.for"["$==="](s))return(_=document.createElement("label")).setAttribute("for","x"),"x"===_.htmlFor;if("Element.htmlFor"["$==="](s))return(_=document.createElement("label")).setAttribute("htmlFor","x"),"x"===_.htmlFor;if("Element.clientSize"["$==="](s))return"undefined"!=typeof document.documentElement.clientHeight;if("Element.scroll"["$==="](s))return"undefined"!=typeof document.documentElement.scrollLeft;if("Element.textContent"["$==="](s))return"undefined"!=typeof document.documentElement.textContent;if("Element.innerText"["$==="](s))return"undefined"!=typeof document.documentElement.innerText;if("Element.matches"["$==="](s))return"undefined"!=typeof document.documentElement.matches;if("Element.matches (Internet Explorer)"["$==="](s))return"undefined"!=typeof document.documentElement.msMatchesSelector;if("Element.matches (Firefox)"["$==="](s))return"undefined"!=typeof document.documentElement.mozMatchesSelector;if("Element.matches (Opera)"["$==="](s))return"undefined"!=typeof document.documentElement.oMatchesSelector;if("Element.matches (Chrome)"["$==="](s)||"Element.matches (Safari)"["$==="](s))return"undefined"!=typeof document.documentElement.webkitMatchesSelector;if("Element.getBoundingClientRect"["$==="](s))return"undefined"!=typeof document.documentElement.getBoundingClientRect;if("Event.readystatechange"["$==="](s))return"onreadystatechange"in window.document.createElement("script");if(!"Event.constructor"["$==="](s))return"Event.create"["$==="](s)?"undefined"!=typeof document.createEvent:"Event.createObject"["$==="](s)?"undefined"!=typeof document.createEventObject:"Event.addListener"["$==="](s)?"undefined"!=typeof document.addEventListener:"Event.attach"["$==="](s)?"undefined"!=typeof document.attachEvent:"Event.removeListener"["$==="](s)?"undefined"!=typeof document.removeEventListener:"Event.detach"["$==="](s)?"undefined"!=typeof document.detachEvent:"Event.dispatch"["$==="](s)?"undefined"!=typeof document.dispatchEvent:"Event.fire"["$==="](s)?"undefined"!=typeof document.fireEvent:/^Event\.([A-Z].*?)$/["$==="](s)?((r=i["~"])===n?n:r["$[]"](1))+"Event"in window:"Document.view"["$==="](s)?"undefined"!=typeof document.defaultView:"Document.window"["$==="](s)?"undefined"!=typeof document.parentWindow:"History"["$==="](s)?"undefined"!=typeof window.history.pushState:"History.state"["$==="](s)?"undefined"!=typeof window.history.state:"Animation.request"["$==="](s)?"undefined"!=typeof window.requestAnimationFrame:"Animation.request (Internet Explorer)"["$==="](s)?"undefined"!=typeof window.msRequestAnimationFrame:"Animation.request (Firefox)"["$==="](s)?"undefined"!=typeof window.mozRequestAnimationFrame:"Animation.request (Opera)"["$==="](s)?"undefined"!=typeof window.oRequestAnimationFrame:"Animation.request (Chrome)"["$==="](s)||"Animation.request (Safari)"["$==="](s)?"undefined"!=typeof window.webkitRequestAnimationFrame:"Animation.cancel"["$==="](s)?"undefined"!=typeof window.cancelAnimationFrame:"Animation.cancel (Internet Explorer)"["$==="](s)?"undefined"!=typeof window.msCancelAnimationFrame:"Animation.cancel (Firefox)"["$==="](s)?"undefined"!=typeof window.mozCancelAnimationFrame:"Animation.cancel (Opera)"["$==="](s)?"undefined"!=typeof window.oCancelAnimationFrame:"Animation.cancel (Chrome)"["$==="](s)||"Animation.cancel (Safari)"["$==="](s)?"undefined"!=typeof window.webkitCancelAnimationFrame:"Animation.cancelRequest"["$==="](s)?"undefined"!=typeof window.cancelRequestAnimationFrame:"Animation.cancelRequest (Internet Explorer)"["$==="](s)?"undefined"!=typeof window.msCancelRequestAnimationFrame:"Animation.cancelRequest (Firefox)"["$==="](s)?"undefined"!=typeof window.mozCancelRequestAnimationFrame:"Animation.cancelRequest (Opera)"["$==="](s)?"undefined"!=typeof window.oCancelRequestAnimationFrame:"Animation.cancelRequest (Chrome)"["$==="](s)||"Animation.cancelRequest (Safari)"["$==="](s)?"undefined"!=typeof window.webkitCancelRequestAnimationFrame:n;try{return new MouseEvent("click"),!0}catch(f){if(!e.rescue(f,[e.const_get_relative(l,"StandardError")]))throw f;try{return!1}finally{e.pop_exception()}}}(),o.support[t]=$)},$.$$arity=1),e.defs(c,"$loaded?",s=function(e){var t=n;return t=e,"Sizzle"["$==="](t)?"undefined"!=typeof window.Sizzle:"wicked-good-xpath"["$==="](t)?"undefined"!=typeof window.wgxpath:n},s.$$arity=1)}(t[0],t)},Opal.modules["browser/event/base"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send,$=e.truthy,s=e.hash2;return e.add_stubs(["$include","$call","$to_n","$<<","$converters","$native?","$each","$instance_eval","$register","$to_proc","$attr_reader","$lambda","$new","$stopped?","$arguments","$!","$prevented?","$class_for","$off","$target","$[]","$delegated","$delete","$last","$empty?","$first","$raise","$name_for","$handlers","$[]=","$-","$include?","$on!","$delegate","$callback=","$on","$handlers=","$push","$callbacks","$attach","$attach!","$supports?","$name","$==","$event","$===","$warn","$detach","$gsub","$delete_if","$=~","$clear","$none?","$is_a?","$create","$dispatch","$trigger","$bubbles=","$private","$nil?","$dup","$on=","$parent"]),function(n,c){var l=a(n,"Browser"),u=(l.$$proto,[l].concat(c));!function(n,$super,c){function l(){}var u=l=i(n,null,"Event",l),_=(u.$$proto,[u].concat(c));u.$include(e.const_get_relative(_,"Native")),function(t,$super,n){function a(){}var s,c,l,u=a=i(t,null,"Definition",a),_=u.$$proto,f=[u].concat(n);_.native=r,u.$include(e.const_get_relative(f,"Native")),e.defs(u,"$new",s=function(){var t=this,n=s.$$p,i=n||r,c=r;return n&&(s.$$p=null),c=o(t,e.find_super_dispatcher(t,"new",s,!1,a),[{bubbles:!0,cancelable:!0}],null),$(i)&&i.$call(c),c.$to_n()},s.$$arity=0),e.defn(u,"$bubbles=",c=function(e){return this.native.bubbles=e},c.$$arity=1),e.defn(u,"$cancelable=",l=function(e){return this.native.cancelable=e},l.$$arity=1)}(_[0],0,_),function(n,c){var l,u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C,I=a(n,"Target"),D=(I.$$proto,[I].concat(c));e.defs(I,"$converters",l=function(){var e,t=this;return null==t.converters&&(t.converters=r),t.converters=$(e=t.converters)?e:[]},l.$$arity=0),e.defs(I,"$register",u=function(){var e=this,t=u.$$p,n=t||r;return t&&(u.$$p=null),e.$converters()["$<<"](n)},u.$$arity=0),e.defs(I,"$convert",_=function(t){try{var n,a=this;return $(a["$native?"](t))?(o(a.$converters(),"each",[],((n=function(a){n.$$s;var i=r;if(null==a&&(a=r),!$(i=a.$call(t)))return r;e.ret(i)}).$$s=a,n.$$arity=1,n)),r):t}catch(i){if(i===e.returner)return i.$v;throw i}},_.$$arity=1),e.defs(I,"$included",f=function(t){var n,a=this;return o(t,"instance_eval",[],((n=function(){var t,a=n.$$s||this;return e.defs(a,"$target",t=function(){var n=t.$$p,a=n||r;return n&&(t.$$p=null),o(e.const_get_qualified(e.const_get_relative(D,"Event"),"Target"),"register",[],a.$to_proc())},t.$$arity=0)}).$$s=a,n.$$arity=0,n))},f.$$arity=1),function(t,$super,n){function a(){}var s,c,l,u,_,f=a=i(t,null,"Callback",a),p=f.$$proto,d=[f].concat(n);p.proc=p.name=r,f.$attr_reader("target","name","selector"),e.defn(f,"$initialize",s=function(e,t,n){var a=this,i=s.$$p,o=i||r;return null==n&&(n=r),i&&(s.$$p=null),a.target=e,a.name=t,a.selector=n,a.block=o},s.$$arity=-3),e.defn(f,"$call",c=function(e){return this.$to_proc().$call(e)},c.$$arity=1),e.defn(f,"$to_proc",l=function(){var t,n,a=this;return a.proc=$(t=a.proc)?t:o(a,"lambda",[],((n=function(t){var a=n.$$s||this;return null==a.block&&(a.block=r),null==t&&(t=r),t.currentTarget||(t.currentTarget=a.target.native),t=e.const_get_relative(d,"Event").$new(t,a),$(t["$stopped?"]())||o(a.block,"call",[t].concat(e.to_a(t.$arguments()))),t["$prevented?"]()["$!"]()}).$$s=a,n.$$arity=1,n))},l.$$arity=0),e.defn(f,"$event",u=function(){var t=this;return e.const_get_relative(d,"Event").$class_for(t.name)},u.$$arity=0),e.defn(f,"$off",_=function(){var e=this;return e.$target().$off(e)},_.$$arity=0)}(D[0],0,D),function(t,$super,n){function a(){}var o,s,c=a=i(t,null,"Delegate",a),l=c.$$proto;[c].concat(n);l.target=l.name=l.pair=r,e.defn(c,"$initialize",o=function(e,t,n){var r=this;return r.target=e,r.name=t,r.pair=n},o.$$arity=3),e.defn(c,"$off",s=function(){var e=this,t=r;return(t=e.target.$delegated()["$[]"](e.name)).$last().$delete(e.pair),$(t.$last()["$empty?"]())?(t.$first().$off(),t.$delete(e.name)):r},s.$$arity=0)}(D[0],0,D),e.const_set(D[0],"Delegates",e.const_get_relative(D,"Struct").$new("callback","handlers")),e.defn(I,"$on",p=function(n,a){var i,s,c=this,l=p.$$p,u=l||r,_=r,f=r,d=r,v=r;return null==a&&(a=r),l&&(p.$$p=null),$(u)||c.$raise(e.const_get_relative(D,"ArgumentError"),"no block has been given"),n=e.const_get_relative(D,"Event").$name_for(n),$(a)?$(_=c.$delegated()["$[]"](n))?(f=[a,u],_.$handlers()["$<<"](f),e.const_get_relative(D,"Delegate").$new(c,n,f)):(d=[n,e.const_get_relative(D,"Delegates").$new()],o(c.$delegated(),"[]=",e.to_a(d)),_=d[t(d.length,1)],$(["blur","focus"]["$include?"](n))?(d=[o(c,"on!",[n],(i=function(e){var t=i.$$s||this;return null==e&&(e=r),t.$delegate(_,e)},i.$$s=c,i.$$arity=1,i))],o(_,"callback=",e.to_a(d)),d[t(d.length,1)]):(d=[o(c,"on",[n],(s=function(e){var t=s.$$s||this;return null==e&&(e=r),t.$delegate(_,e)},s.$$s=c,s.$$arity=1,s))],o(_,"callback=",e.to_a(d)),d[t(d.length,1)]),d=[[f=[a,u]]],o(_,"handlers=",e.to_a(d)),d[t(d.length,1)],e.const_get_relative(D,"Delegate").$new(c,n,f)):(v=o(e.const_get_relative(D,"Callback"),"new",[c,n,a],u.$to_proc()),c.$callbacks().$push(v),c.$attach(v))},p.$$arity=-2),e.defn(I,"$on!",d=function(t){var n=this,a=d.$$p,i=a||r,s=r;return a&&(d.$$p=null),$(i)||n.$raise(e.const_get_relative(D,"ArgumentError"),"no block has been given"),t=e.const_get_relative(D,"Event").$name_for(t),s=o(e.const_get_relative(D,"Callback"),"new",[n,t],i.$to_proc()),n.$callbacks().$push(s),n["$attach!"](s)},d.$$arity=1),$(e.const_get_relative(D,"Browser")["$supports?"]("Event.addListener"))?(e.defn(I,"$attach",v=function(e){var t=this;return null==t.native&&(t.native=r),t.native.addEventListener(e.$name(),e.$to_proc()),e},v.$$arity=1),e.defn(I,"$attach!",h=function(e){var t=this;return null==t.native&&(t.native=r),t.native.addEventListener(e.$name(),e.$to_proc(),!0),e},h.$$arity=1)):$(e.const_get_relative(D,"Browser")["$supports?"]("Event.attach"))?(e.defn(I,"$attach",y=function(t){var n=this;return null==n.native&&(n.native=r),t.$event()["$=="](e.const_get_relative(D,"Custom"))?n.native.$custom||(n.native.$custom=function(t){for(var r=0,a=n.native.$callbacks.length;r<a;r++){var i=n.native.$callbacks[r]
;i.$event()["$=="](e.const_get_relative(D,"Custom"))&&(t.type=i.name,i.$call(t))}},n.native.attachEvent("ondataavailable",n.native.$custom)):n.native.attachEvent("on"+t.$name(),t.$to_proc()),t},y.$$arity=1),e.defn(I,"$attach!",m=function(e){var t=this,n=r;return null==t.native&&(t.native=r),n=e.$name(),"blur"["$==="](n)?t.native.attachEvent("onfocusout",e.$to_proc()):"focus"["$==="](n)?t.native.attachEvent("onfocusin",e.$to_proc()):(t.$warn("attach: capture doesn't work on this browser"),t.$attach(e)),e},m.$$arity=1)):(e.defn(I,"$attach",g=function(){return this.$raise(e.const_get_relative(D,"NotImplementedError"))},g.$$arity=-1),e.defn(I,"$attach!",b=function(){return this.$raise(e.const_get_relative(D,"NotImplementedError"))},b.$$arity=-1)),e.defn(I,"$off",w=function(t){var n,a,i,s,c=this,l=r;return null==t&&(t=r),l=t,e.const_get_relative(D,"Callback")["$==="](l)?(c.$callbacks().$delete(t),c.$detach(t)):e.const_get_relative(D,"String")["$==="](l)?$($(n=t["$include?"]("*"))?n:t["$include?"]("?"))?c.$off(e.const_get_relative(D,"Regexp").$new(t.$gsub(/\*/,".*?").$gsub(/\?/,"."))):(t=e.const_get_relative(D,"Event").$name_for(t),o(c.$callbacks(),"delete_if",[],((a=function(e){var n=a.$$s||this;return null==e&&(e=r),e.$name()["$=="](t)?(n.$detach(e),!0):r}).$$s=c,a.$$arity=1,a))):e.const_get_relative(D,"Regexp")["$==="](l)?o(c.$callbacks(),"delete_if",[],((i=function(e){var n=i.$$s||this;return null==e&&(e=r),$(e.$name()["$=~"](t))?(n.$detach(e),!0):r}).$$s=c,i.$$arity=1,i)):(o(c.$callbacks(),"each",[],((s=function(e){var t=s.$$s||this;return null==e&&(e=r),t.$detach(e)}).$$s=c,s.$$arity=1,s)),c.$callbacks().$clear())},w.$$arity=-1),$(e.const_get_relative(D,"Browser")["$supports?"]("Event.removeListener"))?e.defn(I,"$detach",k=function(e){var t=this;return null==t.native&&(t.native=r),t.native.removeEventListener(e.$name(),e.$to_proc(),!1)},k.$$arity=1):$(e.const_get_relative(D,"Browser")["$supports?"]("Event.detach"))?e.defn(I,"$detach",O=function(t){var n,a=this;return null==a.native&&(a.native=r),t.$event()["$=="](e.const_get_relative(D,"Custom"))?$(o(a.$callbacks(),"none?",[],((n=function(t){n.$$s;return null==t&&(t=r),t.$event()["$=="](e.const_get_relative(D,"Custom"))}).$$s=a,n.$$arity=1,n)))?(a.native.detachEvent("ondataavailable",a.native.$custom),void delete a.native.$custom):r:a.native.detachEvent("on"+t.$name(),t.$to_proc())},O.$$arity=1):e.defn(I,"$detach",q=function(){return this.$raise(e.const_get_relative(D,"NotImplementedError"))},q.$$arity=1),e.defn(I,"$trigger",E=function(t){var n,a=this,i=E.$$p,s=i||r,c=arguments.length,l=c-1;l<0&&(l=0),n=new Array(l);for(var u=1;u<c;u++)n[u-1]=arguments[u];return i&&(E.$$p=null),$(t["$is_a?"](e.const_get_relative(D,"String")))&&(t=o(e.const_get_relative(D,"Event"),"create",[t].concat(e.to_a(n)),s.$to_proc())),a.$dispatch(t)},E.$$arity=-2),e.defn(I,"$trigger!",x=function(n){var a,i,s=this,c=x.$$p,l=c||r,u=arguments.length,_=u-1;_<0&&(_=0),i=new Array(_);for(var f=1;f<u;f++)i[f-1]=arguments[f];return c&&(x.$$p=null),o(s,"trigger",[n].concat(e.to_a(i)),((a=function(n){a.$$s;var i=r;return null==n&&(n=r),$(l)&&l.$call(n),i=[!1],o(n,"bubbles=",e.to_a(i)),i[t(i.length,1)]}).$$s=s,a.$$arity=1,a))},x.$$arity=-2),$(e.const_get_relative(D,"Browser")["$supports?"]("Event.dispatch"))?e.defn(I,"$dispatch",A=function(e){var t=this;return null==t.native&&(t.native=r),t.native.dispatchEvent(e.$to_n())},A.$$arity=1):$(e.const_get_relative(D,"Browser")["$supports?"]("Event.fire"))?e.defn(I,"$dispatch",S=function(t){var n=this;return null==n.native&&(n.native=r),$(e.const_get_relative(D,"Custom")["$==="](t))?n.native.fireEvent("ondataavailable",t.$to_n()):n.native.fireEvent("on"+t.$name(),t.$to_n())},S.$$arity=1):e.defn(I,"$dispatch",M=function(){return this.$raise(e.const_get_relative(D,"NotImplementedError"))},M.$$arity=-1),I.$private(),e.defn(I,"$callbacks",N=function(){var e=this;return null==e.native&&(e.native=r),e.native.$callbacks||(e.native.$callbacks=[]),e.native.$callbacks},N.$$arity=0),e.defn(I,"$delegated",T=function(){var e=this;return null==e.native&&(e.native=r),e.native.$delegated||(e.native.$delegated=s([],{})),e.native.$delegated},T.$$arity=0),e.defn(I,"$delegate",C=function(n,a,i){var s,c,l=this;return null==i&&(i=a.$target()),$($(s=i["$nil?"]())?s:i["$=="](a.$on()))?r:(o(n.$handlers(),"each",[],((c=function(n,s){c.$$s;var l=r,u=r;return null==n&&(n=r),null==s&&(s=r),$(i["$=~"](n))?(l=a.$dup(),u=[i],o(l,"on=",e.to_a(u)),u[t(u.length,1)],o(s,"call",[l].concat(e.to_a(l.$arguments())))):r}).$$s=l,c.$$arity=2,c)),l.$delegate(n,a,i.$parent()))},C.$$arity=-3)}(_[0],_)}(u[0],0,u)}(n[0],n)},Opal.modules["browser/event/ui"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l=o=a(t,$super,"UI",o),u=(l.$$proto,[l].concat(r));e.defs(l,"$supported?",$=function(){return e.const_get_relative(u,"Browser")["$supports?"]("Event.UI")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s=i=a(t,$super,"Definition",i),c=s.$$proto;[s].concat(r);c.native=n,e.defn(s,"$detail=",o=function(e){return this.native.detail=e},o.$$arity=1),e.defn(s,"$view=",$=function(e){return this.native.view=e},$.$$arity=1)}(u[0],e.const_get_relative(u,"Definition"),u),i(l["$supported?"]())&&(i(e.const_get_relative(u,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new UIEvent(e,t)},s.$$arity=2):i(e.const_get_relative(u,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",c=function(e,t){var n=document.createEvent("UIEvent");return n.initUIEvent(e,t.bubbles,t.cancelable,t.view||window,t.detail||0),n},c.$$arity=2)),l.$alias_native("detail"),l.$alias_native("view")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/mouse"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.gvars,o=e.truthy;return e.add_stubs(["$!","$nil?","$[]","$include","$new","$try_convert","$supported?","$supports?","$alias_native","$x","$screen","$y","$DOM","$==","$downcase","$name"]),function(t,$){var s=r(t,"Browser"),c=(s.$$proto,[s].concat($));!function(t,$super,r){function $(){}var s=$=a(t,null,"Event",$),c=(s.$$proto,[s].concat(r));(function(t,$super,r){function $(){}var s,c,l,u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T=$=a(t,$super,"Mouse",$),C=T.$$proto,I=[T].concat(r);C.native=n,e.defs(T,"$supported?",s=function(){return null==i.$&&(i.$=n),i.$["$[]"]("MouseEvent")["$nil?"]()["$!"]()},s.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c,l,u,_,f,p,d,v,h,y,m,g,b=i=a(t,$super,"Definition",i),w=b.$$proto,k=[b].concat(r);w.native=n,function(t,$super,r){function i(){}var o,$,s=i=a(t,null,"Client",i),c=s.$$proto,l=[s].concat(r);c.native=n,s.$include(e.const_get_relative(l,"Native")),e.defn(s,"$x=",o=function(e){return this.native.clientX=e},o.$$arity=1),e.defn(s,"$y=",$=function(e){return this.native.clientY=e},$.$$arity=1)}(k[0],0,k),function(t,$super,r){function i(){}var o,$,s=i=a(t,null,"Layer",i),c=s.$$proto,l=[s].concat(r);c.native=n,s.$include(e.const_get_relative(l,"Native")),e.defn(s,"$x=",o=function(e){return this.native.layerX=e},o.$$arity=1),e.defn(s,"$y=",$=function(e){return this.native.layerY=e},$.$$arity=1)}(k[0],0,k),function(t,$super,r){function i(){}var o,$,s=i=a(t,null,"Offset",i),c=s.$$proto,l=[s].concat(r);c.native=n,s.$include(e.const_get_relative(l,"Native")),e.defn(s,"$x=",o=function(e){return this.native.offsetX=e},o.$$arity=1),e.defn(s,"$y=",$=function(e){return this.native.offsetY=e},$.$$arity=1)}(k[0],0,k),function(t,$super,r){function i(){}var o,$,s=i=a(t,null,"Page",i),c=s.$$proto,l=[s].concat(r);c.native=n,s.$include(e.const_get_relative(l,"Native")),e.defn(s,"$x=",o=function(e){return this.native.pageX=e},o.$$arity=1),e.defn(s,"$y=",$=function(e){return this.native.pageY=e},$.$$arity=1)}(k[0],0,k),function(t,$super,r){function i(){}var o,$,s=i=a(t,null,"Screen",i),c=s.$$proto,l=[s].concat(r);c.native=n,s.$include(e.const_get_relative(l,"Native")),e.defn(s,"$x=",o=function(e){return this.native.screenX=e},o.$$arity=1),e.defn(s,"$y=",$=function(e){return this.native.screenY=e},$.$$arity=1)}(k[0],0,k),function(t,$super,r){function i(){}var o,$,s=i=a(t,null,"Ancestor",i),c=s.$$proto,l=[s].concat(r);c.native=n,s.$include(e.const_get_relative(l,"Native")),e.defn(s,"$x=",o=function(e){return this.native.x=e},o.$$arity=1),e.defn(s,"$y=",$=function(e){return this.native.y=e},$.$$arity=1)}(k[0],0,k),e.defn(b,"$x=",o=function(e){return this.native.screenX=e},o.$$arity=1),e.defn(b,"$y=",$=function(e){return this.native.screenY=e},$.$$arity=1),e.defn(b,"$alt!",s=function(){return this.native.altKey=!0},s.$$arity=0),e.defn(b,"$ctrl!",c=function(){return this.native.ctrlKey=!0},c.$$arity=0),e.defn(b,"$meta!",l=function(){return this.native.metaKey=!0},l.$$arity=0),e.defn(b,"$button=",u=function(e){return this.native.button=e},u.$$arity=1),e.defn(b,"$client",_=function(){var t=this;return e.const_get_relative(k,"Client").$new(t.native)},_.$$arity=0),e.defn(b,"$layer",f=function(){var t=this;return e.const_get_relative(k,"Layer").$new(t.native)},f.$$arity=0),e.defn(b,"$offset",p=function(){var t=this;return e.const_get_relative(k,"Offset").$new(t.native)},p.$$arity=0),e.defn(b,"$page",d=function(){var t=this;return e.const_get_relative(k,"Page").$new(t.native)},d.$$arity=0),e.defn(b,"$screen",v=function(){var t=this;return e.const_get_relative(k,"Screen").$new(t.native)},v.$$arity=0),e.defn(b,"$ancestor",h=function(){var t=this;return e.const_get_relative(k,"Ancestor").$new(t.native)},h.$$arity=0),e.defn(b,"$related=",y=function(t){return this.native.relatedTarget=e.const_get_relative(k,"Native").$try_convert(t)},y.$$arity=1),e.defn(b,"$from=",m=function(t){return this.native.fromElement=e.const_get_relative(k,"Native").$try_convert(t)},m.$$arity=1),e.defn(b,"$to=",g=function(t){return this.native.toElement=e.const_get_relative(k,"Native").$try_convert(t)},g.$$arity=1)}(I[0],e.const_get_qualified(e.const_get_relative(I,"UI"),"Definition"),I),o(T["$supported?"]())&&(o(e.const_get_relative(I,"Browser")["$supports?"]("Event.constructor"))?e.defs(T,"$construct",c=function(e,t){return new MouseEvent(e,t)},c.$$arity=2):o(e.const_get_relative(I,"Browser")["$supports?"]("Event.create"))&&e.defs(T,"$construct",l=function(e,t){var n=document.createEvent("MouseEvent");return n.initMouseEvent(e,t.bubbles,t.cancelable,t.view||window,t.detail||0,t.screenX||0,t.screenY||0,t.clientX||0,t.clientY||0,t.ctrlKey||!1,t.altKey||!1,t.shiftKey||!1,t.metaKey||!1,t.button||0,t.relatedTarget||null),n},l.$$arity=2)),T.$alias_native("alt?","altKey"),T.$alias_native("ctrl?","ctrlKey"),T.$alias_native("meta?","metaKey"),T.$alias_native("shift?","shiftKey"),T.$alias_native("button"),e.defn(T,"$client",u=function(){var t=this;return e.const_get_relative(I,"Position").$new(t.native.clientX,t.native.clientY)},u.$$arity=0),e.defn(T,"$layer",_=function(){var t=this;return o(null==t.native.layerX)?n:e.const_get_relative(I,"Position").$new(t.native.layerX,t.native.layerY)},_.$$arity=0),e.defn(T,"$offset",f=function(){var t=this;return o(null==t.native.offsetX)?n:e.const_get_relative(I,"Position").$new(t.native.offsetX,t.native.offsetY)},f.$$arity=0),e.defn(T,"$page",p=function(){var t=this;return o(null==t.native.pageX)?n:e.const_get_relative(I,"Position").$new(t.native.pageX,t.native.pageY)},p.$$arity=0),e.defn(T,"$screen",d=function(){var t=this;return o(null==t.native.screenX)?n:e.const_get_relative(I,"Position").$new(t.native.screenX,t.native.screenY)},d.$$arity=0),e.defn(T,"$ancestor",v=function(){var t=this;return o(null==t.native.x)?n:e.const_get_relative(I,"Position").$new(t.native.x,t.native.y)},v.$$arity=0),e.defn(T,"$x",h=function(){return this.$screen().$x()},h.$$arity=0),e.defn(T,"$y",y=function(){return this.$screen().$y()},y.$$arity=0),e.defn(T,"$related",m=function(){var e=this;return o(null==e.native.relatedTarget)?n:e.$DOM(e.native.relatedTarget)},m.$$arity=0),e.defn(T,"$from",g=function(){var e=this;return o(null==e.native.fromElement)?n:e.$DOM(e.native.fromElement)},g.$$arity=0),e.defn(T,"$to",b=function(){var e=this;return o(null==e.native.toElement)?n:e.$DOM(e.native.toElement)},b.$$arity=0),e.defn(T,"$click?",w=function(){return this.$name().$downcase()["$=="]("click")},w.$$arity=0),e.defn(T,"$double_click?",k=function(){return this.$name().$downcase()["$=="]("dblclick")},k.$$arity=0),e.defn(T,"$down?",O=function(){return this.$name().$downcase()["$=="]("mousedown")},O.$$arity=0),e.defn(T,"$enter?",q=function(){return this.$name().$downcase()["$=="]("mouseenter")},q.$$arity=0),e.defn(T,"$leave?",E=function(){return this.$name().$downcase()["$=="]("mouseleave")},E.$$arity=0),e.defn(T,"$move?",x=function(){return this.$name().$downcase()["$=="]("mousemove")},x.$$arity=0),e.defn(T,"$out?",A=function(){return this.$name().$downcase()["$=="]("mouseout")},A.$$arity=0),e.defn(T,"$over?",S=function(){return this.$name().$downcase()["$=="]("mouseover")},S.$$arity=0),e.defn(T,"$up?",M=function(){return this.$name().$downcase()["$=="]("mouseup")},M.$$arity=0),e.defn(T,"$show?",N=function(){return this.$name().$downcase()["$=="]("show")},N.$$arity=0)})(c[0],e.const_get_relative(c,"UI"),c)}(c[0],0,c)}(t[0],t)},Opal.modules["browser/event/keyboard"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native","$code","$chr","$==","$downcase","$name"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l,u,_,f,p,d,v=o=a(t,$super,"Keyboard",o),h=v.$$proto,y=[v].concat(r);h.native=n,e.defs(v,"$supported?",$=function(){return e.const_get_relative(y,"Browser")["$supports?"]("Event.Keyboard")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c,l,u,_,f,p,d=i=a(t,$super,"Definition",i),v=d.$$proto;[d].concat(r);v.native=n,e.defn(d,"$alt!",o=function(){return this.native.altKey=!0},o.$$arity=0),e.defn(d,"$ctrl!",$=function(){return this.native.ctrlKey=!0},$.$$arity=0),e.defn(d,"$meta!",s=function(){return this.native.metaKey=!0},s.$$arity=0),e.defn(d,"$shift!",c=function(){return this.native.shiftKey=!0},c.$$arity=0),e.defn(d,"$code=",l=function(e){var t=this;return t.native.keyCode=t.native.which=e},l.$$arity=1),e.defn(d,"$key=",u=function(e){return this.native.key=e},u.$$arity=1),e.defn(d,"$char=",_=function(e){var t=this;return t.native.char=t.native.charCode=e},_.$$arity=1),e.defn(d,"$repeat!",f=function(){return this.native.repeat=!0},f.$$arity=0),e.defn(d,"$locale=",p=function(e){return this.native.locale=e},p.$$arity=1)}(y[0],e.const_get_qualified(e.const_get_relative(y,"UI"),"Definition"),y),i(v["$supported?"]())&&(i(e.const_get_relative(y,"Browser")["$supports?"]("Event.constructor"))?e.defs(v,"$construct",s=function(e,t){return new KeyboardEvent(e,t)},s.$$arity=2):i(e.const_get_relative(y,"Browser")["$supports?"]("Event.create"))&&e.defs(v,"$construct",c=function(e,t){var n="";t.altKey&&(n+="Alt "),t.ctrlKey&&(n+="Ctrl "),t.shiftKey&&(n+="Shift"),t.metaKey&&(n+="Meta ");var r=document.createEvent("KeyboardEvent");return r.initKeyboardEvent(e,t.bubbles,t.cancelable,t.view||window,t.which,0,n,t.repeat,t.locale),r},c.$$arity=2)),v.$alias_native("alt?","altKey"),v.$alias_native("ctrl?","ctrlKey"),v.$alias_native("meta?","metaKey"),v.$alias_native("shift?","shiftKey"),v.$alias_native("locale"),v.$alias_native("repeat?","repeat"),e.defn(v,"$key",l=function(){var e=this;return e.native.key||e.native.keyIdentifier||n},l.$$arity=0),e.defn(v,"$code",u=function(){var e=this;return e.native.keyCode||e.native.which||n},u.$$arity=0),e.defn(v,"$char",_=function(){var e=this;return e.native.char||e.native.charCode||(i(e.$code())?e.$code().$chr():n)},_.$$arity=0),e.alias(v,"to_i","key"),e.defn(v,"$down?",f=function(){return this.$name().$downcase()["$=="]("keydown")},f.$$arity=0),e.defn(v,"$press?",p=function(){return this.$name().$downcase()["$=="]("keypress")},p.$$arity=0),e.defn(v,"$up?",d=function(){return this.$name().$downcase()["$=="]("keyup")},d.$$arity=0)})(s[0],e.const_get_relative(s,"UI"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/focus"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$convert","$supported?","$DOM"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l,u=o=a(t,$super,"Focus",o),_=u.$$proto,f=[u].concat(r);_.native=n,e.defs(u,"$supported?",$=function(){return e.const_get_relative(f,"Browser")["$supports?"]("Event.Focus")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s=i=a(t,$super,"Definition",i),c=s.$$proto,l=[s].concat(r);c.native=n,e.defn(s,"$view=",o=function(t){return this.native.view=e.const_get_relative(l,"Native").$convert(t)},o.$$arity=1),e.defn(s,"$related=",$=function(t){return this.native.relatedTarget=e.const_get_relative(l,"Native").$convert(t)},$.$$arity=1)}(f[0],e.const_get_qualified(e.const_get_relative(f,"UI"),"Definition"),f),i(u["$supported?"]())&&(i(e.const_get_relative(f,"Browser")["$supports?"]("Event.constructor"))?e.defs(u,"$construct",s=function(e,t){return new FocusEvent(e,t)},s.$$arity=2):i(e.const_get_relative(f,"Browser")["$supports?"]("Event.create"))&&e.defs(u,"$construct",c=function(e,t){var n=document.createEvent("FocusEvent");return n.initFocusEvent(e,t.bubbles,t.cancelable,t.view||window,0,t.relatedTarget),n},c.$$arity=2)),e.defn(u,"$related",l=function(){var e=this;return e.$DOM(e.native.relatedTarget)},l.$$arity=0)})(s[0],e.const_get_relative(s,"UI"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/wheel"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.gvars;return e.add_stubs(["$!","$nil?","$[]","$===","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l=o=a(t,$super,"Wheel",o),u=l.$$proto,_=[l].concat(r);u.native=n,e.defs(l,"$supported?",$=function(){return null==i.$&&(i.$=n),i.$["$[]"]("WheelEvent")["$nil?"]()["$!"]()},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c,l=i=a(t,$super,"Definition",i),u=l.$$proto;[l].concat(r);u.native=n,e.defn(l,"$x=",o=function(e){return this.native.deltaX=e},o.$$arity=1),e.defn(l,"$y=",$=function(e){return this.native.deltaY=e},$.$$arity=1),e.defn(l,"$z=",s=function(e){return this.native.deltaZ=e},s.$$arity=1),e.defn(l,"$mode=",c=function(e){var t=this,r=n;return r=e,e="pixel"["$==="](r)?WheelEvent.DOM_DELTA_PIXEL:"line"["$==="](r)?WheelEvent.DOM_DELTA_LINE:"page"["$==="](r)?WheelEvent.DOM_DELTA_PAGE:n,t.native.deltaMode=e},c.$$arity=1)}(_[0],e.const_get_relative(_,"Definition"),_),e.defs(l,"$construct",s=function(e,t){return new WheelEvent(e,t)},s.$$arity=2),l.$alias_native("x","deltaX"),l.$alias_native("y","deltaY"),l.$alias_native("z","deltaZ"),e.defn(l,"$mode",c=function(){var e=n;return e=this.native.deltaMode,WheelEvent.DOM_DELTA_PIXEL["$==="](e)?"pixel":WheelEvent.DOM_DELTA_LINE["$==="](e)?"line":WheelEvent.DOM_DELTA_PAGE["$==="](e)?"page":n},c.$$arity=0)})(s[0],e.const_get_relative(s,"UI"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/composition"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native","$==","$downcase","$name"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l,u,_,f=o=a(t,$super,"Composition",o),p=(f.$$proto,[f].concat(r));e.defs(f,"$supported?",$=function(){return e.const_get_relative(p,"Browser")["$supports?"]("Event.Composition")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s=i=a(t,$super,"Definition",i),c=s.$$proto;[s].concat(r);c.native=n,e.defn(s,"$data=",o=function(e){return this.native.data=e},o.$$arity=1),e.defn(s,"$locale=",$=function(e){return this.native.locale=e},$.$$arity=1)}(p[0],e.const_get_qualified(e.const_get_relative(p,"UI"),"Definition"),p),i(f["$supported?"]())&&(i(e.const_get_relative(p,"Browser")["$supports?"]("Event.constructor"))?e.defs(f,"$construct",s=function(e,t){return new CompositionEvent(e,t)},s.$$arity=2):i(e.const_get_relative(p,"Browser")["$supports?"]("Event.create"))&&e.defs(f,"$construct",c=function(e,t){var n=document.createEvent("CompositionEvent");return n.initCompositionEvent(e,t.bubbles,t.cancelable,t.view||window,t.data,t.locale),n},c.$$arity=2)),f.$alias_native("data"),f.$alias_native("locale"),e.defn(f,"$start?",l=function(){return this.$name().$downcase()["$=="]("compositionstart")},l.$$arity=0),e.defn(f,"$update?",u=function(){return this.$name().$downcase()["$=="]("compositionupdate")},u.$$arity=0),e.defn(f,"$end?",_=function(){return this.$name().$downcase()["$=="]("compositionend")},_.$$arity=0)})(s[0],e.const_get_relative(s,"UI"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/animation"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l=o=a(t,$super,"Animation",o),u=(l.$$proto,[l].concat(r));e.defs(l,"$supported?",$=function(){return e.const_get_relative(u,"Browser")["$supports?"]("Event.Animation")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s=i=a(t,$super,"Definition",i),c=s.$$proto;[s].concat(r);c.native=n,e.defn(s,"$animation=",o=function(e){return this.native.animationName=e},o.$$arity=1),e.defn(s,"$elapsed=",$=function(e){return this.native.elapsedTime=e},$.$$arity=1)}(u[0],e.const_get_relative(u,"Definition"),u),i(l["$supported?"]())&&(i(e.const_get_relative(u,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new AnimationEvent(e,t)},s.$$arity=2):i(e.const_get_relative(u,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",c=function(e,t){var n=document.createEvent("AnimationEvent");return n.initAnimationEvent(e,t.bubbles,t.cancelable,t.animationName,t.elapsedTime),n},c.$$arity=2)),l.$alias_native("name","animationName"),l.$alias_native("elapsed","elapsedTime")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/audio_processing"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c=o=a(t,$super,"AudioProcessing",o),l=(c.$$proto,[c].concat(r));e.defs(c,"$supported?",$=function(){return e.const_get_relative(l,"Browser")["$supports?"]("Event.AudioProcessing")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c=i=a(t,$super,"Definition",i),l=c.$$proto;[c].concat(r);l.native=n,e.defn(c,"$time=",o=function(e){return this.native.playbackTime=e},o.$$arity=1),e.defn(c,"$input=",$=function(e){return this.native.inputBuffer=e},$.$$arity=1),e.defn(c,"$output=",s=function(e){return this.native.outputBuffer=e},s.$$arity=1)}(l[0],e.const_get_relative(l,"Definition"),l),i(c["$supported?"]())&&i(e.const_get_relative(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(c,"$construct",s=function(e,t){return new AudioProcessingEvent(e,t)},s.$$arity=2),c.$alias_native("time","playbackTime"),c.$alias_native("input","inputBuffer"),c.$alias_native("output","outputBuffer")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/before_unload"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module),r=e.klass,a=e.truthy;return e.add_stubs(["$supports?","$supported?"]),function(t,i){var o=n(t,"Browser"),$=(o.$$proto,[o].concat(i));!function(t,$super,n){function i(){}var o=i=r(t,null,"Event",i),$=(o.$$proto,[o].concat(n));(function(t,$super,n){function i(){}var o,$,s=i=r(t,$super,"BeforeUnload",i),c=(s.$$proto,[s].concat(n));e.defs(s,"$supported?",o=function(){return e.const_get_relative(c,"Browser")["$supports?"]("Event.BeforeUnload")},o.$$arity=0),a(s["$supported?"]())&&a(e.const_get_relative(c,"Browser")["$supports?"]("Event.constructor"))&&e.defs(s,"$construct",$=function(e,t){return new BeforeUnloadEvent(e,t)},$.$$arity=2)})($[0],e.const_get_relative($,"Event"),$)}($[0],0,$)}(t[0],t)},Opal.modules["browser/event/clipboard"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c=o=a(t,$super,"Clipboard",o),l=(c.$$proto,[c].concat(r));e.defs(c,"$supported?",$=function(){return e.const_get_relative(l,"Browser")["$supports?"]("Event.Clipboard")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s=i=a(t,$super,"Definition",i),c=s.$$proto;[s].concat(r);c.native=n,e.defn(s,"$data=",o=function(e){return this.native.data=e},o.$$arity=1),e.defn(s,"$type=",$=function(e){return this.native.dataType=e},$.$$arity=1)}(l[0],e.const_get_relative(l,"Definition"),l),i(c["$supported?"]())&&i(e.const_get_relative(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(c,"$construct",s=function(e,t){return new ClipboardEvent(e,t)},s.$$arity=2),c.$alias_native("data"),c.$alias_native("type","dataType")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/device_light"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c=o=a(t,$super,"DeviceLight",o),l=(c.$$proto,[c].concat(r));e.defs(c,"$supported?",$=function(){return e.const_get_relative(l,"Browser")["$supports?"]("Event.DeviceLight")},$.$$arity=0),function(t,$super,r){function i(){}var o,$=i=a(t,$super,"Definition",i),s=$.$$proto;[$].concat(r);s.native=n,e.defn($,"$value=",o=function(e){return this.native.value=e},o.$$arity=1)}(l[0],e.const_get_relative(l,"Definition"),l),i(c["$supported?"]())&&i(e.const_get_relative(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(c,"$construct",s=function(e,t){return new DeviceLightEvent(e,t)},s.$$arity=2),c.$alias_native("value")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/device_motion"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$new","$to_n","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l=o=a(t,$super,"DeviceMotion",o),u=(l.$$proto,[l].concat(r));e.defs(l,"$supported?",$=function(){return e.const_get_relative(u,"Browser")["$supports?"]("Event.DeviceMotion")},$.$$arity=0),e.const_set(u[0],"Acceleration",e.const_get_relative(u,"Struct").$new("x","y","z")),function(t,$super,r){function i(){}var o,$,s,c,l=i=a(t,$super,"Definition",i),u=l.$$proto;[l].concat(r);u.native=n,e.defn(l,"$acceleration=",o=function(e){return this.native.acceleration=e.$to_n()},o.$$arity=1),e.defn(l,"$acceleration_with_gravity=",$=function(e){return this.native.accelerationIncludingGravity=e.$to_n()},$.$$arity=1),e.defn(l,"$rotation=",s=function(e){return this.native.rotationRate=e},s.$$arity=1),e.defn(l,"$interval=",c=function(e){return this.native.interval=e},c.$$arity=1)}(u[0],e.const_get_relative(u,"Definition"),u),i(l["$supported?"]())&&(i(e.const_get_relative(u,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new DeviceMotionEvent(e,t)},s.$$arity=2):i(e.const_get_relative(u,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",c=function(e,t){var n=document.createEvent("DeviceMotionEvent");return n.initDeviceMotionEvent(e,t.bubbles,t.cancelable,t.acceleration,t.accelerationIncludingGravity,t.rotationRate,t.interval),n},c.$$arity=2)),l.$alias_native("acceleration"),l.$alias_native("acceleration_with_gravity","accelerationIncludingGravity"),l.$alias_native("rotation","rotationRate"),l.$alias_native("interval")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/device_orientation"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l=o=a(t,$super,"DeviceOrientation",o),u=(l.$$proto,[l].concat(r));e.defs(l,"$supported?",$=function(){return e.const_get_relative(u,"Browser")["$supports?"]("Event.DeviceOrientation")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c,l=i=a(t,$super,"Definition",i),u=l.$$proto;[l].concat(r);u.native=n,e.defn(l,"$absolute=",o=function(e){return this.native.absolute=e},o.$$arity=1),e.defn(l,"$alpha=",$=function(e){return this.native.alpha=e},$.$$arity=1),e.defn(l,"$beta=",s=function(e){return this.native.beta=e},s.$$arity=1),e.defn(l,"$gamma=",c=function(e){return this.native.gamma=e},c.$$arity=1)}(u[0],e.const_get_relative(u,"Definition"),u),i(l["$supported?"]())&&(i(e.const_get_relative(u,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new DeviceOrientationEvent(e,t)},s.$$arity=2):i(e.const_get_relative(u,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",c=function(e,t){var n=document.createEvent("DeviceOrientationEvent");return n.initDeviceOrientationEvent(e,t.bubbles,t.cancelable,t.alpha,t.beta,t.gamma,t.absolute),n},c.$$arity=2)),l.$alias_native("absolute"),l.$alias_native("alpha"),l.$alias_native("beta"),l.$alias_native("gamma")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/device_proximity"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c=o=a(t,$super,"DeviceProximity",o),l=(c.$$proto,[c].concat(r));e.defs(c,"$supported?",$=function(){return e.const_get_relative(l,"Browser")["$supports?"]("Event.DeviceProximity")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c=i=a(t,$super,"Definition",i),l=c.$$proto;[c].concat(r);l.native=n,e.defn(c,"$value=",o=function(e){return this.native.value=e},o.$$arity=1),e.defn(c,"$min=",$=function(e){return this.native.min=e},$.$$arity=1),e.defn(c,"$max=",s=function(e){return this.native.max=e},s.$$arity=1)}(l[0],e.const_get_relative(l,"Definition"),l),i(c["$supported?"]())&&i(e.const_get_relative(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(c,"$construct",s=function(e,t){return new DeviceProximityEvent(e,t)},s.$$arity=2),c.$alias_native("value"),c.$alias_native("min"),c.$alias_native("max")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/drag"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$include","$new","$convert","$elem","$supported?","$alias_native","$x","$screen","$y","$DOM","$raise"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}
var $,s,c,l,u,_,f,p,d,v=o=a(t,$super,"Drag",o),h=v.$$proto,y=[v].concat(r);h.native=n,e.defs(v,"$supported?",$=function(){return e.const_get_relative(y,"Browser")["$supports?"]("Event.Drag")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c,l,u,_,f,p=i=a(t,$super,"Definition",i),d=p.$$proto,v=[p].concat(r);d.native=n,function(t,$super,r){function i(){}var o,$,s=i=a(t,null,"Client",i),c=s.$$proto,l=[s].concat(r);c.native=n,s.$include(e.const_get_relative(l,"Native")),e.defn(s,"$x=",o=function(e){return this.native.clientX=e},o.$$arity=1),e.defn(s,"$y=",$=function(e){return this.native.clientY=e},$.$$arity=1)}(v[0],0,v),function(t,$super,r){function i(){}var o,$,s=i=a(t,null,"Screen",i),c=s.$$proto,l=[s].concat(r);c.native=n,s.$include(e.const_get_relative(l,"Native")),e.defn(s,"$x=",o=function(e){return this.native.screenX=e},o.$$arity=1),e.defn(s,"$y=",$=function(e){return this.native.screenY=e},$.$$arity=1)}(v[0],0,v),e.defn(p,"$alt!",o=function(){return this.native.altKey=!0},o.$$arity=0),e.defn(p,"$ctrl!",$=function(){return this.native.ctrlKey=!0},$.$$arity=0),e.defn(p,"$meta!",s=function(){return this.native.metaKey=!0},s.$$arity=0),e.defn(p,"$button=",c=function(e){return this.native.button=e},c.$$arity=1),e.defn(p,"$client",l=function(){var t=this;return e.const_get_relative(v,"Client").$new(t.native)},l.$$arity=0),e.defn(p,"$screen",u=function(){var t=this;return e.const_get_relative(v,"Screen").$new(t.native)},u.$$arity=0),e.defn(p,"$related=",_=function(t){return this.native.relatedTarget=e.const_get_relative(v,"Native").$convert(t)},_.$$arity=1),e.defn(p,"$transfer=",f=function(){var t=this;return t.native.dataTransfer=e.const_get_relative(v,"Native").$convert(t.$elem())},f.$$arity=1)}(y[0],e.const_get_relative(y,"Definition"),y),i(v["$supported?"]())&&(i(e.const_get_relative(y,"Browser")["$supports?"]("Event.constructor"))?e.defs(v,"$construct",s=function(e,t){return new DragEvent(e,t)},s.$$arity=2):i(e.const_get_relative(y,"Browser")["$supports?"]("Event.create"))&&e.defs(v,"$construct",c=function(e,t){var n=document.createEvent("DragEvent");return n.initDragEvent(e,t.bubbles,t.cancelable,t.view||window,0,t.screenX||0,t.screenY||0,t.clientX||0,t.clientY||0,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button||0,t.relatedTarget,t.dataTransfer),n},c.$$arity=2)),v.$alias_native("alt?","altKey"),v.$alias_native("ctrl?","ctrlKey"),v.$alias_native("meta?","metaKey"),v.$alias_native("shift?","shiftKey"),v.$alias_native("button"),e.defn(v,"$client",l=function(){var t=this;return e.const_get_relative(y,"Position").$new(t.native.clientX,t.native.clientY)},l.$$arity=0),e.defn(v,"$screen",u=function(){var t=this;return i("undefined"!=typeof t.native.screenX)?e.const_get_relative(y,"Position").$new(t.native.screenX,t.native.screenY):n},u.$$arity=0),e.defn(v,"$x",_=function(){return this.$screen().$x()},_.$$arity=0),e.defn(v,"$y",f=function(){return this.$screen().$y()},f.$$arity=0),e.defn(v,"$related",p=function(){var e=this;return e.$DOM(e.native.relatedTarget)},p.$$arity=0),e.defn(v,"$transfer",d=function(){return this.$raise(e.const_get_relative(y,"NotImplementedError"))},d.$$arity=0)})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/gamepad"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l,u,_,f,p=o=a(t,$super,"Gamepad",o),d=p.$$proto,v=[p].concat(r);d.native=n,e.defs(p,"$supported?",$=function(){return e.const_get_relative(v,"Browser")["$supports?"]("Event.Gamepad")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c,l,u=i=a(t,$super,"Definition",i),_=u.$$proto;[u].concat(r);_.native=n,e.defn(u,"$id=",o=function(e){return this.native.id=e},o.$$arity=1),e.defn(u,"$index=",$=function(e){return this.native.index=e},$.$$arity=1),e.defn(u,"$at=",s=function(e){return this.native.timestamp=e},s.$$arity=1),e.defn(u,"$axes=",c=function(e){return this.native.axes=e},c.$$arity=1),e.defn(u,"$buttons=",l=function(e){return this.native.buttons=e},l.$$arity=1)}(v[0],e.const_get_relative(v,"Definition"),v),i(p["$supported?"]())&&i(e.const_get_relative(v,"Browser")["$supports?"]("Event.constructor"))&&e.defs(p,"$construct",s=function(e,t){return new GamepadEvent(e,{bubbles:t.bubbles,cancelable:t.cancelable,gamepad:t})},s.$$arity=2),e.defn(p,"$id",c=function(){return this.native.gamepad.id},c.$$arity=0),e.defn(p,"$index",l=function(){return this.native.gamepad.index},l.$$arity=0),e.defn(p,"$at",u=function(){return this.native.gamepad.timestamp},u.$$arity=0),e.defn(p,"$axes",_=function(){return this.native.gamepad.axes},_.$$arity=0),e.defn(p,"$buttons",f=function(){return this.native.gamepad.buttons},f.$$arity=0)})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/hash_change"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c=o=a(t,$super,"HashChange",o),l=(c.$$proto,[c].concat(r));e.defs(c,"$supported?",$=function(){return e.const_get_relative(l,"Browser")["$supports?"]("Event.HashChange")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s=i=a(t,$super,"Definition",i),c=s.$$proto;[s].concat(r);c.native=n,e.defn(s,"$old=",o=function(e){return this.native.oldURL=e},o.$$arity=1),e.defn(s,"$new=",$=function(e){return this.native.newURL=e},$.$$arity=1)}(l[0],e.const_get_relative(l,"Definition"),l),i(c["$supported?"]())&&i(e.const_get_relative(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(c,"$construct",s=function(e,t){return new HashChangeEvent(e,t)},s.$$arity=2),c.$alias_native("old","oldURL"),c.$alias_native("new","newURL")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/progress"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l=o=a(t,$super,"Progress",o),u=(l.$$proto,[l].concat(r));e.defs(l,"$supported?",$=function(){return e.const_get_relative(u,"Browser")["$supports?"]("Event.Progress")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c=i=a(t,$super,"Definition",i),l=c.$$proto;[c].concat(r);l.native=n,e.defn(c,"$computable=",o=function(e){return this.native.computableLength=e},o.$$arity=1),e.defn(c,"$loaded=",$=function(e){return this.native.loaded=e},$.$$arity=1),e.defn(c,"$total=",s=function(e){return this.native.total=e},s.$$arity=1)}(u[0],e.const_get_relative(u,"Definition"),u),i(l["$supported?"]())&&(i(e.const_get_relative(u,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new ProgressEvent(e,t)},s.$$arity=2):i(e.const_get_relative(u,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",c=function(e,t){var n=document.createEvent("ProgressEvent");return n.initProgressEvent(e,t.bubbles,t.cancelable,t.computable,t.loaded,t.total),n},c.$$arity=2)),l.$alias_native("computable?","computableLength"),l.$alias_native("loaded"),l.$alias_native("total")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/page_transition"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c=o=a(t,$super,"PageTransition",o),l=(c.$$proto,[c].concat(r));e.defs(c,"$supported?",$=function(){return e.const_get_relative(l,"Browser")["$supports?"]("Event.PageTransition")},$.$$arity=0),function(t,$super,r){function i(){}var o,$=i=a(t,$super,"Definition",i),s=$.$$proto;[$].concat(r);s.native=n,e.defn($,"$persisted=",o=function(e){return this.native.persisted=e},o.$$arity=1)}(l[0],e.const_get_relative(l,"Definition"),l),i(c["$supported?"]())&&i(e.const_get_relative(l,"Browser")["$supports?"]("Event.PageTransition"))&&e.defs(c,"$construct",s=function(e,t){return new PageTransitionEvent(e,t)},s.$$arity=2),c.$alias_native("persisted?","persisted")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/pop_state"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l=o=a(t,$super,"PopState",o),u=(l.$$proto,[l].concat(r));e.defs(l,"$supported?",$=function(){return e.const_get_relative(u,"Browser")["$supports?"]("Event.PopState")},$.$$arity=0),function(t,$super,r){function i(){}var o,$=i=a(t,$super,"Definition",i),s=$.$$proto;[$].concat(r);s.native=n,e.defn($,"$state=",o=function(e){return this.native.state=e},o.$$arity=1)}(u[0],e.const_get_relative(u,"Definition"),u),i(l["$supported?"]())&&(i(e.const_get_relative(u,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new PopStateEvent(e,t)},s.$$arity=2):i(e.const_get_relative(u,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",c=function(e,t){var n=document.createEvent("PopStateEvent");return n.initPopStateEvent(e,t.bubbles,t.cancelable,t.state),n},c.$$arity=2)),l.$alias_native("state")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/storage"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c=o=a(t,$super,"Storage",o),l=(c.$$proto,[c].concat(r));e.defs(c,"$supported?",$=function(){return e.const_get_relative(l,"Browser")["$supports?"]("Event.Storage")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c,l,u=i=a(t,$super,"Definition",i),_=u.$$proto;[u].concat(r);_.native=n,e.defn(u,"$key=",o=function(e){return this.native.key=e},o.$$arity=1),e.defn(u,"$new=",$=function(e){return this.native.newValue=e},$.$$arity=1),e.defn(u,"$old=",s=function(e){return this.native.oldValue=e},s.$$arity=1),e.defn(u,"$area=",c=function(e){return this.native.storageArea=e},c.$$arity=1),e.defn(u,"$url=",l=function(e){return this.native.url=e},l.$$arity=1)}(l[0],e.const_get_relative(l,"Definition"),l),i(c["$supported?"]())&&i(e.const_get_relative(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(c,"$construct",s=function(e,t){return new StorageEvent(e,t)},s.$$arity=2),c.$alias_native("key"),c.$alias_native("new","newValue"),c.$alias_native("old","oldValue"),c.$alias_native("area","storageArea"),c.$alias_native("url")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/touch"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native","$==","$downcase","$name"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l,u,_,f,p=o=a(t,$super,"Touch",o),d=(p.$$proto,[p].concat(r));e.defs(p,"$supported?",$=function(){return e.const_get_relative(d,"Browser")["$supports?"]("Event.Touch")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c,l=i=a(t,$super,"Definition",i),u=l.$$proto;[l].concat(r);u.native=n,e.defn(l,"$alt!",o=function(){return this.native.altKey=!0},o.$$arity=0),e.defn(l,"$ctrl!",$=function(){return this.native.ctrlKey=!0},$.$$arity=0),e.defn(l,"$meta!",s=function(){return this.native.metaKey=!0},s.$$arity=0),e.defn(l,"$shift!",c=function(){return this.native.shiftKey=!0},c.$$arity=0)}(d[0],e.const_get_relative(d,"Definition"),d),i(p["$supported?"]())&&i(e.const_get_relative(d,"Browser")["$supports?"]("Event.constructor"))&&e.defs(p,"$construct",s=function(e,t){return new TouchEvent(e,t)},s.$$arity=2),p.$alias_native("alt?","altKey"),p.$alias_native("ctrl?","ctrlKey"),p.$alias_native("meta?","metaKey"),p.$alias_native("shift?","shiftKey"),e.defn(p,"$cancel?",c=function(){return this.$name().$downcase()["$=="]("touchcancel")},c.$$arity=0),e.defn(p,"$end?",l=function(){return this.$name().$downcase()["$=="]("touchend")},l.$$arity=0),e.defn(p,"$leave?",u=function(){return this.$name().$downcase()["$=="]("touchleave")},u.$$arity=0),e.defn(p,"$move?",_=function(){return this.$name().$downcase()["$=="]("touchmove")},_.$$arity=0),e.defn(p,"$start?",f=function(){return this.$name().$downcase()["$=="]("touchstart")},f.$$arity=0)})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/sensor"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module),r=e.klass,a=e.truthy;return e.add_stubs(["$supports?","$supported?"]),function(t,i){var o=n(t,"Browser"),$=(o.$$proto,[o].concat(i));!function(t,$super,n){function i(){}var o=i=r(t,null,"Event",i),$=(o.$$proto,[o].concat(n));(function(t,$super,n){function i(){}var o,$,s=i=r(t,$super,"Sensor",i),c=(s.$$proto,[s].concat(n));e.defs(s,"$supported?",o=function(){return e.const_get_relative(c,"Browser")["$supports?"]("Event.Sensor")},o.$$arity=0),a(s["$supported?"]())&&a(e.const_get_relative(c,"Browser")["$supports?"]("Event.constructor"))&&e.defs(s,"$construct",$=function(e,t){return new SensorEvent(e,t)},$.$$arity=2)})($[0],e.const_get_relative($,"Event"),$)}($[0],0,$)}(t[0],t)},Opal.modules.ostruct=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var a=[],i=e.nil,o=(e.breaker,e.slice,e.klass),$=e.hash2,s=e.truthy,c=e.send,l=e.range;return e.add_stubs(["$each_pair","$new_ostruct_member","$[]=","$-","$[]","$to_sym","$>","$length","$raise","$new","$end_with?","$!=","$enum_for","$is_a?","$==","$instance_variable_get","$===","$eql?","$dup","$to_n","$hash","$attr_reader","$__send__","$singleton_class","$delete","$respond_to?","$define_singleton_method","$__id__","$class","$any?","$+","$join","$map","$inspect"]),function(a,$super,u){function _(){}var f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A=_=o(a,null,"OpenStruct",_),S=A.$$proto,M=[A].concat(u);return S.table=i,e.defn(A,"$initialize",f=function(n){var r,a=this;return null==n&&(n=i),a.table=$([],{}),s(n)?c(n,"each_pair",[],((r=function(n,a){var o=r.$$s||this,$=i;return null==o.table&&(o.table=i),null==n&&(n=i),null==a&&(a=i),$=[o.$new_ostruct_member(n),a],c(o.table,"[]=",e.to_a($)),$[t($.length,1)]}).$$s=a,r.$$arity=2,r)):i},f.$$arity=-1),e.defn(A,"$[]",p=function(e){return this.table["$[]"](e.$to_sym())},p.$$arity=1),e.defn(A,"$[]=",d=function(n,r){var a=this,o=i;return o=[a.$new_ostruct_member(n),r],c(a.table,"[]=",e.to_a(o)),o[t(o.length,1)]},d.$$arity=2),e.defn(A,"$method_missing",v=function(r){var a,o=this,$=i,u=arguments.length,_=u-1;_<0&&(_=0),a=new Array(_);for(var f=1;f<u;f++)a[f-1]=arguments[f];return s(n(a.$length(),2))&&o.$raise(e.const_get_relative(M,"NoMethodError").$new("undefined method `"+r+"' for #<OpenStruct>",r)),s(r["$end_with?"]("="))?(s(a.$length()["$!="](1))&&o.$raise(e.const_get_relative(M,"ArgumentError").$new("wrong number of arguments (0 for 1)")),$=[o.$new_ostruct_member(r["$[]"](l(0,-2,!1))),a["$[]"](0)],c(o.table,"[]=",e.to_a($)),$[t($.length,1)]):o.table["$[]"](r.$to_sym())},v.$$arity=-2),e.defn(A,"$each_pair",h=function(){var t,n=this,r=h.$$p,a=r||i;return r&&(h.$$p=null),a===i?n.$enum_for("each_pair"):c(n.table,"each_pair",[],((t=function(n){t.$$s;return null==n&&(n=i),e.yield1(a,n)}).$$s=n,t.$$arity=1,t))},h.$$arity=0),e.defn(A,"$==",y=function(t){var n=this;return!!s(t["$is_a?"](e.const_get_relative(M,"OpenStruct")))&&n.table["$=="](t.$instance_variable_get("@table"))},y.$$arity=1),e.defn(A,"$===",m=function(t){var n=this;return!!s(t["$is_a?"](e.const_get_relative(M,"OpenStruct")))&&n.table["$==="](t.$instance_variable_get("@table"))},m.$$arity=1),e.defn(A,"$eql?",g=function(t){var n=this;return!!s(t["$is_a?"](e.const_get_relative(M,"OpenStruct")))&&n.table["$eql?"](t.$instance_variable_get("@table"))},g.$$arity=1),e.defn(A,"$to_h",b=function(){return this.table.$dup()},b.$$arity=0),e.defn(A,"$to_n",w=function(){return this.table.$to_n()},w.$$arity=0),e.defn(A,"$hash",k=function(){return this.table.$hash()},k.$$arity=0),A.$attr_reader("table"),e.defn(A,"$delete_field",O=function(t){var n=this,r=i;r=t.$to_sym();try{n.$singleton_class().$__send__("remove_method",r,r+"=")}catch(a){if(!e.rescue(a,[e.const_get_relative(M,"NameError")]))throw a;e.pop_exception()}return n.table.$delete(r)},O.$$arity=1),e.defn(A,"$new_ostruct_member",q=function(n){var r,a,o=this;return n=n.$to_sym(),s(o["$respond_to?"](n))||(c(o,"define_singleton_method",[n],((r=function(){var e=r.$$s||this;return null==e.table&&(e.table=i),e.table["$[]"](n)}).$$s=o,r.$$arity=0,r)),c(o,"define_singleton_method",[n+"="],((a=function(r){var o=a.$$s||this,$=i;return null==o.table&&(o.table=i),null==r&&(r=i),$=[n,r],c(o.table,"[]=",e.to_a($)),$[t($.length,1)]}).$$s=o,a.$$arity=1,a))),n},q.$$arity=1),e.defn(A,"$inspect",E=function(){var e,t=this,n=i,a=x===undefined,o=t.$__id__();return function(){try{return n="#<"+t.$class(),a&&(x={}),x.hasOwnProperty(o)?n+" ...>":(x[o]=!0,s(t.table["$any?"]())&&(n=r(n," ")),n=r(n=r(n,c(t.$each_pair(),"map",[],(e=function(t,n){e.$$s;return null==t&&(t=i),null==n&&(n=i),t+"="+n.$inspect()},e.$$s=t,e.$$arity=2,e)).$join(", ")),">"))}finally{a&&(x=undefined)}}()},E.$$arity=0),e.alias(A,"to_s","inspect")}(a[0],0,a)},Opal.modules["browser/event/custom"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.range,s=e.send;return e.add_stubs(["$require","$supports?","$end_with?","$[]","$to_n","$merge!","$Native","$new","$has_key?"]),t.$require("ostruct"),function(t,n){var c=a(t,"Browser"),l=(c.$$proto,[c].concat(n));!function(t,$super,n){function a(){}var c=a=i(t,null,"Event",a),l=(c.$$proto,[c].concat(n));(function(t,$super,n){function a(){}var c,l,u,_,f,p,d,v=a=i(t,$super,"Custom",a),h=v.$$proto,y=[v].concat(n);h.detail=r,e.defs(v,"$supported?",c=function(){return e.const_get_relative(y,"Browser")["$supports?"]("Event.Custom")},c.$$arity=0),function(t,$super,n){function a(){}var s,c=a=i(t,$super,"Definition",a),l=c.$$proto;[c].concat(n);l.native=r,e.defn(c,"$method_missing",s=function(e,t){var n=this;return o(e["$end_with?"]("="))?n.native[e["$[]"]($(0,-2,!1))]=t:r},s.$$arity=2)}(y[0],e.const_get_relative(y,"Definition"),y),o(e.const_get_relative(y,"Browser")["$supports?"]("Event.constructor"))?e.defs(v,"$construct",l=function(e,t){return new CustomEvent(e,{bubbles:t.bubbles,cancelable:t.cancelable,detail:t})},l.$$arity=2):o(e.const_get_relative(y,"Browser")["$supports?"]("Event.create"))?e.defs(v,"$construct",u=function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t),n},u.$$arity=2):o(e.const_get_relative(y,"Browser")["$supports?"]("Event.createObject"))?e.defs(v,"$construct",_=function(e,t){return this.$Native(document.createEventObject())["$merge!"]({type:e,bubbles:t.bubbles,cancelable:t.cancelable,detail:t}).$to_n()},_.$$arity=2):e.defs(v,"$construct",f=function(e,t){return this.$Native(t)["$merge!"]({type:e,bubbles:t.bubbles,cancelable:t.cancelable,detail:t}).$to_n()},f.$$arity=2),e.defn(v,"$initialize",p=function(t,n){var a=this,i=p.$$p;return null==n&&(n=r),i&&(p.$$p=null),s(a,e.find_super_dispatcher(a,"initialize",p,!1),[t,n],null),a.detail=e.const_get_relative(y,"Hash").$new(t.detail)},p.$$arity=-2),e.defn(v,"$method_missing",d=function(t){var n=this,a=d.$$p,i=r,$=r,c=r;for(a&&(d.$$p=null),$=0,c=arguments.length,i=new Array(c);$<c;$++)i[$]=arguments[$];return o(n.detail["$has_key?"](t))?n.detail["$[]"](t):s(n,e.find_super_dispatcher(n,"method_missing",d,!1),i,a)},d.$$arity=-2)})(l[0],e.const_get_relative(l,"Event"),l)}(l[0],0,l)}(n[0],n)},Opal.modules["buffer/array"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.gvars,i=e.send,o=e.truthy;return e.add_stubs(["$include","$[]","$name_for","$attr_reader","$==","$for","$to_n","$enum_for"]),function(t,$super,$){function s(){}var c=s=r(t,null,"Buffer",s),l=(c.$$proto,[c].concat($));return function(t,$super,$){function s(){}var c,l,u,_,f,p,d,v,h,y=s=r(t,null,"Array",s),m=y.$$proto,g=[y].concat($);return m.native=n,y.$include(e.const_get_relative(g,"Native")),e.defs(y,"$for",c=function(t,r){return null==a.$&&(a.$=n),a.$["$[]"](e.const_get_relative(g,"Buffer").$name_for(t,r)+"Array")},c.$$arity=2),y.$include(e.const_get_relative(g,"Enumerable")),y.$attr_reader("buffer","type"),e.defn(y,"$initialize",l=function(t,r,a){var o=this,$=l.$$p;if(null==r&&(r=n),null==a&&(a=n),$&&(l.$$p=null),e.const_get_relative(g,"Native")["$=="](t))i(o,e.find_super_dispatcher(o,"initialize",l,!1),[t],null);else{var s=e.const_get_relative(g,"Array").$for(r,a);i(o,e.find_super_dispatcher(o,"initialize",l,!1),[new s(t.$to_n())],null)}return o.buffer=t,o.type=a},l.$$arity=-2),e.defn(y,"$bits",u=function(){return 8*this.native.BYTES_PER_ELEMENT},u.$$arity=0),e.defn(y,"$[]",_=function(e,t){var r=this;return null==t&&(t=n),o(t)?r.native.subarray(e,t):r.native[e]},_.$$arity=-2),e.defn(y,"$[]=",f=function(e,t){return this.native[e]=t},f.$$arity=2),e.defn(y,"$bytesize",p=function(){return this.native.byteLength},p.$$arity=0),e.defn(y,"$each",d=function(){var t=this,r=d.$$p,a=r||n;if(r&&(d.$$p=null),a===n)return t.$enum_for("each");for(var i=0,o=t.native.length;i<o;i++)e.yield1(a,t.native[i]);return t},d.$$arity=0),e.defn(y,"$length",v=function(){return this.native.length},v.$$arity=0),e.defn(y,"$merge!",h=function(e,t){return this.native.set(e.$to_n(),t)},h.$$arity=-2),e.alias(y,"size","length")}(l[0],0,l)}(t[0],0,t)},Opal.modules["buffer/view"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.gvars,i=e.truthy,o=e.send;return e.add_stubs(["$include","$!","$nil?","$[]","$attr_reader","$native?","$to_n","$name_for"]),function(t,$super,$){function s(){}var c=s=r(t,null,"Buffer",s),l=(c.$$proto,[c].concat($));return function(t,$super,$){function s(){}var c,l,u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M=s=r(t,null,"View",s),N=M.$$proto,T=[M].concat($);return N.native=n,M.$include(e.const_get_relative(T,"Native")),e.defs(M,"$supported?",c=function(){return null==a.$&&(a.$=n),a.$["$[]"]("DataView")["$nil?"]()["$!"]()},c.$$arity=0),M.$attr_reader("buffer","offset"),e.defn(M,"$initialize",l=function(t,r,a){var $,s=this,c=l.$$p;return null==r&&(r=n),null==a&&(a=n),c&&(l.$$p=null),i(s["$native?"](t))?o(s,e.find_super_dispatcher(s,"initialize",l,!1),[t],null):i(i($=r)?a:$)?o(s,e.find_super_dispatcher(s,"initialize",l,!1),[new DataView(t.$to_n(),r.$to_n(),a.$to_n())],null):i(r)?o(s,e.find_super_dispatcher(s,"initialize",l,!1),[new DataView(t.$to_n(),r.$to_n())],null):o(s,e.find_super_dispatcher(s,"initialize",l,!1),[new DataView(t.$to_n())],null),s.buffer=t,s.offset=r},l.$$arity=-2),e.defn(M,"$length",u=function(){return this.native.byteLength},u.$$arity=0),e.alias(M,"size","length"),e.defn(M,"$get",_=function(t,n,r,a){return null==n&&(n=8),null==r&&(r="unsigned"),null==a&&(a=!1),this.native["get"+e.const_get_relative(T,"Buffer").$name_for(n,r)](t,a)},_.$$arity=-2),e.alias(M,"[]","get"),e.defn(M,"$set",f=function(t,n,r,a,i){return null==r&&(r=8),null==a&&(a="unsigned"),null==i&&(i=!1),this.native["set"+e.const_get_relative(T,"Buffer").$name_for(r,a)](t,n,i)},f.$$arity=-3),e.alias(M,"[]=","set"),e.defn(M,"$get_int8",p=function(e,t){return null==t&&(t=!1),this.native.getInt8(e,t)},p.$$arity=-2),e.defn(M,"$set_int8",d=function(e,t,n){return null==n&&(n=!1),this.native.setInt8(e,t,n)},d.$$arity=-3),e.defn(M,"$get_uint8",v=function(e,t){return null==t&&(t=!1),this.native.getUint8(e,t)},v.$$arity=-2),e.defn(M,"$set_uint8",h=function(e,t,n){return null==n&&(n=!1),this.native.setUint8(e,t,n)},h.$$arity=-3),e.defn(M,"$get_int16",y=function(e,t){return null==t&&(t=!1),this.native.getInt16(e,t)},y.$$arity=-2),e.defn(M,"$set_int16",m=function(e,t,n){return null==n&&(n=!1),this.native.setInt16(e,t,n)},m.$$arity=-3),e.defn(M,"$get_uint16",g=function(e,t){return null==t&&(t=!1),this.native.getUint16(e,t)},g.$$arity=-2),e.defn(M,"$set_uint16",b=function(e,t,n){return null==n&&(n=!1),this.native.setUint16(e,t,n)},b.$$arity=-3),e.defn(M,"$get_int32",w=function(e,t){return null==t&&(t=!1),this.native.getInt32(e,t)},w.$$arity=-2),e.defn(M,"$set_int32",k=function(e,t,n){return null==n&&(n=!1),this.native.setInt32(e,t,n)},k.$$arity=-3),e.defn(M,"$get_uint32",O=function(e,t){return null==t&&(t=!1),this.native.getUint32(e,t)},O.$$arity=-2),e.defn(M,"$set_uint32",q=function(e,t,n){return null==n&&(n=!1),this.native.setUint32(e,t,n)},q.$$arity=-3),e.defn(M,"$get_float32",E=function(e,t){return null==t&&(t=!1),this.native.getFloat32(e,t)},E.$$arity=-2),e.defn(M,"$set_float32",x=function(e,t,n){return null==n&&(n=!1),this.native.setFloat32(e,t,n)},x.$$arity=-3),e.defn(M,"$get_float64",A=function(e,t){return null==t&&(t=!1),this.native.getFloat64(e,t)},A.$$arity=-2),e.defn(M,"$set_float64",S=function(e,t,n){return null==n&&(n=!1),this.native.setFloat64(e,t,n)},S.$$arity=-3),n&&"set_float64"}(l[0],0,l)}(t[0],0,t)},Opal.modules.buffer=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.klass),i=e.gvars,o=e.truthy,$=e.send;return e.add_stubs(["$require","$include","$!","$nil?","$[]","$===","$native?","$new"]),t.$require("native"),t.$require("buffer/array"),t.$require("buffer/view"),function(t,$super,n){function s(){}var c,l,u,_,f,p,d=s=a(t,null,"Buffer",s),v=d.$$proto,h=[d].concat(n);return v.native=r,d.$include(e.const_get_relative(h,"Native")),e.defs(d,"$supported?",c=function(){return null==i.$&&(i.$=r),i.$["$[]"]("ArrayBuffer")["$nil?"]()["$!"]()},c.$$arity=0),e.defs(d,"$name_for",l=function(e,t){var n=r;return""+(n=t,"unsigned"["$==="](n)?"Uint":"signed"["$==="](n)?"Int":"float"["$==="](n)?"Float":r)+e},l.$$arity=2),e.defn(d,"$initialize",u=function(t,n){var r=this,a=u.$$p;return null==n&&(n=8),a&&(u.$$p=null),o(r["$native?"](t))?$(r,e.find_super_dispatcher(r,"initialize",u,!1),[t],null):$(r,e.find_super_dispatcher(r,"initialize",u,!1),[new ArrayBuffer(t*(n/8))],null)},u.$$arity=-2),e.defn(d,"$length",_=function(){return this.native.byteLength},_.$$arity=0),e.alias(d,"size","length"),e.defn(d,"$to_a",f=function(t,n){var r=this;return null==t&&(t=8),null==n&&(n="unsigned"),e.const_get_relative(h,"Array").$new(r,t,n)},f.$$arity=-1),e.defn(d,"$view",p=function(t,n){var a=this;return null==t&&(t=r),null==n&&(n=r),e.const_get_relative(h,"View").$new(a,t,n)},p.$$arity=-1),r&&"view"}(n[0],0,n)},Opal.modules["browser/event/message"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy;return e.add_stubs(["$require","$supports?","$convert","$supported?","$new","$alias_native"]),t.$require("buffer"),function(t,n){var $=a(t,"Browser"),s=($.$$proto,[$].concat(n));!function(t,$super,n){function a(){}var $=a=i(t,null,"Event",a),s=($.$$proto,[$].concat(n));(function(t,$super,n){function a(){}var $,s,c,l,u,_=a=i(t,$super,"Message",a),f=_.$$proto,p=[_].concat(n);f.native=r,e.defs(_,"$supported?",$=function(){return e.const_get_relative(p,"Browser")["$supports?"]("Event.Message")},$.$$arity=0),function(t,$super,n){function a(){}var o,$,s,c=a=i(t,$super,"Definition",a),l=c.$$proto,u=[c].concat(n);l.native=r,e.defn(c,"$data=",o=function(e){return this.native.data=e},o.$$arity=1),e.defn(c,"$origin=",$=function(e){return this.native.origin=e},$.$$arity=1),e.defn(c,"$source=",s=function(t){return this.native.source=e.const_get_relative(u,"Native").$convert(t)},s.$$arity=1)}(p[0],e.const_get_relative(p,"Definition"),p),o(_["$supported?"]())&&(o(e.const_get_relative(p,"Browser")["$supports?"]("Event.constructor"))?e.defs(_,"$construct",s=function(e,t){return new MessageEvent(e,t)},s.$$arity=2):o(e.const_get_relative(p,"Browser")["$supports?"]("Event.create"))&&e.defs(_,"$construct",c=function(e,t){var n=document.createEvent("MessageEvent");return n.initMessageEvent(e,t.bubbles,t.cancelable,t.data,t.origin,"",t.source||window),n},c.$$arity=2)),e.defn(_,"$data",l=function(){var t=this;return window.ArrayBuffer&&t.native.data instanceof ArrayBuffer?e.const_get_relative(p,"Buffer").$new(t.native.data):window.Blob&&t.native.data instanceof Blob?e.const_get_relative(p,"Blob").$new(t.native.data):t.native.data},l.$$arity=0),_.$alias_native("origin"),e.defn(_,"$source",u=function(){var t=this.native.source;return window.Window&&t instanceof window.Window?e.const_get_relative(p,"Window").$new(t):r},u.$$arity=0)})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(n[0],n)},Opal.modules["browser/event/close"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Event",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l=o=a(t,$super,"Close",o),u=(l.$$proto,[l].concat(r));e.defs(l,"$supported?",$=function(){return e.const_get_relative(u,"Browser")["$supports?"]("Event.Close")},$.$$arity=0),function(t,$super,r){function i(){}var o,$,s,c,l=i=a(t,$super,"Definition",i),u=l.$$proto;[l].concat(r);u.native=n,e.defn(l,"$code=",o=function(e){return this.native.code=e},o.$$arity=1),e.defn(l,"$reason=",$=function(e){return this.native.reason=e},$.$$arity=1),e.defn(l,"$clean!",s=function(){return this.native.wasClean=!0},s.$$arity=1),e.defn(l,"$not_clean!",c=function(){return this.native.wasClean=!1},c.$$arity=1)}(u[0],e.const_get_relative(u,"Definition"),u),i(l["$supported?"]())&&(i(e.const_get_relative(u,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new CloseEvent(e,t)},s.$$arity=2):i(e.const_get_relative(u,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",c=function(e,t){var n=document.createEvent("CloseEvent");return n.initCloseEvent(e,t.bubbles,t.cancelable,t.wasClean,t.code,t.reason),n},c.$$arity=2)),l.$alias_native("code"),l.$alias_native("reason"),l.$alias_native("clean?","wasClean")})(s[0],e.const_get_relative(s,"Event"),s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n=e.top,r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.truthy,s=e.hash2,c=e.send;return e.add_stubs(["$require","$gsub","$[]","$aliases","$name_for","$===","$class_for","$new","$construct","$const_get","$to_proc","$arguments=","$-","$supports?","$merge!","$Native","$to_n","$==","$name","$attr_reader","$attr_writer","$convert","$alias_native","$off","$prevent","$stop"]),n.$require("browser/event/base"),n.$require("browser/event/ui"),n.$require("browser/event/mouse"),n.$require("browser/event/keyboard"),n.$require("browser/event/focus"),n.$require("browser/event/wheel"),n.$require("browser/event/composition"),n.$require("browser/event/animation"),n.$require("browser/event/audio_processing"),n.$require("browser/event/before_unload"),n.$require("browser/event/composition"),n.$require("browser/event/clipboard"),n.$require("browser/event/device_light"),n.$require("browser/event/device_motion"),n.$require("browser/event/device_orientation"),n.$require("browser/event/device_proximity"),n.$require("browser/event/drag"),n.$require("browser/event/gamepad"),n.$require("browser/event/hash_change"),n.$require("browser/event/progress"),n.$require("browser/event/page_transition"),n.$require("browser/event/pop_state"),n.$require("browser/event/storage"),n.$require("browser/event/touch"),n.$require("browser/event/sensor"),n.$require("browser/event/custom"),n.$require("browser/event/message"),
n.$require("browser/event/close"),function(n,r){var l=i(n,"Browser"),u=(l.$$proto,[l].concat(r));!function(n,$super,r){function i(){}var l,u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T=i=o(n,null,"Event",i),C=T.$$proto,I=[T].concat(r);C.native=C.on=C.callback=a,e.defs(T,"$aliases",l=function(){var e,t=this;return null==t.aliases&&(t.aliases=a),t.aliases=$(e=t.aliases)?e:s(["dom:load","hover"],{"dom:load":"DOMContentLoaded",hover:"mouse:over"})},l.$$arity=0),e.defs(T,"$name_for",u=function(e){var t;return($(t=this.$aliases()["$[]"](e))?t:e).$gsub(":","")},u.$$arity=1),e.defs(T,"$class_for",_=function(t){var n=a;return n=this.$name_for(t),"animationend"["$==="](n)||"animationiteration"["$==="](n)||"animationstart"["$==="](n)?e.const_get_relative(I,"Animation"):"audioprocess"["$==="](n)?e.const_get_relative(I,"AudioProcessing"):"beforeunload"["$==="](n)?e.const_get_relative(I,"BeforeUnload"):"compositionend"["$==="](n)||"compositionstart"["$==="](n)||"compositionupdate"["$==="](n)?e.const_get_relative(I,"Composition"):"copy"["$==="](n)||"cut"["$==="](n)?e.const_get_relative(I,"Clipboard"):"devicelight"["$==="](n)?e.const_get_relative(I,"DeviceLight"):"devicemotion"["$==="](n)?e.const_get_relative(I,"DeviceMotion"):"deviceorientation"["$==="](n)?e.const_get_relative(I,"DeviceOrientation"):"deviceproximity"["$==="](n)?e.const_get_relative(I,"DeviceProximity"):"drag"["$==="](n)||"dragend"["$==="](n)||"dragleave"["$==="](n)||"dragover"["$==="](n)||"dragstart"["$==="](n)||"drop"["$==="](n)?e.const_get_relative(I,"Drag"):"gamepadconnected"["$==="](n)||"gamepaddisconnected"["$==="](n)?e.const_get_relative(I,"Gamepad"):"hashchange"["$==="](n)?e.const_get_relative(I,"HashChange"):"load"["$==="](n)||"loadend"["$==="](n)||"loadstart"["$==="](n)?e.const_get_relative(I,"Progress"):"pagehide"["$==="](n)||"pageshow"["$==="](n)?e.const_get_relative(I,"PageTransition"):"popstate"["$==="](n)?e.const_get_relative(I,"PopState"):"storage"["$==="](n)?e.const_get_relative(I,"Storage"):"touchcancel"["$==="](n)||"touchend"["$==="](n)||"touchleave"["$==="](n)||"touchmove"["$==="](n)||"touchstart"["$==="](n)?e.const_get_relative(I,"Touch"):"compassneedscalibration"["$==="](n)||"userproximity"["$==="](n)?e.const_get_relative(I,"Sensor"):"message"["$==="](n)?e.const_get_relative(I,"Message"):"close"["$==="](n)?e.const_get_relative(I,"Close"):"click"["$==="](n)||"contextmenu"["$==="](n)||"dblclick"["$==="](n)||"mousedown"["$==="](n)||"mouseenter"["$==="](n)||"mouseleave"["$==="](n)||"mousemove"["$==="](n)||"mouseout"["$==="](n)||"mouseover"["$==="](n)||"mouseup"["$==="](n)||"show"["$==="](n)?e.const_get_relative(I,"Mouse"):"keydown"["$==="](n)||"keypress"["$==="](n)||"keyup"["$==="](n)?e.const_get_relative(I,"Keyboard"):"blur"["$==="](n)||"focus"["$==="](n)||"focusin"["$==="](n)||"focusout"["$==="](n)?e.const_get_relative(I,"Focus"):"wheel"["$==="](n)?e.const_get_relative(I,"Wheel"):"abort"["$==="](n)||"afterprint"["$==="](n)||"beforeprint"["$==="](n)||"cached"["$==="](n)||"canplay"["$==="](n)||"canplaythrough"["$==="](n)||"change"["$==="](n)||"chargingchange"["$==="](n)||"chargingtimechange"["$==="](n)||"checking"["$==="](n)||"close"["$==="](n)||"dischargingtimechange"["$==="](n)||"DOMContentLoaded"["$==="](n)||"downloading"["$==="](n)||"durationchange"["$==="](n)||"emptied"["$==="](n)||"ended"["$==="](n)||"error"["$==="](n)||"fullscreenchange"["$==="](n)||"fullscreenerror"["$==="](n)||"input"["$==="](n)||"invalid"["$==="](n)||"levelchange"["$==="](n)||"loadeddata"["$==="](n)||"loadedmetadata"["$==="](n)||"noupdate"["$==="](n)||"obsolete"["$==="](n)||"offline"["$==="](n)||"online"["$==="](n)||"open"["$==="](n)||"orientationchange"["$==="](n)||"pause"["$==="](n)||"pointerlockchange"["$==="](n)||"pointerlockerror"["$==="](n)||"play"["$==="](n)||"playing"["$==="](n)||"ratechange"["$==="](n)||"readystatechange"["$==="](n)||"reset"["$==="](n)||"seeked"["$==="](n)||"seeking"["$==="](n)||"stalled"["$==="](n)||"submit"["$==="](n)||"success"["$==="](n)||"suspend"["$==="](n)||"timeupdate"["$==="](n)||"updateready"["$==="](n)||"visibilitychange"["$==="](n)||"volumechange"["$==="](n)||"waiting"["$==="](n)?e.const_get_relative(I,"Event"):e.const_get_relative(I,"Custom")},_.$$arity=1),e.defs(T,"$supported?",f=function(){return!0},f.$$arity=0),e.defs(T,"$create",p=function(n){var r,i=this,o=p.$$p,$=o||a,s=a,l=a,u=a,_=arguments.length,f=_-1;f<0&&(f=0),r=new Array(f);for(var d=1;d<_;d++)r[d-1]=arguments[d];return o&&(p.$$p=null),n=i.$name_for(n),l=(s=i.$class_for(n)).$new(s.$construct(n,c(s.$const_get("Definition"),"new",[],$.$to_proc()))),u=[r],c(l,"arguments=",e.to_a(u)),u[t(u.length,1)],l},p.$$arity=-2),$(e.const_get_relative(I,"Browser")["$supports?"]("Event.constructor"))?e.defs(T,"$construct",d=function(e,t){return new Event(e,t)},d.$$arity=2):$(e.const_get_relative(I,"Browser")["$supports?"]("Event.create"))?e.defs(T,"$construct",v=function(t,n){try{var r=this,a=document.createEvent("HTMLEvents");a.initEvent(t,n.bubbles,n.cancelable),e.ret(r.$Native(a)["$merge!"](n))}catch(i){if(i===e.returner)return i.$v;throw i}},v.$$arity=2):$(e.const_get_relative(I,"Browser")["$supports?"]("Event.createObject"))?e.defs(T,"$construct",h=function(e,t){return this.$Native(document.createEventObject())["$merge!"](t)["$merge!"]({type:e}).$to_n()},h.$$arity=2):e.defs(T,"$construct",y=function(e,t){return this.$Native(t)["$merge!"]({type:e}).$to_n()},y.$$arity=2),e.defs(T,"$new",m=function(t,n){var r=this,o=m.$$p,s=a,l=a,u=a,_=a;for(null==n&&(n=a),o&&(m.$$p=null),u=0,_=arguments.length,l=new Array(_);u<_;u++)l[u]=arguments[u];return r["$=="](e.const_get_relative(I,"Event"))?(s=r.$class_for($(n)?n.$name():t.type))["$=="](e.const_get_relative(I,"Event"))?c(r,e.find_super_dispatcher(r,"new",m,!1,i),l,o):s.$new(t,n):c(r,e.find_super_dispatcher(r,"new",m,!1,i),l,o)},m.$$arity=-2),T.$attr_reader("callback"),T.$attr_writer("on"),e.defn(T,"$initialize",g=function(t,n){var r=this,i=g.$$p;return null==n&&(n=a),i&&(g.$$p=null),c(r,e.find_super_dispatcher(r,"initialize",g,!1),[t],null),r.callback=n},g.$$arity=-2),e.defn(T,"$name",b=function(){return this.native.type},b.$$arity=0),e.defn(T,"$on",w=function(){var t,n=this;return $(t=n.on)?t:e.const_get_relative(I,"Target").$convert(n.native.currentTarget)},w.$$arity=0),e.defn(T,"$target",k=function(){var t=this;return e.const_get_relative(I,"Target").$convert(t.native.srcElement||t.native.target)},k.$$arity=0),e.defn(T,"$arguments",O=function(){return this.native.arguments||[]},O.$$arity=0),e.defn(T,"$arguments=",q=function(e){return this.native.arguments=e},q.$$arity=1),T.$alias_native("bubbles?","bubbles"),T.$alias_native("cancelable?","cancelable"),T.$alias_native("data"),T.$alias_native("phase","eventPhase"),T.$alias_native("at","timeStamp"),e.defn(T,"$off",E=function(){var e=this;return $(e.callback)?e.callback.$off():a},E.$$arity=0),e.defn(T,"$stopped?",x=function(){return!!this.native.stopped},x.$$arity=0),e.defn(T,"$stop",A=function(){var e=this;return $("undefined"!=typeof e.native.stopPropagation)&&e.native.stopPropagation(),e.native.stopped=!0},A.$$arity=0),e.defn(T,"$prevent",S=function(){var e=this;return $("undefined"!=typeof e.native.preventDefault)&&e.native.preventDefault(),e.native.prevented=!0},S.$$arity=0),e.defn(T,"$prevented?",M=function(){return!!this.native.prevented},M.$$arity=0),e.defn(T,"$stop!",N=function(){var e=this;return e.$prevent(),e.$stop()},N.$$arity=0)}(u[0],0,u)}(r[0],r)},Opal.modules["browser/window/view"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$to_n","$supports?","$raise"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Window",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l,u,_,f,p=o=a(t,null,"View",o),d=p.$$proto,v=[p].concat(r);d.native=n,e.defn(p,"$initialize",$=function(e){var t=this;return t.window=e,t.native=e.$to_n()},$.$$arity=1),i(e.const_get_relative(v,"Browser")["$supports?"]("Window.innerSize"))?(e.defn(p,"$width",s=function(){return this.native.innerWidth},s.$$arity=0),e.defn(p,"$height",c=function(){return this.native.innerHeight},c.$$arity=0)):i(e.const_get_relative(v,"Browser")["$supports?"]("Element.clientSize"))?(e.defn(p,"$height",l=function(){return this.native.document.documentElement.clientHeight},l.$$arity=0),e.defn(p,"$width",u=function(){return this.native.document.documentElement.clientWidth},u.$$arity=0)):(e.defn(p,"$width",_=function(){return this.$raise(e.const_get_relative(v,"NotImplementedError"),"window size unsupported")},_.$$arity=0),e.defn(p,"$height",f=function(){return this.$raise(e.const_get_relative(v,"NotImplementedError"),"window size unsupported")},f.$$arity=0))})(s[0],0,s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/window/size"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy,o=e.hash2;return e.add_stubs(["$to_n","$===","$first","$values_at","$width","$height","$supports?","$raise","$set"]),function(t,$){var s=r(t,"Browser"),c=(s.$$proto,[s].concat($));!function(t,$super,r){function $(){}var s=$=a(t,null,"Window",$),c=(s.$$proto,[s].concat(r));(function(t,$super,r){function $(){}var s,c,l,u,_,f,p,d,v=$=a(t,null,"Size",$),h=v.$$proto,y=[v].concat(r);h.native=n,e.defn(v,"$initialize",s=function(e){var t=this;return t.window=e,t.native=e.$to_n()},s.$$arity=1),e.defn(v,"$set",c=function(){var t,r,a,o=this,$=n,s=n,c=arguments.length,l=c-0;l<0&&(l=0),a=new Array(l);for(var u=0;u<c;u++)a[u-0]=arguments[u];return i(e.const_get_relative(y,"Hash")["$==="](a.$first()))?(r=a.$first().$values_at("width","height"),$=null==(t=e.to_ary(r))[0]?n:t[0],s=null==t[1]?n:t[1]):(r=a,$=null==(t=e.to_ary(r))[0]?n:t[0],s=null==t[1]?n:t[1]),$=i(t=$)?t:o.$width(),s=i(t=s)?t:o.$height(),o.native.resizeTo($,s),o},c.$$arity=-1),i(e.const_get_relative(y,"Browser")["$supports?"]("Window.outerSize"))?(e.defn(v,"$width",l=function(){return this.native.outerWidth},l.$$arity=0),e.defn(v,"$height",u=function(){return this.native.outerHeight},u.$$arity=0)):(e.defn(v,"$width",_=function(){return this.$raise(e.const_get_relative(y,"NotImplementedError"),"window outer size not supported")},_.$$arity=0),e.defn(v,"$height",f=function(){return this.$raise(e.const_get_relative(y,"NotImplementedError"),"window outer size not supported")},f.$$arity=0)),e.defn(v,"$width=",p=function(e){return this.$set(o(["width"],{width:e}))},p.$$arity=1),e.defn(v,"$height=",d=function(e){return this.$set(o(["height"],{height:e}))},d.$$arity=1)})(c[0],0,c)}(c[0],0,c)}(t[0],t)},Opal.modules["browser/window/scroll"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$to_n","$supports?","$new","$raise","$x","$position","$y","$[]"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Window",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l,u,_,f,p,d=o=a(t,null,"Scroll",o),v=d.$$proto,h=[d].concat(r);v.native=n,e.defn(d,"$initialize",$=function(e){var t=this;return t.window=e,t.native=e.$to_n()},$.$$arity=1),i(e.const_get_relative(h,"Browser")["$supports?"]("Window.scroll"))?e.defn(d,"$position",s=function(){var t=this.native.document,n=t.documentElement,r=t.body,a=n.scrollLeft||r.scrollLeft,i=n.scrollTop||r.scrollTop;return e.const_get_relative(h,"Position").$new(a,i)},s.$$arity=0):i(e.const_get_relative(h,"Browser")["$supports?"]("Window.pageOffset"))?e.defn(d,"$position",c=function(){var t=this;return e.const_get_relative(h,"Position").$new(t.native.pageXOffset,t.native.pageYOffset)},c.$$arity=0):e.defn(d,"$position",l=function(){return this.$raise(e.const_get_relative(h,"NotImplementedError"),"window scroll unsupported")},l.$$arity=0),e.defn(d,"$x",u=function(){return this.$position().$x()},u.$$arity=0),e.defn(d,"$y",_=function(){return this.$position().$y()},_.$$arity=0),e.defn(d,"$to",f=function(e){var t,r=this,a=n,o=n;return a=i(t=e["$[]"]("x"))?t:r.$x(),o=i(t=e["$[]"]("y"))?t:r.$y(),r.native.scrollTo(a,o),r},f.$$arity=1),e.defn(d,"$by",p=function(e){var t,r=this,a=n,o=n;return a=i(t=e["$[]"]("x"))?t:0,o=i(t=e["$[]"]("y"))?t:0,r.native.scrollBy(a,o),r},p.$$arity=1)})(s[0],0,s)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/window"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send,$=e.truthy,s=e.gvars,c=e.hash2;return e.add_stubs(["$require","$delete","$join","$map","$===","$new","$include","$target","$supports?","$[]","$raise","$alert","$prompt","$confirm"]),t.$require("browser/window/view"),t.$require("browser/window/size"),t.$require("browser/window/scroll"),function(t,n){var l=a(t,"Browser"),u=(l.$$proto,[l].concat(n));!function(t,$super,n){function a(){}var l,u,_,f,p,d,v,h,y,m,g,b=a=i(t,null,"Window",a),w=b.$$proto,k=[b].concat(n);w.native=r,e.defs(b,"$open",l=function(e,t){var n,a=this,i=r,$=r;i=t.$delete("name"),$=o(t,"map",[],(n=function(e,t){n.$$s;var a=r;return null==e&&(e=r),null==t&&(t=r),a=t,e+"="+(t=(!0)["$==="](a)?"yes":(!1)["$==="](a)?"no":t)},n.$$s=a,n.$$arity=2,n)).$join(",");var s=window.open(e,i,$);return null==s?r:a.$new(s)},l.$$arity=2),b.$include(e.const_get_relative(k,"Native")),b.$include(e.const_get_qualified(e.const_get_relative(k,"Event"),"Target")),o(b,"target",[],((u=function(e){u.$$s;return null==s.window&&(s.window=r),null==e&&(e=r),$(e==window)?s.window:r}).$$s=b,u.$$arity=1,u)),e.defn(b,"$alert",_=function(e){return this.native.alert(e),e},_.$$arity=1),e.defn(b,"$prompt",f=function(e){return this.native.prompt(e)||r},f.$$arity=1),e.defn(b,"$confirm",p=function(e){return this.native.confirm(e)||!1},p.$$arity=1),e.defn(b,"$view",d=function(){var t=this;return e.const_get_relative(k,"View").$new(t)},d.$$arity=0),e.defn(b,"$size",v=function(){var t=this;return e.const_get_relative(k,"Size").$new(t)},v.$$arity=0),e.defn(b,"$scroll",h=function(){var t=this;return e.const_get_relative(k,"Scroll").$new(t)},h.$$arity=0),$(e.const_get_relative(k,"Browser")["$supports?"]("Window.send"))?e.defn(b,"$send",y=function(e,t){var n,r=this;return null==t&&(t=c([],{})),r.native.postMessage(e,$(n=t["$[]"]("to"))?n:"*")},y.$$arity=-2):e.defn(b,"$send",m=function(t,n){var r=this;return null==n&&(n=c([],{})),r.$raise(e.const_get_relative(k,"NotImplementedError"),"message sending unsupported")},m.$$arity=-2),e.defn(b,"$close",g=function(){return window.open("","_self","")&&window.close()||(window.opener=null)||(window.opener="")},g.$$arity=0)}(u[0],0,u)}(n[0],n),s.window=e.const_get_qualified(e.const_get_relative(n,"Browser"),"Window").$new(window),function(t,n){var i,o,$,c=a(t,"Kernel");c.$$proto,[c].concat(n);e.defn(c,"$alert",i=function(e){return null==s.window&&(s.window=r),s.window.$alert(e)},i.$$arity=1),e.defn(c,"$prompt",o=function(e){return null==s.window&&(s.window=r),s.window.$prompt(e)},o.$$arity=1),e.defn(c,"$confirm",$=function(e){return null==s.window&&(s.window=r),s.window.$confirm(e)},$.$$arity=1)}(n[0],n)},Opal.modules["browser/dom/node_set"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.send,o=e.truthy;return e.add_stubs(["$new","$uniq","$map","$flatten","$DOM","$convert","$respond_to?","$each","$__send__","$to_proc","$===","$at_css","$at_xpath","$[]","$css","$select","$=~","$search","$xpath"]),function(t,$){var s=r(t,"Browser"),c=(s.$$proto,[s].concat($));!function(t,$){var s=r(t,"DOM"),c=(s.$$proto,[s].concat($));!function(t,$super,r){function $(){}var s,c,l,u,_,f,p,d,v,h,y=$=a(t,null,"NodeSet",$),m=y.$$proto,g=[y].concat(r);m.literal=n,e.defs(y,"$[]",s=function(){var t,r,a=this,o=arguments.length,$=o-0;$<0&&($=0),r=new Array($);for(var s=0;s<o;s++)r[s-0]=arguments[s];return a.$new(i(r.$flatten(),"map",[],(t=function(r){var a=t.$$s||this;return null==r&&(r=n),a.$DOM(e.const_get_relative(g,"Native").$convert(r))},t.$$s=a,t.$$arity=1,t)).$uniq())},s.$$arity=-1),e.defn(y,"$initialize",c=function(e){return this.literal=e},c.$$arity=1),e.defn(y,"$method_missing",l=function(t){var r,a,$=this,s=l.$$p,c=s||n,u=n,_=arguments.length,f=_-1;f<0&&(f=0),a=new Array(f);for(var p=1;p<_;p++)a[p-1]=arguments[p];return s&&(l.$$p=null),o($.literal["$respond_to?"](t))?(u=i($.literal,"__send__",[t].concat(e.to_a(a)),c.$to_proc()),o(u===$.literal)?$:o(e.const_get_relative(g,"Array")["$==="](u))?e.const_get_relative(g,"NodeSet").$new(u):u):(i($,"each",[],((r=function(o){r.$$s;return null==o&&(o=n),i(o,"__send__",[t].concat(e.to_a(a)),c.$to_proc())}).$$s=$,r.$$arity=1,r)),$)},l.$$arity=-2),e.defn(y,"$at_css",u=function(){try{var t,r,a=this,$=arguments.length,s=$-0;s<0&&(s=0),r=new Array(s);for(var c=0;c<$;c++)r[c-0]=arguments[c];return i(a,"each",[],((t=function(a){t.$$s;if(null==a&&(a=n),!o(a=i(a,"at_css",e.to_a(r))))return n;e.ret(a)}).$$s=a,t.$$arity=1,t)),n}catch(l){if(l===e.returner)return l.$v;throw l}},u.$$arity=-1),e.defn(y,"$at_xpath",_=function(){try{var t,r,a=this,$=arguments.length,s=$-0;s<0&&(s=0),r=new Array(s);for(var c=0;c<$;c++)r[c-0]=arguments[c];return i(a,"each",[],((t=function(a){t.$$s;if(null==a&&(a=n),!o(a=i(a,"at_xpath",e.to_a(r))))return n;e.ret(a)}).$$s=a,t.$$arity=1,t)),n}catch(l){if(l===e.returner)return l.$v;throw l}},_.$$arity=-1),e.defn(y,"$css",f=function(t){var r,a=this;return e.const_get_relative(g,"NodeSet")["$[]"](i(a.literal,"map",[],((r=function(e){r.$$s;return null==e&&(e=n),e.$css(t)}).$$s=a,r.$$arity=1,r)))},f.$$arity=1),e.defn(y,"$filter",p=function(e){var t,r=this;return i(r.literal,"select",[],((t=function(r){t.$$s;return null==r&&(r=n),r["$=~"](e)}).$$s=r,t.$$arity=1,t))},p.$$arity=1),e.defn(y,"$search",d=function(){var t,r,a=this,o=arguments.length,$=o-0;$<0&&($=0),r=new Array($);for(var s=0;s<o;s++)r[s-0]=arguments[s];return e.const_get_relative(g,"NodeSet")["$[]"](i(a.literal,"map",[],((t=function(a){t.$$s;return null==a&&(a=n),i(a,"search",e.to_a(r))}).$$s=a,t.$$arity=1,t)))},d.$$arity=-1),e.defn(y,"$xpath",v=function(t){var r,a=this;return e.const_get_relative(g,"NodeSet")["$[]"](i(a.literal,"map",[],((r=function(e){r.$$s;return null==e&&(e=n),e.$xpath(t)}).$$s=a,r.$$arity=1,r)))},v.$$arity=1),e.defn(y,"$to_ary",h=function(){return this.literal},h.$$arity=0)}(c[0],0,c)}(c[0],c)}(t[0],t)},Opal.modules["browser/dom/node"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy,o=e.send,$=e.hash2;return e.add_stubs(["$include","$==","$[]","$new","$raise","$convert","$respond_to?","$each","$<<","$native?","$===","$>>","$DOM","$to_proc","$parent","$last","$pop","$select!","$=~","$remove_child","$remove","$children","$supports?","$node_type","$first","$select","$element_children","$to_s","$next","$!","$element?","$previous","$try_convert","$name"]),function(t,s){var c=r(t,"Browser"),l=(c.$$proto,[c].concat(s));!function(t,s){var c=r(t,"DOM"),l=(c.$$proto,[c].concat(s));!function(t,$super,r){function s(){}var c,l,u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C,I,D,H,z,P,R,j,B,L,U,F,W,Y,G,K,X,V,J,Z,Q,ee,te,ne,re,ae,ie,oe,$e=s=a(t,null,"Node",s),se=$e.$$proto,ce=[$e].concat(r);se.native=n,$e.$include(e.const_get_relative(ce,"Native")),e.const_set(ce[0],"ELEMENT_NODE",1),e.const_set(ce[0],"ATTRIBUTE_NODE",2),e.const_set(ce[0],"TEXT_NODE",3),e.const_set(ce[0],"CDATA_SECTION_NODE",4),e.const_set(ce[0],"ENTITY_REFERENCE_NOCE",5),e.const_set(ce[0],"ENTITY_NODE",6),e.const_set(ce[0],"PROCESSING_INSTRUCTION_NODE",7),e.const_set(ce[0],"COMMENT_NODE",8),e.const_set(ce[0],"DOCUMENT_NODE",9),e.const_set(ce[0],"DOCUMENT_TYPE_NODE",10),e.const_set(ce[0],"DOCUMENT_FRAGMENT_NODE",11),e.const_set(ce[0],"NOTATION_NODE",12),e.defs($e,"$new",c=function(t){var r,a=this,$=c.$$p,l=n,u=n,_=n,f=n;for(null==a.classes&&(a.classes=n),$&&(c.$$p=null),_=0,f=arguments.length,u=new Array(f);_<f;_++)u[_]=arguments[_];return a["$=="](e.const_get_relative(ce,"Node"))?(a.classes=i(r=a.classes)?r:[n,e.const_get_relative(ce,"Element"),e.const_get_relative(ce,"Attribute"),e.const_get_relative(ce,"Text"),e.const_get_relative(ce,"CDATA"),n,n,n,e.const_get_relative(ce,"Comment"),e.const_get_relative(ce,"Document"),n,e.const_get_relative(ce,"DocumentFragment")],i(l=a.classes["$[]"](t.nodeType))?l.$new(t):a.$raise(e.const_get_relative(ce,"ArgumentError"),"cannot instantiate a non derived Node object")):o(a,e.find_super_dispatcher(a,"new",c,!1,s),u,$)},c.$$arity=1),e.defn($e,"$==",l=function(t){return this.native===e.const_get_relative(ce,"Native").$convert(t)},l.$$arity=1),e.defn($e,"$<<",u=function(t){var r,a=this;return i(e.const_get_relative(ce,"Opal")["$respond_to?"](t,"each"))?(o(t,"each",[],((r=function(e){var t=r.$$s||this;return null==e&&(e=n),t["$<<"](e)}).$$s=a,r.$$arity=1,r)),a):(i(a["$native?"](t))||(t=i(e.const_get_relative(ce,"String")["$==="](t))?a.native.ownerDocument.createTextNode(t):e.const_get_relative(ce,"Native").$convert(t)),a.native.appendChild(t),a)},u.$$arity=1),e.defn($e,"$>>",_=function(t){var r,a=this;return i(e.const_get_relative(ce,"Opal")["$respond_to?"](t,"each"))?(o(t,"each",[],((r=function(e){var t=r.$$s||this;return null==e&&(e=n),t["$>>"](e)}).$$s=a,r.$$arity=1,r)),a):(i(a["$native?"](t))||(t=i(e.const_get_relative(ce,"String")["$==="](t))?a.native.ownerDocument.createTextNode(t):e.const_get_relative(ce,"Native").$convert(t)),i(null==a.native.firstChild)?a.native.appendChild(t):a.native.insertBefore(t,a.native.firstChild),a)},_.$$arity=1),e.defn($e,"$add_child",f=function(e){var t=this,r=f.$$p,a=r||n;return null==e&&(e=n),r&&(f.$$p=null),i(e)||(e=o(t,"DOM",[],a.$to_proc())),t["$<<"](e)},f.$$arity=-1),e.defn($e,"$add_next_sibling",p=function(t){var r=this,a=p.$$p,$=a||n;return null==t&&(t=n),a&&(p.$$p=null),i(t)||(t=o(r,"DOM",[],$.$to_proc())),i(r["$native?"](t))||(t=i(e.const_get_relative(ce,"String")["$==="](t))?r.native.ownerDocument.createTextNode(t):e.const_get_relative(ce,"Native").$convert(t)),r.native.parentNode.insertBefore(t,r.native.nextSibling)},p.$$arity=-1),e.defn($e,"$add_previous_sibling",d=function(t){var r=this,a=d.$$p,$=a||n;return null==t&&(t=n),a&&(d.$$p=null),i(t)||(t=o(r,"DOM",[],$.$to_proc())),i(r["$native?"](t))||(t=i(e.const_get_relative(ce,"String")["$==="](t))?r.native.ownerDocument.createTextNode(t):e.const_get_relative(ce,"Native").$convert(t)),r.native.parentNode.insertBefore(t,r.native)},d.$$arity=-1),e.alias($e,"after","add_next_sibling"),e.defn($e,"$append_to",v=function(e){var t=this;return e["$<<"](t)},v.$$arity=1),e.defn($e,"$ancestors",h=function(t){var r,a=this,$=n,s=n;if(null==t&&(t=n),!i(a.$parent()))return e.const_get_relative(ce,"NodeSet")["$[]"]();for($=[a.$parent()];i(s=$.$last().$parent());)$["$<<"](s);return i(e.const_get_relative(ce,"Document")["$==="]($.$last()))&&$.$pop(),i(t)&&o($,"select!",[],((r=function(e){r.$$s;return null==e&&(e=n),e["$=~"](t)}).$$s=a,r.$$arity=1,r)),e.const_get_relative(ce,"NodeSet").$new($)},h.$$arity=-1),e.alias($e,"before","add_previous_sibling"),e.defn($e,"$remove",y=function(){var e=this;return i(e.$parent())?e.$parent().$remove_child(e):n},y.$$arity=0),e.defn($e,"$clear",m=function(){return this.$children().$remove()},m.$$arity=0),i(e.const_get_relative(ce,"Browser")["$supports?"]("Element.textContent"))?(e.defn($e,"$content",g=function(){return this.native.textContent},g.$$arity=0),e.defn($e,"$content=",b=function(e){return this.native.textContent=e},b.$$arity=1)):i(e.const_get_relative(ce,"Browser")["$supports?"]("Element.innerText"))?(e.defn($e,"$content",w=function(){return this.native.innerText},w.$$arity=0),e.defn($e,"$content=",k=function(e){return this.native.innerText=e},k.$$arity=1)):(e.defn($e,"$content",O=function(){return this.$raise(e.const_get_relative(ce,"NotImplementedError"),"node text content unsupported")},O.$$arity=0),e.defn($e,"$content=",q=function(){return this.$raise(e.const_get_relative(ce,"NotImplementedError"),"node text content unsupported")},q.$$arity=1)),e.defn($e,"$blank?",E=function(){return this.$raise(e.const_get_relative(ce,"NotImplementedError"))},E.$$arity=0),e.defn($e,"$cdata?",x=function(){return this.$node_type()["$=="](e.const_get_relative(ce,"CDATA_SECTION_NODE"))},x.$$arity=0),e.defn($e,"$child",A=function(){return this.$children().$first()},A.$$arity=0),e.defn($e,"$children",S=function(){var t=this;return e.const_get_relative(ce,"NodeSet")["$[]"](e.const_get_qualified(e.const_get_relative(ce,"Native"),"Array").$new(t.native.childNodes))},S.$$arity=0),e.defn($e,"$children=",M=function(){return this.$raise(e.const_get_relative(ce,"NotImplementedError"))},M.$$arity=1),e.defn($e,"$comment?",N=function(){return this.$node_type()["$=="](e.const_get_relative(ce,"COMMENT_NODE"))},N.$$arity=0),e.defn($e,"$document",T=function(){var e=this;return i("undefined"!=typeof e.native.ownerDocument)?e.$DOM(e.native.ownerDocument):n},T.$$arity=0),e.defn($e,"$document?",C=function(){return this.$node_type()["$=="](e.const_get_relative(ce,"DOCUMENT_NODE"))},C.$$arity=0),e.defn($e,"$elem?",I=function(){return this.$node_type()["$=="](e.const_get_relative(ce,"ELEMENT_NODE"))},I.$$arity=0),e.alias($e,"element?","elem?"),e.defn($e,"$element_children",D=function(){return o(this.$children(),"select",[],"element?".$to_proc())},D.$$arity=0),e.alias($e,"elements","element_children"),e.defn($e,"$first_element_child",H=function(){return this.$element_children().$first()},H.$$arity=0),e.defn($e,"$fragment?",z=function(){return this.$node_type()["$=="](e.const_get_relative(ce,"DOCUMENT_FRAGMENT_NODE"))},z.$$arity=0),e.defn($e,"$inner_html",P=function(){return this.native.innerHTML},P.$$arity=0),e.defn($e,"$inner_html=",R=function(e){return this.native.innerHTML=e},R.$$arity=1),e.alias($e,"inner_text","content"),e.alias($e,"inner_text=","content="),e.defn($e,"$last_element_child",j=function(){return this.$element_children().$last()},j.$$arity=0),e.defn($e,"$name",B=function(){return this.native.nodeName||n},B.$$arity=0),e.defn($e,"$name=",L=function(e){return this.native.nodeName=e.$to_s()},L.$$arity=1),e.defn($e,"$namespace",U=function(){return this.native.namespaceURI||n},U.$$arity=0),e.defn($e,"$next",F=function(){var e=this;return i(null!=e.native.nextSibling)?e.$DOM(e.native.nextSibling):n},F.$$arity=0),e.alias($e,"next=","add_next_sibling"),e.defn($e,"$next_element",W=function(){var e,t=n;for(t=this.$next();i(i(e=t)?t["$element?"]()["$!"]():e);)t=t.$next();return t},W.$$arity=0),e.alias($e,"next_sibling","next"),e.alias($e,"node_name","name"),e.alias($e,"node_name=","name="),e.defn($e,"$node_type",Y=function(){return this.native.nodeType},Y.$$arity=0),e.defn($e,"$parent",G=function(){var e=this;return i(null!=e.native.parentNode)?e.$DOM(e.native.parentNode):n},G.$$arity=0),e.defn($e,"$parent=",K=function(t){return this.native.parentNode=e.const_get_relative(ce,"Native").$convert(t)},K.$$arity=1),e.defn($e,"$parse",X=function(t,n){var r=this;return null==n&&(n=$([],{})),r.$raise(e.const_get_relative(ce,"NotImplementedError"))},X.$$arity=-2),e.defn($e,"$path",V=function(){return this.$raise(e.const_get_relative(ce,"NotImplementedError"))},V.$$arity=0),e.defn($e,"$prepend_to",J=function(e){var t=this;return e["$>>"](t)},J.$$arity=1),e.defn($e,"$previous",Z=function(){var e=this;return i(null!=e.native.previousSibling)?e.$DOM(e.native.previousSibling):n},Z.$$arity=0),e.alias($e,"previous=","add_previous_sibling"),e.defn($e,"$previous_element",Q=function(){var e,t=n;for(t=this.$previous();i(i(e=t)?t["$element?"]()["$!"]():e);)t=t.$previous();return t},Q.$$arity=0),e.alias($e,"previous_sibling","previous"),e.defn($e,"$remove_child",ee=function(t){return this.native.removeChild(e.const_get_relative(ce,"Native").$try_convert(t))},ee.$$arity=1),e.defn($e,"$replace",te=function(t){var n=this;return i(n["$native?"](t))||(t=i(e.const_get_relative(ce,"String")["$==="](t))?n.native.ownerDocument.createTextNode(t):e.const_get_relative(ce,"Native").$convert(t)),n.native.parentNode.replaceChild(t,n.native),t},te.$$arity=1),e.alias($e,"replace_with","replace"),e.alias($e,"text","content"),e.alias($e,"text=","content="),e.defn($e,"$text?",ne=function(){return this.$node_type()["$=="](e.const_get_relative(ce,"TEXT_NODE"))},ne.$$arity=0),e.defn($e,"$traverse",re=function(){var t=this,n=re.$$p;return n&&(re.$$p=null),t.$raise(e.const_get_relative(ce,"NotImplementedError"))},re.$$arity=0),e.alias($e,"type","node_type"),e.defn($e,"$value",ae=function(){return this.native.nodeValue||n},ae.$$arity=0),e.defn($e,"$value=",ie=function(e){return this.native.nodeValue=e},ie.$$arity=1),e.defn($e,"$inspect",oe=function(){return"#<DOM::Node: "+this.$name()+">"},oe.$$arity=0)}(l[0],0,l)}(l[0],l)}(t[0],t)},Opal.modules["browser/dom/attribute"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module),r=e.klass,a=e.truthy;return e.add_stubs(["$include","$alias_native","$supports?","$==","$name"]),function(t,i){var o=n(t,"Browser"),$=(o.$$proto,[o].concat(i));!function(t,i){var o=n(t,"DOM"),$=(o.$$proto,[o].concat(i));!function(t,$super,n){function i(){}var o,$=i=r(t,null,"Attribute",i),s=($.$$proto,[$].concat(n));$.$include(e.const_get_relative(s,"Native")),$.$alias_native("name"),$.$alias_native("value"),$.$alias_native("value="),a(e.const_get_relative(s,"Browser")["$supports?"]("Attr.isId"))?$.$alias_native("id?","isId"):e.defn($,"$id?",o=function(){return this.$name()["$=="]("id")},o.$$arity=0)}($[0],0,$)}($[0],$)}(t[0],t)},Opal.modules["browser/dom/character_data"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$alias_native"]),function(t,i){var o=r(t,"Browser"),$=(o.$$proto,[o].concat(i));!function(t,i){var o=r(t,"DOM"),$=(o.$$proto,[o].concat(i));!function(t,$super,r){function i(){}var o,$,s,c,l,u,_=i=a(t,$super,"CharacterData",i),f=_.$$proto;[_].concat(r);f.native=n,e.defn(_,"$append",o=function(e){var t=this;return t.native.appendData(e),t},o.$$arity=1),e.defn(_,"$data",$=function(){return this.native.data},$.$$arity=0),e.defn(_,"$delete",s=function(e,t){var n=this;return null==t&&(t=0),n.native.deleteData(t,e),n},s.$$arity=-2),e.defn(_,"$insert",c=function(e,t){var n=this;return null==t&&(t=0),n.native.insertData(t,e),n},c.$$arity=-2),_.$alias_native("length"),e.defn(_,"$replace",l=function(e,t,n){var r=this;return null==t&&(t=0),null==n&&(n=r.native.length),r.native.replaceData(t,n,e),r},l.$$arity=-2),e.defn(_,"$substring",u=function(e,t){return null==t&&(t=0),this.native.substringData(t,e)},u.$$arity=-2)}($[0],e.const_get_relative($,"Node"),$)}($[0],$)}(t[0],t)},Opal.modules["browser/dom/text"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.send,o=e.gvars;return e.add_stubs(["$create_text","$DOM","$data"]),function(t,$){var s=r(t,"Browser"),c=(s.$$proto,[s].concat($));!function(t,$){var s=r(t,"DOM"),c=(s.$$proto,[s].concat($));!function(t,$super,r){function $(){}var s,c,l,u,_=$=a(t,$super,"Text",$),f=_.$$proto;[_].concat(r);f.native=n,e.defs(_,"$create",s=function(){var t;null==o.document&&(o.document=n);var r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var $=0;$<r;$++)t[$-0]=arguments[$];return i(o.document,"create_text",e.to_a(t))},s.$$arity=-1),e.defn(_,"$whole",c=function(){return this.native.wholeText},c.$$arity=0),e.defn(_,"$split",l=function(e){var t=this;return t.$DOM(t.native.splitText(e))},l.$$arity=1),e.defn(_,"$inspect",u=function(){return"#<DOM::Text: "+this.$data()+">"},u.$$arity=0)}(c[0],e.const_get_relative(c,"CharacterData"),c)}(c[0],c)}(t[0],t)},Opal.modules["browser/dom/cdata"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module),r=e.klass;return e.add_stubs(["$value"]),function(t,a){var i=n(t,"Browser"),o=(i.$$proto,[i].concat(a));!function(t,a){var i=n(t,"DOM"),o=(i.$$proto,[i].concat(a));!function(t,$super,n){function a(){}var i,o=a=r(t,$super,"CDATA",a);o.$$proto,[o].concat(n);e.defn(o,"$inspect",i=function(){return"#<DOM::CDATA: "+this.$value()+">"},i.$$arity=0)}(o[0],e.const_get_relative(o,"Text"),o)}(o[0],o)}(t[0],t)},Opal.modules["browser/dom/comment"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module),r=e.klass;return e.add_stubs(["$value"]),function(t,a){var i=n(t,"Browser"),o=(i.$$proto,[i].concat(a));!function(t,a){var i=n(t,"DOM"),o=(i.$$proto,[i].concat(a));!function(t,$super,n){function a(){}var i,o=a=r(t,$super,"Comment",a);o.$$proto,[o].concat(n);e.defn(o,"$inspect",i=function(){return"#<DOM::Comment: "+this.$value()+">"},i.$$arity=0)}(o[0],e.const_get_relative(o,"CharacterData"),o)}(o[0],o)}(t[0],t)},Opal.modules["browser/dom/element/attributes"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.hash2,s=e.send;return e.add_stubs(["$attr_reader","$to_n","$[]","$supports?","$==","$to_s","$include","$enum_for","$each","$attribute_nodes","$name","$value","$!","$[]=","$-"]),function(n,c){
var l=a(n,"Browser"),u=(l.$$proto,[l].concat(c));!function(n,c){var l=a(n,"DOM"),u=(l.$$proto,[l].concat(c));!function(n,$super,a){function c(){}var l=c=i(n,$super,"Element",c),u=(l.$$proto,[l].concat(a));(function(n,$super,a){function c(){}var l,u,_,f,p,d,v,h,y,m=c=i(n,null,"Attributes",c),g=m.$$proto,b=[m].concat(a);g.namespace=g.native=g.element=r,m.$attr_reader("namespace"),e.defn(m,"$initialize",l=function(e,t){var n=this;return n.element=e,n.native=e.$to_n(),n.namespace=t["$[]"]("namespace")},l.$$arity=2),o(o(u=e.const_get_relative(b,"Browser")["$supports?"]("Element.className"))?u:e.const_get_relative(b,"Browser")["$supports?"]("Element.htmlFor"))?(e.defn(m,"$[]",_=function(t,n){var a,i=this,s=r;return null==n&&(n=$([],{})),o((a=t["$=="]("class"))?e.const_get_relative(b,"Browser")["$supports?"]("Element.className"):t["$=="]("class"))?t="className":o((a=t["$=="]("for"))?e.const_get_relative(b,"Browser")["$supports?"]("Element.htmlFor"):t["$=="]("for"))&&(t="htmlFor"),o(s=o(a=n["$[]"]("namespace"))?a:i.namespace)?i.native.getAttributeNS(s.$to_s(),t.$to_s())||r:i.native.getAttribute(t.$to_s())||r},_.$$arity=-2),e.defn(m,"$[]=",f=function(t,n,a){var i,s=this,c=r;return null==a&&(a=$([],{})),o((i=t["$=="]("class"))?e.const_get_relative(b,"Browser")["$supports?"]("Element.className"):t["$=="]("class"))?t="className":o((i=t["$=="]("for"))?e.const_get_relative(b,"Browser")["$supports?"]("Element.htmlFor"):t["$=="]("for"))&&(t="htmlFor"),o(c=o(i=a["$[]"]("namespace"))?i:s.namespace)?s.native.setAttributeNS(c.$to_s(),t.$to_s(),n):s.native.setAttribute(t.$to_s(),n.$to_s())},f.$$arity=-3)):(e.defn(m,"$[]",p=function(e,t){var n,a=this,i=r;return null==t&&(t=$([],{})),o(i=o(n=t["$[]"]("namespace"))?n:a.namespace)?a.native.getAttributeNS(i.$to_s(),e.$to_s())||r:a.native.getAttribute(e.$to_s())||r},p.$$arity=-2),e.defn(m,"$[]=",d=function(e,t,n){var a,i=this,s=r;return null==n&&(n=$([],{})),o(s=o(a=n["$[]"]("namespace"))?a:i.namespace)?i.native.setAttributeNS(s.$to_s(),e.$to_s(),t):i.native.setAttribute(e.$to_s(),t.$to_s())},d.$$arity=-3)),m.$include(e.const_get_relative(b,"Enumerable")),e.defn(m,"$each",v=function(){var t,n=this,a=v.$$p,i=a||r;return a&&(v.$$p=null),i===r?n.$enum_for("each"):(s(n.element.$attribute_nodes(),"each",[],((t=function(n){t.$$s;return null==n&&(n=r),e.yieldX(i,[n.$name(),n.$value()])}).$$s=n,t.$$arity=1,t)),n)},v.$$arity=0),e.alias(m,"get","[]"),e.defn(m,"$has_key?",h=function(e){return this["$[]"](e)["$!"]()["$!"]()},h.$$arity=1),e.defn(m,"$merge!",y=function(n){var a,i=this;return s(n,"each",[],((a=function(n,i){var o=a.$$s||this,$=r;return null==n&&(n=r),null==i&&(i=r),$=[n,i],s(o,"[]=",e.to_a($)),$[t($.length,1)]}).$$s=i,a.$$arity=2,a)),i},y.$$arity=1),e.alias(m,"set","[]=")})(u[0],0,u)}(u[0],e.const_get_relative(u,"Node"),u)}(u[0],u)}(n[0],n)},Opal.modules["browser/dom/element/data"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy,o=e.send,$=e.gvars;return e.add_stubs(["$attr_reader","$to_n","$include","$enum_for","$call","$each","$attributes","$=~","$[]"]),function(t,s){var c=r(t,"Browser"),l=(c.$$proto,[c].concat(s));!function(t,s){var c=r(t,"DOM"),l=(c.$$proto,[c].concat(s));!function(t,$super,r){function s(){}var c=s=a(t,$super,"Element",s),l=(c.$$proto,[c].concat(r));(function(t,$super,r){function s(){}var c,l,u,_,f,p=s=a(t,null,"Data",s),d=p.$$proto,v=[p].concat(r);d.native=d.element=n,p.$attr_reader("element"),e.defn(p,"$initialize",c=function(e){var t=this;return t.element=e,t.native=e.$to_n(),i("undefined"!=typeof t.native.$data)?n:t.native.$data={}},c.$$arity=1),p.$include(e.const_get_relative(v,"Enumerable")),e.defn(p,"$each",l=function(){var e,t=this,r=l.$$p,a=r||n;if(r&&(l.$$p=null),!i(a))return t.$enum_for("each");var s=t.native.$data;for(var c in s)a.$call(c,s[c]);return o(t.element.$attributes(),"each",[],((e=function(t,r){var o;e.$$s;return null==t&&(t=n),null==r&&(r=n),i(t["$=~"](/^data-(.*)$/))?a.$call((o=$["~"])===n?n:o["$[]"](1),r):n}).$$s=t,e.$$arity=2,e)),t},l.$$arity=0),e.defn(p,"$assign",u=function(e){var t,r=this;return o(e,"each",[],((t=function(e,r){var a=t.$$s||this;return null==a.native&&(a.native=n),null==e&&(e=n),null==r&&(r=n),a.native.$data[e]=r}).$$s=r,t.$$arity=2,t)),r},u.$$arity=1),e.defn(p,"$[]",_=function(e){var t=this,r=n;if(i(r=t.element["$[]"]("data-"+e)))return r;var a=t.native.$data[e];return a===undefined?n:a},_.$$arity=1),e.defn(p,"$[]=",f=function(e,t){return this.native.$data[e]=t},f.$$arity=2)})(l[0],0,l)}(l[0],e.const_get_relative(l,"Node"),l)}(l[0],l)}(t[0],t)},Opal.modules["browser/dom/element/position"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.truthy,s=e.send;return e.add_stubs(["$attr_reader","$to_n","$offset","$get","$parent","$new","$==","$[]","$style","$=~","$+","$x","$to_i","$x=","$-","$y","$y="]),function(r,c){var l=i(r,"Browser"),u=(l.$$proto,[l].concat(c));!function(r,c){var l=i(r,"DOM"),u=(l.$$proto,[l].concat(c));!function(r,$super,i){function c(){}var l=c=o(r,$super,"Element",c),u=(l.$$proto,[l].concat(i));(function(r,$super,i){function c(){}var l,u,_,f,p=c=o(r,null,"Position",c),d=p.$$proto,v=[p].concat(i);d.element=a,p.$attr_reader("element"),e.defn(p,"$initialize",l=function(e){var t=this;return t.element=e,t.native=e.$to_n()},l.$$arity=1),e.defn(p,"$get",u=function(){var r=this,i=a,o=a,c=a,l=a,u=a;return o=(i=r.element.$offset()).$get(),c=i.$parent(),l=e.const_get_qualified(e.const_get_relative(v,"Browser"),"Position").$new(0,0),r.element.$style()["$[]"]("position")["$=="]("fixed")&&($(c["$=~"]("html"))||(l=c.$offset()),u=[t(l.$x(),c.$style()["$[]"]("border-top-width").$to_i())],s(l,"x=",e.to_a(u)),u[n(u.length,1)],u=[t(l.$y(),c.$style()["$[]"]("border-left-width").$to_i())],s(l,"y=",e.to_a(u)),u[n(u.length,1)]),e.const_get_qualified(e.const_get_relative(v,"Browser"),"Position").$new(n(n(o.$x(),l.$x()),r.element.$style()["$[]"]("margin-left").$to_i()),n(n(o.$y(),l.$y()),r.element.$style()["$[]"]("margin-top").$to_i()))},u.$$arity=0),e.defn(p,"$x",_=function(){return this.$get().$x()},_.$$arity=0),e.defn(p,"$y",f=function(){return this.$get().$y()},f.$$arity=0)})(u[0],0,u)}(u[0],e.const_get_relative(u,"Node"),u)}(u[0],u)}(r[0],r)},Opal.modules["browser/dom/element/offset"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.truthy,s=e.send;return e.add_stubs(["$attr_reader","$to_n","$DOM","$root","$document","$x","$get","$set","$y","$supports?","$window","$new","$[]","$style!","$==","$[]=","$style","$-","$to_u","$===","$first","$+","$px"]),function(r,c){var l=i(r,"Browser"),u=(l.$$proto,[l].concat(c));!function(r,c){var l=i(r,"DOM"),u=(l.$$proto,[l].concat(c));!function(r,$super,i){function c(){}var l=c=o(r,$super,"Element",c),u=(l.$$proto,[l].concat(i));(function(r,$super,i){function c(){}var l,u,_,f,p,d,v,h,y,m=c=o(r,null,"Offset",c),g=m.$$proto,b=[m].concat(i);g.native=g.element=a,m.$attr_reader("element"),e.defn(m,"$initialize",l=function(e){var t=this;return t.element=e,t.native=e.$to_n()},l.$$arity=1),e.defn(m,"$parent",u=function(){var e=this;return e.$DOM(e.native.offsetParent||e.element.$document().$root().$to_n())},u.$$arity=0),e.defn(m,"$x",_=function(){return this.$get().$x()},_.$$arity=0),e.defn(m,"$x=",f=function(e){return this.$set(e,a)},f.$$arity=1),e.defn(m,"$y",p=function(){return this.$get().$y()},p.$$arity=0),e.defn(m,"$y=",d=function(e){return this.$set(a,e)},d.$$arity=1),$(e.const_get_relative(b,"Browser")["$supports?"]("Element.getBoundingClientRect"))?e.defn(m,"$get",v=function(){var t=this,n=a,r=a,i=a;r=(n=t.element.$document()).$root().$to_n(),i=n.$window().$to_n();var o=t.native.getBoundingClientRect(),$=o.top+(i.pageYOffset||r.scrollTop)-(r.clientTop||0),s=o.left+(i.pageXOffset||r.scrollLeft)-(r.clientLeft||0);return e.const_get_qualified(e.const_get_relative(b,"Browser"),"Position").$new(s,$)},v.$$arity=0):e.defn(m,"$get",h=function(){var t=a,n=a,r=a;n=(t=this.$document()).$root().$to_n();var i=((r=t.$window().$to_n()).pageYOffset||n.scrollTop)-(n.clientTop||0),o=(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0);return e.const_get_qualified(e.const_get_relative(b,"Browser"),"Position").$new(o,i)},h.$$arity=0),e.defn(m,"$set",y=function(){var r,i,o,c=this,l=a,u=a,_=a,f=a,p=a,d=a,v=arguments.length,h=v-0;h<0&&(h=0),o=new Array(h);for(var y=0;y<v;y++)o[y-0]=arguments[y];return c.element["$style!"]()["$[]"]("position")["$=="]("static")&&(l=["position","relative"],s(c.element.$style(),"[]=",e.to_a(l)),l[t(l.length,1)]),u=c.$get(),_=c.element["$style!"]()["$[]"]("top").$to_u(),f=c.element["$style!"]()["$[]"]("left").$to_u(),$(e.const_get_qualified(e.const_get_relative(b,"Browser"),"Position")["$==="](o.$first()))?(p=(r=[o.$first().$x(),o.$first().$y()])[0],d=r[1]):$(e.const_get_relative(b,"Hash")["$==="](o.$first()))?(p=(r=[o.$first()["$[]"]("x"),o.$first()["$[]"]("y")])[0],d=r[1]):(i=o,p=null==(r=e.to_ary(i))[0]?a:r[0],d=null==r[1]?a:r[1]),$(p)&&(l=["left",n(t(p.$px(),u.$x()),f)],s(c.element.$style(),"[]=",e.to_a(l)),l[t(l.length,1)]),$(d)?(l=["top",n(t(d.$px(),u.$y()),_)],s(c.element.$style(),"[]=",e.to_a(l)),l[t(l.length,1)]):a},y.$$arity=-1)})(u[0],0,u)}(u[0],e.const_get_relative(u,"Node"),u)}(u[0],u)}(r[0],r)},Opal.modules["browser/dom/element/scroll"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy;return e.add_stubs(["$attr_reader","$to_n","$supports?","$===","$first","$[]","$x","$y","$new","$raise","$position"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,o){var $=r(t,"DOM"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,$super,"Element",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c,l,u,_,f,p,d,v,h,y,m,g,b,w=o=a(t,null,"Scroll",o),k=w.$$proto,O=[w].concat(r);k.native=n,w.$attr_reader("element"),e.defn(w,"$initialize",$=function(e){var t=this;return t.element=e,t.native=e.$to_n()},$.$$arity=1),i(e.const_get_relative(O,"Browser")["$supports?"]("Element.scroll"))?(e.defn(w,"$to",s=function(){var t,r,a,o=this,$=n,s=n,c=arguments.length,l=c-0;l<0&&(l=0),a=new Array(l);for(var u=0;u<c;u++)a[u-0]=arguments[u];return i(e.const_get_relative(O,"Hash")["$==="](a.$first()))?($=i(t=a.$first()["$[]"]("x"))?t:o.$x(),s=i(t=a.$first()["$[]"]("y"))?t:o.$y()):(r=a,$=null==(t=e.to_ary(r))[0]?n:t[0],s=null==t[1]?n:t[1]),o.native.scrollTop=s,o.native.scrollLeft=$},s.$$arity=-1),e.defn(w,"$position",c=function(){var t=this;return e.const_get_qualified(e.const_get_relative(O,"Browser"),"Position").$new(t.native.scrollLeft,t.native.scrollTop)},c.$$arity=0)):i(e.const_get_relative(O,"Browser")["$supports?"]("Element.pageOffset"))?(e.defn(w,"$to",l=function(){var t,r,a,o=this,$=n,s=n,c=arguments.length,l=c-0;l<0&&(l=0),a=new Array(l);for(var u=0;u<c;u++)a[u-0]=arguments[u];return i(e.const_get_relative(O,"Hash")["$==="](a.$first()))?($=i(t=a.$first()["$[]"]("x"))?t:o.$x(),s=i(t=a.$first()["$[]"]("y"))?t:o.$y()):(r=a,$=null==(t=e.to_ary(r))[0]?n:t[0],s=null==t[1]?n:t[1]),o.native.pageYOffset=s,o.native.pageXOffset=$},l.$$arity=-1),e.defn(w,"$position",u=function(){var t=this;return e.const_get_relative(O,"Position").$new(t.native.pageXOffset,t.native.pageYOffset)},u.$$arity=0)):(e.defn(w,"$to",_=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return n.$raise(e.const_get_relative(O,"NotImplementedError"),"scroll on element unsupported")},_.$$arity=-1),e.defn(w,"$position",f=function(){return this.$raise(e.const_get_relative(O,"NotImplementedError"),"scroll on element unsupported")},f.$$arity=0)),e.defn(w,"$x",p=function(){return this.$position().$x()},p.$$arity=0),e.defn(w,"$y",d=function(){return this.$position().$y()},d.$$arity=0),e.defn(w,"$height",v=function(){return this.native.scrollHeight},v.$$arity=0),e.defn(w,"$width",h=function(){return this.native.scrollWidth},h.$$arity=0),e.defn(w,"$by",y=function(){var t,r,a,o=this,$=n,s=n,c=arguments.length,l=c-0;l<0&&(l=0),a=new Array(l);for(var u=0;u<c;u++)a[u-0]=arguments[u];return i(e.const_get_relative(O,"Hash")["$==="](a.$first()))?($=i(t=a.$first()["$[]"]("x"))?t:0,s=i(t=a.$first()["$[]"]("y"))?t:0):(r=a,$=null==(t=e.to_ary(r))[0]?n:t[0],s=null==t[1]?n:t[1]),o.native.scrollBy($,s),o},y.$$arity=-1),i(e.const_get_relative(O,"Browser")["$supports?"]("Element.scrollIntoViewIfNeeded"))?e.defn(w,"$to",m=function(e){return null==e&&(e=!0),this.native.scrollIntoViewIfNeeded(e)},m.$$arity=-1):e.defn(w,"$to",g=function(t){return null==t&&(t=!0),this.$raise(e.const_get_relative(O,"NotImplementedError"))},g.$$arity=-1),e.defn(w,"$to!",b=function(e){return null==e&&(e=!0),this.native.scrollIntoView(e)},b.$$arity=-1)})(s[0],0,s)}(s[0],e.const_get_relative(s,"Node"),s)}(s[0],s)}(t[0],t)},Opal.modules["browser/dom/element/size"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send;return e.add_stubs(["$attr_reader","$to_n","$[]=","$style","$-"]),function(n,$){var s=a(n,"Browser"),c=(s.$$proto,[s].concat($));!function(n,$){var s=a(n,"DOM"),c=(s.$$proto,[s].concat($));!function(n,$super,a){function $(){}var s=$=i(n,$super,"Element",$),c=(s.$$proto,[s].concat(a));(function(n,$super,a){function $(){}var s,c,l,u,_,f=$=i(n,null,"Size",$),p=f.$$proto;[f].concat(a);p.native=p.element=r,f.$attr_reader("element"),e.defn(f,"$initialize",s=function(e){var t,n=this,r=arguments.length,a=r-1;a<0&&(a=0),t=new Array(a);for(var i=1;i<r;i++)t[i-1]=arguments[i];return n.element=e,n.native=e.$to_n(),n.include=t},s.$$arity=-2),e.defn(f,"$width",c=function(){return this.native.offsetWidth},c.$$arity=0),e.defn(f,"$width=",l=function(n){var a=r;return a=["width",n],o(this.element.$style(),"[]=",e.to_a(a)),a[t(a.length,1)]},l.$$arity=1),e.defn(f,"$height",u=function(){return this.native.offsetHeight},u.$$arity=0),e.defn(f,"$height=",_=function(n){var a=r;return a=["height",n],o(this.element.$style(),"[]=",e.to_a(a)),a[t(a.length,1)]},_.$$arity=1)})(c[0],0,c)}(c[0],e.const_get_relative(c,"Node"),c)}(c[0],c)}(n[0],n)},Opal.modules["browser/dom/element/input"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return function(t,i){var o=r(t,"Browser"),$=(o.$$proto,[o].concat(i));!function(t,i){var o=r(t,"DOM"),$=(o.$$proto,[o].concat(i));!function(t,$super,r){function i(){}var o=i=a(t,$super,"Element",i),$=(o.$$proto,[o].concat(r));(function(t,$super,r){function i(){}var o,$,s,c,l=i=a(t,$super,"Input",i),u=l.$$proto;[l].concat(r);u.native=n,e.defn(l,"$value",o=function(){var e=this;return""==e.native.value?n:e.native.value},o.$$arity=0),e.defn(l,"$value=",$=function(e){return this.native.value=e},$.$$arity=1),e.defn(l,"$checked?",s=function(){return this.native.checked},s.$$arity=0),e.defn(l,"$clear",c=function(){return this.native.value=""},c.$$arity=0)})($[0],e.const_get_relative($,"Element"),$)}($[0],e.const_get_relative($,"Node"),$)}($[0],$)}(t[0],t)},Opal.modules["browser/dom/element/select"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$[]","$new","$DOM","$alias_native"]),function(t,i){var o=r(t,"Browser"),$=(o.$$proto,[o].concat(i));!function(t,i){var o=r(t,"DOM"),$=(o.$$proto,[o].concat(i));!function(t,$super,r){function i(){}var o=i=a(t,$super,"Element",i),$=(o.$$proto,[o].concat(r));(function(t,$super,r){function i(){}var o,$,s,c,l,u=i=a(t,$super,"Select",i),_=u.$$proto,f=[u].concat(r);_.native=n,e.defn(u,"$value",o=function(){var e=this;return""==e.native.value?n:e.native.value},o.$$arity=0),e.defn(u,"$labels",$=function(){var t=this;return e.const_get_relative(f,"NodeSet")["$[]"](e.const_get_qualified(e.const_get_relative(f,"Native"),"Array").$new(t.native.labels))},$.$$arity=0),e.defn(u,"$options",s=function(){var t=this;return e.const_get_relative(f,"NodeSet")["$[]"](e.const_get_qualified(e.const_get_relative(f,"Native"),"Array").$new(t.native.options))},s.$$arity=0),e.defn(u,"$option",c=function(){var e=this;return e.$DOM(e.native.options[e.native.selectedIndex])},c.$$arity=0),e.defn(u,"$index",l=function(){return this.native.selectedIndex},l.$$arity=0),u.$alias_native("multiple?","multiple"),u.$alias_native("required?","required"),u.$alias_native("length")})($[0],e.const_get_relative($,"Element"),$)}($[0],e.const_get_relative($,"Node"),$)}($[0],$)}(t[0],t)},Opal.modules["browser/dom/element/image"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return function(t,i){var o=r(t,"Browser"),$=(o.$$proto,[o].concat(i));!function(t,i){var o=r(t,"DOM"),$=(o.$$proto,[o].concat(i));!function(t,$super,r){function i(){}var o=i=a(t,$super,"Element",i),$=(o.$$proto,[o].concat(r));(function(t,$super,r){function i(){}var o,$,s,c,l=i=a(t,$super,"Image",i),u=l.$$proto;[l].concat(r);u.native=n,e.defn(l,"$complete?",o=function(){return this.native.complete},o.$$arity=0),e.defn(l,"$cross?",$=function(){return this.native.crossOrigin},$.$$arity=0),e.defn(l,"$height",s=function(){return this.native.naturalHeight},s.$$arity=0),e.defn(l,"$width",c=function(){return this.native.naturalWidth},c.$$arity=0)})($[0],e.const_get_relative($,"Element"),$),e.const_set($[0],"Img",e.const_get_relative($,"Image"))}($[0],e.const_get_relative($,"Node"),$)}($[0],$)}(t[0],t)},Opal.modules["browser/dom/element/template"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$DOM"]),function(t,i){var o=r(t,"Browser"),$=(o.$$proto,[o].concat(i));!function(t,i){var o=r(t,"DOM"),$=(o.$$proto,[o].concat(i));!function(t,$super,r){function i(){}var o=i=a(t,$super,"Element",i),$=(o.$$proto,[o].concat(r));(function(t,$super,r){function i(){}var o,$=i=a(t,$super,"Template",i),s=$.$$proto;[$].concat(r);s.native=n,e.defn($,"$content",o=function(){var e=this;return e.$DOM(e.native.content)},o.$$arity=0)})($[0],e.const_get_relative($,"Element"),$)}($[0],e.const_get_relative($,"Node"),$)}($[0],$)}(t[0],t)},Opal.modules["browser/dom/element/textarea"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return function(t,i){var o=r(t,"Browser"),$=(o.$$proto,[o].concat(i));!function(t,i){var o=r(t,"DOM"),$=(o.$$proto,[o].concat(i));!function(t,$super,r){function i(){}var o=i=a(t,$super,"Element",i),$=(o.$$proto,[o].concat(r));(function(t,$super,r){function i(){}var o,$,s,c=i=a(t,$super,"Textarea",i),l=c.$$proto;[c].concat(r);l.native=n,e.defn(c,"$value",o=function(){var e=this;return""==e.native.value?n:e.native.value},o.$$arity=0),e.defn(c,"$value=",$=function(e){return this.native.value=e},$.$$arity=1),e.defn(c,"$clear",s=function(){return this.native.value=""},s.$$arity=0)})($[0],e.const_get_relative($,"Element"),$)}($[0],e.const_get_relative($,"Node"),$)}($[0],$)}(t[0],t)},Opal.modules["browser/dom/element"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var r=e.top,a=[],i=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass,s=e.send,c=e.gvars,l=e.truthy,u=e.hash2;return e.add_stubs(["$require","$create_element","$==","$capitalize","$include?","$constants","$new","$const_get","$include","$target","$DOM","$supports?","$loaded?","$raise","$[]","$map","$xpath","$get","$attributes","$set","$+","$class_names","$empty?","$join","$uniq","$first","$css","$each","$alias_native","$reject","$split","$to_proc","$===","$assign","$height","$size","$height=","$-","$to_s","$clear","$document","$<<","$to_a","$downcase","$name","$id","$offset","$flatten","$concat","$replace","$apply","$to_n","$window","$width","$width="]),r.$require("browser/dom/element/attributes"),r.$require("browser/dom/element/data"),r.$require("browser/dom/element/position"),r.$require("browser/dom/element/offset"),r.$require("browser/dom/element/scroll"),r.$require("browser/dom/element/size"),r.$require("browser/dom/element/input"),r.$require("browser/dom/element/select"),r.$require("browser/dom/element/image"),r.$require("browser/dom/element/template"),r.$require("browser/dom/element/textarea"),function(r,a){var _=o(r,"Browser"),f=(_.$$proto,[_].concat(a));!function(r,a){var _=o(r,"DOM"),f=(_.$$proto,[_].concat(a));!function(r,$super,a){function o(){}var _,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C,I,D,H,z,P,R,j,B,L,U,F,W,Y,G,K,X,V,J,Z,Q,ee,te,ne,re,ae,ie,oe,$e=o=$(r,$super,"Element",o),se=$e.$$proto,ce=[$e].concat(a);se.native=i,e.defs($e,"$create",_=function(){var t;null==c.document&&(c.document=i);var n=arguments.length,r=n-0;r<0&&(r=0),t=new Array(r);for(var a=0;a<n;a++)t[a-0]=arguments[a];return s(c.document,"create_element",e.to_a(t))},_.$$arity=-1),e.defs($e,"$new",f=function(t){var n=this,r=f.$$p,a=i,$=i,c=i,u=i;for(r&&(f.$$p=null),c=0,u=arguments.length,$=new Array(u);c<u;c++)$[c]=arguments[c];return n["$=="](e.const_get_relative(ce,"Element"))?(a=t.nodeName.$capitalize(),l(e.const_get_relative(ce,"Element").$constants()["$include?"](a))?e.const_get_relative(ce,"Element").$const_get(a).$new(t):s(n,e.find_super_dispatcher(n,"new",f,!1,o),$,r)):s(n,e.find_super_dispatcher(n,"new",f,!1,o),$,r)},f.$$arity=1),$e.$include(e.const_get_qualified(e.const_get_relative(ce,"Event"),"Target")),s($e,"target",[],((p=function(t){var n=p.$$s||this;null==t&&(t=i);try{return n.$DOM(t)}catch(r){if(!e.rescue(r,[e.const_get_relative(ce,"StandardError")]))throw r;try{return i}finally{e.pop_exception()}}}).$$s=$e,p.$$arity=1,p)),l(e.const_get_relative(ce,"Browser")["$supports?"]("Element.matches"))?e.defn($e,"$=~",d=function(e){return this.native.matches(e)},d.$$arity=1):l(e.const_get_relative(ce,"Browser")["$supports?"]("Element.matches (Opera)"))?e.defn($e,"$=~",v=function(e){return this.native.oMatchesSelector(e)},v.$$arity=1):l(e.const_get_relative(ce,"Browser")["$supports?"]("Element.matches (Internet Explorer)"))?e.defn($e,"$=~",h=function(e){return this.native.msMatchesSelector(e)},h.$$arity=1):l(e.const_get_relative(ce,"Browser")["$supports?"]("Element.matches (Firefox)"))?e.defn($e,"$=~",y=function(e){return this.native.mozMatchesSelector(e)},y.$$arity=1):l(e.const_get_relative(ce,"Browser")["$supports?"]("Element.matches (Chrome)"))?e.defn($e,"$=~",m=function(e){return this.native.webkitMatchesSelector(e)},m.$$arity=1):l(e.const_get_relative(ce,"Browser")["$loaded?"]("Sizzle"))?e.defn($e,"$=~",g=function(e){var t=this;return Sizzle.matchesSelector(t.native,e)},g.$$arity=1):e.defn($e,"$=~",b=function(){return this.$raise(e.const_get_relative(ce,"NotImplementedError"),"selector matching unsupported")},b.$$arity=1),e.defn($e,"$/",w=function(){var t,n,r=this,a=arguments.length,o=a-0;o<0&&(o=0),n=new Array(o);for(var $=0;$<a;$++)n[$-0]=arguments[$];return e.const_get_relative(ce,"NodeSet")["$[]"](s(n,"map",[],((t=function(e){var n=t.$$s||this;return null==e&&(e=i),n.$xpath(e)}).$$s=r,t.$$arity=1,t)))},w.$$arity=-1),e.defn($e,"$[]",k=function(e,t){var n=this;return null==t&&(t=u([],{})),n.$attributes().$get(e,t)},k.$$arity=-2),e.defn($e,"$[]=",O=function(e,t,n){var r=this;return null==n&&(n=u([],{})),r.$attributes().$set(e,t,n)},O.$$arity=-3),e.defn($e,"$add_class",q=function(){var e,n=this,r=i,a=arguments.length,o=a-0;o<0&&(o=0),e=new Array(o);for(var $=0;$<a;$++)e[$-0]=arguments[$];return r=t(n.$class_names(),e),l(r["$empty?"]())||(n.native.className=r.$uniq().$join(" ")),n},q.$$arity=-1),e.defn($e,"$at",E=function(e){var t,n=this;return l(t=n.$xpath(e).$first())?t:n.$css(e).$first()},E.$$arity=1),e.defn($e,"$at_css",x=function(){var t,n,r=this,a=i,o=arguments.length,$=o-0;$<0&&($=0),n=new Array($);for(var c=0;c<o;c++)n[c-0]=arguments[c];return a=i,function(){var o=e.new_brk();try{s(n,"each",[],((t=function(n){var r=t.$$s||this;if(null==n&&(n=i),!l(a=r.$css(n).$first()))return i;e.brk(i,o)}).$$s=r,t.$$brk=o,t.$$arity=1,t))}catch($){if($===o)return $.$v;throw $}}(),a},x.$$arity=-1),e.defn($e,"$at_xpath",A=function(){var t,n,r=this,a=i,o=arguments.length,$=o-0;$<0&&($=0),n=new Array($);for(var c=0;c<o;c++)n[c-0]=arguments[c];return a=i,function(){var o=e.new_brk();try{s(n,"each",[],((t=function(n){var r=t.$$s||this;if(null==n&&(n=i),!l(a=r.$xpath(n).$first()))return i;e.brk(i,o)}).$$s=r,t.$$brk=o,t.$$arity=1,t))}catch($){if($===o)return $.$v;throw $}}(),a},A.$$arity=-1),e.alias($e,"attr","[]"),e.alias($e,"attribute","[]"),e.defn($e,"$attributes",S=function(t){var n=this;return null==t&&(t=u([],{})),e.const_get_relative(ce,"Attributes").$new(n,t)},S.$$arity=-1),e.defn($e,"$attribute_nodes",M=function(){var t=this;return e.const_get_relative(ce,"NodeSet")["$[]"](e.const_get_qualified(e.const_get_relative(ce,"Native"),"Array").$new(t.native.attributes,u(["get"],{get:"item"})))},M.$$arity=0),$e.$alias_native("class_name","className"),e.defn($e,"$class_names",N=function(){return s(this.native.className.$split(/\s+/),"reject",[],"empty?".$to_proc())},N.$$arity=0),l(e.const_get_relative(ce,"Browser")["$supports?"]("Query.css"))?e.defn($e,"$css",T=function(t){var n=this;try{return e.const_get_relative(ce,"NodeSet")["$[]"](e.const_get_qualified(e.const_get_relative(ce,"Native"),"Array").$new(n.native.querySelectorAll(t)))}catch(r){if(!e.rescue(r,[e.const_get_relative(ce,"StandardError")]))throw r;try{return e.const_get_relative(ce,"NodeSet")["$[]"]()}finally{e.pop_exception()}}},T.$$arity=1):l(e.const_get_relative(ce,"Browser")["$loaded?"]("Sizzle"))?e.defn($e,"$css",C=function(t){var n=this;try{return e.const_get_relative(ce,"NodeSet")["$[]"](Sizzle(t,n.native))}catch(r){if(!e.rescue(r,[e.const_get_relative(ce,"StandardError")]))throw r;try{return e.const_get_relative(ce,"NodeSet")["$[]"]()}finally{e.pop_exception()}}},C.$$arity=1):e.defn($e,"$css",I=function(){return this.$raise(e.const_get_relative(ce,"NotImplementedError"),"query by CSS selector unsupported")},I.$$arity=1),e.defn($e,"$data",D=function(t){var n=this,r=i;return null==t&&(t=i),r=e.const_get_relative(ce,"Data").$new(n),l(t)?(l(e.const_get_relative(ce,"Hash")["$==="](t))?r.$assign(t):n.$raise(e.const_get_relative(ce,"ArgumentError"),"unknown data type"),n):r},D.$$arity=-1),e.alias($e,"get_attribute","[]"),e.alias($e,"get","[]"),e.defn($e,"$height",H=function(){return this.$size().$height()},H.$$arity=0),e.defn($e,"$height=",z=function(t){var r=i;return r=[t],s(this.$size(),"height=",e.to_a(r)),r[n(r.length,1)]},z.$$arity=1),e.defn($e,"$id",P=function(){var e=this.native.id;return""===e?i:e},P.$$arity=0),e.defn($e,"$id=",R=function(e){return this.native.id=e.$to_s()},R.$$arity=1),e.defn($e,"$inner_dom",j=function(){var t=this,n=j.$$p,r=n||i,a=i;return n&&(j.$$p=null),t.$clear(),a=t.$document(),t["$<<"](s(e.const_get_relative(ce,"Builder"),"new",[a,t],r.$to_proc()).$to_a())},j.$$arity=0),e.defn($e,"$inner_dom=",B=function(e){var t=this;return t.$clear(),t["$<<"](e)},B.$$arity=1),e.defn($e,"$inspect",L=function(){var e=this,n=i;return n=e.$name().$downcase(),l(e.$id())&&(n=t(n,t(t(".",e.$id()),"!"))),l(e.$class_names()["$empty?"]())||(n=t(n,t(".",e.$class_names().$join(".")))),"#<DOM::Element: "+n+">"},L.$$arity=0),e.defn($e,"$offset",U=function(){var t,n=this,r=i,a=arguments.length,o=a-0;o<0&&(o=0),t=new Array(o);for(var $=0;$<a;$++)t[$-0]=arguments[$];return r=e.const_get_relative(ce,"Offset").$new(n),l(t["$empty?"]())||s(r,"set",e.to_a(t)),r},U.$$arity=-1),e.defn($e,"$offset=",F=function(t){return s(this.$offset(),"set",e.to_a(t))},F.$$arity=1),e.defn($e,"$position",W=function(){var t=this;return e.const_get_relative(ce,"Position").$new(t)},W.$$arity=0),e.defn($e,"$scroll",Y=function(){var t=this;return e.const_get_relative(ce,"Scroll").$new(t)},Y.$$arity=0),e.defn($e,"$search",G=function(){var t,n,r=this,a=arguments.length,o=a-0;o<0&&(o=0),n=new Array(o);for(var $=0;$<a;$++)n[$-0]=arguments[$];return e.const_get_relative(ce,"NodeSet").$new(s(n,"map",[],(t=function(e){var n=t.$$s||this;return null==e&&(e=i),n.$xpath(e).$to_a().$concat(n.$css(e).$to_a())},t.$$s=r,t.$$arity=1,t)).$flatten().$uniq())},G.$$arity=-1),e.alias($e,"set","[]="),e.alias($e,"set_attribute","[]="),e.defn($e,"$style",K=function(t){var n,r=this,a=K.$$p,o=a||i,$=i;return null==t&&(t=i),a&&(K.$$p=null),$=e.const_get_qualified(e.const_get_relative(ce,"CSS"),"Declaration").$new(r.native.style),l(l(n=t)?n:o)?(l(e.const_get_relative(ce,"String")["$==="](t))?$.$replace(t):l(e.const_get_relative(ce,"Hash")["$==="](t))?$.$assign(t):l(o)?s($,"apply",[],o.$to_proc()):r.$raise(e.const_get_relative(ce,"ArgumentError"),"unknown data type"),r):$},K.$$arity=-1),l(e.const_get_relative(ce,"Browser")["$supports?"]("CSS.computed"))?e.defn($e,"$style!",X=function(){var t=this;return e.const_get_qualified(e.const_get_relative(ce,"CSS"),"Declaration").$new(t.$window().$to_n().getComputedStyle(t.native,null))},X.$$arity=0):l(e.const_get_relative(ce,"Browser")["$supports?"]("CSS.current"))?e.defn($e,"$style!",V=function(){var t=this;return e.const_get_qualified(e.const_get_relative(ce,"CSS"),"Declaration").$new(t.native.currentStyle)},V.$$arity=0):e.defn($e,"$style!",J=function(){return this.$raise(e.const_get_relative(ce,"NotImplementedError"),"computed style unsupported")},J.$$arity=0),e.defn($e,"$remove_attribute",Z=function(e){return this.native.removeAttribute(e)},Z.$$arity=1),e.defn($e,"$remove_class",Q=function(){var e,t=this,r=i,a=arguments.length,o=a-0;o<0&&(o=0),e=new Array(o);for(var $=0;$<a;$++)e[$-0]=arguments[$];return r=n(t.$class_names(),e),l(r["$empty?"]())?t.native.removeAttribute("class"):t.native.className=r.$join(" "),t},Q.$$arity=-1),e.defn($e,"$size",ee=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return s(e.const_get_relative(ce,"Size"),"new",[n].concat(e.to_a(t)))},ee.$$arity=-1),e.defn($e,"$width",te=function(){return this.$size().$width()},te.$$arity=0),e.defn($e,"$width=",ne=function(t){var r=i;return r=[t],s(this.$size(),"width=",e.to_a(r)),r[n(r.length,1)]},ne.$$arity=1),e.defn($e,"$window",re=function(){return this.$document().$window()},re.$$arity=0),l(l(ae=e.const_get_relative(ce,"Browser")["$supports?"]("Query.xpath"))?ae:e.const_get_relative(ce,"Browser")["$loaded?"]("wicked-good-xpath"))?(l(e.const_get_relative(ce,"Browser")["$loaded?"]("wicked-good-xpath"))&&wgxpath.install(),e.defn($e,"$xpath",ie=function(t){var n=this;try{return e.const_get_relative(ce,"NodeSet")["$[]"](e.const_get_qualified(e.const_get_relative(ce,"Native"),"Array").$new((n.native.ownerDocument||n.native).evaluate(t,n.native,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),u(["get","length"],{get:"snapshotItem",length:"snapshotLength"})))}catch(r){if(!e.rescue(r,[e.const_get_relative(ce,"StandardError")]))throw r;try{return e.const_get_relative(ce,"NodeSet")["$[]"]()}finally{e.pop_exception()}}},ie.$$arity=1)):e.defn($e,"$xpath",oe=function(){return this.$raise(e.const_get_relative(ce,"NotImplementedError"),"query by XPath unsupported")},oe.$$arity=1)}(f[0],e.const_get_relative(f,"Node"),f)}(f[0],f)}(a[0],a)},Opal.modules["browser/dom/document"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy,o=e.hash2,$=e.send;return e.add_stubs(["$DOM","$first","$css","$xpath","$[]","$supports?","$raise","$ready?","$call","$on","$off","$convert","$new"]),function(t,s){var c=r(t,"Browser"),l=(c.$$proto,[c].concat(s));!function(t,s){var c=r(t,"DOM"),l=(c.$$proto,[c].concat(s));!function(t,$super,r){function s(){}var c,l,u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A=s=a(t,$super,"Document",s),S=A.$$proto,M=[A].concat(r);S.native=n,e.defn(A,"$[]",c=function(e){var t,n=this,r=n.native.getElementById(e);return r?n.$DOM(r):i(t=n.$css(e).$first())?t:n.$xpath(e).$first()},c.$$arity=1),e.alias(A,"at","[]"),e.defn(A,"$body",l=function(){var e=this;return e.$DOM(e.native.body)},l.$$arity=0),e.defn(A,"$create_element",u=function(e,t){var r=this,a=n;return null==t&&(t=o([],{})),i(a=t["$[]"]("namespace"))?r.$DOM(r.native.createElementNS(a,e)):r.$DOM(r.native.createElement(e))},u.$$arity=-2),e.defn(A,"$create_text",_=function(e){var t=this;return t.$DOM(t.native.createTextNode(e))},_.$$arity=1),e.defn(A,"$document",f=function(){return this},f.$$arity=0),e.defn(A,"$head",p=function(){var e=this;return e.$DOM(e.native.getElementsByTagName("head")[0])},p.$$arity=0),e.defn(A,"$inspect",d=function(){return"#<DOM::Document>"},d.$$arity=0),i(e.const_get_relative(M,"Browser")["$supports?"]("Event.addListener"))?e.defn(A,"$ready",v=function(){var t,r=this,a=v.$$p,o=a||n;return a&&(v.$$p=null),i(o)||r.$raise(e.const_get_relative(M,"ArgumentError"),"no block given"),
i(r["$ready?"]())?o.$call():$(r,"on",["dom:load"],((t=function(e){t.$$s;return null==e&&(e=n),e.$off(),o.$call()}).$$s=r,t.$$arity=1,t))},v.$$arity=0):i(e.const_get_relative(M,"Browser")["$supports?"]("Event.attach"))?e.defn(A,"$ready",h=function(){var t,r=this,a=h.$$p,o=a||n;return a&&(h.$$p=null),i(o)||r.$raise(e.const_get_relative(M,"ArgumentError"),"no block given"),i(r["$ready?"]())?o.$call():$(r,"on",["ready:state:change"],((t=function(e){var r=t.$$s||this;return null==e&&(e=n),i(r["$ready?"]())?(e.$off(),o.$call()):n}).$$s=r,t.$$arity=1,t))},h.$$arity=0):e.defn(A,"$ready",y=function(){var t=this,n=y.$$p;return n&&(y.$$p=null),t.$raise(e.const_get_relative(M,"NotImplementedError"),"document ready unsupported")},y.$$arity=0),e.defn(A,"$ready?",m=function(){return"complete"===this.native.readyState},m.$$arity=0),e.defn(A,"$root",g=function(){var e=this;return e.$DOM(e.native.documentElement)},g.$$arity=0),e.defn(A,"$root=",b=function(t){return this.native.documentElement=e.const_get_relative(M,"Native").$convert(t)},b.$$arity=1),e.defn(A,"$style_sheets",w=function(){var t,r=this;return $(e.const_get_qualified(e.const_get_relative(M,"Native"),"Array"),"new",[r.native.styleSheets],((t=function(r){t.$$s;return null==r&&(r=n),e.const_get_qualified(e.const_get_relative(M,"CSS"),"StyleSheet").$new(r)}).$$s=r,t.$$arity=1,t))},w.$$arity=0),e.defn(A,"$title",k=function(){return this.native.title},k.$$arity=0),e.defn(A,"$title=",O=function(e){return this.native.title=e},O.$$arity=1),i(e.const_get_relative(M,"Browser")["$supports?"]("Document.view"))?e.defn(A,"$window",q=function(){var t=this;return e.const_get_relative(M,"Window").$new(t.native.defaultView)},q.$$arity=0):i(e.const_get_relative(M,"Browser")["$supports?"]("Document.window"))?e.defn(A,"$window",E=function(){var t=this;return e.const_get_relative(M,"Window").$new(t.native.parentWindow)},E.$$arity=0):e.defn(A,"$window",x=function(){return this.$raise(e.const_get_relative(M,"NotImplementedError"),"window from document unsupported")},x.$$arity=0)}(l[0],e.const_get_relative(l,"Element"),l)}(l[0],l)}(t[0],t)},Opal.modules["browser/dom/document_fragment"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module),r=e.klass;return function(t,a){var i=n(t,"Browser"),o=(i.$$proto,[i].concat(a));!function(t,a){var i=n(t,"DOM"),o=(i.$$proto,[i].concat(a));!function(e,$super,t){function n(){}var a=n=r(e,$super,"DocumentFragment",n);a.$$proto,[a].concat(t)}(o[0],e.const_get_relative(o,"Element"),o)}(o[0],o)}(t[0],t)},Opal.modules["browser/dom/builder"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.hash2,s=e.send;return e.add_stubs(["$<<","$[]=","$to_h","$-","$[]","$each","$===","$call","$raise","$attr_reader","$new","$to_proc","$map","$build","$for","$create_text","$document","$create_element","$merge!","$attributes","$add_class","$on","$inner_html="]),function(t,n){var r,i=a(t,"Utils");i.$$proto,[i].concat(n);e.defs(i,"$heredoc",r=function(e){return e},r.$$arity=1)}(e.const_get_relative(n,"Paggio"),n),function(t,$super,n){function a(){}var $,s=a=i(t,$super,"Element",a),c=s.$$proto;[s].concat(n);c.on=r,e.defn(s,"$on",$=function(){var e,t,n=this,a=$.$$p,i=a||r,s=arguments.length,c=s-0;c<0&&(c=0),t=new Array(c);for(var l=0;l<s;l++)t[l-0]=arguments[l];return a&&($.$$p=null),(n.on=o(e=n.on)?e:[])["$<<"]([t,i])},$.$$arity=-1)}(e.const_get_qualified(e.const_get_relative(n,"Paggio"),"HTML"),e.const_get_relative(n,"BasicObject"),n),function(n,c){var l=a(n,"Browser"),u=(l.$$proto,[l].concat(c));!function(n,c){var l,u,_,f=a(n,"DOM"),p=(f.$$proto,[f].concat(c));!function(n,$super,a){function c(){}var l,u,_,f,p,d=c=i(n,null,"Builder",c),v=d.$$proto,h=[d].concat(a);v.builder=v.roots=r,e.defs(d,"$to_h",l=function(){var e,t=this;return null==t.builders&&(t.builders=r),t.builders=o(e=t.builders)?e:$([],{})},l.$$arity=0),e.defs(d,"$for",u=function(n){var a=this,i=u.$$p,$=i||r,c=r;return i&&(u.$$p=null),o($)?(c=[n,$],s(a.$to_h(),"[]=",e.to_a(c)),c[t(c.length,1)]):a.$to_h()["$[]"](n)},u.$$arity=1),e.defs(d,"$build",_=function(t,n){try{var a,i=this;return s(i.$to_h(),"each",[],((a=function(i,$){a.$$s;if(null==i&&(i=r),null==$&&($=r),!o(i["$==="](n)))return r;e.ret($.$call(t,n))}).$$s=i,a.$$arity=2,a)),i.$raise(e.const_get_relative(h,"ArgumentError"),"cannot build unknown item "+n)}catch($){if($===e.returner)return $.$v;throw $}},_.$$arity=2),d.$attr_reader("document","element"),e.defn(d,"$initialize",f=function(t){var n,a=this,i=f.$$p,o=i||r;return i&&(f.$$p=null),a.document=t,a.builder=s(e.const_get_qualified(e.const_get_relative(h,"Paggio"),"HTML"),"new",[],o.$to_proc()),a.roots=s(a.builder.$each(),"map",[],((n=function(t){var a=n.$$s||this;return null==t&&(t=r),e.const_get_relative(h,"Builder").$build(a,t)}).$$s=a,n.$$arity=1,n))},f.$$arity=1),e.defn(d,"$to_a",p=function(){return this.roots},p.$$arity=0)}(p[0],0,p),s(e.const_get_relative(p,"Builder"),"for",[e.const_get_relative(p,"String")],((l=function(e,t){l.$$s;return null==e&&(e=r),null==t&&(t=r),e.$document().$create_text(t)}).$$s=f,l.$$arity=2,l)),s(e.const_get_relative(p,"Builder"),"for",[e.const_get_qualified(e.const_get_qualified(e.const_get_relative(p,"Paggio"),"HTML"),"Element")],((u=function(n,a){var i,$,c,l=u.$$s||this,_=r,f=r,d=r,v=r;return null==n&&(n=r),null==a&&(a=r),_=n.$document().$create_element(a.name),o(e.const_get_relative(p,"Hash")["$==="](a.attributes))&&_.$attributes()["$merge!"](a.attributes),s(a.class_names,"each",[],((i=function(e){i.$$s;return null==e&&(e=r),_.$add_class(e)}).$$s=l,i.$$arity=1,i)),o(f=a.on||r)&&s(f,"each",[],(($=function(t,n){$.$$s;return null==t&&(t=r),null==n&&(n=r),s(_,"on",e.to_a(t),n.$to_proc())}).$$s=l,$.$$arity=2,$)),o(d=a.inner_html||r)?(v=[d],s(_,"inner_html=",e.to_a(v)),v[t(v.length,1)]):s(a,"each",[],((c=function(t){c.$$s;return null==t&&(t=r),_["$<<"](e.const_get_relative(p,"Builder").$build(n,t))}).$$s=l,c.$$arity=1,c)),_}).$$s=f,u.$$arity=2,u)),s(e.const_get_relative(p,"Builder"),"for",[e.const_get_qualified(e.const_get_relative(p,"DOM"),"Node")],((_=function(e,t){_.$$s;return null==e&&(e=r),null==t&&(t=r),t}).$$s=f,_.$$arity=2,_))}(u[0],u)}(n[0],n)},Opal.modules["browser/dom/mutation_observer"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.send,s=e.hash2;return e.add_stubs(["$supports?","$include","$===","$==","$type","$new","$[]","$DOM","$alias_native","$call","$map","$convert","$private","$Native","$[]=","$-","$to_n"]),function(n,c){var l=a(n,"Browser"),u=(l.$$proto,[l].concat(c));!function(n,c){var l=a(n,"DOM"),u=(l.$$proto,[l].concat(c));!function(n,$super,a){function c(){}var l,u,_,f,p,d,v=c=i(n,null,"MutationObserver",c),h=v.$$proto,y=[v].concat(a);h.native=r,e.defs(v,"$supported?",l=function(){return e.const_get_relative(y,"Browser")["$supports?"]("MutationObserver")},l.$$arity=0),v.$include(e.const_get_relative(y,"Native")),function(t,$super,n){function a(){}var $,s,c,l,u,_,f,p=a=i(t,null,"Record",a),d=p.$$proto,v=[p].concat(n);d.native=r,p.$include(e.const_get_relative(v,"Native")),e.defn(p,"$type",$=function(){var e=r;return e=this.native.type,"attributes"["$==="](e)?"attribute":"childList"["$==="](e)?"tree":"characterData"["$==="](e)?"cdata":r},$.$$arity=0),e.defn(p,"$attribute?",s=function(){return this.$type()["$=="]("attribute")},s.$$arity=0),e.defn(p,"$tree?",c=function(){return this.$type()["$=="]("tree")},c.$$arity=0),e.defn(p,"$cdata?",l=function(){return this.$type()["$=="]("cdata")},l.$$arity=0),e.defn(p,"$added",u=function(){var t=this,n=r;return n=o(null!=t.native.addedNodes)?e.const_get_qualified(e.const_get_relative(v,"Native"),"Array").$new(t.native.addedNodes):[],e.const_get_relative(v,"NodeSet")["$[]"](n)},u.$$arity=0),e.defn(p,"$removed",_=function(){var t=this,n=r;return n=o(null!=t.native.removedNodes)?e.const_get_qualified(e.const_get_relative(v,"Native"),"Array").$new(t.native.removedNodes):[],e.const_get_relative(v,"NodeSet")["$[]"](n)},_.$$arity=0),e.defn(p,"$target",f=function(){var e=this;return e.$DOM(e.native.target)},f.$$arity=0),p.$alias_native("old","oldValue"),p.$alias_native("name","attributeName"),p.$alias_native("namespace","attributeNamespace")}(y[0],0,y),e.defn(v,"$initialize",u=function(){var t,n=this,a=u.$$p,i=a||r;a&&(u.$$p=null);var o=function(a){return i.$call($(a,"map",[],((t=function(n){t.$$s;return null==n&&(n=r),e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(y,"Browser"),"DOM"),"MutationObserver"),"Record").$new(n)}).$$s=n,t.$$arity=1,t)))};return $(n,e.find_super_dispatcher(n,"initialize",u,!1),[new window.MutationObserver(o)],null)},u.$$arity=0),e.defn(v,"$observe",_=function(t,n){var a=this;return null==n&&(n=r),o(n)||(n=s(["children","tree","attributes","cdata"],{children:!0,tree:!0,attributes:"old",cdata:"old"})),a.native.observe(e.const_get_relative(y,"Native").$convert(t),a.$convert(n)),a},_.$$arity=-2),e.defn(v,"$take",f=function(){var t,n=this;return $(n.native.takeRecords(),"map",[],((t=function(n){t.$$s;return null==n&&(n=r),e.const_get_relative(y,"Record").$new(n)}).$$s=n,t.$$arity=1,t))},f.$$arity=0),e.defn(v,"$disconnect",p=function(){return this.native.disconnect()},p.$$arity=0),v.$private(),e.defn(v,"$convert",d=function(n){var a=r,i=r,s=r,c=r,l=r;return a=this.$Native({}),o(n["$[]"]("children"))&&(i=["childList",!0],$(a,"[]=",e.to_a(i)),i[t(i.length,1)]),o(n["$[]"]("tree"))&&(i=["subtree",!0],$(a,"[]=",e.to_a(i)),i[t(i.length,1)]),o(s=n["$[]"]("attributes"))&&(i=["attributes",!0],$(a,"[]=",e.to_a(i)),i[t(i.length,1)],s["$=="]("old")&&(i=["attributeOldValue",!0],$(a,"[]=",e.to_a(i)),i[t(i.length,1)])),o(c=n["$[]"]("filter"))&&(i=["attributeFilter",c],$(a,"[]=",e.to_a(i)),i[t(i.length,1)]),o(l=n["$[]"]("cdata"))&&(i=["characterData",!0],$(a,"[]=",e.to_a(i)),i[t(i.length,1)],l["$=="]("old")&&(i=["characterDataOldValue",!0],$(a,"[]=",e.to_a(i)),i[t(i.length,1)])),a.$to_n()},d.$$arity=1)}(u[0],0,u)}(u[0],u)}(n[0],n)},Opal.modules["browser/dom"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.truthy,o=e.gvars,$=e.send,s=e.klass;return null==o.window&&(o.window=r),e.add_stubs(["$require","$DOM","$shift","$to_a","$new","$to_proc","$==","$length","$first","$native?","$===","$try_convert","$raise","$document"]),t.$require("browser/dom/node_set"),t.$require("browser/dom/node"),t.$require("browser/dom/attribute"),t.$require("browser/dom/character_data"),t.$require("browser/dom/text"),t.$require("browser/dom/cdata"),t.$require("browser/dom/comment"),t.$require("browser/dom/element"),t.$require("browser/dom/document"),t.$require("browser/dom/document_fragment"),t.$require("browser/dom/builder"),t.$require("browser/dom/mutation_observer"),function(t,n){var s,c,l=a(t,"Kernel"),u=(l.$$proto,[l].concat(n));e.defn(l,"$XML",s=function(e){var t,n=this;return window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)),n.$DOM(t)},s.$$arity=1),e.defn(l,"$DOM",c=function(){var t,n,a=this,s=c.$$p,l=s||r,_=r,f=r,p=r;null==o.document&&(o.document=r);var d=arguments.length,v=d-0;v<0&&(v=0),n=new Array(v);for(var h=0;h<d;h++)n[h-0]=arguments[h];if(s&&(c.$$p=null),i(l))return _=i(t=n.$shift())?t:o.document,(f=$(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Browser"),"DOM"),"Builder"),"new",[_],l.$to_proc()).$to_a()).$length()["$=="](1)?f.$first():e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Browser"),"DOM"),"NodeSet").$new(f);if(p=n.$shift(),_=i(t=n.$shift())?t:o.document,i(a["$native?"](p)))return e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Browser"),"DOM"),"Node").$new(p);if(i(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Browser"),"DOM"),"Node")["$==="](p)))return p;if(i(e.const_get_relative(u,"String")["$==="](p))){var y=e.const_get_relative(u,"Native").$try_convert(_).createElement("div");return y.innerHTML=p,a.$DOM(1==y.childNodes.length?y.childNodes[0]:y)}return a.$raise(e.const_get_relative(u,"ArgumentError"),"argument not DOM convertible")},c.$$arity=-1)}(n[0],n),function(t,n){var i=a(t,"Browser"),o=(i.$$proto,[i].concat(n));!function(t,$super,n){function a(){}var i,o=a=s(t,null,"Window",a),$=o.$$proto;[o].concat(n);$.native=r,e.defn(o,"$document",i=function(){var e=this;return e.$DOM(e.native.document)},i.$$arity=0)}(o[0],0,o)}(n[0],n),o.document=o.window.$document()},Opal.modules["browser/css/declaration"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.send,s=e.range;return e.add_stubs(["$include","$new","$each","$[]=","$-","$to_proc","$important","$name","$value","$to_s","$enum_for","$[]","$alias_native","$end_with?"]),function(n,c){var l=a(n,"Browser"),u=(l.$$proto,[l].concat(c));!function(n,c){var l=a(n,"CSS"),u=(l.$$proto,[l].concat(c));!function(n,$super,a){function c(){}var l,u,_,f,p,d,v,h,y,m,g=c=i(n,null,"Declaration",c),b=g.$$proto,w=[g].concat(a);b.native=r,g.$include(e.const_get_relative(w,"Native")),g.$include(e.const_get_relative(w,"Enumerable")),e.defn(g,"$rule",l=function(){var t=this;return o("undefined"!=typeof t.native.parentRule)?e.const_get_relative(w,"Rule").$new(t.native.parentRule):r},l.$$arity=0),e.defn(g,"$assign",u=function(n){var a,i=this;return $(n,"each",[],((a=function(n,i){var o=a.$$s||this,s=r;return null==n&&(n=r),null==i&&(i=r),s=[n,i],$(o,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=i,a.$$arity=2,a)),i},u.$$arity=1),e.defn(g,"$replace",_=function(e){return this.native.cssText=e},_.$$arity=1),e.defn(g,"$apply",f=function(){var t,n=this,a=f.$$p,i=a||r;return a&&(f.$$p=null),$($(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(w,"Paggio"),"CSS"),"Definition"),"new",[],i.$to_proc()),"each",[],((t=function(e){var n=t.$$s||this;return null==n.native&&(n.native=r),null==e&&(e=r),o(e.$important())?n.native.setProperty(e.$name(),e.$value(),"important"):n.native.setProperty(e.$name(),e.$value(),"")}).$$s=n,t.$$arity=1,t))},f.$$arity=0),e.defn(g,"$delete",p=function(e){return this.native.removeProperty(e)},p.$$arity=1),e.defn(g,"$[]",d=function(e){var t=this.native.getPropertyValue(e);return null==t||""===t?r:t},d.$$arity=1),e.defn(g,"$[]=",v=function(e,t){return this.native.setProperty(e,t.$to_s(),"")},v.$$arity=2),e.defn(g,"$important?",h=function(e){return"important"==this.native.getPropertyPriority(e)},h.$$arity=1),e.defn(g,"$each",y=function(){var t=this,n=y.$$p,a=n||r;if(n&&(y.$$p=null),a===r)return t.$enum_for("each");for(var i=0,o=t.native.length;i<o;i++){var $=t.native.item(i);e.yieldX(a,[$,t["$[]"]($)])}return t},y.$$arity=0),g.$alias_native("length"),g.$alias_native("to_s","cssText"),e.defn(g,"$method_missing",m=function(n,a){var i=this,c=r;return null==a&&(a=r),o(n["$end_with?"]("="))?(c=[n["$[]"](s(0,-2,!1)),a],$(i,"[]=",e.to_a(c)),c[t(c.length,1)]):i["$[]"](n)},m.$$arity=-2)}(u[0],0,u)}(u[0],u)}(n[0],n)},Opal.modules["browser/css/style_sheet"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy,o=e.send;return e.add_stubs(["$include","$is_a?","$to_n","$alias_native","$new","$DOM","$===","$join","$map","$insert","$length","$find","$rules","$log","$==","$id","$__send__","$to_proc"]),function(t,$){var s=r(t,"Browser"),c=(s.$$proto,[s].concat($));!function(t,$){var s=r(t,"CSS"),c=(s.$$proto,[s].concat($));!function(t,$super,r){function $(){}var s,c,l,u,_,f,p,d,v,h,y=$=a(t,null,"StyleSheet",$),m=y.$$proto,g=[y].concat(r);m.native=n,y.$include(e.const_get_relative(g,"Native")),e.defn(y,"$initialize",s=function(t){var n=this,r=s.$$p;return r&&(s.$$p=null),i(t["$is_a?"](e.const_get_qualified(e.const_get_relative(g,"DOM"),"Element")))?o(n,e.find_super_dispatcher(n,"initialize",s,!1),[t.$to_n().sheet],null):o(n,e.find_super_dispatcher(n,"initialize",s,!1),[t],null)},s.$$arity=1),y.$alias_native("disabled?","disabled"),y.$alias_native("href"),y.$alias_native("title"),y.$alias_native("type"),e.defn(y,"$media",c=function(){var t=this;return i(null!=t.native.media)?e.const_get_relative(g,"Media").$new(t.native.media):n},c.$$arity=0),e.defn(y,"$owner",l=function(){var e=this;return e.$DOM(e.native.ownerNode)},l.$$arity=0),e.defn(y,"$parent",u=function(){var t=this;return i(null!=t.native.parentStyleSheet)?e.const_get_relative(g,"Sheet").$new(t.native.parentStyleSheet):n},u.$$arity=0),e.defn(y,"$rules",_=function(){var t,r=this;return o(e.const_get_qualified(e.const_get_relative(g,"Native"),"Array"),"new",[r.native.cssRules],((t=function(r){t.$$s;return null==r&&(r=n),e.const_get_relative(g,"Rule").$new(r)}).$$s=r,t.$$arity=1,t))},_.$$arity=0),e.defn(y,"$delete",f=function(e){return this.native.deleteRule(e)},f.$$arity=1),e.defn(y,"$insert",p=function(e,t){return this.native.insertRule(t,e)},p.$$arity=2),e.defn(y,"$rule",d=function(t,r){var a,$=this;return i(e.const_get_relative(g,"String")["$==="](t))||(t=t.$join(", ")),i(e.const_get_relative(g,"String")["$==="](r))||(r=o(r,"map",[],(a=function(e,t){a.$$s;return null==e&&(e=n),null==t&&(t=n),e+": "+t+";"},a.$$s=$,a.$$arity=2,a)).$join("\n")),$.$insert($.$length(),t+" { "+r+" }")},d.$$arity=2),e.defn(y,"$[]",v=function(e){var t,r=this;return o(r.$rules(),"find",[],((t=function(r){var a=t.$$s||this;return null==r&&(r=n),a.$log(r),r.$id()["$=="](e)}).$$s=r,t.$$arity=1,t))},v.$$arity=1),e.defn(y,"$method_missing",h=function(){var t,r=this,a=h.$$p,i=a||n,$=arguments.length,s=$-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<$;c++)t[c-0]=arguments[c];return a&&(h.$$p=null),o(r.$rules(),"__send__",e.to_a(t),i.$to_proc())},h.$$arity=-1),function(t,$super,r){function i(){}var o,$,s=i=a(t,$super,"Media",i),c=s.$$proto;[s].concat(r);c.native=n,s.$alias_native("text","mediaText"),s.$alias_native("to_s","mediaText"),e.defn(s,"$push",o=function(e){var t=this;return t.native.appendMedium(e),t},o.$$arity=1),e.defn(s,"$delete",$=function(e){return this.native.deleteMedium(e)},$.$$arity=1)}(g[0],e.const_get_qualified(e.const_get_relative(g,"Native"),"Array"),g)}(c[0],0,c)}(c[0],c)}(t[0],t)},Opal.modules["browser/css/rule"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy,o=e.send;return e.add_stubs(["$include","$==","$[]","$new","$raise","$alias_native"]),function(t,$){var s=r(t,"Browser"),c=(s.$$proto,[s].concat($));!function(t,$){var s=r(t,"CSS"),c=(s.$$proto,[s].concat($));!function(t,$super,r){function $(){}var s,c,l,u=$=a(t,null,"Rule",$),_=u.$$proto,f=[u].concat(r);_.native=n,u.$include(e.const_get_relative(f,"Native")),e.const_set(f[0],"STYLE_RULE",1),e.const_set(f[0],"CHARSET_RULE",2),e.const_set(f[0],"IMPORT_RULE",3),e.const_set(f[0],"MEDIA_RULE",4),e.const_set(f[0],"FONT_FACE_RULE",5),e.const_set(f[0],"PAGE_RULE",6),e.const_set(f[0],"KEYFRAMES_RULE",7),e.const_set(f[0],"KEYFRAME_RULE",8),e.const_set(f[0],"NAMESPACE_RULE",10),e.const_set(f[0],"COUNTER_STYLE_RULE",11),e.const_set(f[0],"SUPPORTS_RULE",12),e.const_set(f[0],"DOCUMENT_RULE",13),e.const_set(f[0],"FONT_FEATURE_VALUES_RULE",14),e.const_set(f[0],"VIEWPORT_RULE",15),e.const_set(f[0],"REGION_STYLE_RULE",16),e.defs(u,"$new",s=function(t){var r,a=this,c=s.$$p,l=n;return null==a.classes&&(a.classes=n),c&&(s.$$p=null),a["$=="](e.const_get_relative(f,"Rule"))?(a.classes=i(r=a.classes)?r:[n,e.const_get_relative(f,"Style")],i(l=a.classes["$[]"](t.type))?l.$new(t):a.$raise(e.const_get_relative(f,"ArgumentError"),"cannot instantiate a non derived Rule object")):o(a,e.find_super_dispatcher(a,"new",s,!1,$),[t],null)},s.$$arity=1),u.$alias_native("text","cssText"),u.$alias_native("to_s","cssText"),e.defn(u,"$parent",c=function(){var t=this;return i(null!=t.native.parentRule)?e.const_get_relative(f,"Rule").$new(t.native.parentRule):n},c.$$arity=0),e.defn(u,"$style_sheet",l=function(){var t=this;return i(null!=t.native.parentStyleSheet)?e.const_get_relative(f,"StyleSheet").$new(t.native.parentStyleSheet):n},l.$$arity=0)}(c[0],0,c)}(c[0],c)}(t[0],t)},Opal.modules["browser/css/rule/style"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.send;return e.add_stubs(["$alias_native","$new","$__send__","$declaration","$to_proc"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,o){var $=r(t,"CSS"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function o(){}var $=o=a(t,null,"Rule",o),s=($.$$proto,[$].concat(r));(function(t,$super,r){function o(){}var $,s,c=o=a(t,$super,"Style",o),l=c.$$proto,u=[c].concat(r);l.native=n,c.$alias_native("selector","selectorText"),c.$alias_native("id","selectorText"),e.defn(c,"$declaration",$=function(){var t=this;return e.const_get_relative(u,"Declaration").$new(t.native.style)},$.$$arity=0),e.defn(c,"$method_missing",s=function(){var t,r=this,a=s.$$p,o=a||n,$=arguments.length,c=$-0;c<0&&(c=0),t=new Array(c);for(var l=0;l<$;l++)t[l-0]=arguments[l];return a&&(s.$$p=null),i(r.$declaration(),"__send__",e.to_a(t),o.$to_proc())},s.$$arity=-1)})(s[0],e.const_get_relative(s,"Rule"),s)}(s[0],0,s)}(s[0],s)}(t[0],t)},Opal.modules["browser/css"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n=e.top,r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.gvars,$=e.send,s=e.truthy;return e.add_stubs(["$require","$create_element","$[]=","$-","$css","$to_proc","$inner_text="]),n.$require("browser/css/declaration"),n.$require("browser/css/style_sheet"),n.$require("browser/css/rule"),n.$require("browser/css/rule/style"),function(n,r){var c,l=i(n,"Kernel"),u=(l.$$proto,[l].concat(r));e.defn(l,"$CSS",c=function(n){var r=c.$$p,i=r||a,l=a,_=a;return null==o.document&&(o.document=a),null==n&&(n=a),r&&(c.$$p=null),l=o.document.$create_element("style"),_=["type","text/css"],$(l,"[]=",e.to_a(_)),_[t(_.length,1)],s(i)?(_=[$(e.const_get_relative(u,"Paggio"),"css",[],i.$to_proc())],$(l,"inner_text=",e.to_a(_)),_[t(_.length,1)]):(_=[n],$(l,"inner_text=",e.to_a(_)),_[t(_.length,1)]),l},c.$$arity=-1)}(r[0],r)},Opal.modules.browser=function(e){var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("native"),t.$require("paggio"),t.$require("browser/version"),t.$require("browser/utils"),t.$require("browser/support"),t.$require("browser/event"),t.$require("browser/window"),t.$require("browser/dom"),t.$require("browser/css")},Opal.modules["browser/interval"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy,o=e.send,$=e.gvars;return e.add_stubs(["$attr_reader","$convert","$nil?","$stopped?","$aborted?","$raise","$call","$tap","$new","$to_proc","$every","$every!"]),function(t,$){var s=r(t,"Browser"),c=(s.$$proto,[s].concat($));!function(t,$super,r){function o(){}var $,s,c,l,u,_,f,p=o=a(t,null,"Interval",o),d=p.$$proto,v=[p].concat(r);d.id=d.aborted=d.window=d.block=d.every=n,p.$attr_reader("every"),e.defn(p,"$initialize",$=function(t,r){var a=this,i=$.$$p,o=i||n;return i&&($.$$p=null),a.window=e.const_get_relative(v,"Native").$convert(t),a.every=r,a.block=o,a.aborted=!1},$.$$arity=2),e.defn(p,"$stopped?",s=function(){return this.id["$nil?"]()},s.$$arity=0),e.defn(p,"$aborted?",c=function(){return this.aborted},c.$$arity=0),e.defn(p,"$abort",l=function(){var e=this;return e.window.clearInterval(e.id),e.aborted=!0,e.id=n},l.$$arity=0),e.defn(p,"$stop",u=function(){var e=this;return i(e["$stopped?"]())?n:(e.window.clearInterval(e.id),e.stopped=!0,e.id=n)},u.$$arity=0),e.defn(p,"$start",_=function(){var e=this;return i(e["$aborted?"]())&&e.$raise("the interval has been aborted"),i(e["$stopped?"]())?e.id=e.window.setInterval(e.block,1e3*e.every):n},_.$$arity=0),e.defn(p,"$call",f=function(){return this.block.$call()},f.$$arity=0)}(c[0],0,c),function(t,$super,r){function i(){}var $,s,c=i=a(t,null,"Window",i),l=c.$$proto,u=[c].concat(r);l.native=n,e.defn(c,"$every",$=function(t){var r=this,a=$.$$p,i=a||n;return a&&($.$$p=null),o(o(e.const_get_relative(u,"Interval"),"new",[r.native,t],i.$to_proc()),"tap",[],"start".$to_proc())},$.$$arity=1),e.defn(c,"$every!",s=function(t){var r=this,a=s.$$p,i=a||n;return a&&(s.$$p=null),o(e.const_get_relative(u,"Interval"),"new",[r.native,t],i.$to_proc())},s.$$arity=1)}(c[0],0,c)}(t[0],t),function(t,a){var i,s,c=r(t,"Kernel");c.$$proto,[c].concat(a);e.defn(c,"$every",i=function(e){var t=i.$$p,r=t||n;return null==$.window&&($.window=n),t&&(i.$$p=null),o($.window,"every",[e],r.$to_proc())},i.$$arity=1),e.defn(c,"$every!",s=function(e){var t=s.$$p,r=t||n;return null==$.window&&($.window=n),t&&(s.$$p=null),o($.window,"every!",[e],r.$to_proc())},s.$$arity=1)}(t[0],t),function(t,$super,r){function i(){}var s,c,l=i=a(t,null,"Proc",i);l.$$proto,[l].concat(r);return e.defn(l,"$every",s=function(e){var t=this;return null==$.window&&($.window=n),o($.window,"every",[e],t.$to_proc())},s.$$arity=1),e.defn(l,"$every!",c=function(e){var t=this;return null==$.window&&($.window=n),o($.window,"every!",[e],t.$to_proc())},c.$$arity=1),n&&"every!"}(t[0],0,t)},Opal.modules["browser/delay"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.send,o=e.gvars;return e.add_stubs(["$attr_reader","$convert","$to_n","$tap","$new","$to_proc","$after","$after!"]),function(t,o){var $=r(t,"Browser"),s=($.$$proto,[$].concat(o));!function(t,$super,r){function i(){}var o,$,s,c=i=a(t,null,"Delay",i),l=c.$$proto,u=[c].concat(r);l.window=l.id=l.block=l.after=n,c.$attr_reader("after"),e.defn(c,"$initialize",o=function(t,r){var a=this,i=o.$$p,$=i||n;return i&&(o.$$p=null),a.window=e.const_get_relative(u,"Native").$convert(t),a.after=r,a.block=$},o.$$arity=2),e.defn(c,"$abort",$=function(){var e=this;return e.window.clearTimeout(e.id)},$.$$arity=0),e.defn(c,"$start",s=function(){var e=this;return e.id=e.window.setTimeout(e.block.$to_n(),1e3*e.after)},s.$$arity=0)}(s[0],0,s),function(t,$super,r){function o(){}var $,s,c=o=a(t,null,"Window",o),l=c.$$proto,u=[c].concat(r);l.native=n,e.defn(c,"$after",$=function(t){var r=this,a=$.$$p,o=a||n;return a&&($.$$p=null),i(i(e.const_get_relative(u,"Delay"),"new",[r.native,t],o.$to_proc()),"tap",[],"start".$to_proc())},$.$$arity=1),e.defn(c,"$after!",s=function(t){var r=this,a=s.$$p,o=a||n;return a&&(s.$$p=null),i(e.const_get_relative(u,"Delay"),"new",[r.native,t],o.$to_proc())},s.$$arity=1)}(s[0],0,s)}(t[0],t),function(t,a){var $,s,c=r(t,"Kernel");c.$$proto,[c].concat(a);e.defn(c,"$after",$=function(e){var t=$.$$p,r=t||n;return null==o.window&&(o.window=n),t&&($.$$p=null),i(o.window,"after",[e],r.$to_proc())},$.$$arity=1),e.defn(c,"$after!",s=function(e){var t=s.$$p,r=t||n;return null==o.window&&(o.window=n),t&&(s.$$p=null),i(o.window,"after!",[e],r.$to_proc())},s.$$arity=1)}(t[0],t),function(t,$super,r){function $(){}var s,c,l=$=a(t,null,"Proc",$);l.$$proto,[l].concat(r);return e.defn(l,"$after",s=function(e){var t=this;return null==o.window&&(o.window=n),i(o.window,"after",[e],t.$to_proc())},s.$$arity=1),e.defn(l,"$after!",c=function(e){var t=this;return null==o.window&&(o.window=n),i(o.window,"after!",[e],t.$to_proc())},c.$$arity=1),n&&"after!"}(t[0],0,t)},Opal.modules["hyperstack/boot"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.truthy,i=e.klass,o=e.send,$=e.hash2;return e.add_stubs(["$attr_reader","$<<","$receivers","$set_var","$new","$each","$call"]),function(t,s){var c=r(t,"Hyperstack"),l=(c.$$proto,[c].concat(s));a(e.const_get_relative(l,"Operation","skip_raise")?"constant":n)||(function(e,$super,t){function n(){}var r=n=i(e,null,"Operation",n);r.$$proto,[r].concat(t)}(l[0],0,l),function(t,$super,r){function a(){}var s=a=i(t,null,"Application",a),c=(s.$$proto,[s].concat(r));(function(t,$super,r){function a(){}var s=a=i(t,$super,"Boot",a),c=(s.$$proto,[s].concat(r));(function(t,$super,n){function r(){}var a,o=r=i(t,null,"ReactDummyParams",r);o.$$proto,[o].concat(n);o.$attr_reader("context"),e.defn(o,"$initialize",a=function(e){return this.context=e},a.$$arity=1)})(c[0],0,c),function(t,r){t.$$proto;var a,i,s,c=[t].concat(r);e.defn(t,"$on_dispatch",a=function(){var e=this,t=a.$$p,r=t||n;return t&&(a.$$p=null),e.$receivers()["$<<"](r)},a.$$arity=0),e.defn(t,"$receivers",i=function(){var t,n=this;return o(e.const_get_qualified(e.const_get_relative(c,"Hyperstack"),"Context"),"set_var",[n,"@receivers",$(["force"],{force:!0})],((t=function(){t.$$s;return[]}).$$s=n,t.$$arity=0,t))},i.$$arity=0),e.defn(t,"$run",s=function(t){var r,a,i=this,s=n;if(null==t||!t.$$is_hash){if(null!=t)throw e.ArgumentError.$new("expected kwargs");t=$([],{})}return null==(a=t.$$smap.context)&&(a=n),s=e.const_get_relative(c,"ReactDummyParams").$new(a),o(i.$receivers(),"each",[],((r=function(e){r.$$s;return null==e&&(e=n),e.$call(s)}).$$s=i,r.$$arity=1,r))},s.$$arity=-1)}(e.get_singleton_class(s),c)})(c[0],e.const_get_relative(c,"Operation"),c)}(l[0],0,l))}(t[0],t)},Opal.modules["hyperstack/deprecation_warning"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.truthy;return e.add_stubs(["$production?","$env","$include?","$<<"]),function(t,i){var o,$=r(t,"Hyperstack");$.$$proto,[$].concat(i);e.defs($,"$deprecation_warning",o=function(e,t){var r,i=this;return null==i.deprecation_messages&&(i.deprecation_messages=n),a(i.$env()["$production?"]())?n:(i.deprecation_messages=a(r=i.deprecation_messages)?r:[],t="Warning: Deprecated feature used in "+e+". "+t,a(i.deprecation_messages["$include?"](t))?n:(i.deprecation_messages["$<<"](t),console.warn.apply(console,[t])))},o.$$arity=2)}(t[0],t)},Opal.modules["hyperstack/string"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass);return function(t,$super,a){function i(){}var o,$=i=r(t,null,"String",i);$.$$proto,[$].concat(a);return e.defn($,"$to_json",o=function(){var e=this;return JSON.stringify(e)},o.$$arity=0),n&&"to_json"}(t[0],0,t)},Opal.modules["hyperstack/client_stubs"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module);return function(t,a){var i=r(t,"Hyperstack"),o=(i.$$proto,[i].concat(a));!function(t,r){var a,i,o;t.$$proto,[t].concat(r);e.defn(t,"$import",a=function(){var e,t=arguments.length,r=t-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<t;a++)e[a-0]=arguments[a];return n},a.$$arity=-1),e.defn(t,"$imports",i=function(){var e,t=arguments.length,r=t-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<t;a++)e[a-0]=arguments[a];return n},i.$$arity=-1),e.defn(t,"$import_tree",o=function(){var e,t=arguments.length,r=t-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<t;a++)e[a-0]=arguments[a];return n},o.$$arity=-1)}(e.get_singleton_class(i),o)}(t[0],t)},Opal.modules["hyperstack/context"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.truthy,o=e.send,$=e.hash2;return e.add_stubs(["$instance_variable_get","$!","$key?","$[]","$dup","$[]=","$-","$instance_variable_set","$each","$run","$new"]),function(n,s){var c=a(n,"Hyperstack"),l=(c.$$proto,[c].concat(s));!function(n,s){var c,l,u=a(n,"Context"),_=(u.$$proto,[u].concat(s));e.defs(u,"$set_var",c=function(n,a,s){var l,u,_,f=this,p=c.$$p,d=p||r,v=r,h=r;if(null==f.context&&(f.context=r),null==s||!s.$$is_hash){if(null!=s)throw e.ArgumentError.$new("expected kwargs");s=$([],{})}return null==(_=s.$$smap.force)&&(_=r),p&&(c.$$p=null),v=n.$instance_variable_get(a),i(i(l=i(u=f.context)?f.context["$[]"](n)["$key?"](a)["$!"]():u)?i(u=_)?u:v["$!"]():l)&&(h=[a,i(l=v)?v.$dup():l],o(f.context["$[]"](n),"[]=",e.to_a(h)),h[t(h.length,1)]),i(l=v)?l:n.$instance_variable_set(a,e.yieldX(d,[]))},c.$$arity=-3),e.defs(u,"$reset!",l=function(n){var a,s,c=this;return null==c.context&&(c.context=r),null==n&&(n=!0),i(c.context)?(o(c.context,"each",[],((a=function(e,t){var n,$=a.$$s||this;return null==e&&(e=r),null==t&&(t=r),o(t,"each",[],((n=function(t,a){var o;n.$$s;return null==t&&(t=r),null==a&&(a=r),e.$instance_variable_set(t,i(o=a)?a.$dup():o)}).$$s=$,n.$$arity=2,n))}).$$s=c,a.$$arity=2,a)),i(n)?e.const_get_qualified(e.const_get_qualified(e.const_get_relative(_,"Hyperstack"),"Application"),"Boot").$run():r):c.context=o(e.const_get_relative(_,"Hash"),"new",[],((s=function(n,a){s.$$s;var i=r;return null==n&&(n=r),null==a&&(a=r),i=[a,$([],{})],o(n,"[]=",e.to_a(i)),i[t(i.length,1)]}).$$s=c,s.$$arity=2,s))},l.$$arity=-1)}(l[0],l)}(n[0],n)},Opal.modules["hyperstack/js_imports"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.truthy,i=e.send,o=e.hash2;return e.add_stubs(["$!=","$!","$each","$raise"]),function(t,$){var s=r(t,"Hyperstack"),c=(s.$$proto,[s].concat($));!function(t,r){t.$$proto;var $,s=[t].concat(r);e.defn(t,"$js_import",$=function(t,r){var $,c,l,u,_,f,p=this,d=n;if(null==r||!r.$$is_hash){if(null!=r)throw e.ArgumentError.$new("expected kwargs");r=o([],{})}
if(null==(u=r.$$smap.client_only)&&(u=n),null==(_=r.$$smap.server_only)&&(_=n),!e.hasOwnProperty.call(r.$$smap,"defines"))throw e.ArgumentError.$new("missing keyword: defines");return f=r.$$smap.defines,f=[].concat(e.to_a(f)),a(e.const_get_relative(s,"RUBY_ENGINE")["$!="]("opal"))?n:(d="undefined"==typeof e.global.document,a(a($=a(c=_)?d["$!"]():c)?$:a(c=u)?d:c)?n:i(f,"each",[],((l=function(t){var r=l.$$s||this;return null==t&&(t=n),a(e.global[t]===undefined)?r.$raise("The package "+t+" was not found. Add it to the webpack "+(a(u)?"client_only.js":"client_and_server.js")+" manifest."):n}).$$s=p,l.$$arity=1,l)))},$.$$arity=2)}(e.get_singleton_class(s),c)}(t[0],t)},Opal.modules["hyperstack/on_client"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$==","$!"]),function(t,a){var i,o=r(t,"Hyperstack"),$=(o.$$proto,[o].concat(a));e.defs(o,"$on_client?",i=function(){return e.const_get_relative($,"RUBY_ENGINE")["$=="]("opal")?("undefined"==typeof e.global.document)["$!"]():n},i.$$arity=0)}(t[0],t)},Opal.modules["hyperstack/active_support_string_inquirer"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy,o=e.send,$=e.range;return e.add_stubs(["$private","$==","$[]"]),function(t,s){var c=r(t,"ActiveSupport"),l=(c.$$proto,[c].concat(s));!function(t,$super,r){function s(){}var c,l,u=s=a(t,$super,"StringInquirer",s);u.$$proto,[u].concat(r);u.$private(),e.defn(u,"$respond_to_missing?",c=function(t,r){var a,$=this,s=c.$$p,l=n,u=n,_=n;for(null==r&&(r=!1),s&&(c.$$p=null),u=0,_=arguments.length,l=new Array(_);u<_;u++)l[u]=arguments[u];return i(a=t["$[]"](-1)["$=="]("?"))?a:o($,e.find_super_dispatcher($,"respond_to_missing?",c,!1),l,s)},c.$$arity=-2),e.defn(u,"$method_missing",l=function(t){var r,a=this,i=l.$$p,s=n,c=n,u=n,_=arguments.length,f=_-1;f<0&&(f=0),r=new Array(f);for(var p=1;p<_;p++)r[p-1]=arguments[p];for(i&&(l.$$p=null),c=0,u=arguments.length,s=new Array(u);c<u;c++)s[c]=arguments[c];return t["$[]"](-1)["$=="]("?")?a["$=="](t["$[]"]($(0,-2,!1))):o(a,e.find_super_dispatcher(a,"method_missing",l,!1),s,i)},l.$$arity=-2)}(l[0],e.const_get_relative(l,"String"),l)}(t[0],t)},Opal.modules.hyperstack_env=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.truthy;return e.add_stubs(["$new"]),function(t,i){var o,$=r(t,"Hyperstack"),s=($.$$proto,[$].concat(i));e.defs($,"$env",o=function(){var t,r=this;return null==r.environment&&(r.environment=n),r.environment=a(t=r.environment)?t:e.const_get_qualified(e.const_get_relative(s,"ActiveSupport"),"StringInquirer").$new("development")},o.$$arity=0)}(t[0],t)},Opal.modules["hyperstack/hotloader/stub"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.truthy,i=e.klass;return function(t,o){var $=r(t,"Hyperstack"),s=($.$$proto,[$].concat(o));a(e.const_get_relative(s,"Hotloader","skip_raise")?"constant":n)||function(t,$super,r){function a(){}var o,$=a=i(t,null,"Hotloader",a);$.$$proto,[$].concat(r);e.defs($,"$when_file_updates",o=function(){var e=o.$$p;return e&&(o.$$p=null),n},o.$$arity=0)}(s[0],0,s)}(t[0],t)},Opal.modules["hyperstack-config"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.module);return e.add_stubs(["$require","$=="]),t.$require("hyperstack/boot"),function(t,n){var r,i=a(t,"Hyperstack");i.$$proto,[i].concat(n);e.defs(i,"$naming_convention",r=function(){return"camelize_params"},r.$$arity=0)}(n[0],n),e.const_get_relative(n,"RUBY_ENGINE")["$=="]("opal")?(t.$require("hyperstack/deprecation_warning"),t.$require("hyperstack/string"),t.$require("hyperstack/client_stubs"),t.$require("hyperstack/context"),t.$require("hyperstack/js_imports"),t.$require("hyperstack/on_client"),t.$require("hyperstack/active_support_string_inquirer.rb"),t.$require("hyperstack_env"),t.$require("hyperstack/hotloader/stub")):r},Opal.modules["hyperstack/autoloader"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var r=e.top,a=[],i=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass,s=e.send,c=e.truthy,l=e.gvars;return e.add_stubs(["$require","$new","$history=","$-","$load_paths=","$loaded=","$loading=","$nil?","$name","$guess_for_anonymous","$load_missing_constant","$puts","$const_defined?","$raise","$qualified_name_for","$underscore","$search_for_module","$include?","$loading","$require_or_load","$const_get","$respond_to?","$parent","$!=","$!","$any?","$parents","$const_missing","$missing_name?","$!~","$message","$=~","$==","$to_constant_name","$to_s","$loaded","$<<","$delete","$pop","$history","$each","$load_paths","$+","$===","$sub","$inspect","$downcase","$tr","$gsub"]),r.$require("set"),function(r,a){var u=o(r,"Hyperstack"),_=(u.$$proto,[u].concat(a));!function(r,$super,a){function o(){}var u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A=o=$(r,null,"Autoloader",o),S=(A.$$proto,[A].concat(a)),M=i;e.defs(A,"$history=",u=function(t){return e.class_variable_set(o,"@@history",t)},u.$$arity=1),e.defs(A,"$history",_=function(){var e;return null==(e=o.$$cvars["@@history"])?i:e},_.$$arity=0),M=[e.const_get_relative(S,"Set").$new()],s(A,"history=",e.to_a(M)),M[t(M.length,1)],e.defs(A,"$load_paths=",f=function(t){return e.class_variable_set(o,"@@load_paths",t)},f.$$arity=1),e.defs(A,"$load_paths",p=function(){var e;return null==(e=o.$$cvars["@@load_paths"])?i:e},p.$$arity=0),M=[[]],s(A,"load_paths=",e.to_a(M)),M[t(M.length,1)],e.defs(A,"$loaded=",d=function(t){return e.class_variable_set(o,"@@loaded",t)},d.$$arity=1),e.defs(A,"$loaded",v=function(){var e;return null==(e=o.$$cvars["@@loaded"])?i:e},v.$$arity=0),M=[e.const_get_relative(S,"Set").$new()],s(A,"loaded=",e.to_a(M)),M[t(M.length,1)],e.defs(A,"$loading=",h=function(t){return e.class_variable_set(o,"@@loading",t)},h.$$arity=1),e.defs(A,"$loading",y=function(){var e;return null==(e=o.$$cvars["@@loading"])?i:e},y.$$arity=0),M=[[]],s(A,"loading=",e.to_a(M)),M[t(M.length,1)],e.defs(A,"$const_missing",m=function(t,n){var r=this,a=i;try{return a=c(n.$name()["$nil?"]())?r.$guess_for_anonymous(t):n,r.$load_missing_constant(a,t)}catch(o){if(!e.rescue(o,[e.const_get_relative(S,"Exception")]))throw o;o;try{return r.$puts("HyperStack autoloader failed attempting to load "+n+"::"+t+".  Could be a bug in autoloader")}finally{e.pop_exception()}}},m.$$arity=2),e.defs(A,"$guess_for_anonymous",g=function(t){var n=this;return c(e.const_get_relative(S,"Object")["$const_defined?"](t))?n.$raise(e.const_get_relative(S,"NameError").$new(t+" cannot be autoloaded from an anonymous class or module",t)):e.const_get_relative(S,"Object")},g.$$arity=1),e.defs(A,"$load_missing_constant",b=function(t,n){var r,a,o,$,l=this,u=i,_=i,f=i,p=i,d=i;if(u=l.$qualified_name_for(t,n),_=l.$underscore(u),f=l.$search_for_module(_),c(f))return c(l.$loading()["$include?"](f))?l.$raise("Circular dependency detected while autoloading constant "+u):(l.$require_or_load(t,f),c(t["$const_defined?"](n,!1))||l.$raise(e.const_get_relative(S,"LoadError"),"Unable to autoload constant "+u+", expected "+f+" to define it"),t.$const_get(n));if(!c(c(r=c(a=c(o=t["$respond_to?"]("parent"))?p=t.$parent():o)?p["$!="](t):a)?s(t.$parents(),"any?",[],($=function(e){$.$$s;return null==e&&(e=i),e["$const_defined?"](n,!1)},$.$$s=l,$.$$arity=1,$))["$!"]():r))return i;try{return p.$const_missing(n)}catch(v){if(!e.rescue(v,[e.const_get_relative(S,"NameError")]))throw v;d=v;try{return c(l["$missing_name?"](d,l.$qualified_name_for(p,n)))?i:l.$raise()}finally{e.pop_exception()}}},b.$$arity=2),e.defs(A,"$missing_name?",w=function(e,t){var n;return(c(/undefined/["$!~"](e.$message()))&&c(/((::)?([A-Z]\w*)(::[A-Z]\w*)*)$/["$=~"](e.$message()))?(n=l["~"])===i?i:n["$[]"](1):i)["$=="](t)},w.$$arity=2),e.defs(A,"$qualified_name_for",k=function(e,t){var n=i;return(n=this.$to_constant_name(e))["$=="]("Object")?t.$to_s():n+"::"+t},k.$$arity=2),e.defs(A,"$require_or_load",O=function(t,n){var r=this,a=i;if(c(r.$loaded()["$include?"](n)))return i;r.$loaded()["$<<"](n),r.$loading()["$<<"](n);try{try{a=r.$require(n)}catch(o){if(!e.rescue(o,[e.const_get_relative(S,"Exception")]))throw o;try{r.$loaded().$delete(n),r.$raise(e.const_get_relative(S,"LoadError"),"Unable to autoload: require_or_load "+n+" failed")}finally{e.pop_exception()}}}finally{r.$loading().$pop()}return r.$history()["$<<"](n),a},O.$$arity=2),e.defs(A,"$search_for_module",q=function(t){try{var r,a=this;return s(a.$load_paths(),"each",[],((r=function(a){r.$$s;var o=i;if(null==a&&(a=i),o=n(n(a,"/"),t),!c(e.modules.hasOwnProperty(o)))return i;e.ret(o)}).$$s=a,r.$$arity=1,r)),c(e.modules.hasOwnProperty(t))?t:i}catch(o){if(o===e.returner)return o.$v;throw o}},q.$$arity=1),e.defs(A,"$to_constant_name",E=function(t){var n,r=this,a=i;return a=t,e.const_get_relative(S,"String")["$==="](a)?t.$sub(/^::/,""):e.const_get_relative(S,"Symbol")["$==="](a)?t.$to_s():e.const_get_relative(S,"Module")["$==="](a)?c(n=t.$name())?n:r.$raise(e.const_get_relative(S,"ArgumentError"),"Anonymous modules have no name to be referenced by"):r.$raise(e.const_get_relative(S,"TypeError"),"Not a valid constant descriptor: "+t.$inspect())},E.$$arity=1),e.defs(A,"$underscore",x=function(e){return e.$gsub(/::/,"/").$gsub(/([A-Z]+)([A-Z][a-z])/,"\\1_\\2").$gsub(/([a-z\d])([A-Z])/,"\\1_\\2").$tr("-","_").$downcase()},x.$$arity=1)}(_[0],0,_)}(a[0],a)},Opal.modules["hyperstack/autoloader_starter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.send),i=e.klass,o=e.truthy,$=r;return e.add_stubs(["$load_paths=","$-","$_autoloader_original_const_missing","$const_missing","$raise"]),$=[["components","models","operations","stores"]],a(e.const_get_qualified(e.const_get_relative(n,"Hyperstack"),"Autoloader"),"load_paths=",e.to_a($)),$[t($.length,1)],function(t,$super,n){function a(){}var $=a=i(t,null,"Object",a),s=($.$$proto,[$].concat(n));return function(t,n){t.$$proto;var a,i=[t].concat(n);return e.alias(t,"_autoloader_original_const_missing","const_missing"),e.defn(t,"$const_missing",a=function(t){var n,a=this,$=r;try{return a.$_autoloader_original_const_missing(t)}catch(s){if(!e.rescue(s,[e.const_get_relative(i,"StandardError")]))throw s;$=s;try{return o(n=e.const_get_qualified(e.const_get_relative(i,"Hyperstack"),"Autoloader").$const_missing(t,a))?n:a.$raise($)}finally{e.pop_exception()}}},a.$$arity=1),r&&"const_missing"}(e.get_singleton_class($),s)}(n[0],0,n)},Opal.modules["hyperstack/internal/component"]=function(e){var t=e.top,n=[],r=(e.nil,e.breaker,e.slice,e.module),a=e.truthy;return e.add_stubs(["$require","$!=","$attr_accessor"]),t.$require("hyperstack-config"),function(t,n){var i=r(t,"Hyperstack"),o=(i.$$proto,[i].concat(n));a(e.const_get_relative(o,"RUBY_ENGINE")["$!="]("opal")),function(t,n){var a=r(t,"Internal"),i=(a.$$proto,[a].concat(n));!function(t,n){var a=r(t,"Component"),i=(a.$$proto,[a].concat(n));!function(e,t){e.$$proto,[e].concat(t);e.$attr_accessor("after_error_args")}(e.get_singleton_class(a),i)}(i[0],i)}(o[0],o)}(n[0],n)},Opal.modules["hyperstack/internal/callbacks"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.truthy,o=e.send,$=e.hash2;return e.add_stubs(["$!=","$extend","$each","$flatten","$callbacks_for","$class","$is_a?","$instance_exec","$to_proc","$send","$define_singleton_method","$set_var","$<<","$push","$when_file_updates","$delete_if","$equal?","$call","$+","$respond_to?","$superclass","$any?"]),function(n,s){var c=a(n,"Hyperstack"),l=(c.$$proto,[c].concat(s));!function(n,s){var c=a(n,"Internal"),l=(c.$$proto,[c].concat(s));!function(n,s){var c,l,u=a(n,"Callbacks"),_=(u.$$proto,[u].concat(s));i(e.const_get_relative(_,"RUBY_ENGINE")["$!="]("opal")),e.defs(u,"$included",c=function(t){return t.$extend(e.const_get_relative(_,"ClassMethods"))},c.$$arity=1),e.defn(u,"$run_callback",l=function(t){var n,a,$=this,s=l.$$p,c=s||r,u=arguments.length,f=u-1;f<0&&(f=0),a=new Array(f);for(var p=1;p<u;p++)a[p-1]=arguments[p];return s&&(l.$$p=null),o($.$class().$callbacks_for(t).$flatten(),"each",[],((n=function(t){var $=n.$$s||this,s=r;return null==t&&(t=r),s=i(t["$is_a?"](e.const_get_relative(_,"Proc")))?o($,"instance_exec",e.to_a(a),t.$to_proc()):o($,"send",[t].concat(e.to_a(a))),c!==r?a=e.yield1(c,s):r}).$$s=$,n.$$arity=1,n)),a},l.$$arity=-2),function(n,s){var c,l,u,_=a(n,"ClassMethods"),f=(_.$$proto,[_].concat(s));e.defn(_,"$define_callback",c=function(t){var n,a,s=this,l=c.$$p,u=l||r,_=r;return l&&(c.$$p=null),o(s,"define_singleton_method",[_="_"+t+"_callbacks"],((n=function(){var t,r=n.$$s||this;return o(e.const_get_relative(f,"Context"),"set_var",[r,"@"+_,$(["force"],{force:!0})],((t=function(){t.$$s;return[]}).$$s=r,t.$$arity=0,t))}).$$s=s,n.$$arity=0,n)),o(s,"define_singleton_method",[t],((a=function(){var t,n,$,s=a.$$s||this;(t=a.$$p||r)&&(a.$$p=null);var c=arguments.length,l=c-0;l<0&&(l=0),n=new Array(l);for(var p=0;p<c;p++)n[p-0]=arguments[p];return t!==r&&n["$<<"](t),s.$send(_).$push(n),o(e.const_get_relative(f,"Hotloader"),"when_file_updates",[],(($=function(){var e,t=$.$$s||this;return o(t.$send(_),"delete_if",[],((e=function(t){e.$$s;return null==t&&(t=r),t["$equal?"](n)}).$$s=t,e.$$arity=1,e))}).$$s=s,$.$$arity=0,$)),i(u)?o(u,"call",e.to_a(n),t.$to_proc()):r}).$$s=s,a.$$arity=-1,a))},c.$$arity=1),e.defn(_,"$callbacks_for",l=function(e){var n=this,a=r;return a="_"+e+"_callbacks",t(i(n.$superclass()["$respond_to?"]("callbacks_for"))?n.$superclass().$callbacks_for(e):[],n.$send(a))},l.$$arity=1),e.defn(_,"$callbacks?",u=function(e){return this.$callbacks_for(e)["$any?"]()},u.$$arity=1)}(_[0],_)}(l[0],l)}(l[0],l)}(n[0],n)},Opal.modules["hyperstack/internal/auto_unmount"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.send,o=e.truthy;return e.add_stubs(["$include","$class_eval","$define_callback","$run_callback","$each","$[]","$objects_to_unmount","$to_proc","$delete","$instance_variables","$instance_variable_get","$respond_to?","$unmount","$==","$unmounted?","$tap","$define_singleton_method","$abort","$<<","$new","$[]=","$-"]),function(n,$){var s=a(n,"Hyperstack"),c=(s.$$proto,[s].concat($));!function(n,$){var s=a(n,"Internal"),c=(s.$$proto,[s].concat($));!function(n,$){var s,c,l,u,_,f=a(n,"AutoUnmount"),p=(f.$$proto,[f].concat($));e.defs(f,"$included",s=function(t){var n,r=this;return t.$include(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(p,"Hyperstack"),"Internal"),"Callbacks")),i(t,"class_eval",[],((n=function(){return(n.$$s||this).$define_callback("before_unmount")}).$$s=r,n.$$arity=0,n))},s.$$arity=1),e.defn(f,"$unmounted?",c=function(){var e=this;return null==e.__hyperstack_internal_auto_unmount_unmounted&&(e.__hyperstack_internal_auto_unmount_unmounted=r),e.__hyperstack_internal_auto_unmount_unmounted},c.$$arity=0),e.defn(f,"$unmount",l=function(){var t,n=this;return n.$run_callback("before_unmount"),i(e.const_get_relative(p,"AutoUnmount").$objects_to_unmount()["$[]"](n),"each",[],"unmount".$to_proc()),e.const_get_relative(p,"AutoUnmount").$objects_to_unmount().$delete(n),i(n.$instance_variables(),"each",[],((t=function(n){var a=t.$$s||this,i=r;null==n&&(n=r),i=a.$instance_variable_get(n);try{return o(i["$respond_to?"]("unmount"))?i.$unmount():r}catch($){if(!e.rescue($,[e.const_get_relative(p,"RUBY_ENGINE")["$=="]("opal")?e.const_get_qualified(e.const_get_relative(p,"JS"),"Error"):r]))throw $;try{return r}finally{e.pop_exception()}}}).$$s=n,t.$$arity=1,t)),n.__hyperstack_internal_auto_unmount_unmounted=!0},l.$$arity=0),e.defn(f,"$every",u=function(){var t,n,a=this,$=u.$$p,s=r,c=r,l=r,_=arguments.length,f=_-0;f<0&&(f=0),n=new Array(f);for(var d=0;d<_;d++)n[d-0]=arguments[d];for($&&(u.$$p=null),c=0,l=arguments.length,s=new Array(l);c<l;c++)s[c]=arguments[c];return o(a["$unmounted?"]())?r:i(i(a,e.find_super_dispatcher(a,"every",u,!1),s,$),"tap",[],((t=function(n){var a,o=t.$$s||this;return null==n&&(n=r),o,i(n,"define_singleton_method",["unmount"],((a=function(){return(a.$$s||this).$abort()}).$$s=o,a.$$arity=0,a)),e.const_get_relative(p,"AutoUnmount").$objects_to_unmount()["$[]"](o)["$<<"](n)}).$$s=a,t.$$arity=1,t))},u.$$arity=-1),e.defn(f,"$after",_=function(){var t,n,a=this,$=_.$$p,s=r,c=r,l=r,u=arguments.length,f=u-0;f<0&&(f=0),n=new Array(f);for(var d=0;d<u;d++)n[d-0]=arguments[d];for($&&(_.$$p=null),c=0,l=arguments.length,s=new Array(l);c<l;c++)s[c]=arguments[c];return o(a["$unmounted?"]())?r:i(i(a,e.find_super_dispatcher(a,"after",_,!1),s,$),"tap",[],((t=function(n){var a,o=t.$$s||this;return null==n&&(n=r),o,i(n,"define_singleton_method",["unmount"],((a=function(){return(a.$$s||this).$abort()}).$$s=o,a.$$arity=0,a)),e.const_get_relative(p,"AutoUnmount").$objects_to_unmount()["$[]"](o)["$<<"](n)}).$$s=a,t.$$arity=1,t))},_.$$arity=-1),function(n,a){n.$$proto;var $,s=[n].concat(a);e.defn(n,"$objects_to_unmount",$=function(){var n,a,$=this;return null==$.objects_to_unmount&&($.objects_to_unmount=r),$.objects_to_unmount=o(n=$.objects_to_unmount)?n:i(e.const_get_relative(s,"Hash"),"new",[],((a=function(n,o){a.$$s;var $=r;return null==n&&(n=r),null==o&&(o=r),$=[o,e.const_get_relative(s,"Set").$new()],i(n,"[]=",e.to_a($)),$[t($.length,1)]}).$$s=$,a.$$arity=2,a))},$.$$arity=0)}(e.get_singleton_class(f),p)}(c[0],c)}(c[0],c)}(n[0],n)},Opal.modules["hyperstack/state/observer"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.send,i=e.hash2;return e.add_stubs(["$observing","$to_proc","$update_objects_to_observe","$remove"]),function(t,o){var $=r(t,"Hyperstack"),s=($.$$proto,[$].concat(o));!function(t,o){var $=r(t,"State"),s=($.$$proto,[$].concat(o));!function(t,o){var $,s,c,l=r(t,"Observer"),u=(l.$$proto,[l].concat(o));e.defn(l,"$observing",$=function(t){var r,o,s,c=this,l=$.$$p,_=l||n;if(null==t||!t.$$is_hash){if(null!=t)throw e.ArgumentError.$new("expected kwargs");t=i([],{})}return null==(r=t.$$smap.immediate_update)&&(r=!1),null==(o=t.$$smap.rendering)&&(o=!1),null==(s=t.$$smap.update_objects)&&(s=!1),l&&($.$$p=null),a(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Internal"),"State"),"Mapper"),"observing",[c,r,o,s],_.$to_proc())},$.$$arity=-1),e.defn(l,"$update_objects_to_observe",s=function(){var t=this;return e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Internal"),"State"),"Mapper").$update_objects_to_observe(t)},s.$$arity=0),e.defn(l,"$remove",c=function(){var t=this;return e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Internal"),"State"),"Mapper").$remove(t)},c.$$arity=0)}(s[0],s)}(s[0],s)}(t[0],t)},Opal.modules["hyperstack/internal/component/validator"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.send,s=e.hash2,c=e.truthy;return e.add_stubs(["$attr_accessor","$attr_reader","$private","$tap","$new","$each","$instance_variable_set","$dup","$instance_variable_get","$build","$to_proc","$instance_eval","$[]=","$-","$define_rule","$coerce_native_hash_values","$rules","$define_all_others","$props_wrapper","$reject","$[]","$errors=","$allow_undefined_props?","$validate_undefined","$defined_props","$validate_required","$validate_types","$validate_allowed","$errors","$inject","$select","$include?","$keys","$!","$define_param","$is_a?","$type_check","$>","$length","$validate_value_array","$nil?","$respond_to?","$_react_param_conversion","$<<","$each_with_index","$Native"]),function(r,l){var u=i(r,"Hyperstack"),_=(u.$$proto,[u].concat(l));!function(r,l){var u=i(r,"Internal"),_=(u.$$proto,[u].concat(l));!function(r,l){var u=i(r,"Component"),_=(u.$$proto,[u].concat(l));!function(r,$super,i){function l(){}var u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C=l=o(r,null,"Validator",l),I=C.$$proto,D=[C].concat(i);I.allow_undefined_props=I.rules=I.errors=a,C.$attr_accessor("errors"),C.$attr_reader("props_wrapper"),C.$private("errors","props_wrapper"),e.defn(C,"$copy",u=function(t){var n,r=this;return $(e.const_get_relative(D,"Validator").$new(t),"tap",[],((n=function(e){var t,r=n.$$s||this;return null==e&&(e=a),$(["@allow_undefined_props","@rules","@errors"],"each",[],((t=function(n){var r=t.$$s||this;return null==n&&(n=a),e.$instance_variable_set(n,r.$instance_variable_get(n).$dup())}).$$s=r,t.$$arity=1,t))}).$$s=r,n.$$arity=1,n))},u.$$arity=1),e.defn(C,"$initialize",_=function(t){var n=this;return null==t&&(t=e.const_get_relative(D,"Class").$new(e.const_get_relative(D,"PropsWrapper"))),n.props_wrapper=t},_.$$arity=-1),e.defs(C,"$build",f=function(){var e=this,t=f.$$p,n=t||a;return t&&(f.$$p=null),$(e.$new(),"build",[],n.$to_proc())},f.$$arity=0),e.defn(C,"$build",p=function(){var e=this,t=p.$$p,n=t||a;return t&&(p.$$p=null),$(e,"instance_eval",[],n.$to_proc()),e},p.$$arity=0),e.defn(C,"$requires",d=function(n,r){var i=this,o=a;return null==r&&(r=s([],{})),o=["required",!0],$(r,"[]=",e.to_a(o)),o[t(o.length,1)],i.$define_rule(n,r)},d.$$arity=-2),e.defn(C,"$optional",v=function(n,r){var i=this,o=a;return null==r&&(r=s([],{})),o=["required",!1],$(r,"[]=",e.to_a(o)),o[t(o.length,1)],i.$define_rule(n,r)},v.$$arity=-2),e.defn(C,"$event",h=function(n){var r=this,i=a;return i=[n,r.$coerce_native_hash_values(s(["default","type","allow_nil"],{"default":a,type:e.const_get_relative(D,"Proc"),allow_nil:!0}))],$(r.$rules(),"[]=",e.to_a(i)),i[t(i.length,1)]},h.$$arity=1),e.defn(C,"$all_other_params",y=function(e){var t,n=this;return n.allow_undefined_props=!0,$(n.$props_wrapper(),"define_all_others",[e],((t=function(e){var n,r=t.$$s||this;return null==e&&(e=a),$(e,"reject",[],((n=function(e,t){var r=n.$$s||this;return null==e&&(e=a),null==t&&(t=a),r.$rules()["$[]"](e)}).$$s=r,n.$$arity=2,n))}).$$s=n,t.$$arity=1,t))},y.$$arity=1),e.defn(C,"$validate",m=function(n){var r,i=this,o=a;return o=[[]],$(i,"errors=",e.to_a(o)),o[t(o.length,1)],c(i["$allow_undefined_props?"]())||i.$validate_undefined(n),n=i.$coerce_native_hash_values(i.$defined_props(n)),i.$validate_required(n),$(n,"each",[],((r=function(e,t){var n=r.$$s||this;return null==e&&(e=a),null==t&&(t=a),n.$validate_types(e,t),n.$validate_allowed(e,t)}).$$s=i,r.$$arity=2,r)),i.$errors()},m.$$arity=1),e.defn(C,"$default_props",g=function(){var n,r,i=this;return $($(i.$rules(),"select",[],((n=function(e,t){n.$$s;return null==e&&(e=a),null==t&&(t=a),t.$keys()["$include?"]("default")}).$$s=i,n.$$arity=2,n)),"inject",[s([],{})],((r=function(n,i){r.$$s;var o,s,c,l=a;return null==i&&(i=a),i=e.to_ary(i),null==(s=(o=e.slice.call(i,0,i.length)).splice(0,1)[0])&&(s=a),null==(c=o.splice(0,1)[0])&&(c=a),null==n&&(n=a),l=[s,c["$[]"]("default")],$(n,"[]=",e.to_a(l)),l[t(l.length,1)],n}).$$s=i,r.$$arity=2,r.$$has_top_level_mlhs_arg=!0,r))},g.$$arity=0),C.$private(),e.defn(C,"$defined_props",b=function(e){var t,n=this;return $(e,"select",[],((t=function(e){var n=t.$$s||this;return null==e&&(e=a),n.$rules().$keys()["$include?"](e)}).$$s=n,t.$$arity=1,t))},b.$$arity=1),e.defn(C,"$allow_undefined_props?",w=function(){return this.allow_undefined_props["$!"]()["$!"]()},w.$$arity=0),e.defn(C,"$rules",k=function(){var e,t=this;return t.rules=c(e=t.rules)?e:s(["children"],{children:s(["required"],{required:!1})})},k.$$arity=0),e.defn(C,"$define_rule",O=function(n,r){var i=this,o=a;return null==r&&(r=s([],{})),o=[n,i.$coerce_native_hash_values(r)],$(i.$rules(),"[]=",e.to_a(o)),o[t(o.length,1)],i.$props_wrapper().$define_param(n,r["$[]"]("type"),r["$[]"]("alias"))},O.$$arity=-2),e.defn(C,"$errors",q=function(){var e,t=this;return t.errors=c(e=t.errors)?e:[]},q.$$arity=0),e.defn(C,"$validate_types",E=function(t,r){var i=this,o=a,$=a;return c(o=i.$rules()["$[]"](t)["$[]"]("type"))?c(o["$is_a?"](e.const_get_relative(D,"Array"))["$!"]())?($=i.$rules()["$[]"](t)["$[]"]("allow_nil")["$!"]()["$!"](),i.$type_check("`"+t+"`",r,o,$)):c(n(o.$length(),0))?i.$validate_value_array(t,r):($=i.$rules()["$[]"](t)["$[]"]("allow_nil")["$!"]()["$!"](),i.$type_check("`"+t+"`",r,e.const_get_relative(D,"Array"),$)):a},E.$$arity=2),e.defn(C,"$type_check",x=function(e,t,n,r){var i,o=this;return c(c(i=r)?t["$nil?"]():i)?a:c(t["$is_a?"](n))?a:c(c(i=n["$respond_to?"]("_react_param_conversion"))?n.$_react_param_conversion(t,"validate_only"):i)?a:o.$errors()["$<<"]("Provided prop "+e+" could not be converted to "+n)},x.$$arity=4),e.defn(C,"$validate_allowed",A=function(e,t){var n=this,r=a;return c(r=n.$rules()["$[]"](e)["$[]"]("values"))?c(r["$include?"](t))?a:n.$errors()["$<<"]("Value `"+t+"` for prop `"+e+"` is not an allowed value"):a},A.$$arity=2),e.defn(C,"$validate_required",S=function(e){var n,r=this;return $(t(r.$rules().$keys(),e.$keys()),"each",[],((n=function(e){var t=n.$$s||this;return null==e&&(e=a),c(t.$rules()["$[]"](e)["$[]"]("required"))?t.$errors()["$<<"]("Required prop `"+e+"` was not specified"):a}).$$s=r,n.$$arity=1,n))},S.$$arity=1),e.defn(C,"$validate_undefined",M=function(e){var n,r=this;return $(t(e.$keys(),r.$rules().$keys()),"each",[],((n=function(e){var t=n.$$s||this;return null==e&&(e=a),t.$errors()["$<<"]("Provided prop `"+e+"` not specified in spec")}).$$s=r,n.$$arity=1,n))},M.$$arity=1),e.defn(C,"$validate_value_array",N=function(t,n){var r,i=this,o=a,s=a;try{return o=i.$rules()["$[]"](t)["$[]"]("type"),s=i.$rules()["$[]"](t)["$[]"]("allow_nil")["$!"]()["$!"](),$(n,"each_with_index",[],((r=function(e,n){var i=r.$$s||this;return null==e&&(e=a),null==n&&(n=a),i.$type_check("`"+t+"`["+n+"]",i.$Native(e),o["$[]"](0),s)}).$$s=i,r.$$arity=2,r))}catch(c){if(!e.rescue(c,[e.const_get_relative(D,"NoMethodError")]))throw c;try{return i.$errors()["$<<"]("Provided prop `"+t+"` was not an Array")}finally{e.pop_exception()}}},N.$$arity=2),e.defn(C,"$coerce_native_hash_values",T=function(n){var r,i=this;return $(n,"each",[],((r=function(i,o){var s=r.$$s||this,c=a;return null==i&&(i=a),null==o&&(o=a),c=[i,s.$Native(o)],$(n,"[]=",e.to_a(c)),c[t(c.length,1)]}).$$s=i,r.$$arity=2,r))},T.$$arity=1)}(_[0],0,_)}(_[0],_)}(_[0],_)}(r[0],r)},Opal.modules["hyperstack/ext/component/string"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass);return function(t,$super,a){function i(){}var o,$=i=r(t,null,"String",i);$.$$proto,[$].concat(a);return e.defn($,"$event_camelize",o=function(){return this.replace(/(^|_)([^_]+)/g,function(e,t,n){return!0?n.substr(0,1).toUpperCase()+n.substr(1):n})},o.$$arity=0),n&&"event_camelize"}(t[0],0,t)},Opal.modules["hyperstack/component/element"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.hash2,s=e.send,c=e.hash;return e.add_stubs(["$require","$include","$alias_native","$attr_reader","$attr_accessor","$_update_ref","$[]","$properties","$raise","$type","$ref","$dom_node","$each","$!=","$strip","$merge_event_prop!","$to_proc","$shallow_to_n","$empty?","$render","$convert_props","$new","$block","$delete","$private","$=~","$merge_component_event_prop!","$gsub","$include?","$event_camelize","$merge_built_in_event_prop!","$==","$key_code","$instance_variable_get","$merge!","$Array","$ignore_bulk_updates"]),t.$require("hyperstack/ext/component/string"),function(t,n){var l=a(t,"Hyperstack"),u=(l.$$proto,[l].concat(n));!function(t,n){var l=a(t,"Component"),u=(l.$$proto,[l].concat(n));!function(t,$super,n){function a(){}var l,u,_,f,p,d,v,h,y,m,g=a=i(t,null,"Element",a),b=g.$$proto,w=[g].concat(n);b._child_element=b.ref=b.native=b.properties=b.type=r,g.$include(e.const_get_relative(w,"Native")),g.$alias_native("element_type","type"),g.$alias_native("props","props"),g.$attr_reader("type"),g.$attr_reader("properties"),g.$attr_reader("block"),g.$attr_accessor("waiting_on_resources"),e.defn(g,"$initialize",l=function(e,t,n,a){var i,s=this;return null==t&&(t=r),null==n&&(n=$([],{})),null==a&&(a=r),s.type=t,s.properties=o(i=o(void 0===n)?r:n)?i:$([],{}),s.block=a,s.native=e},l.$$arity=-2),e.defn(g,"$_update_ref",u=function(e){var t=this;return t.ref=e,o(t._child_element)?t._child_element.$_update_ref(e):r},u.$$arity=1),e.defn(g,"$ref",_=function(){var e=this;return o(e.ref)?e.ref:(o(e.$properties()["$[]"]("ref"))&&e.$raise("The instance of "+e.$type()+" has not been mounted yet"),e.$raise("Attempt to get a ref on "+e.$type()+" which is a static component."))},_.$$arity=0),e.defn(g,"$dom_node",f=function(){var e=this;return o("function"==typeof e.$ref().$dom_node)?e.$ref().$dom_node():e.$ref()},f.$$arity=0),e.defn(g,"$on",p=function(){var e,t,n=this,a=p.$$p,i=a||r,$=r,c=arguments.length,l=c-0;l<0&&(l=0),t=new Array(l);for(var u=0;u<c;u++)t[u-0]=arguments[u];return a&&(p.$$p=null),$=!1,s(t,"each",[],((e=function(t){var n,a=e.$$s||this;return null==t&&(t=r),o(o(n=t)?t.$strip()["$!="](""):n)?(s(a,"merge_event_prop!",[t],i.$to_proc()),$=!0):r}).$$s=n,e.$$arity=1,e)),o($)&&(n.native=React.cloneElement(n.native,n.properties.$shallow_to_n())),n},p.$$arity=-1),e.defn(g,"$render",d=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return o(t["$empty?"]())?e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(w,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$render(n):(t=s(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(w,"Hyperstack"),"Internal"),"Component"),"ReactWrapper"),"convert_props",[n.type,n.properties].concat(e.to_a(t))),n._child_element=e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(w,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$render(e.const_get_relative(w,"Element").$new(React.cloneElement(n.native,t.$shallow_to_n()),n.$type(),t,n.$block())))},d.$$arity=-1),e.defn(g,"$delete",v=function(){var t=this;return e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(w,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$delete(t)},v.$$arity=0),e.alias(g,"as_node","delete"),g.$private(),e.defn(g,"$merge_event_prop!",h=function(t){var n,a=this,i=h.$$p,$=i||r,c=r;return i&&(h.$$p=null),o(t["$=~"](/^<(.+)>$/))?s(a,"merge_component_event_prop!",[t.$gsub(/^<(.+)>$/,"\\1")],$.$to_proc()):o(e.const_get_qualified(e.const_get_relative(w,"Event"),"BUILT_IN_EVENTS")["$include?"](c="on"+t.$event_camelize()))?s(a,"merge_built_in_event_prop!",[c],$.$to_proc()):t["$=="]("enter")?s(a,"merge_built_in_event_prop!",["onKeyDown"],((n=function(t){n.$$s;return null==t&&(t=r),t.$key_code()["$=="](13)?e.yield1($,t):r}).$$s=a,n.$$arity=1,n)):o(a.type.$instance_variable_get("@native_import"))?s(a,"merge_component_event_prop!",[c],$.$to_proc()):s(a,"merge_component_event_prop!",["on_"+t],$.$to_proc())},h.$$arity=1),e.defn(g,"$merge_built_in_event_prop!",y=function(t){var n=this,a=y.$$p,i=a||r;return a&&(y.$$p=null),n.properties["$merge!"](c(t,function(){var t,r=arguments[0];return 0!=arguments.length&&r.nativeEvent?arguments.length>1?(t=Array.prototype.slice.call(arguments).slice(1,arguments.length),s(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(w,"Internal"),"State"),"Mapper"),"ignore_bulk_updates",[e.const_get_relative(w,"Event").$new(r)].concat(e.to_a(t)),i.$to_proc())):s(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(w,"Internal"),"State"),"Mapper"),"ignore_bulk_updates",[e.const_get_relative(w,"Event").$new(r)],i.$to_proc()):e.yieldX(i,e.to_a(n.$Array(arguments)))}))},y.$$arity=1),e.defn(g,"$merge_component_event_prop!",m=function(t){var n=this,a=m.$$p,i=a||r;return a&&(m.$$p=null),n.properties["$merge!"](c(t,function(){return e.yieldX(i,e.to_a(n.$Array(arguments)))}))},m.$$arity=1)}(u[0],0,u)}(u[0],u)}(n[0],n)},Opal.modules["hyperstack/component/native_library"]=function(Opal){function $rb_plus(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var self=Opal.top,$nesting=[],nil=Opal.nil,$breaker=Opal.breaker,$slice=Opal.slice,$module=Opal.module,$klass=Opal.klass,$send=Opal.send,$truthy=Opal.truthy,$range=Opal.range;return Opal.add_stubs(["$each","$lookup_native_name","$create_component_wrapper","$create_library_wrapper","$raise","$name","$scope_native_name","$+","$downcase","$[]","$import_const_from_native","$const_defined?","$const_get","$render","$to_proc","$private","$native_react_component?","$const_set","$imports","$new","$class_eval","$include"]),function($base,$parent_nesting){var $Hyperstack,self=$Hyperstack=$module($base,"Hyperstack"),def=self.$$proto,$nesting=[self].concat($parent_nesting);!function($base,$parent_nesting){var $Component,self=$Component=$module($base,"Component"),def=self.$$proto,$nesting=[self].concat($parent_nesting);!function($base,$super,$parent_nesting){function $NativeLibrary(){}
var self=$NativeLibrary=$klass($base,$super,"NativeLibrary",$NativeLibrary),def=self.$$proto,$nesting=[self].concat($parent_nesting);(function(self,$parent_nesting){var def=self.$$proto,$nesting=[self].concat($parent_nesting),TMP_imports_1,TMP_rename_3,TMP_import_const_from_native_4,TMP_const_missing_5,TMP_method_missing_6,TMP_lookup_native_name_7,TMP_scope_native_name_8,TMP_create_component_wrapper_10,TMP_create_library_wrapper_11;Opal.defn(self,"$imports",TMP_imports_1=function(e){var t=this;return t.__hyperstack_component_native_prefix=e+".",t},TMP_imports_1.$$arity=1),Opal.defn(self,"$rename",TMP_rename_3=function(e){var t,n=this;return $send(e,"each",[],((t=function(e,n){var r,a=t.$$s||this,i=nil;return null==e&&(e=nil),null==n&&(n=nil),i=a.$lookup_native_name(e),$truthy(a.$lookup_native_name(e))?$truthy(r=a.$create_component_wrapper(a,i,n))?r:a.$create_library_wrapper(a,i,n):a.$raise("class "+a.$name()+" < Hyperstack::Component::NativeLibrary could not import "+e+". Native value "+a.$scope_native_name(e)+" is undefined.")}).$$s=n,t.$$arity=2,t))},TMP_rename_3.$$arity=1),Opal.defn(self,"$import_const_from_native",TMP_import_const_from_native_4=function(e,t,n){var r,a,i,o=this,$=nil;return $=$truthy(r=o.$lookup_native_name(t))?r:o.$lookup_native_name($rb_plus(t["$[]"](0).$downcase(),t["$[]"]($range(1,-1,!1)))),$truthy(r=$)?$truthy(a=o.$create_component_wrapper(e,$,t))?a:$truthy(i=n)?o.$create_library_wrapper(e,$,t):i:r},TMP_import_const_from_native_4.$$arity=3),Opal.defn(self,"$const_missing",TMP_const_missing_5=function(e){var t,n=this,r=TMP_const_missing_5.$$p,a=nil,i=nil,o=nil;for(r&&(TMP_const_missing_5.$$p=null),i=0,o=arguments.length,a=new Array(o);i<o;i++)a[i]=arguments[i];return $truthy(t=n.$import_const_from_native(n,e,!0))?t:$send(n,Opal.find_super_dispatcher(n,"const_missing",TMP_const_missing_5,!1),a,r)},TMP_const_missing_5.$$arity=1),Opal.defn(self,"$method_missing",TMP_method_missing_6=function(e){var t,n,r=this,a=TMP_method_missing_6.$$p,i=a||nil,o=nil,$=arguments.length,s=$-1;s<0&&(s=0),n=new Array(s);for(var c=1;c<$;c++)n[c-1]=arguments[c];return a&&(TMP_method_missing_6.$$p=null),$truthy(r["$const_defined?"](e,!1))&&(o=r.$const_get(e)),o=$truthy(t=o)?t:r.$import_const_from_native(r,e,!1),$truthy(o)||r.$raise("could not import a react component named: "+r.$scope_native_name(e)),$send(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",[o].concat(Opal.to_a(n)),i.$to_proc())},TMP_method_missing_6.$$arity=-2),self.$private(),Opal.defn(self,"$lookup_native_name",TMP_lookup_native_name_7=function $$lookup_native_name(js_name){var self=this,native_name=nil;try{return native_name=self.$scope_native_name(js_name),eval(native_name)!==undefined&&native_name}catch($err){if(!Opal.rescue($err,[Opal.const_get_relative($nesting,"Exception")]))throw $err;try{return nil}finally{Opal.pop_exception()}}},TMP_lookup_native_name_7.$$arity=1),Opal.defn(self,"$scope_native_name",TMP_scope_native_name_8=function(e){var t=this;return null==t.__hyperstack_component_native_prefix&&(t.__hyperstack_component_native_prefix=nil),""+t.__hyperstack_component_native_prefix+e},TMP_scope_native_name_8.$$arity=1),Opal.defn(self,"$create_component_wrapper",TMP_create_component_wrapper_10=function(e,t,n){var r,a=this,i=nil;return $truthy(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Internal"),"Component"),"ReactWrapper")["$native_react_component?"](t))?(i=e.$const_set(n,Opal.const_get_relative($nesting,"Class").$new(Opal.const_get_relative($nesting,"NativeLibrary")).$imports(t)),$send(i,"class_eval",[],((r=function(){var e=r.$$s||this;return e.$include(Opal.const_get_relative($nesting,"Component")),e.$imports(t)}).$$s=a,r.$$arity=0,r)),i):nil},TMP_create_component_wrapper_10.$$arity=3),Opal.defn(self,"$create_library_wrapper",TMP_create_library_wrapper_11=function(e,t,n){return e.$const_set(n,Opal.const_get_relative($nesting,"Class").$new(Opal.const_get_relative($nesting,"NativeLibrary")).$imports(t))},TMP_create_library_wrapper_11.$$arity=3)})(Opal.get_singleton_class(self),$nesting),self.$imports("NativeLibrary")}($nesting[0],null,$nesting)}($nesting[0],$nesting)}($nesting[0],$nesting)},Opal.modules["hyperstack/internal/component/react_wrapper"]=function(Opal){function $rb_minus(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function $rb_plus(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var self=Opal.top,$nesting=[],nil=Opal.nil,$breaker=Opal.breaker,$slice=Opal.slice,$module=Opal.module,$klass=Opal.klass,$hash2=Opal.hash2,$send=Opal.send,$truthy=Opal.truthy,$range=Opal.range;return Opal.add_stubs(["$require","$instance_variable_set","$[]=","$-","$raise","$stateless?","$eval_native_react_component","$add_after_error_hook_to_native","$[]","$!","$method_defined?","$respond_to?","$native_mixins","$to_n","$static_call_backs","$new","$name","$default_props","$prop_types","$callbacks?","$<<","$is_a?","$create_native_react_class","$include?","$lambda","$_update_ref","$convert_props","$shallow_to_n","$flatten","$call","$each","$split","$==","$merge","$lower_camelize","$join","$to_key","$ignore_mutations","$const_defined?","$gsub","$html_attr?","$private","$first","$concat","$map","$+","$upcase"]),self.$require("hyperstack/component/native_library"),function($base,$parent_nesting){var $Hyperstack,self=$Hyperstack=$module($base,"Hyperstack"),def=self.$$proto,$nesting=[self].concat($parent_nesting);!function($base,$parent_nesting){var $Internal,self=$Internal=$module($base,"Internal"),def=self.$$proto,$nesting=[self].concat($parent_nesting);!function($base,$parent_nesting){var $Component,self=$Component=$module($base,"Component"),def=self.$$proto,$nesting=[self].concat($parent_nesting);!function($base,$super,$parent_nesting){function $ReactWrapper(){}var self=$ReactWrapper=$klass($base,$super,"ReactWrapper",$ReactWrapper),def=self.$$proto,$nesting=[self].concat($parent_nesting),TMP_ReactWrapper_stateless$q_1,TMP_ReactWrapper_import_native_component_2,TMP_ReactWrapper_eval_native_react_component_3,TMP_ReactWrapper_native_react_component$q_4,TMP_ReactWrapper_add_after_error_hook_5,TMP_ReactWrapper_add_after_error_hook_to_native_6,TMP_ReactWrapper_create_native_react_class_7,TMP_ReactWrapper_create_element_8,TMP_ReactWrapper_clear_component_class_cache_10,TMP_ReactWrapper_convert_props_21,TMP_ReactWrapper_lower_camelize_23;Opal.class_variable_set($ReactWrapper,"@@component_classes",$hash2([],{})),Opal.defs(self,"$stateless?",TMP_ReactWrapper_stateless$q_1=function(e){return"function"==typeof e&&!(e.prototype&&e.prototype.isReactComponent)},TMP_ReactWrapper_stateless$q_1.$$arity=1),Opal.defs(self,"$import_native_component",TMP_ReactWrapper_import_native_component_2=function(e,t){var n,r=nil;return e.$instance_variable_set("@native_import",!0),r=[e,t],$send(null==(n=$ReactWrapper.$$cvars["@@component_classes"])?nil:n,"[]=",Opal.to_a(r)),r[$rb_minus(r.length,1)]},TMP_ReactWrapper_import_native_component_2.$$arity=2),Opal.defs(self,"$eval_native_react_component",TMP_ReactWrapper_eval_native_react_component_3=function $$eval_native_react_component(name){var $a,$b,self=this,component=nil,is_component_class=nil,has_render_method=nil;return component=eval(name),$truthy(component===undefined)&&self.$raise(name+" is not defined"),$truthy(component.__esModule)&&(component=component["default"]),is_component_class=$truthy($a=component.prototype!==undefined)?$truthy($b=!!component.prototype.isReactComponent)?$b:!!component.prototype.render:$a,has_render_method="function"==typeof component.render,$truthy($truthy($a=$truthy($b=is_component_class)?$b:self["$stateless?"](component))?$a:has_render_method)||self.$raise("does not appear to be a native react component"),component},TMP_ReactWrapper_eval_native_react_component_3.$$arity=1),Opal.defs(self,"$native_react_component?",TMP_ReactWrapper_native_react_component$q_4=function(e){var t=this;null==e&&(e=nil);try{return!!$truthy(e)&&(t.$eval_native_react_component(e),!0)}catch(n){if(!Opal.rescue(n,[Opal.const_get_relative($nesting,"StandardError")]))throw n;try{return!1}finally{Opal.pop_exception()}}},TMP_ReactWrapper_native_react_component$q_4.$$arity=-1),Opal.defs(self,"$add_after_error_hook",TMP_ReactWrapper_add_after_error_hook_5=function(e){var t;return this.$add_after_error_hook_to_native((null==(t=$ReactWrapper.$$cvars["@@component_classes"])?nil:t)["$[]"](e))},TMP_ReactWrapper_add_after_error_hook_5.$$arity=1),Opal.defs(self,"$add_after_error_hook_to_native",TMP_ReactWrapper_add_after_error_hook_to_native_6=function(e){if(!$truthy(e))return nil;e.prototype.componentDidCatch=function(e,t){this.__opalInstanceSyncSetState=!1,this.__opalInstance.$component_did_catch(e,Opal.Hash.$new(t))}},TMP_ReactWrapper_add_after_error_hook_to_native_6.$$arity=1),Opal.defs(self,"$create_native_react_class",TMP_ReactWrapper_create_native_react_class_7=function(e){var t,n,r=this,a=nil,i=nil,o=nil;return $truthy("undefined"==typeof createReactClass)&&r.$raise("createReactClass is undefined. Add the 'react-create-class' npm module, and import it as 'createReactClass'"),$truthy(e["$method_defined?"]("render")["$!"]())&&r.$raise("Provided class should define `render` method"),a=$truthy(e["$method_defined?"]("_render_wrapper"))?"_render_wrapper":"render",$truthy(t=(null==(n=$ReactWrapper.$$cvars["@@component_classes"])?nil:n)["$[]"](e))?t:(i=[e,(o=createReactClass({getInitialState:function(){return this.mixins=$truthy(e["$respond_to?"]("native_mixins"))?e.$native_mixins():[],this.statics=$truthy(e["$respond_to?"]("static_call_backs"))?e.$static_call_backs().$to_n():{},this.__opalInstanceInitializedState=!1,this.__opalInstanceSyncSetState=!0,this.__opalInstance=e.$new(this),this.__opalInstanceInitializedState=!0,this.__opalInstanceSyncSetState=!1,this.__name=e.$name(),{}},displayName:e.$name(),getDefaultProps:function(){return $truthy(e["$respond_to?"]("default_props"))?e.$default_props().$to_n():{}},propTypes:$truthy(e["$respond_to?"]("prop_types"))?e.$prop_types().$to_n():{},componentWillMount:function(){e["$method_defined?"]("component_will_mount")&&(this.__opalInstanceSyncSetState=!0,this.__opalInstance.$component_will_mount(),this.__opalInstanceSyncSetState=!1)},componentDidMount:function(){this.__opalInstance.__hyperstack_component_is_mounted=!0,e["$method_defined?"]("component_did_mount")&&(this.__opalInstanceSyncSetState=!1,this.__opalInstance.$component_did_mount())},componentWillReceiveProps:function(t){e["$method_defined?"]("component_will_receive_props")&&(this.__opalInstanceSyncSetState=!0,this.__opalInstance.$component_will_receive_props(Opal.Hash.$new(t)),this.__opalInstanceSyncSetState=!1)},shouldComponentUpdate:function(t,n){return!e["$method_defined?"]("should_component_update?")||(this.__opalInstanceSyncSetState=!1,this.__opalInstance["$should_component_update?"](Opal.Hash.$new(t),Opal.Hash.$new(n)))},componentWillUpdate:function(t,n){e["$method_defined?"]("component_will_update")&&(this.__opalInstanceSyncSetState=!1,this.__opalInstance.$component_will_update(Opal.Hash.$new(t),Opal.Hash.$new(n)))},componentDidUpdate:function(t,n){e["$method_defined?"]("component_did_update")&&(this.__opalInstanceSyncSetState=!1,this.__opalInstance.$component_did_update(Opal.Hash.$new(t),Opal.Hash.$new(n)))},componentWillUnmount:function(){e["$method_defined?"]("component_will_unmount")&&(this.__opalInstanceSyncSetState=!1,this.__opalInstance.$component_will_unmount()),this.__opalInstance.__hyperstack_component_is_mounted=!1},render:function(){return this.__opalInstanceSyncSetState=!1,this.__opalInstance.$send(a).$to_n()}}),$truthy($truthy(n=e["$respond_to?"]("callbacks?"))?e["$callbacks?"]("after_error"):n)&&r.$add_after_error_hook_to_native(o),o)],$send(null==(n=$ReactWrapper.$$cvars["@@component_classes"])?nil:n,"[]=",Opal.to_a(i)),i[$rb_minus(i.length,1)])},TMP_ReactWrapper_create_native_react_class_7.$$arity=1),Opal.defs(self,"$create_element",TMP_ReactWrapper_create_element_8=function(e){var t,n,r,a=this,i=TMP_ReactWrapper_create_element_8.$$p,o=i||nil,$=nil,s=nil,c=nil,l=nil,u=nil,_=nil,f=arguments.length,p=f-1;p<0&&(p=0),r=new Array(p);for(var d=1;d<f;d++)r[d-1]=arguments[d];if(i&&(TMP_ReactWrapper_create_element_8.$$p=null),$=[],s=(null==(t=$ReactWrapper.$$cvars["@@component_classes"])?nil:t)["$[]"](e),$truthy(s))$["$<<"](s);else if($truthy(e["$is_a?"](Opal.const_get_relative($nesting,"Class"))))$["$<<"](a.$create_native_react_class(e));else if($truthy($truthy(t=o!==nil)?t:Opal.const_get_qualified(Opal.const_get_relative($nesting,"Tags"),"HTML_TAGS")["$include?"](e)))$["$<<"](e);else{if($truthy(e["$is_a?"](Opal.const_get_relative($nesting,"String"))))return Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Component"),"Element").$new(e);a.$raise(e+" not implemented")}if(c=nil,$truthy(a["$stateless?"](s))||(l=$send(a,"lambda",[],((n=function(e){n.$$s;return null==e&&(e=nil),c.$_update_ref(e)}).$$s=a,n.$$arity=1,n))),u=$send(a,"convert_props",[e,$hash2(["ref"],{ref:l})].concat(Opal.to_a(r))),$["$<<"](u.$shallow_to_n()),$truthy(o))for(var v=0,h=(_=[o.$call()].$flatten()).length;v<h;v++)$.push(_[v].$to_n());return c=Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Component"),"Element").$new(React.createElement.apply(null,$),e,u,o)},TMP_ReactWrapper_create_element_8.$$arity=-2),Opal.defs(self,"$clear_component_class_cache",TMP_ReactWrapper_clear_component_class_cache_10=function(){return Opal.class_variable_set($ReactWrapper,"@@component_classes",$hash2([],{}))},TMP_ReactWrapper_clear_component_class_cache_10.$$arity=0),Opal.defs(self,"$convert_props",TMP_ReactWrapper_convert_props_21=function(e){var t,n,r,a=this,i=nil,o=nil,$=arguments.length,s=$-1;s<0&&(s=0),r=new Array(s);for(var c=1;c<$;c++)r[c-1]=arguments[c];return i=$hash2([],{}),$send(r,"each",[],((t=function(e){var n,r=t.$$s||this,a=nil;return null==e&&(e=nil),$truthy(e["$is_a?"](Opal.const_get_relative($nesting,"String")))?(a=[e,!0],$send(i,"[]=",Opal.to_a(a)),a[$rb_minus(a.length,1)]):$truthy(e["$is_a?"](Opal.const_get_relative($nesting,"Hash")))?$send(e,"each",[],((n=function(e,t){var r,o=n.$$s||this;return null==e&&(e=nil),null==t&&(t=nil),$truthy(["class","className","class_name"]["$include?"](e))?$truthy(t)?($truthy(t["$is_a?"](Opal.const_get_relative($nesting,"String")))?t=t.$split(" "):$truthy(t["$is_a?"](Opal.const_get_relative($nesting,"Array"))["$!"]())&&o.$raise("The class param must be a string or array of strings"),a=["className",[].concat(Opal.to_a(i["$[]"]("className"))).concat(Opal.to_a(t))],$send(i,"[]=",Opal.to_a(a)),a[$rb_minus(a.length,1)]):nil:e["$=="]("style")?$truthy(t)?($truthy(t["$is_a?"](Opal.const_get_relative($nesting,"Hash"))["$!"]())&&o.$raise("The style param must be a Hash"),a=["style",($truthy(r=i["$[]"]("style"))?r:$hash2([],{})).$merge(t)],$send(i,"[]=",Opal.to_a(a)),a[$rb_minus(a.length,1)]):nil:$truthy($truthy(r=Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Component"),"ReactAPI"),"HASH_ATTRIBUTES")["$include?"](e))?t["$is_a?"](Opal.const_get_relative($nesting,"Hash")):r)?(a=[e,($truthy(r=i["$[]"](e))?r:$hash2([],{})).$merge(t)],$send(i,"[]=",Opal.to_a(a)),a[$rb_minus(a.length,1)]):(a=[e,t],$send(i,"[]=",Opal.to_a(a)),a[$rb_minus(a.length,1)])}).$$s=r,n.$$arity=2,n)):nil}).$$s=a,t.$$arity=1,t)),o=$hash2([],{}),$send(i,"each",[],((n=function(t,r){var a,$,s,c,l,u,_,f,p=n.$$s||this,d=nil,v=nil;return null==t&&(t=nil),null==r&&(r=nil),$truthy(["style","dangerously_set_inner_HTML"]["$include?"](t))?(d=[p.$lower_camelize(t),r.$to_n()],$send(o,"[]=",Opal.to_a(d)),d[$rb_minus(d.length,1)]):t["$=="]("className")?(d=[t,r.$join(" ")],$send(o,"[]=",Opal.to_a(d)),d[$rb_minus(d.length,1)]):t["$=="]("key")?(d=["key",r.$to_key()],$send(o,"[]=",Opal.to_a(d)),d[$rb_minus(d.length,1)]):t["$=="]("init")?($truthy(["select","textarea"]["$include?"](e))?t="defaultValue":e["$=="]("input")&&(t=$truthy(["radio","checkbox"]["$include?"](i["$[]"]("type")))?"defaultChecked":"defaultValue"),d=[t,r],$send(o,"[]=",Opal.to_a(d)),d[$rb_minus(d.length,1)]):t["$=="]("ref")?$truthy(r)?($truthy(r["$respond_to?"]("call"))||p.$raise("The ref and dom params must be given a Proc.\nIf you want to capture the ref in an instance variable use the `set` method.\nFor example `ref: set(:TheRef)` will capture assign the ref to `@TheRef`\n"),$truthy(r.__hyperstack_component_ref_is_already_wrapped)||(v=r,(r=function(e){null!==e&&e.__opalInstance!==undefined&&null!==e.__opalInstance?$send(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],((a=function(){a.$$s;return v.$call(e.__opalInstance)}).$$s=p,a.$$arity=0,a)):null!==e&&ReactDOM.findDOMNode!==undefined&&e.nodeType===undefined?$send(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],(($=function(){$.$$s;return v.$call(ReactDOM.findDOMNode(e))}).$$s=p,$.$$arity=0,$)):null!==e&&$send(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],((s=function(){s.$$s;return v.$call(e)}).$$s=p,s.$$arity=0,s))}).__hyperstack_component_ref_is_already_wrapped=!0),d=[t,r],$send(o,"[]=",Opal.to_a(d)),d[$rb_minus(d.length,1)]):nil:t["$=="]("jq_ref")?($truthy(r["$respond_to?"]("call"))||p.$raise("The ref and dom params must be given a Proc.\nIf you want to capture the dom node in an instance variable use the `set` method.\nFor example `dom: set(:DomNode)` will assign the dom node to `@DomNode`\n"),$truthy(Opal.const_get_relative($nesting,"Module")["$const_defined?"]("Element"))||p.$raise("You must include 'hyperstack/component/jquery' in your manifest to use the `dom` reference key.\nFor example if using rails include `config.import 'hyperstack/component/jquery', client_only: true`in your config/initializer/hyperstack.rb file"),d=["ref",function(e){null!==e&&e.__opalInstance!==undefined&&null!==e.__opalInstance?$send(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],((c=function(){c.$$s;return r.$call(Opal.const_get_qualified("::","Element")["$[]"](e.__opalInstance))}).$$s=p,c.$$arity=0,c)):null!==e&&ReactDOM.findDOMNode!==undefined&&e.nodeType===undefined?$send(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],((l=function(){l.$$s;return r.$call(Opal.const_get_qualified("::","Element")["$[]"](ReactDOM.findDOMNode(e)))}).$$s=p,l.$$arity=0,l)):null!==e&&$send(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],((u=function(){u.$$s;return r.$call(Opal.const_get_qualified("::","Element")["$[]"](e))}).$$s=p,u.$$arity=0,u))}],$send(o,"[]=",Opal.to_a(d)),d[$rb_minus(d.length,1)]):$truthy($truthy(_=Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Component"),"ReactAPI"),"HASH_ATTRIBUTES")["$include?"](t))?r["$is_a?"](Opal.const_get_relative($nesting,"Hash")):_)?$send(r,"each",[],((f=function(e,n){f.$$s;return null==e&&(e=nil),null==n&&(n=nil),d=[t+"-"+e.$gsub(/__|_/,$hash2(["__","_"],{__:"_",_:"-"})),n.$to_n()],$send(o,"[]=",Opal.to_a(d)),d[$rb_minus(d.length,1)]}).$$s=p,f.$$arity=2,f)):(d=[$truthy(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Component"),"ReactAPI")["$html_attr?"](p.$lower_camelize(t)))?p.$lower_camelize(t):t,r],$send(o,"[]=",Opal.to_a(d)),d[$rb_minus(d.length,1)])}).$$s=a,n.$$arity=2,n)),o},TMP_ReactWrapper_convert_props_21.$$arity=-2),self.$private(),Opal.defs(self,"$lower_camelize",TMP_ReactWrapper_lower_camelize_23=function(e){var t,n=this,r=nil;return[(r=e.$split("_")).$first()].$concat($send(r["$[]"]($range(1,-1,!1)),"map",[],(t=function(e){t.$$s;return null==e&&(e=nil),$rb_plus(e["$[]"](0).$upcase(),e["$[]"]($range(1,-1,!1)))},t.$$s=n,t.$$arity=1,t))).$join("")},TMP_ReactWrapper_lower_camelize_23.$$arity=1)}($nesting[0],null,$nesting)}($nesting[0],$nesting)}($nesting[0],$nesting)}($nesting[0],$nesting)},Opal.modules["hyperstack/ext/component/hash"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.send;return e.add_stubs(["$each"]),function(t,$super,i){function o(){}var $,s=o=r(t,null,"Hash",o);s.$$proto,[s].concat(i);return e.defn(s,"$shallow_to_n",$=function(){var e,t=this,r=n;return r={},a(t,"each",[],((e=function(t,a){e.$$s;return null==t&&(t=n),null==a&&(a=n),r[t]=a}).$$s=t,e.$$arity=2,e)),r},$.$$arity=0),n&&"shallow_to_n"}(t[0],0,t)},Opal.modules["hyperstack/internal/component/rendering_context"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.truthy,s=e.send;return e.add_stubs(["$attr_accessor","$waiting_on_resources","$raise_if_not_quiet?","$raise","$new","$!","$remove_nodes_from_args","$build","$waiting_on_resources=","$-","$run_child_block","$nil?","$to_proc","$dup","$tap","$create_element","$detect","$respond_to?","$is_a?","$last","$to_s","$render","$<<","$delete","$include?","$index","$[]=","$[]","$each","$acts_as_string?","$empty?","$!=","$raise_render_error","$==","$count","$improper_render","$>","$try","$class","$define_method","$unshift","$hyper_component?","$send"]),function(r,c){var l=i(r,"Hyperstack"),u=(l.$$proto,[l].concat(c));!function(r,c){var l=i(r,"Internal"),u=(l.$$proto,[l].concat(c));!function(r,c){var l=i(r,"Component"),u=(l.$$proto,[l].concat(c));!function(r,$super,i){function c(){}var l=c=o(r,null,"RenderingContext",c),u=(l.$$proto,[l].concat(i));(function(e,$super,t){function n(){}var r=n=o(e,$super,"NotQuiet",n);r.$$proto,[r].concat(t)})(u[0],e.const_get_relative(u,"Exception"),u),function(r,i){r.$$proto;var o,c,l,u,_,f,p,d,v,h,y,m,g=[r].concat(i);r.$attr_accessor("waiting_on_resources"),e.defn(r,"$raise_if_not_quiet?",o=function(){var e=this;return null==e.raise_if_not_quiet&&(e.raise_if_not_quiet=a),e.raise_if_not_quiet},o.$$arity=0),e.defn(r,"$raise_if_not_quiet=",c=function(e){return this.raise_if_not_quiet=e},c.$$arity=1),e.defn(r,"$quiet_test",l=function(t){var n,r=this;return $($(n=t.$waiting_on_resources())?r["$raise_if_not_quiet?"]():n)?r.$raise(e.const_get_relative(g,"NotQuiet").$new(t+" is waiting on resources")):a},l.$$arity=1),e.defn(r,"$render",u=function(n){var r,i,o,c=this,l=u.$$p,_=l||a,f=a,p=a,d=a;null==c.not_outer_most&&(c.not_outer_most=a),null==c.buffer&&(c.buffer=a);var v=arguments.length,h=v-1;h<0&&(h=0),o=new Array(h);for(var y=1;y<v;y++)o[y-1]=arguments[y];return l&&(u.$$p=null),function(){try{return f=c.not_outer_most["$!"](),c.not_outer_most=!0,c.$remove_nodes_from_args(o),$(c.buffer)||(c.buffer=$(r=c.buffer)?r:[]),$(_)?p=s(c,"build",[],((i=function(){var r,c,l,u,f,p=i.$$s||this,d=a,v=a,h=a,y=a;return null==p.buffer&&(p.buffer=a),d=a,v=[a],s(p,"waiting_on_resources=",e.to_a(v)),v[t(v.length,1)],s(p,"run_child_block",[n["$nil?"]()],_.$to_proc()),$(n)?(h=p.buffer.$dup(),s(s(e.const_get_relative(g,"ReactWrapper"),"create_element",[n].concat(e.to_a(o)),((r=function(){r.$$s;return h}).$$s=p,r.$$arity=0,r)),"tap",[],((c=function(n){var r,i,o=c.$$s||this;return null==n&&(n=a),v=[$(r=d)?r:s(h,"detect",[],(i=function(e){i.$$s;return null==e&&(e=a),$(e["$respond_to?"]("waiting_on_resources"))?e.$waiting_on_resources():a},i.$$s=o,i.$$arity=1,i))["$!"]()["$!"]()],s(n,"waiting_on_resources=",e.to_a(v)),v[t(v.length,1)],$(h.$last()["$is_a?"](e.const_get_relative(g,"String")))?$(r=n.$waiting_on_resources())?r:(v=[o.$waiting_on_resources()],s(n,"waiting_on_resources=",e.to_a(v)),v[t(v.length,1)]):a}).$$s=p,c.$$arity=1,c))):$(p.buffer.$last()["$is_a?"](e.const_get_qualified(e.const_get_qualified(e.const_get_relative(g,"Hyperstack"),"Component"),"Element")))?s(p.buffer.$last(),"tap",[],((l=function(n){var r;l.$$s;return null==n&&(n=a),$(r=n.$waiting_on_resources())?r:(v=[d],s(n,"waiting_on_resources=",e.to_a(v)),v[t(v.length,1)])}).$$s=p,l.$$arity=1,l)):(y=p.buffer.$last().$to_s(),s(s(e.const_get_relative(g,"RenderingContext"),"render",["span"],((u=function(){u.$$s;return y}).$$s=p,u.$$arity=0,u)),"tap",[],((f=function(n){f.$$s;return null==n&&(n=a),v=[d],s(n,"waiting_on_resources=",e.to_a(v)),v[t(v.length,1)]}).$$s=p,f.$$arity=1,f)))}).$$s=c,i.$$arity=0,i)):$(n["$is_a?"](e.const_get_qualified(e.const_get_qualified(e.const_get_relative(g,"Hyperstack"),"Component"),"Element")))?p=n:(p=s(e.const_get_relative(g,"ReactWrapper"),"create_element",[n].concat(e.to_a(o))),d=[c.$waiting_on_resources()],s(p,"waiting_on_resources=",e.to_a(d)),d[t(d.length,1)]),c.buffer["$<<"](p),d=[a],s(c,"waiting_on_resources=",e.to_a(d)),d[t(d.length,1)],p}finally{$(f)&&(c.not_outer_most=c.buffer=a)}}()},u.$$arity=-2),e.defn(r,"$build",_=function(){var t=this,n=_.$$p,r=n||a,i=a,o=a;return null==t.buffer&&(t.buffer=a),n&&(_.$$p=null),i=t.buffer,t.buffer=[],o=e.yield1(r,t.buffer),t.buffer=i,o},_.$$arity=0),e.defn(r,"$delete",f=function(e){var t=this;return null==t.buffer&&(t.buffer=a),t.buffer.$delete(e),e},f.$$arity=1),e.alias(r,"as_node","delete"),e.defn(r,"$rendered?",p=function(e){var t=this;return null==t.buffer&&(t.buffer=a),t.buffer["$include?"](e)},p.$$arity=1),e.defn(r,"$replace",d=function(n,r){var i=this,o=a;return null==i.buffer&&(i.buffer=a),o=[i.buffer.$index(n),r],s(i.buffer,"[]=",e.to_a(o)),o[t(o.length,1)]},d.$$arity=2),e.defn(r,"$remove_nodes_from_args",v=function(t){var n,r,i=this;return $($(n=t["$[]"](0))?t["$[]"](0)["$is_a?"](e.const_get_relative(g,"Hash")):n)?s(t["$[]"](0),"each",[],((r=function(t,n){r.$$s;null==t&&(t=a),null==n&&(n=a);try{return $(n["$is_a?"](e.const_get_qualified(e.const_get_qualified(e.const_get_relative(g,"Hyperstack"),"Component"),"Element")))?n.$delete():a}catch(i){if(!e.rescue(i,[e.const_get_relative(g,"Exception")]))throw i;try{return a}finally{e.pop_exception()}}}).$$s=i,r.$$arity=2,r)):a},v.$$arity=1),e.defn(r,"$run_child_block",h=function(t){var n,r,i,o=this,c=h.$$p,l=c||a,u=a;return null==o.buffer&&(o.buffer=a),c&&(h.$$p=null),u=e.yieldX(l,[]),$($(n=u["$respond_to?"]("acts_as_string?"))?u["$acts_as_string?"]():n)?s(e.const_get_relative(g,"RenderingContext"),"render",["span"],((r=function(){r.$$s;return u.$to_s()}).$$s=o,r.$$arity=0,r)):$($(n=u["$is_a?"](e.const_get_relative(g,"String")))?n:$(i=u["$is_a?"](e.const_get_qualified(e.const_get_qualified(e.const_get_relative(g,"Hyperstack"),"Component"),"Element")))?o.buffer["$empty?"]():i)&&o.buffer["$<<"](u),$($(n=t)?o.buffer["$!="]([u]):n)?o.$raise_render_error(u):a},h.$$arity=1),e.defn(r,"$raise_render_error",y=function(e){var t=this;return null==t.buffer&&(t.buffer=a),t.buffer.$count()["$=="](1)&&t.$improper_render("A different element was returned than was generated within the DSL.","Possibly improper use of Element#delete."),$(n(t.buffer.$count(),1))&&t.$improper_render("Instead "+t.buffer.$count()+" elements were generated.","Do you want to wrap your elements in a div?"),$(e.$try("hyper_component?"))&&t.$improper_render("Instead the component "+e+" was returned.","Did you mean "+e+"()?"),t.$improper_render("Instead the "+e.$class()+" "+e+" was returned.","You may need to convert this to a string.")},y.$$arity=1),e.defn(r,"$improper_render",m=function(e,t){return this.$raise("a component's render method must generate and return exactly 1 element or a string.\n    "+e+"  "+t)},m.$$arity=2)}(e.get_singleton_class(l),u)}(u[0],0,u)}(u[0],u)}(u[0],u)}(r[0],r),function(t,$super,n){function r(){}var i,c,l,u=r=o(t,null,"Object",r),_=(u.$$proto,[u].concat(n));return s(["span","td","th"],"each",[],((i=function(t){var n,r=i.$$s||this;return null==t&&(t=a),s(r,"define_method",[t],((n=function(){var r,i,o,c,l=n.$$s||this;(r=n.$$p||a)&&(n.$$p=null);var u=arguments.length,f=u-0;f<0&&(f=0),i=new Array(f);for(var p=0;p<u;p++)i[p-0]=arguments[p];return i.$unshift(t),$($(o=l["$respond_to?"]("hyper_component?"))?l["$hyper_component?"]():o)?s(l,"send",e.to_a(i),r.$to_proc()):s(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(_,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",e.to_a(i),((c=function(){return(c.$$s||this).$to_s()}).$$s=l,c.$$arity=0,c))}).$$s=r,n.$$arity=-1,n))}).$$s=u,i.$$arity=1,i)),e.defn(u,"$para",c=function(){var t,n,r,i=this,o=c.$$p,l=o||a,u=arguments.length,f=u-0;f<0&&(f=0),r=new Array(f);for(var p=0;p<u;p++)r[p-0]=arguments[p];return o&&(c.$$p=null),r.$unshift("p"),$($(t=i["$respond_to?"]("hyper_component?"))?i["$hyper_component?"]():t)?s(i,"send",e.to_a(r),l.$to_proc()):s(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(_,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",e.to_a(r),((n=function(){return(n.$$s||this).$to_s()}).$$s=i,n.$$arity=0,n))},c.$$arity=-1),e.defn(u,"$br",l=function(){var t,n,r=this;return $($(t=r["$respond_to?"]("hyper_component?"))?r["$hyper_component?"]():t)?r.$send("br"):s(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(_,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",["span"],((n=function(){var t=n.$$s||this;return e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(_,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$render(t.$to_s()),e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(_,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$render("br")}).$$s=r,n.$$arity=0,n))},l.$$arity=0),a&&"br"}(r[0],0,r)},Opal.modules["hyperstack/component/children"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send,$=e.truthy;return e.add_stubs(["$include","$each","$to_proc","$lambda","$render","$to_enum","$length","$>","$new","$call","$<<","$alias_method"]),function(n,s){var c=a(n,"Hyperstack"),l=(c.$$proto,[c].concat(s));!function(n,s){var c=a(n,"Component"),l=(c.$$proto,[c].concat(s));!function(n,$super,a){function s(){}var c,l,u,_,f,p=s=i(n,null,"Children",s),d=p.$$proto,v=[p].concat(a);d.children=d.length=r,p.$include(e.const_get_relative(v,"Enumerable")),e.defn(p,"$initialize",c=function(e){return this.children=e},c.$$arity=1),e.defn(p,"$render",l=function(){return o(this,"each",[],"render".$to_proc())},l.$$arity=0),e.defn(p,"$to_proc",u=function(){var e,t=this;return o(t,"lambda",[],((e=function(){return(e.$$s||this).$render()}).$$s=t,e.$$arity=0,e))},u.$$arity=0),e.defn(p,"$each",_=function(){var n,a=this,i=_.$$p,s=i||r,c=r,l=r;return i&&(_.$$p=null),s===r?o(a,"to_enum",["each"],((n=function(){return(n.$$s||this).$length()}).$$s=a,n.$$arity=0,n)):$(t(a.$length(),0))?(c=[],React.Children.forEach(a.children,function(t){l=e.const_get_relative(v,"Element").$new(t),s.$call(l),c["$<<"](l)}),c):[]},_.$$arity=0),e.defn(p,"$length",f=function(){var e,t=this;return t.length=$(e=t.length)?e:React.Children.count(t.children)},f.$$arity=0),p.$alias_method("size","length")}(l[0],0,l)}(l[0],l)}(n[0],n)},Opal.modules["hyperstack/internal/component/instance_methods"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n=e.top,r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.truthy,$=e.send,s=e.hash2;return e.add_stubs(["$require","$new","$include?","$param_accessor_style","$raise","$[]","$dom_node","$==","$=~","$pluralize","$set_or_replace_state_or_prop","$to_proc","$private","$lambda","$instance_eval","$callbacks?","$class","$RescueWrapper","$call","$after_error_args=","$-","$__hyperstack_component_run_post_render_hooks","$__hyperstack_component_rescue_wrapper","$__hyperstack_router_wrapper","$shallow_to_n"]),n.$require("hyperstack/component/children"),function(n,r){var c=i(n,"Hyperstack"),l=(c.$$proto,[c].concat(r));!function(n,r){var c=i(n,"Internal"),l=(c.$$proto,[c].concat(r));!function(n,r){var c=i(n,"Component"),l=(c.$$proto,[c].concat(r));!function(n,r){var c,l,u,_,f,p,d,v,h,y,m,g,b,w,k=i(n,"InstanceMethods"),O=(k.$$proto,[k].concat(r))
;e.defn(k,"$children",c=function(){var t=this;return null==t.__hyperstack_component_native&&(t.__hyperstack_component_native=a),e.const_get_qualified(e.const_get_qualified(e.const_get_relative(O,"Hyperstack"),"Component"),"Children").$new(t.__hyperstack_component_native.props.children)},c.$$arity=0),e.defn(k,"$params",l=function(){var e=this;return null==e.__hyperstack_component_params_wrapper&&(e.__hyperstack_component_params_wrapper=a),o(["hyperstack","accessors"]["$include?"](e.__hyperstack_component_params_wrapper.$param_accessor_style()))&&e.$raise("params are now directly accessible via instance variables.\n  to access the legacy behavior add `param_accessor_style = :legacy` to your component class\n  to access both behaviors add `param_accessor_style = :both` to your component class"),e.__hyperstack_component_params_wrapper},l.$$arity=0),e.defn(k,"$props",u=function(){var t=this;return null==t.__hyperstack_component_native&&(t.__hyperstack_component_native=a),e.const_get_relative(O,"Hash").$new(t.__hyperstack_component_native.props)},u.$$arity=0),e.defn(k,"$dom_node",_=function(){var e=this;return ReactDOM.findDOMNode(e.__hyperstack_component_native)},_.$$arity=0),e.defn(k,"$jq_node",f=function(){var t=this;return e.const_get_qualified("::","Element")["$[]"](t.$dom_node())},f.$$arity=0),e.defn(k,"$mounted?",p=function(){var e=this;return e.__hyperstack_component_is_mounted!==undefined&&e.__hyperstack_component_is_mounted},p.$$arity=0),e.defn(k,"$pluralize",d=function(e,t,n){var r,i=a;return null==n&&(n=a),i=o(o(r=e["$=="](1))?r:e["$=~"](/^1(\.0+)?$/))?t:o(r=n)?r:t.$pluralize(),(o(r=e)?r:0)+" "+i},d.$$arity=-3),e.defn(k,"$force_update!",v=function(){var e=this;return e.__hyperstack_component_native.forceUpdate(),e},v.$$arity=0),e.defn(k,"$set_state",h=function(e){var t=this,n=h.$$p,r=n||a;return n&&(h.$$p=null),$(t,"set_or_replace_state_or_prop",[e,"setState"],r.$to_proc())},h.$$arity=1),e.defn(k,"$set_state!",y=function(e){var t=this,n=y.$$p,r=n||a;return n&&(y.$$p=null),$(t,"set_or_replace_state_or_prop",[e,"setState"],r.$to_proc()),t.__hyperstack_component_native.forceUpdate()},y.$$arity=1),k.$private(),e.defn(k,"$__hyperstack_router_wrapper",m=function(){var e,t=this,n=m.$$p,r=n||a;return n&&(m.$$p=null),$(t,"lambda",[],((e=function(){var t=e.$$s||this;return $(t,"instance_eval",[],r.$to_proc())}).$$s=t,e.$$arity=0,e))},m.$$arity=0),e.defn(k,"$__hyperstack_component_rescue_wrapper",g=function(t){var n=this;return o(n.$class()["$callbacks?"]("__hyperstack_component_rescue_hook"))?e.const_get_qualified(e.const_get_qualified(e.const_get_relative(O,"Hyperstack"),"Internal"),"Component").$RescueWrapper(s(["child","children_elements"],{child:n,children_elements:t})):t.$call()},g.$$arity=1),e.defn(k,"$__hyperstack_component_select_wrappers",b=function(){var n=this,r=b.$$p,i=r||a,o=a;return r&&(b.$$p=null),o=[a],$(e.const_get_relative(O,"RescueWrapper"),"after_error_args=",e.to_a(o)),o[t(o.length,1)],n.$__hyperstack_component_run_post_render_hooks(n.$__hyperstack_component_rescue_wrapper($(n,"__hyperstack_router_wrapper",[],i.$to_proc())))},b.$$arity=0),e.defn(k,"$set_or_replace_state_or_prop",w=function(e,t){var n=this,r=w.$$p,i=r||a;null==n.__hyperstack_component_native&&(n.__hyperstack_component_native=a),r&&(w.$$p=null),o(n.__hyperstack_component_native)||n.$raise("No native ReactComponent associated");var $=e.$shallow_to_n();if(o(i))if(!0===n.__hyperstack_component_native.__opalInstanceInitializedState)n.__hyperstack_component_native[t]($,function(){i.$call()});else for(var s in $)$.hasOwnProperty(s)&&(n.__hyperstack_component_native.state[s]=$[s]);else if(!0===n.__hyperstack_component_native.__opalInstanceInitializedState)n.__hyperstack_component_native[t]($);else for(var s in $)$.hasOwnProperty(s)&&(n.__hyperstack_component_native.state[s]=$[s])},w.$$arity=2)}(l[0],l)}(l[0],l)}(l[0],l)}(r[0],r)},Opal.modules["hyperstack/internal/component/class_methods"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var i=[],o=e.nil,$=(e.breaker,e.slice,e.module),s=e.send,c=e.truthy,l=e.range,u=e.hash2,_=e.hash;return e.add_stubs(["$create_element","$to_proc","$render","$deprecation_warning","$select","$mounted_components","$<=","$class","$param_accessor_style","$props_wrapper","$==","$[]","$<<","$each","$before_new_params","$included","$is_a?","$type","$define_method","$__hyperstack_component_select_wrappers","$instance_eval","$__hyperstack_component_after_render_hook","$on","$instance_exec","$empty?","$__hyperstack_component_rescue_hook","$!","$detect","$before_mount","$before_update","$after_mount","$after_update","$any?","$respond_to?","$haml_class_name","$superclass","$copy","$validator","$new","$validate","$>","$count","$+","$name","$join","$default_props","$build","$first","$delete","$merge!","$[]=","$-","$key?","$optional","$requires","$all_other_params","$props","$=~","$gsub","$include?","$event_camelize","$event","$call","$arity","$last","$pop","$state","$singleton_class","$__send__","$mutate","$native_mixins","$static_call_backs","$split","$to_n","$add_item_to_tree","$Native","$create_native_react_class","$reverse","$import_native_component","$eval_native_react_component","$raise","$message","$!=","$length","$inject"]),function(i,f){var p=$(i,"Hyperstack"),d=(p.$$proto,[p].concat(f));!function(i,f){var p=$(i,"Internal"),d=(p.$$proto,[p].concat(f));!function(i,f){var p=$(i,"Component"),d=(p.$$proto,[p].concat(f));!function(i,f){var p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C,I,D,H,z,P,R,j,B,L,U,F,W,Y,G,K=$(i,"ClassMethods"),X=(K.$$proto,[K].concat(f));e.defn(K,"$create_element",p=function(){var t,n=this,r=p.$$p,a=r||o,i=arguments.length,$=i-0;$<0&&($=0),t=new Array($);for(var c=0;c<i;c++)t[c-0]=arguments[c];return r&&(p.$$p=null),s(e.const_get_relative(X,"ReactWrapper"),"create_element",[n].concat(e.to_a(t)),a.$to_proc())},p.$$arity=-1),e.defn(K,"$insert_element",d=function(){var t,n=this,r=d.$$p,a=r||o,i=arguments.length,$=i-0;$<0&&($=0),t=new Array($);for(var c=0;c<i;c++)t[c-0]=arguments[c];return r&&(d.$$p=null),s(e.const_get_relative(X,"RenderingContext"),"render",[n].concat(e.to_a(t)),a.$to_proc())},d.$$arity=-1),e.defn(K,"$deprecation_warning",v=function(t){var n=this;return e.const_get_relative(X,"Hyperstack").$deprecation_warning(n,t)},v.$$arity=1),e.defn(K,"$hyper_component?",h=function(){return!0},h.$$arity=0),e.defn(K,"$allow_deprecated_render_definition?",y=function(){return!1},y.$$arity=0),e.defn(K,"$mounted_components",m=function(){var n,r=this;return s(e.const_get_qualified(e.const_get_relative(X,"Hyperstack"),"Component").$mounted_components(),"select",[],((n=function(e){var r=n.$$s||this;return null==e&&(e=o),t(e.$class(),r)}).$$s=r,n.$$arity=1,n))},m.$$arity=0),e.defn(K,"$param_accessor_style",g=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return s(n.$props_wrapper(),"param_accessor_style",e.to_a(t))},g.$$arity=-1),e.defn(K,"$backtrace",b=function(){var e,t,n=this;null==n.__hyperstack_component_dont_catch_exceptions&&(n.__hyperstack_component_dont_catch_exceptions=o);var r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return n.__hyperstack_component_dont_catch_exceptions=t["$[]"](0)["$=="]("none"),n.__hyperstack_component_backtrace_off=c(e=n.__hyperstack_component_dont_catch_exceptions)?e:t["$[]"](0)["$=="]("off")},b.$$arity=-1),e.defn(K,"$append_backtrace",w=function(e,t){var n,r=this;return e["$<<"]("    "+t["$[]"](0)),s(t["$[]"](l(1,-1,!1)),"each",[],((n=function(t){n.$$s;return null==t&&(t=o),e["$<<"](t)}).$$s=r,n.$$arity=1,n))},w.$$arity=2),e.defn(K,"$before_receive_props",k=function(){var t,n=this,r=k.$$p,a=r||o,i=arguments.length,$=i-0;$<0&&($=0),t=new Array($);for(var c=0;c<i;c++)t[c-0]=arguments[c];return r&&(k.$$p=null),n.$deprecation_warning("'before_receive_props' is deprecated. Use the 'before_new_params' macro instead."),s(n,"before_new_params",e.to_a(t),a.$to_proc())},k.$$arity=-1),e.defn(K,"$render",O=function(t,n){var r,a,i=this,$=O.$$p,l=$||o;return null==t&&(t=o),null==n&&(n=u([],{})),$&&(O.$$p=null),e.const_get_relative(X,"Tags").$included(i),c(t)?(c(t["$is_a?"](e.const_get_qualified(e.const_get_qualified(e.const_get_relative(X,"Hyperstack"),"Component"),"Element")))&&(t=t.$type()),s(i,"define_method",["__hyperstack_component_render"],((r=function(){var a,i=r.$$s||this;return s(i,"__hyperstack_component_select_wrappers",[],((a=function(){var r,i=a.$$s||this;return s(e.const_get_relative(X,"RenderingContext"),"render",[t,n],((r=function(){var e=r.$$s||this;return c(l)?s(e,"instance_eval",[],l.$to_proc()):o}).$$s=i,r.$$arity=0,r))}).$$s=i,a.$$arity=0,a))}).$$s=i,r.$$arity=0,r))):s(i,"define_method",["__hyperstack_component_render"],((a=function(){var e,t=a.$$s||this;return s(t,"__hyperstack_component_select_wrappers",[],((e=function(){var t=e.$$s||this;return s(t,"instance_eval",[],l.$to_proc())}).$$s=t,e.$$arity=0,e))}).$$s=i,a.$$arity=0,a))},O.$$arity=-1),e.defn(K,"$on",q=function(){var t,n,r=this,a=q.$$p,i=a||o,$=arguments.length,c=$-0;c<0&&(c=0),n=new Array(c);for(var l=0;l<$;l++)n[l-0]=arguments[l];return a&&(q.$$p=null),s(r,"__hyperstack_component_after_render_hook",[],((t=function(r){var a,$=t.$$s||this;return null==r&&(r=o),s(r,"on",e.to_a(n),((a=function(){var t,n=a.$$s||this,r=arguments.length,o=r-0;o<0&&(o=0),t=new Array(o);for(var $=0;$<r;$++)t[$-0]=arguments[$];return s(n,"instance_exec",e.to_a(t),i.$to_proc())}).$$s=$,a.$$arity=-1,a))}).$$s=r,t.$$arity=1,t))},q.$$arity=-1),e.defn(K,"$rescues",E=function(){var t,n,r=this,a=E.$$p,i=a||o,$=arguments.length,l=$-0;l<0&&(l=0),n=new Array(l);for(var u=0;u<$;u++)n[u-0]=arguments[u];return a&&(E.$$p=null),c(n["$empty?"]())&&(n=[e.const_get_relative(X,"StandardError")]),s(r,"__hyperstack_component_rescue_hook",[],((t=function(r){var a,$,l,u=t.$$s||this,_=arguments.length,f=_-1;f<0&&(f=0),a=new Array(f);for(var p=1;p<_;p++)a[p-1]=arguments[p];return null==r&&(r=o),c(c($=r)?$:s(n,"detect",[],(l=function(e){l.$$s;return null==e&&(e=o),a["$[]"](0)["$is_a?"](e)},l.$$s=u,l.$$arity=1,l))["$!"]())?[r].concat(e.to_a(a)):(s(u,"instance_exec",e.to_a(a),i.$to_proc()),[!0].concat(e.to_a(a)))}).$$s=r,t.$$arity=-2,t))},E.$$arity=-1),e.defn(K,"$before_render",x=function(){var t,n=this,r=x.$$p,a=r||o,i=arguments.length,$=i-0;$<0&&($=0),t=new Array($);for(var c=0;c<i;c++)t[c-0]=arguments[c];return r&&(x.$$p=null),s(n,"before_mount",e.to_a(t),a.$to_proc()),s(n,"before_update",e.to_a(t),a.$to_proc())},x.$$arity=-1),e.defn(K,"$after_render",A=function(){var t,n=this,r=A.$$p,a=r||o,i=arguments.length,$=i-0;$<0&&($=0),t=new Array($);for(var c=0;c<i;c++)t[c-0]=arguments[c];return r&&(A.$$p=null),s(n,"after_mount",e.to_a(t),a.$to_proc()),s(n,"after_update",e.to_a(t),a.$to_proc())},A.$$arity=-1),e.defn(K,"$method_missing",S=function(t){var n,r,a=this,i=S.$$p,$=i||o,l=o,_=o,f=o,p=arguments.length,d=p-1;d<0&&(d=0),r=new Array(d);for(var v=1;v<p;v++)r[v-1]=arguments[v];for(i&&(S.$$p=null),_=0,f=arguments.length,l=new Array(f);_<f;_++)l[_]=arguments[_];return c(c(n=r["$any?"]())?n:e.const_get_qualified(e.const_get_qualified(e.const_get_relative(X,"Hyperstack"),"Component"),"Element")["$respond_to?"]("haml_class_name")["$!"]())?s(a,e.find_super_dispatcher(a,"method_missing",S,!1),l,i):s(e.const_get_relative(X,"RenderingContext"),"render",[a,u(["class"],{"class":e.const_get_qualified(e.const_get_qualified(e.const_get_relative(X,"Hyperstack"),"Component"),"Element").$haml_class_name(t)})],$.$to_proc())},S.$$arity=-2),e.defn(K,"$validator",M=function(){var t=this;return null==t.__hyperstack_component_validator&&(t.__hyperstack_component_validator=o),c(t.__hyperstack_component_validator)?t.__hyperstack_component_validator:c(t.$superclass()["$respond_to?"]("validator"))?t.__hyperstack_component_validator=t.$superclass().$validator().$copy(t.$props_wrapper()):t.__hyperstack_component_validator=e.const_get_relative(X,"Validator").$new(t.$props_wrapper())},M.$$arity=0),e.defn(K,"$prop_types",N=function(){var t=this;return c(t.$validator())?u(["_componentValidator"],{_componentValidator:function(a){var i=t.$validator().$validate(e.const_get_relative(X,"Hash").$new(a));return c(n(i.$count(),0))?new Error(r("In component `"+t.$name()+"`\n",i.$join("\n"))):undefined}}):u([],{})},N.$$arity=0),e.defn(K,"$default_props",T=function(){return this.$validator().$default_props()},T.$$arity=0),e.defn(K,"$params",C=function(){var e=this,t=C.$$p,n=t||o;return t&&(C.$$p=null),s(e.$validator(),"build",[],n.$to_proc())},C.$$arity=0),e.defn(K,"$props_wrapper",I=function(){var t,n=this;return null==n.__hyperstack_component_props_wrapper&&(n.__hyperstack_component_props_wrapper=o),c(n.__hyperstack_component_props_wrapper)?n.__hyperstack_component_props_wrapper:c(n.$superclass()["$respond_to?"]("props_wrapper"))?n.__hyperstack_component_props_wrapper=e.const_get_relative(X,"Class").$new(n.$superclass().$props_wrapper()):n.__hyperstack_component_props_wrapper=c(t=n.__hyperstack_component_props_wrapper)?t:e.const_get_relative(X,"Class").$new(e.const_get_relative(X,"PropsWrapper"))},I.$$arity=0),e.defn(K,"$param",D=function(){var t,n,r=this,i=o,$=o,l=o,_=o,f=arguments.length,p=f-0;p<0&&(p=0),n=new Array(p);for(var d=0;d<f;d++)n[d-0]=arguments[d];return c(n["$[]"](0)["$is_a?"](e.const_get_relative(X,"Hash")))?($=(i=n["$[]"](0)).$first()["$[]"](0),l=i.$first()["$[]"](1),i.$delete($),i["$merge!"](u(["default"],{"default":l}))):($=n["$[]"](0),i=c(t=n["$[]"](1))?t:u([],{})),i["$[]"]("type")["$=="](e.const_get_relative(X,"Proc"))&&(c(t=i["$[]"]("default"))||(_=["default",o],s(i,"[]=",e.to_a(_)),_[a(_.length,1)]),c(i["$key?"]("allow_nil"))||(_=["allow_nil",!0],s(i,"[]=",e.to_a(_)),_[a(_.length,1)])),$["$=="]("class")&&($="className",c(t=i["$[]"]("alias"))||(_=["alias","Class"],s(i,"[]=",e.to_a(_)),_[a(_.length,1)])),c(i["$[]"]("default"))?r.$validator().$optional($,i):r.$validator().$requires($,i)},D.$$arity=-1),e.defn(K,"$collect_other_params_as",H=function(e){var t,n=this;return s(n.$validator(),"all_other_params",[e],((t=function(){return(t.$$s||this).$props()}).$$s=n,t.$$arity=0,t))},H.$$arity=1),e.alias(K,"other_params","collect_other_params_as"),e.alias(K,"others","collect_other_params_as"),e.alias(K,"other","collect_other_params_as"),e.alias(K,"opts","collect_other_params_as"),e.defn(K,"$fires",z=function(t,n){var r,a,i=this,$=o;return null==n&&(n=u([],{})),$=c(r=n["$[]"]("alias"))?r:t+"!",t=c(t["$=~"](/^<(.+)>$/))?t.$gsub(/^<(.+)>$/,"\\1"):c(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(X,"Hyperstack"),"Component"),"Event"),"BUILT_IN_EVENTS")["$include?"]("on"+t.$event_camelize()))?"on"+t.$event_camelize():"on_"+t,i.$validator().$event(t),s(i,"define_method",[$],((a=function(){var n,r,i=a.$$s||this,$=arguments.length,c=$-0;c<0&&(c=0),n=new Array(c);for(var l=0;l<$;l++)n[l-0]=arguments[l];return(r=i.$props()["$[]"](t))===o||null==r?o:s(r,"call",e.to_a(n))}).$$s=i,a.$$arity=-1,a))},z.$$arity=-2),e.alias(K,"triggers","fires"),e.defn(K,"$define_state",P=function(){var t,n,r,a,i=this,$=P.$$p,l=$||o,f=o,p=o,d=arguments.length,v=d-0;v<0&&(v=0),a=new Array(v);for(var h=0;h<d;h++)a[h-0]=arguments[h];return $&&(P.$$p=null),i.$deprecation_warning("'define_state' is deprecated. Use the 'state' macro to declare states."),f=c(c(t=l)?l.$arity()["$=="](0):t)?e.yieldX(l,[]):o,p=c(a.$last()["$is_a?"](e.const_get_relative(X,"Hash")))?a.$pop():u([],{}),s(a,"each",[],((n=function(e){var t=n.$$s||this;return null==e&&(e=o),t.$state(_(e,f))}).$$s=i,n.$$arity=1,n)),s(p,"each",[],((r=function(e,t){var n=r.$$s||this;return null==e&&(e=o),null==t&&(t=o),n.$state(_(e,t))}).$$s=i,r.$$arity=2,r))},P.$$arity=-1),e.defn(K,"$export_state",R=function(){var t,n,r,i,$=this,l=R.$$p,f=l||o,p=o,d=o,v=arguments.length,h=v-0;h<0&&(h=0),i=new Array(h);for(var y=0;y<v;y++)i[y-0]=arguments[y];return l&&(R.$$p=null),$.$deprecation_warning("'export_state' is deprecated. Use the 'state' macro to declare states."),p=c(c(t=f)?f.$arity()["$=="](0):t)?e.yieldX(f,[]):o,d=c(i.$last()["$is_a?"](e.const_get_relative(X,"Hash")))?i.$pop():u([],{}),s(i,"each",[],((n=function(t){n.$$s;var r=o;return null==t&&(t=o),r=[t,p],s(d,"[]=",e.to_a(r)),r[a(r.length,1)]}).$$s=$,n.$$arity=1,n)),s(d,"each",[],((r=function(t,n){var a,i=r.$$s||this;return null==t&&(t=o),null==n&&(n=o),i.$state(_(t,n,"scope","class","reader",!0)),s(i.$singleton_class(),"define_method",[t+"!"],((a=function(){var n,r=a.$$s||this,i=arguments.length,o=i-0;o<0&&(o=0),n=new Array(o);for(var $=0;$<i;$++)n[$-0]=arguments[$];return s(r.$mutate(),"__send__",[t].concat(e.to_a(n)))}).$$s=i,a.$$arity=-1,a))}).$$s=$,r.$$arity=2,r))},R.$$arity=-1),e.defn(K,"$native_mixin",j=function(e){return this.$native_mixins()["$<<"](e)},j.$$arity=1),e.defn(K,"$native_mixins",B=function(){var e,t=this;return null==t.__hyperstack_component_native_mixins&&(t.__hyperstack_component_native_mixins=o),t.__hyperstack_component_native_mixins=c(e=t.__hyperstack_component_native_mixins)?e:[]},B.$$arity=0),e.defn(K,"$static_call_back",L=function(t){var n=this,r=L.$$p,i=r||o,$=o;return r&&(L.$$p=null),$=[t,i],s(n.$static_call_backs(),"[]=",e.to_a($)),$[a($.length,1)]},L.$$arity=1),e.defn(K,"$static_call_backs",U=function(){var e,t=this;return null==t.__hyperstack_component_static_call_backs&&(t.__hyperstack_component_static_call_backs=o),t.__hyperstack_component_static_call_backs=c(e=t.__hyperstack_component_static_call_backs)?e:u([],{})},U.$$arity=0),e.defn(K,"$export_component",F=function(t){var n,i=this,$=o,_=o,f=o;return null==t&&(t=u([],{})),f=[_=($=(c(n=t["$[]"]("as"))?n:i.$name()).$split("::")).$first(),i.$add_item_to_tree(i.$Native(e.global)["$[]"](_),r([e.const_get_relative(X,"ReactWrapper").$create_native_react_class(i)],$["$[]"](l(1,-1,!1)).$reverse())).$to_n()],s(i.$Native(e.global),"[]=",e.to_a(f)),f[a(f.length,1)]},F.$$arity=-1),e.defn(K,"$imports",W=function(t){var n,r=this,a=o;return function(){try{try{return e.const_get_relative(X,"ReactWrapper").$import_native_component(r,e.const_get_relative(X,"ReactWrapper").$eval_native_react_component(t)),s(r,"render",[],((n=function(){n.$$s;return o}).$$s=r,n.$$arity=0,n))}catch(i){if(!e.rescue(i,[e.const_get_relative(X,"Exception")]))throw i;a=i;try{return r.$raise(r+" cannot import '"+t+"': "+a.$message()+".")}finally{e.pop_exception()}}}finally{}}()},W.$$arity=1),e.defn(K,"$add_item_to_tree",Y=function(t,n){var r,i,$=this,u=o;return c(c(r=$.$Native(t).$class()["$!="](e.const_get_qualified(e.const_get_relative(X,"Native"),"Object")))?r:n.$length()["$=="](1))?s(n,"inject",[],((i=function(e,t){i.$$s;return null==e&&(e=o),null==t&&(t=o),_(t,e)}).$$s=$,i.$$arity=2,i)):(u=[n.$last(),$.$add_item_to_tree($.$Native(t)["$[]"](n.$last()),n["$[]"](l(0,-2,!1)))],s($.$Native(t),"[]=",e.to_a(u)),u[a(u.length,1)],t)},Y.$$arity=2),e.defn(K,"$to_n",G=function(){var t=this;return e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(X,"Hyperstack"),"Internal"),"Component"),"ReactWrapper").$create_native_react_class(t)},G.$$arity=0)}(d[0],d)}(d[0],d)}(d[0],d)}(i[0],i)},Opal.modules["hyperstack/internal/component/props_wrapper"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var r=e.top,a=[],i=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass,s=e.truthy,c=e.range,l=e.send;return e.add_stubs(["$require","$attr_reader","$naming_convention","$===","$fix_suffix","$camelize","$=~","$+","$[]","$respond_to?","$superclass","$param_accessor_style","$dup","$param_definitions","$new","$!=","$instance_var_name_for","$lambda","$instance_variable_set","$fetch_from_cache","$==","$[]=","$-","$include?","$define_method","$to_sym","$props","$call","$to_proc","$class","$each_value","$instance_exec","$initialize","$private","$cache","$equal?","$tap","$convert_param","$_react_param_conversion","$is_a?","$collect","$component","$instance_variable_get"]),r.$require("active_support/core_ext/string"),function(r,a){var u=o(r,"Hyperstack"),_=(u.$$proto,[u].concat(a));!function(r,a){var u=o(r,"Internal"),_=(u.$$proto,[u].concat(a));!function(r,a){var u=o(r,"Component"),_=(u.$$proto,[u].concat(a));!function(r,$super,a){function o(){}var u,_,f,p,d,v,h,y,m,g=o=$(r,null,"PropsWrapper",o),b=g.$$proto,w=[g].concat(a);b.component=b.cache=i,g.$attr_reader("component"),function(r,a){r.$$proto;var o,$,u,_,f,p,d=[r].concat(a);e.defn(r,"$instance_var_name_for",o=function(t){var n=this,r=i;return r=e.const_get_relative(d,"Hyperstack").$naming_convention(),"camelize_params"["$==="](r)?n.$fix_suffix(t.$camelize()):"prefix_params"["$==="](r)?"_"+t:t},o.$$arity=1),e.defn(r,"$fix_suffix",$=function(e){return s(e)?s(e["$=~"](/\?$/))?t(e["$[]"](c(0,-2,!1)),"_q"):s(e["$=~"](/\!$/))?t(e["$[]"](c(0,-2,!1)),"_b"):e:i},$.$$arity=1),e.defn(r,"$param_accessor_style",u=function(e){var t,n=this;return null==n.param_accessor_style&&(n.param_accessor_style=i),null==e&&(e=i),s(e)&&(n.param_accessor_style=e),n.param_accessor_style=s(t=n.param_accessor_style)?t:s(n.$superclass()["$respond_to?"]("param_accessor_style"))?n.$superclass().$param_accessor_style():"hyperstack"},u.$$arity=-1),e.defn(r,"$param_definitions",_=function(){var t,n=this;return null==n.param_definitions&&(n.param_definitions=i),n.param_definitions=s(t=n.param_definitions)?t:s(n.$superclass()["$respond_to?"]("param_definitions"))?n.$superclass().$param_definitions().$dup():e.const_get_relative(d,"Hash").$new()},_.$$arity=0),e.defn(r,"$define_param",f=function(t,r,a){var o,$,c,u,_=this,f=i,p=i,v=i;return null==a&&(a=i),s(s(o=_.$param_accessor_style()["$!="]("legacy"))?o:a)&&(f=s(o=a)?o:t,p=s(o=_.$fix_suffix(a))?o:_.$instance_var_name_for(t),v=[t,l(_,"lambda",[],($=function(e){var n=$.$$s||this,a=i;return null==n.component&&(n.component=i),null==e&&(e=i),n.component.$instance_variable_set("@"+p,a=n.$fetch_from_cache(t,r,e)),n.$param_accessor_style()["$=="]("accessors")?n.component["$"+f]=function(){return a}:i},$.$$s=_,$.$$arity=1,$))],l(_.$param_definitions(),"[]=",e.to_a(v)),v[n(v.length,1)],s(["hyperstack","accessors"]["$include?"](_.$param_accessor_style())))?i:r["$=="](e.const_get_relative(d,"Proc"))?l(_,"define_method",[t.$to_sym()],((c=function(){var n,r,a=c.$$s||this;(n=c.$$p||i)&&(c.$$p=null);var o=arguments.length,$=o-0;$<0&&($=0),r=new Array($);for(var u=0;u<o;u++)r[u-0]=arguments[u];return s(a.$props()["$[]"](t))?l(a.$props()["$[]"](t),"call",e.to_a(r),n.$to_proc()):i}).$$s=_,c.$$arity=-1,c)):l(_,"define_method",[t.$to_sym()],((u=function(){var e=u.$$s||this;return e.$fetch_from_cache(t,r,e.$props())}).$$s=_,u.$$arity=0,u))},f.$$arity=-3),e.defn(r,"$define_all_others",p=function(t){var r,a,o=this,$=p.$$p,c=$||i,u=i,_=i;return $&&(p.$$p=null),u=o.$instance_var_name_for(t),_=[t,l(o,"lambda",[],(r=function(n){var a=r.$$s||this,o=i;return null==a.component&&(a.component=i),null==n&&(n=i),a.component.$instance_variable_set("@"+u,o=e.yield1(c,n)),a.$param_accessor_style()["$=="]("accessors")?a.component["$"+t]=function(){return o}:i},r.$$s=o,r.$$arity=1,r))],l(o.$param_definitions(),"[]=",e.to_a(_)),_[n(_.length,1)],l(o,"define_method",[t.$to_sym()],((a=function(){var t,n=a.$$s||this;return null==n._all_others_cache&&(n._all_others_cache=i),n._all_others_cache=s(t=n._all_others_cache)?t:e.yield1(c,n.$props())}).$$s=o,a.$$arity=0,a))},p.$$arity=1)}(e.get_singleton_class(g),w),e.defn(g,"$param_accessor_style",u=function(){return this.$class().$param_accessor_style()},u.$$arity=0),e.defn(g,"$initialize",_=function(e,t){var n,r=this;return null==t&&(t=i),r.component=e,l(r.$class().$param_definitions(),"each_value",[],((n=function(e){var r,a=n.$$s||this;return null==e&&(e=i),l(a,"instance_exec",[s(r=t)?r:a.$props()],e.$to_proc())}).$$s=r,n.$$arity=1,n))},_.$$arity=-2),e.defn(g,"$reload",f=function(e){var t=this;return t._all_others_cache=i,t.$initialize(t.component,e)},f.$$arity=1),e.defn(g,"$[]",p=function(e){return this.$props()["$[]"](e)},p.$$arity=1),g.$private(),e.defn(g,"$fetch_from_cache",d=function(t,r,a){var o,$,c,u=this,_=i,f=i;return $=u.$cache()["$[]"](t),_=null==(o=e.to_ary($))[0]?i:o[0],f=null==o[1]?i:o[1],s(_["$equal?"](a["$[]"](t)))?f:l(u.$convert_param(t,r,a),"tap",[],((c=function(r){var o=c.$$s||this,$=i;return null==r&&(r=i),$=[t,[a["$[]"](t),r]],l(o.$cache(),"[]=",e.to_a($)),$[n($.length,1)]}).$$s=u,c.$$arity=1,c))},d.$$arity=3),e.defn(g,"$convert_param",v=function(t,n,r){var a,o,$=this;return s(n["$respond_to?"]("_react_param_conversion"))?n.$_react_param_conversion(r["$[]"](t),i):s(s(a=n["$is_a?"](e.const_get_relative(w,"Array")))?n["$[]"](0)["$respond_to?"]("_react_param_conversion"):a)?l(r["$[]"](t),"collect",[],((o=function(e){o.$$s;return null==e&&(e=i),n["$[]"](0).$_react_param_conversion(e,i)}).$$s=$,o.$$arity=1,o)):r["$[]"](t)},v.$$arity=3),e.defn(g,"$cache",h=function(){var t,r,a=this;return a.cache=s(t=a.cache)?t:l(e.const_get_relative(w,"Hash"),"new",[],((r=function(t,a){r.$$s;var o=i;return null==t&&(t=i),null==a&&(a=i),o=[a,[]],l(t,"[]=",e.to_a(o)),o[n(o.length,1)]}).$$s=a,r.$$arity=2,r))},h.$$arity=0),e.defn(g,"$props",y=function(){return this.$component().$props()},y.$$arity=0),e.defn(g,"$value_for",m=function(e){var t=this;return s(t["$[]"](e))?t["$[]"](e).$instance_variable_get("@value"):i},m.$$arity=1)}(_[0],0,_)}(_[0],_)}(_[0],_)}(a[0],a)},Opal.modules["hyperstack/component"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}var n=e.top,r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.send,$=e.truthy,s=e.hash2,c=e.hash;return e.add_stubs(["$require","$include","$class_eval","$class_attribute","$define_callback","$add_after_error_hook","$extend","$respond_to?","$!","$<","$allow_deprecated_render_definition?","$deprecation_warning","$new","$to_a","$mounted_components","$each","$include?","$force_update!","$name","$class","$event_camelize","$to_s","$call","$[]","$params","$props_wrapper","$on_opal_client?","$load_context","$observing","$<<","$run_callback","$props","$quiet_test","$reload","$unmount","$remove","$delete","$set_state","$==","$method_defined?","$raise","$first","$render","$waiting_on_resources"]),n.$require("hyperstack/ext/component/string"),n.$require("hyperstack/ext/component/hash"),n.$require("active_support/core_ext/class/attribute"),n.$require("hyperstack/internal/auto_unmount"),n.$require("hyperstack/internal/component/rendering_context"),n.$require("hyperstack/internal/component"),n.$require("hyperstack/internal/component/instance_methods"),n.$require("hyperstack/internal/component/class_methods"),n.$require("hyperstack/internal/component/props_wrapper"),function(n,r){var l=i(n,"Hyperstack"),u=(l.$$proto,[l].concat(r));!function(n,r){var l,u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M=i(n,"Component"),N=(M.$$proto,[M].concat(r));e.defs(M,"$included",l=function(n){var r,i,s=this;return n.$include(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"State"),"Observer")),n.$include(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Internal"),"Component"),"InstanceMethods")),n.$include(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Internal"),"AutoUnmount")),n.$include(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Internal"),"Component"),"Tags")),n.$include(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Internal"),"Component"),"ShouldComponentUpdate")),o(n,"class_eval",[],((r=function(){var t,a=r.$$s||this;return a.$class_attribute("initial_state"),a.$define_callback("before_mount"),a.$define_callback("after_mount"),a.$define_callback("before_new_params"),a.$define_callback("before_update"),a.$define_callback("after_update"),a.$define_callback("__hyperstack_component_after_render_hook"),a.$define_callback("__hyperstack_component_rescue_hook"),o(a,"define_callback",["after_error"],((t=function(){t.$$s;return e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Internal"),"Component"),"ReactWrapper").$add_after_error_hook(n)}).$$s=a,t.$$arity=0,t))}).$$s=s,r.$$arity=0,r)),n.$extend(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Internal"),"Component"),"ClassMethods")),$(e.__hyperstack_component_original_defn)?a:(e.__hyperstack_component_original_defn=e.defn,e.defn=function(n,r,a){$($(i=n["$respond_to?"]("hyper_component?"))?t(n,e.const_get_qualified(e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Component"),"NativeLibrary"))["$!"]():i)&&($($(i="$render"==r)?n["$allow_deprecated_render_definition?"]()["$!"]():i)?e.const_get_relative(N,"Hyperstack").$deprecation_warning(n,"Do not directly define the render method. Use the render macro instead."):$("$__hyperstack_component_render"==r)&&(r="$render")),e.__hyperstack_component_original_defn(n,r,a)},a)},l.$$arity=1),e.defs(M,"$mounted_components",u=function(){var t,n=this;return null==n.__hyperstack_component_mounted_components&&(n.__hyperstack_component_mounted_components=a),n.__hyperstack_component_mounted_components=$(t=n.__hyperstack_component_mounted_components)?t:e.const_get_relative(N,"Set").$new()},u.$$arity=0),e.defs(M,"$force_update!",_=function(){var e,t=this,n=a;return n=t.$mounted_components().$to_a(),o(n,"each",[],((e=function(t){var n=e.$$s||this;return null==t&&(t=a),$(n.$mounted_components()["$include?"](t))?t["$force_update!"]():a}).$$s=t,e.$$arity=1,e))},_.$$arity=0),e.defs(M,"$deprecation_warning",f=function(t){var n=this;return e.const_get_relative(N,"Hyperstack").$deprecation_warning(n.$name(),t)},f.$$arity=1),e.defn(M,"$deprecation_warning",p=function(t){var n=this;return e.const_get_relative(N,"Hyperstack").$deprecation_warning(n.$class().$name(),t)},p.$$arity=1),e.defn(M,"$initialize",d=function(e){return this.__hyperstack_component_native=e},d.$$arity=1),e.defn(M,"$emit",v=function(t){var n,r=this,i=a,s=arguments.length,c=s-1;c<0&&(c=0),n=new Array(c);for(var l=1;l<s;l++)n[l-1]=arguments[l];return $(e.const_get_qualified(e.const_get_relative(N,"Event"),"BUILT_IN_EVENTS")["$include?"](i="on"+t.$to_s().$event_camelize()))?o(r.$params()["$[]"](i),"call",e.to_a(n)):o(r.$params()["$[]"]("on_"+t),"call",e.to_a(n))},v.$$arity=-2),e.defn(M,"$component_will_mount",h=function(){var t,n=this;return n.__hyperstack_component_params_wrapper=n.$class().$props_wrapper().$new(n),$(e.const_get_relative(N,"IsomorphicHelpers")["$on_opal_client?"]())&&e.const_get_relative(N,"IsomorphicHelpers").$load_context(!0),o(n,"observing",[s(["immediate_update"],{immediate_update:!0})],((t=function(){var n=t.$$s||this;return e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Component").$mounted_components()["$<<"](n),n.$run_callback("before_mount",n.$props())}).$$s=n,t.$$arity=0,t))},h.$$arity=0),e.defn(M,"$component_did_mount",y=function(){var t,n=this;return o(n,"observing",[s(["update_objects"],{update_objects:!0})],((t=function(){var n=t.$$s||this;return n.$run_callback("after_mount"),e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$quiet_test(n)}).$$s=n,t.$$arity=0,t))},y.$$arity=0),e.defn(M,"$component_will_receive_props",m=function(e){var t,n=this;return o(n,"observing",[s(["immediate_update"],{immediate_update:!0})],((t=function(){return(t.$$s||this).$run_callback("before_new_params",e)}).$$s=n,t.$$arity=0,t)),n.__hyperstack_component_receiving_props=!0},m.$$arity=1),e.defn(M,"$component_will_update",g=function(e,t){var n,r=this;return null==r.__hyperstack_component_receiving_props&&(r.__hyperstack_component_receiving_props=a),null==r.__hyperstack_component_params_wrapper&&(r.__hyperstack_component_params_wrapper=a),o(r,"observing",[],((n=function(){return(n.$$s||this).$run_callback("before_update",e,t)}).$$s=r,n.$$arity=0,n)),$(r.__hyperstack_component_receiving_props)&&r.__hyperstack_component_params_wrapper.$reload(e),r.__hyperstack_component_receiving_props=!1},g.$$arity=2),e.defn(M,"$component_did_update",b=function(t,n){var r,a=this;return o(a,"observing",[s(["update_objects"],{update_objects:!0})],((r=function(){var a=r.$$s||this;return a.$run_callback("after_update",t,n),e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$quiet_test(a)
}).$$s=a,r.$$arity=0,r))},b.$$arity=2),e.defn(M,"$component_will_unmount",w=function(){var t,n=this;return o(n,"observing",[],((t=function(){var n=t.$$s||this;return n.$unmount(),n.$remove(),e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Component").$mounted_components().$delete(n)}).$$s=n,t.$$arity=0,t))},w.$$arity=0),e.defn(M,"$component_did_catch",k=function(e,t){var n,r=this;return o(r,"observing",[],((n=function(){return(n.$$s||this).$run_callback("after_error",e,t)}).$$s=r,n.$$arity=0,n))},k.$$arity=2),e.defn(M,"$mutations",O=function(){return this.$set_state(s(["***_state_updated_at-***"],{"***_state_updated_at-***":Date.now()+Math.random()}))},O.$$arity=1),e.defn(M,"$update_react_js_state",q=function(e,t,n){var r=this;return $(e)?(e["$=="](r)||(t=e.$class()+"."+t),r.$set_state(c("***_state_updated_at-***",Date.now()+Math.random(),t,n))):r.$set_state(c(t,n))},q.$$arity=3),$(M["$method_defined?"]("render"))||e.defn(M,"$render",E=function(){return this.$raise("no render defined")},E.$$arity=0),e.defn(M,"$waiting_on_resources",x=function(){var e=this;return null==e.__hyperstack_component_waiting_on_resources&&(e.__hyperstack_component_waiting_on_resources=a),e.__hyperstack_component_waiting_on_resources},x.$$arity=0),e.defn(M,"$__hyperstack_component_run_post_render_hooks",A=function(e){var t,n=this;return o(n,"run_callback",["__hyperstack_component_after_render_hook",e],(t=function(){t.$$s;var e,n=arguments.length,r=n-0;r<0&&(r=0),e=new Array(r);for(var a=0;a<n;a++)e[a-0]=arguments[a];return e},t.$$s=n,t.$$arity=-1,t)).$first()},A.$$arity=1),e.defn(M,"$_render_wrapper",S=function(){var t,n=this;return o(n,"observing",[s(["rendering"],{rendering:!0})],((t=function(){var n,r=t.$$s||this,i=a;return i=o(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(N,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",[a],((n=function(){var e,t=n.$$s||this;return $(e=t.$render())?e:""}).$$s=r,n.$$arity=0,n)),$(i["$respond_to?"]("waiting_on_resources"))&&(r.__hyperstack_component_waiting_on_resources=i.$waiting_on_resources()),i}).$$s=n,t.$$arity=0,t))},S.$$arity=0)}(u[0],u)}(r[0],r)},Opal.modules["hyperstack/internal/component/should_component_update"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.send,i=e.truthy;return e.add_stubs(["$observing","$respond_to?","$!","$call_needs_update","$props_changed?","$native_state_changed?","$define_singleton_method","$needs_update?","$new","$!="]),function(t,o){var $=r(t,"Hyperstack"),s=($.$$proto,[$].concat(o));!function(t,o){var $=r(t,"Internal"),s=($.$$proto,[$].concat(o));!function(t,o){var $=r(t,"Component"),s=($.$$proto,[$].concat(o));!function(t,o){var $,s,c,l,u=r(t,"ShouldComponentUpdate"),_=(u.$$proto,[u].concat(o));e.defn(u,"$should_component_update?",$=function(e,t){var n,r=this;return a(r,"observing",[],((n=function(){var r,a=n.$$s||this;return i(a["$respond_to?"]("needs_update?"))?a.$call_needs_update(e,t)["$!"]()["$!"]():i(r=a["$props_changed?"](e))?r:a["$native_state_changed?"](t)}).$$s=r,n.$$arity=0,n))},$.$$arity=2),e.defn(u,"$call_needs_update",s=function(e,t){var r,i,o=this,$=n;return $=o,a(e,"define_singleton_method",["changed?"],((r=function(){var e=r.$$s||this;return $["$props_changed?"](e)}).$$s=o,r.$$arity=0,r)),a(t,"define_singleton_method",["changed?"],((i=function(){i.$$s;return $["$native_state_changed?"](t)}).$$s=o,i.$$arity=0,i)),o["$needs_update?"](e,t)},s.$$arity=2),e.defn(u,"$native_state_changed?",c=function(t){var r=this,a=n;return null==r.__hyperstack_component_native&&(r.__hyperstack_component_native=n),a=e.const_get_relative(_,"Hash").$new(r.__hyperstack_component_native.state),t["$!="](a)},c.$$arity=1),e.defn(u,"$props_changed?",l=function(t){var r=this,a=n;return null==r.__hyperstack_component_native&&(r.__hyperstack_component_native=n),a=e.const_get_relative(_,"Hash").$new(r.__hyperstack_component_native.props),t["$!="](a)},l.$$arity=1)}(s[0],s)}(s[0],s)}(s[0],s)}(t[0],t)},Opal.modules["hyperstack/internal/component/tags"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.send,$=e.truthy,s=e.klass;return e.add_stubs(["$+","$each","$define_method","$upcase","$render","$to_proc","$const_set","$downcase","$=~","$include?","$create_element","$find_component","$find_name_and_parent","$new","$extend","$private","$name","$split","$>","$length","$last","$[]","$inject","$const_get","$lookup_const","$!","$method_defined?","$raise","$_reactrb_import_component_class","$reverse","$to_s","$class","$detect","$const_defined?","$respond_to?"]),function(r,s){var c=i(r,"Hyperstack"),l=(c.$$proto,[c].concat(s));!function(r,s){var c=i(r,"Internal"),l=(c.$$proto,[c].concat(s));!function(r,s){var c=i(r,"Component"),l=(c.$$proto,[c].concat(s));!function(r,s){var c,l,u,_,f,p=i(r,"Tags"),d=(p.$$proto,[p].concat(s));e.const_set(d[0],"HTML_TAGS",t(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],["circle","clipPath","defs","ellipse","g","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"])),o(e.const_get_relative(d,"HTML_TAGS"),"each",[],((c=function(t){var n,r=c.$$s||this;return null==t&&(t=a),o(r,"define_method",[t.$upcase()],((n=function(){var r,i;n.$$s;(r=n.$$p||a)&&(n.$$p=null);var $=arguments.length,s=$-0;s<0&&(s=0),i=new Array(s);for(var c=0;c<$;c++)i[c-0]=arguments[c];return o(e.const_get_relative(d,"RenderingContext"),"render",[t].concat(e.to_a(i)),r.$to_proc())}).$$s=r,n.$$arity=-1,n)),r.$const_set(t.$upcase(),t)}).$$s=p,c.$$arity=1,c)),e.defs(p,"$html_tag_class_for",l=function(t){var n,r=a;return r=t.$downcase(),$($(n=t["$=~"](/^[A-Z]+$/))?e.const_get_relative(d,"HTML_TAGS")["$include?"](r):n)?e.const_get_relative(d,"Object").$const_set(t,e.const_get_relative(d,"ReactWrapper").$create_element(r)):a},l.$$arity=1),e.defn(p,"$method_missing",u=function(t){var n,r=this,i=u.$$p,s=i||a,c=a,l=a,_=a,f=a,p=arguments.length,v=p-1;v<0&&(v=0),n=new Array(v);for(var h=1;h<p;h++)n[h-1]=arguments[h];for(i&&(u.$$p=null),_=0,f=arguments.length,l=new Array(f);_<f;_++)l[_]=arguments[_];return c=r.$find_component(t),$(c)?o(e.const_get_relative(d,"RenderingContext"),"render",[c].concat(e.to_a(n)),s.$to_proc()):o(r,e.find_super_dispatcher(r,"method_missing",u,!1),l,i)},u.$$arity=-2),function(r,i){r.$$proto;var s,c,l=[r].concat(i);e.defn(r,"$included",s=function(t){var n,r,i,$=this,s=a,c=a,u=a;return r=$.$find_name_and_parent(t),n=e.to_ary(r),s=null==n[0]?a:n[0],c=null==n[1]?a:n[1],u=o(e.const_get_relative(l,"Module"),"new",[],((i=function(){var n,r=i.$$s||this;return o(r,"define_method",[s],((n=function(){var r,i;n.$$s;(r=n.$$p||a)&&(n.$$p=null);var $=arguments.length,s=$-0;s<0&&(s=0),i=new Array(s);for(var c=0;c<$;c++)i[c-0]=arguments[c];return o(e.const_get_relative(l,"RenderingContext"),"render",[t].concat(e.to_a(i)),r.$to_proc())}).$$s=r,n.$$arity=-1,n))}).$$s=$,i.$$arity=0,i)),c.$extend(u)},s.$$arity=1),r.$private(),e.defn(r,"$find_name_and_parent",c=function(r){var i,s,c=this,u=a;return u=$(i=r.$name())?r.$name().$split("::"):i,$($(i=u)?n(u.$length(),1):i)?[u.$last(),o(u,"inject",[[e.const_get_relative(l,"Module")]],(s=function(e,n){s.$$s;return null==e&&(e=a),null==n&&(n=a),t(e,[e.$last().$const_get(n)])},s.$$s=c,s.$$arity=2,s))["$[]"](-2)]:a},c.$$arity=1)}(e.get_singleton_class(p),d),p.$private(),e.defn(p,"$find_component",_=function(t){var n,r=this,i=a;return i=r.$lookup_const(t),$($(n=i)?i["$method_defined?"]("render")["$!"]():n)&&r.$raise(t+" does not appear to be a react component."),$(n=i)?n:e.const_get_relative(d,"Object").$_reactrb_import_component_class(t)},_.$$arity=1),e.defn(p,"$lookup_const",f=function(n){var r,i,s=this,c=a,l=a;return $(n["$=~"](/^[A-Z]/))?(c=o(s.$class().$name().$to_s().$split("::"),"inject",[[e.const_get_relative(d,"Object")]],(r=function(e,n){r.$$s;return null==e&&(e=a),null==n&&(n=a),t(e,[e.$last().$const_get(n)])},r.$$s=s,r.$$arity=2,r)).$reverse(),l=o(c,"detect",[],((i=function(e){i.$$s;return null==e&&(e=a),e["$const_defined?"](n,!1)}).$$s=s,i.$$arity=1,i)),$(l)?l.$const_get(n,!1):a):a},f.$$arity=1)}(l[0],l)}(l[0],l)}(l[0],l)}(r[0],r),$(e.const_get_relative(r,"Object")["$respond_to?"]("_reactrb_import_component_class"))?a:function(t,$super,n){function r(){}var i,o=r=s(t,null,"Object",r);o.$$proto,[o].concat(n);return e.defs(o,"$_reactrb_import_component_class",i=function(){return a},i.$$arity=1)}(r[0],0,r)},Opal.modules["hyperstack/component/event"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module),r=e.klass;return e.add_stubs(["$include","$alias_native"]),function(t,a){var i=n(t,"Hyperstack"),o=(i.$$proto,[i].concat(a));!function(t,a){var i=n(t,"Component"),o=(i.$$proto,[i].concat(a));!function(t,$super,n){function a(){}var i,o=a=r(t,null,"Event",a),$=(o.$$proto,[o].concat(n));o.$include(e.const_get_relative($,"Native")),o.$alias_native("bubbles","bubbles"),o.$alias_native("cancelable","cancelable"),o.$alias_native("current_target","currentTarget"),o.$alias_native("default_prevented","defaultPrevented"),o.$alias_native("event_phase","eventPhase"),o.$alias_native("is_trusted?","isTrusted"),o.$alias_native("native_event","nativeEvent"),o.$alias_native("target","target"),o.$alias_native("timestamp","timeStamp"),o.$alias_native("event_type","type"),o.$alias_native("prevent_default","preventDefault"),o.$alias_native("stop_propagation","stopPropagation"),o.$alias_native("clipboard_data","clipboardData"),o.$alias_native("alt_key","altKey"),o.$alias_native("char_code","charCode"),o.$alias_native("ctrl_key","ctrlKey"),o.$alias_native("get_modifier_state","getModifierState"),o.$alias_native("key","key"),o.$alias_native("key_code","keyCode"),o.$alias_native("locale","locale"),o.$alias_native("location","location"),o.$alias_native("meta_key","metaKey"),o.$alias_native("repeat","repeat"),o.$alias_native("shift_key","shiftKey"),o.$alias_native("which","which"),o.$alias_native("related_target","relatedTarget"),o.$alias_native("button","button"),o.$alias_native("buttons","buttons"),o.$alias_native("client_x","clientX"),o.$alias_native("client_y","clientY"),o.$alias_native("get_modifier_state","getModifierState"),o.$alias_native("page_x","pageX"),o.$alias_native("page_y","pageY"),o.$alias_native("screen_x","screen_x"),o.$alias_native("screen_y","screen_y"),o.$alias_native("changed_touches","changedTouches"),o.$alias_native("target_touches","targetTouches"),o.$alias_native("touches","touches"),o.$alias_native("detail","detail"),o.$alias_native("view","view"),o.$alias_native("delta_mode","deltaMode"),o.$alias_native("delta_x","deltaX"),o.$alias_native("delta_y","deltaY"),o.$alias_native("delta_z","deltaZ"),e.const_set($[0],"BUILT_IN_EVENTS",["onCopy","onCut","onPaste","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onSubmit","onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel"]),e.defn(o,"$initialize",i=function(e){return this.native=e},i.$$arity=1)}(o[0],0,o)}(o[0],o)}(t[0],t)},Opal.modules["hyperstack/ext/component/object"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.truthy;return e.add_stubs(["$_reactrb_tag_original_const_missing","$html_tag_class_for","$raise","$object_id"]),function(t,$super,i){function o(){}var $,s=o=r(t,null,"Object",o),c=(s.$$proto,[s].concat(i));return function(t,$super,i){function o(){}var $=o=r(t,null,"Object",o),s=($.$$proto,[$].concat(i));(function(t,r){t.$$proto;var i,o=[t].concat(r);e.alias(t,"_reactrb_tag_original_const_missing","const_missing"),e.defn(t,"$const_missing",i=function(t){var r,i=this,$=n;try{return i.$_reactrb_tag_original_const_missing(t)}catch(s){if(!e.rescue(s,[e.const_get_relative(o,"StandardError")]))throw s;$=s;try{return a(r=e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(o,"Hyperstack"),"Internal"),"Component"),"Tags").$html_tag_class_for(t))?r:i.$raise($)}finally{e.pop_exception()}}},i.$$arity=1)})(e.get_singleton_class($),s)}(c[0],0,c),e.defn(s,"$to_key",$=function(){return this.$object_id()},$.$$arity=0),n&&"to_key"}(t[0],0,t)},Opal.modules["hyperstack/ext/component/kernel"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.send,i=e.truthy;return e.add_stubs(["$tap","$new","$after","$resolve","$call"]),function(t,o){var $,s=r(t,"Kernel"),c=(s.$$proto,[s].concat(o));e.defn(s,"$pause",$=function(t){var r,o=this,s=$.$$p,l=s||n;return s&&($.$$p=null),a(e.const_get_relative(c,"Promise").$new(),"tap",[],((r=function(o){var $,s=r.$$s||this;return null==o&&(o=n),a(s,"after",[t],(($=function(){var t;$.$$s;return a(o,"resolve",e.to_a(i(t=l)?[l.$call()]:t))}).$$s=s,$.$$arity=0,$))}).$$s=o,r.$$arity=1,r))},$.$$arity=1),e.alias(s,"busy_sleep","sleep"),e.alias(s,"sleep","pause")}(t[0],t)},Opal.modules["hyperstack/ext/component/number"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass);return function(t,$super,a){function i(){}var o,$=i=r(t,null,"Number",i);$.$$proto,[$].concat(a);return e.defn($,"$to_key",o=function(){return this},o.$$arity=0),n&&"to_key"}(t[0],0,t)},Opal.modules["hyperstack/ext/component/boolean"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass);return function(t,$super,a){function i(){}var o,$=i=r(t,null,"Boolean",i);$.$$proto,[$].concat(a);return e.defn($,"$to_key",o=function(){return this},o.$$arity=0),n&&"to_key"}(t[0],0,t)},Opal.modules["hyperstack/ext/component/array"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.send,i=e.truthy;return e.add_stubs(["$to_enum","$size","$reject!","$<<"]),function(t,$super,o){function $(){}var s,c=$=r(t,null,"Array",$);c.$$proto,[c].concat(o);return e.defn(c,"$extract!",s=function(){var t,r,o=this,$=s.$$p,c=$||n,l=n;return $&&(s.$$p=null),c===n?a(o,"to_enum",["extract!"],((t=function(){return(t.$$s||this).$size()}).$$s=o,t.$$arity=0,t)):(l=[],a(o,"reject!",[],((r=function(t){r.$$s;return null==t&&(t=n),i(e.yield1(c,t))?l["$<<"](t):n}).$$s=o,r.$$arity=1,r)),l)},s.$$arity=0),n&&"extract!"}(t[0],0,t)},Opal.modules["hyperstack/ext/component/enumerable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.hash2,o=e.send,$=e.truthy;return e.add_stubs(["$new","$private_constant","$each","$[]=","$-","$!=","$to_enum","$respond_to?","$size"]),function(n,s){var c,l=a(n,"Enumerable"),u=(l.$$proto,[l].concat(s));e.const_set(u[0],"INDEX_WITH_DEFAULT",e.const_get_relative(u,"Object").$new()),l.$private_constant("INDEX_WITH_DEFAULT"),e.defn(l,"$index_with",c=function(n){var a,s,l,_=this,f=c.$$p,p=f||r,d=r;return null==n&&(n=e.const_get_relative(u,"INDEX_WITH_DEFAULT")),f&&(c.$$p=null),p!==r?(d=i([],{}),o(_,"each",[],((a=function(n){a.$$s;var i=r;return null==n&&(n=r),i=[n,e.yield1(p,n)],o(d,"[]=",e.to_a(i)),i[t(i.length,1)]}).$$s=_,a.$$arity=1,a)),d):$(n["$!="](e.const_get_relative(u,"INDEX_WITH_DEFAULT")))?(d=i([],{}),o(_,"each",[],((s=function(a){s.$$s;var i=r;return null==a&&(a=r),i=[a,n],o(d,"[]=",e.to_a(i)),i[t(i.length,1)]}).$$s=_,s.$$arity=1,s)),d):o(_,"to_enum",["index_with"],((l=function(){var e=l.$$s||this;return $(e["$respond_to?"]("size"))?e.$size():r}).$$s=_,l.$$arity=0,l))},c.$$arity=-1)}(n[0],n)},Opal.modules["hyperstack/component/isomorphic_helpers"]=function(Opal){function $rb_plus(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function $rb_minus(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var self=Opal.top,$nesting=[],nil=Opal.nil,$breaker=Opal.breaker,$slice=Opal.slice,$module=Opal.module,$truthy=Opal.truthy,$range=Opal.range,$send=Opal.send,$klass=Opal.klass,$hash2=Opal.hash2;return Opal.add_stubs(["$require","$extend","$!=","$!","$unique_id","$on_opal_server?","$log","$new","$is_a?","$==","$production?","$env","$+","$[]","$class","$on_opal_client?","$join","$collect","$prerender_footer_blocks","$call","$attr_reader","$[]=","$-","$run","$each","$before_first_mount_blocks","$send_to_opal","$eval","$length","$load!","$tr","$<<","$first","$send_to_server","$to_json","$parse","$controller","$context","$register_before_first_mount_block","$to_proc","$register_prerender_footer_block","$send","$result"]),self.$require("hyperstack/internal/component"),function($base,$parent_nesting){var $Hyperstack,self=$Hyperstack=$module($base,"Hyperstack"),def=self.$$proto,$nesting=[self].concat($parent_nesting);!function($base,$parent_nesting){var $Component,self=$Component=$module($base,"Component"),def=self.$$proto,$nesting=[self].concat($parent_nesting);!function($base,$parent_nesting){var $IsomorphicHelpers,self=$IsomorphicHelpers=$module($base,"IsomorphicHelpers"),def=self.$$proto,$nesting=[self].concat($parent_nesting),TMP_IsomorphicHelpers_included_1,TMP_IsomorphicHelpers_load_context_2,TMP_IsomorphicHelpers_context_3,TMP_IsomorphicHelpers_log_4,TMP_IsomorphicHelpers_on_opal_server$q_5,TMP_IsomorphicHelpers_on_opal_client$q_6,TMP_IsomorphicHelpers_log_7,TMP_IsomorphicHelpers_on_opal_server$q_8,TMP_IsomorphicHelpers_on_opal_client$q_9,TMP_IsomorphicHelpers_prerender_footers_11;Opal.defs(self,"$included",TMP_IsomorphicHelpers_included_1=function(e){return e.$extend(Opal.const_get_relative($nesting,"ClassMethods"))},TMP_IsomorphicHelpers_included_1.$$arity=1),$truthy(Opal.const_get_relative($nesting,"RUBY_ENGINE")["$!="]("opal"))||Opal.defs(self,"$load_context",TMP_IsomorphicHelpers_load_context_2=function(e,t){var n,r,a=this,i=nil;return null==a.context&&(a.context=nil),null==e&&(e=nil),null==t&&(t=nil),$truthy($truthy(n=$truthy(r=e["$!"]())?r:a.context["$!"]())?n:a.context.$unique_id()["$!="](e))&&(i=function(){if($truthy(a["$on_opal_server?"]())){try{console.history=[]}catch(e){if(!Opal.rescue(e,[Opal.const_get_relative($nesting,"StandardError")]))throw e;Opal.pop_exception()}return"************************ React Prerendering Context Initialized "+t+" ***********************"}return"************************ React Browser Context Initialized ****************************"}(),a.$log(i),a.context=Opal.const_get_relative($nesting,"Context").$new(e)),!0},TMP_IsomorphicHelpers_load_context_2.$$arity=-1),Opal.defs(self,"$context",TMP_IsomorphicHelpers_context_3=function(){var e=this;return null==e.context&&(e.context=nil),e.context},TMP_IsomorphicHelpers_context_3.$$arity=0),Opal.defs(self,"$log",TMP_IsomorphicHelpers_log_4=function(e,t){var n,r,a=this,i=nil;return null==t&&(t="info"),$truthy(e["$is_a?"](Opal.const_get_relative($nesting,"Array")))||(e=[e]),$truthy($truthy(n=$truthy(r=t["$=="]("info"))?r:t["$=="]("warning"))?Opal.const_get_relative($nesting,"Hyperstack").$env()["$production?"]():n)?nil:t["$=="]("info")?(i=$truthy(a["$on_opal_server?"]())?"background: #00FFFF; color: red":"background: #222; color: #bada55",e=$rb_plus([$rb_plus("%c",e["$[]"](0)),i],e["$[]"]($range(1,-1,!1))),console.log.apply(console,e)):t["$=="]("warning")?console.warn.apply(console,e):console.error.apply(console,e)},TMP_IsomorphicHelpers_log_4.$$arity=-2),$truthy(Opal.const_get_relative($nesting,"RUBY_ENGINE")["$!="]("opal"))||(Opal.defs(self,"$on_opal_server?",TMP_IsomorphicHelpers_on_opal_server$q_5=function(){return"undefined"==typeof Opal.global.document},TMP_IsomorphicHelpers_on_opal_server$q_5.$$arity=0),Opal.defs(self,"$on_opal_client?",TMP_IsomorphicHelpers_on_opal_client$q_6=function(){return this["$on_opal_server?"]()["$!"]()},TMP_IsomorphicHelpers_on_opal_client$q_6.$$arity=0)),Opal.defn(self,"$log",TMP_IsomorphicHelpers_log_7=function(){var e,t=arguments.length,n=t-0;n<0&&(n=0),e=new Array(n);for(var r=0;r<t;r++)e[r-0]=arguments[r];return $send(Opal.const_get_relative($nesting,"IsomorphicHelpers"),"log",Opal.to_a(e))},TMP_IsomorphicHelpers_log_7.$$arity=-1),Opal.defn(self,"$on_opal_server?",TMP_IsomorphicHelpers_on_opal_server$q_8=function(){return this.$class()["$on_opal_server?"]()},TMP_IsomorphicHelpers_on_opal_server$q_8.$$arity=0),Opal.defn(self,"$on_opal_client?",TMP_IsomorphicHelpers_on_opal_client$q_9=function(){return this.$class()["$on_opal_client?"]()},TMP_IsomorphicHelpers_on_opal_client$q_9.$$arity=0),Opal.defs(self,"$prerender_footers",TMP_IsomorphicHelpers_prerender_footers_11=function(e){var t,n=this,r=nil;return null==e&&(e=nil),r=$send(Opal.const_get_relative($nesting,"Context").$prerender_footer_blocks(),"collect",[],(t=function(n){t.$$s;return null==n&&(n=nil),n.$call(e)},t.$$s=n,t.$$arity=1,t)).$join("\n"),$truthy(Opal.const_get_relative($nesting,"RUBY_ENGINE")["$!="]("opal")),r},TMP_IsomorphicHelpers_prerender_footers_11.$$arity=-1),function(e,$super,t){function n(){}var r,a,i,o,$,s,c,l,u,_=n=$klass(e,null,"Context",n),f=_.$$proto,p=[_].concat(t);f.unique_id=f.cname=f.ctx=nil,_.$attr_reader("controller"),_.$attr_reader("unique_id"),Opal.defs(_,"$define_isomorphic_method",r=function(e){var t,a,i=r.$$p,o=i||nil,$=nil;return i&&(r.$$p=null),Opal.class_variable_set(n,"@@ctx_methods",$truthy(t=null==(a=n.$$cvars["@@ctx_methods"])?nil:a)?t:$hash2([],{})),$=[e,o],$send(null==(t=n.$$cvars["@@ctx_methods"])?nil:t,"[]=",Opal.to_a($)),$[$rb_minus($.length,1)]},r.$$arity=1),Opal.defs(_,"$before_first_mount_blocks",a=function(){var e,t=this;return null==t.before_first_mount_blocks&&(t.before_first_mount_blocks=nil),t.before_first_mount_blocks=$truthy(e=t.before_first_mount_blocks)?e:[]},a.$$arity=0),Opal.defs(_,"$prerender_footer_blocks",i=function(){var e,t=this;return null==t.prerender_footer_blocks&&(t.prerender_footer_blocks=nil),t.prerender_footer_blocks=$truthy(e=t.prerender_footer_blocks)?e:[]},i.$$arity=0),Opal.defn(_,"$initialize",o=function(e,t,n,r){var a,i=this;return null==t&&(t=nil),null==n&&(n=nil),null==r&&(r=nil),i.unique_id=e,i.cname=r,$truthy(Opal.const_get_relative(p,"RUBY_ENGINE")["$!="]("opal")),Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative(p,"Hyperstack"),"Application"),"Boot").$run($hash2(["context"],{context:i})),$send(i.$class().$before_first_mount_blocks(),"each",[],((a=function(e){var t=a.$$s||this;return null==e&&(e=nil),e.$call(t)}).$$s=i,a.$$arity=1,a))},o.$$arity=-2),Opal.defn(_,"$load_opal_context",$=function(){var e=this;return e.$send_to_opal("load_context",e.unique_id,e.cname)},$.$$arity=0),Opal.defn(_,"$eval",s=function(e){var t=this;return $truthy(t.ctx)?t.ctx.$eval(e):nil},s.$$arity=1),Opal.defn(_,"$send_to_opal",c=function(e){var t,n,r=this,a=nil,i=arguments.length,o=i-1;o<0&&(o=0),n=new Array(o);for(var $=1;$<i;$++)n[$-1]=arguments[$];return $truthy(r.ctx)?(n.$length()["$=="](0)&&(n=[1]),Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative(p,"Hyperstack"),"Internal"),"Component"),"Rails"),"ComponentLoader").$new(r.ctx)["$load!"](),a=$send(n,"collect",[],(t=function(e){t.$$s;return null==e&&(e=nil),'"'+(""+e).$tr('"',"'")+'"'},t.$$s=r,t.$$arity=1,t)).$join(", "),r.ctx.$eval("Opal.Hyperstack.$const_get('Component').$const_get('IsomorphicHelpers').$"+e+"("+a+")")):nil},c.$$arity=-2),Opal.defs(_,"$register_before_first_mount_block",l=function(){var e=this,t=l.$$p,n=t||nil;return t&&(l.$$p=null),e.$before_first_mount_blocks()["$<<"](n)},l.$$arity=0),Opal.defs(_,"$register_prerender_footer_block",u=function(){var e=this,t=u.$$p,n=t||nil;return t&&(u.$$p=null),e.$prerender_footer_blocks()["$<<"](n)},u.$$arity=0)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){function $IsomorphicProcCall(){}var self=$IsomorphicProcCall=$klass($base,$super,"IsomorphicProcCall",$IsomorphicProcCall),def=self.$$proto,$nesting=[self].concat($parent_nesting),TMP_IsomorphicProcCall_result_23,TMP_IsomorphicProcCall_initialize_24,TMP_IsomorphicProcCall_when_on_client_25,TMP_IsomorphicProcCall_send_to_server_26,TMP_IsomorphicProcCall_when_on_server_27;def.result=def.name=nil,self.$attr_reader("context"),Opal.defn(self,"$result",TMP_IsomorphicProcCall_result_23=function(){var e=this;return $truthy(e.result)?e.result.$first():nil},TMP_IsomorphicProcCall_result_23.$$arity=0),Opal.defn(self,"$initialize",TMP_IsomorphicProcCall_initialize_24=function(e,t,n){var r,a,i=this,o=arguments.length,$=o-3;$<0&&($=0),a=new Array($);for(var s=3;s<o;s++)a[s-3]=arguments[s];return i.name=e,i.context=n,$send(t,"call",[i].concat(Opal.to_a(a))),i.result=$truthy(r=i.result)?r:$send(i,"send_to_server",Opal.to_a(a))},TMP_IsomorphicProcCall_initialize_24.$$arity=-4),Opal.defn(self,"$when_on_client",TMP_IsomorphicProcCall_when_on_client_25=function(){var e=this,t=TMP_IsomorphicProcCall_when_on_client_25.$$p,n=t||nil;return t&&(TMP_IsomorphicProcCall_when_on_client_25.$$p=null),$truthy(Opal.const_get_relative($nesting,"IsomorphicHelpers")["$on_opal_client?"]())?e.result=[n.$call()]:nil},TMP_IsomorphicProcCall_when_on_client_25.$$arity=0),Opal.defn(self,"$send_to_server",TMP_IsomorphicProcCall_send_to_server_26=function $$send_to_server($a_rest){var self=this,args,method_string=nil,$args_len=arguments.length,$rest_len=$args_len-0;$rest_len<0&&($rest_len=0),args=new Array($rest_len);for(var $arg_idx=0;$arg_idx<$args_len;$arg_idx++)args[$arg_idx-0]=arguments[$arg_idx];return $truthy(Opal.const_get_relative($nesting,"IsomorphicHelpers")["$on_opal_server?"]())?(method_string=$rb_plus($rb_plus($rb_plus($rb_plus("ServerSideIsomorphicMethod.",self.name),"("),args.$to_json()),")"),self.result=[Opal.const_get_relative($nesting,"JSON").$parse(eval(method_string))]):nil},TMP_IsomorphicProcCall_send_to_server_26.$$arity=-1),Opal.defn(self,"$when_on_server",TMP_IsomorphicProcCall_when_on_server_27=function(){var e,t=this,n=TMP_IsomorphicProcCall_when_on_server_27.$$p,r=n||nil;return n&&(TMP_IsomorphicProcCall_when_on_server_27.$$p=null),$truthy($truthy(e=Opal.const_get_relative($nesting,"IsomorphicHelpers")["$on_opal_client?"]())?e:Opal.const_get_relative($nesting,"IsomorphicHelpers")["$on_opal_server?"]())?nil:t.result=[r.$call().$to_json()]},TMP_IsomorphicProcCall_when_on_server_27.$$arity=0)}($nesting[0],null,$nesting),function(e,t){var n,r,a,i,o,$,s,c=$module(e,"ClassMethods"),l=(c.$$proto,[c].concat(t));Opal.defn(c,"$on_opal_server?",n=function(){return Opal.const_get_relative(l,"IsomorphicHelpers")["$on_opal_server?"]()},n.$$arity=0),Opal.defn(c,"$on_opal_client?",r=function(){return Opal.const_get_relative(l,"IsomorphicHelpers")["$on_opal_client?"]()},r.$$arity=0),Opal.defn(c,"$log",a=function(){var e,t=arguments.length,n=t-0;n<0&&(n=0),e=new Array(n);for(var r=0;r<t;r++)e[r-0]=arguments[r];return $send(Opal.const_get_relative(l,"IsomorphicHelpers"),"log",Opal.to_a(e))},a.$$arity=-1),Opal.defn(c,"$controller",i=function(){return Opal.const_get_relative(l,"IsomorphicHelpers").$context().$controller()},i.$$arity=0),Opal.defn(c,"$before_first_mount",o=function(){var e=o.$$p,t=e||nil;return e&&(o.$$p=null),$send(Opal.const_get_qualified(Opal.const_get_relative(l,"IsomorphicHelpers"),"Context"),"register_before_first_mount_block",[],t.$to_proc())},o.$$arity=0),Opal.defn(c,"$prerender_footer",$=function(){var e=$.$$p,t=e||nil;return e&&($.$$p=null),$send(Opal.const_get_qualified(Opal.const_get_relative(l,"IsomorphicHelpers"),"Context"),"register_prerender_footer_block",[],t.$to_proc())},$.$$arity=0),$truthy(Opal.const_get_relative(l,"RUBY_ENGINE")["$!="]("opal"))||(c.$require("json"),Opal.defn(c,"$isomorphic_method",s=function(e){var t,n=this,r=s.$$p,a=r||nil;return r&&(s.$$p=null),$send(n.$class(),"send",["define_method",e],((t=function(){var n,r=t.$$s||this,i=arguments.length,o=i-0;o<0&&(o=0),n=new Array(o);for(var $=0;$<i;$++)n[$-0]=arguments[$];return $send(Opal.const_get_qualified(Opal.const_get_relative(l,"IsomorphicHelpers"),"IsomorphicProcCall"),"new",[e,a,r].concat(Opal.to_a(n))).$result()}).$$s=n,t.$$arity=-1,t))},s.$$arity=1))}($nesting[0],$nesting)}($nesting[0],$nesting)}($nesting[0],$nesting)}($nesting[0],$nesting)},Opal.modules["hyperstack/component/react_api"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var n=e.top,r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.send,$=e.truthy;return e.add_stubs(["$require","$+","$create_element","$to_proc","$raise","$to_n","$kind_of?","$!","$build"]),n.$require("native"),n.$require("active_support/core_ext/object/try"),n.$require("hyperstack/internal/component/tags"),function(n,r){var s=i(n,"Hyperstack"),c=(s.$$proto,[s].concat(r));!function(n,r){var s=i(n,"Component"),c=(s.$$proto,[s].concat(r));!function(n,r){var s,c,l,u,_,f,p,d,v,h=i(n,"ReactAPI"),y=(h.$$proto,[h].concat(r));e.const_set(y[0],"ATTRIBUTES",t(["accept","acceptCharset","accessKey","action","allowFullScreen","allowTransparency","alt","async","autoComplete","autoPlay","cellPadding","cellSpacing","charSet","checked","classID","className","cols","colSpan","content","contentEditable","contextMenu","controls","coords","crossOrigin","data","dateTime","defer","dir","disabled","download","draggable","encType","form","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","height","hidden","href","hrefLang","htmlFor","httpEquiv","icon","id","label","lang","list","loop","manifest","marginHeight","marginWidth","max","maxLength","media","mediaGroup","method","min","multiple","muted","name","noValidate","open","pattern","placeholder","poster","preload","radioGroup","readOnly","rel","required","role","rows","rowSpan","sandbox","scope","scrolling","seamless","selected","shape","size","sizes","span","spellCheck","src","srcDoc","srcSet","start","step","style","tabIndex","target","title","type","useMap","value","width","wmode","dangerouslySetInnerHTML"],["clipPath","cx","cy","d","dx","dy","fill","fillOpacity","fontFamily","fontSize","fx","fy","gradientTransform","gradientUnits","markerEnd","markerMid","markerStart","offset","opacity","patternContentUnits","patternUnits","points","preserveAspectRatio","r","rx","ry","spreadMethod","stopColor","stopOpacity","stroke","strokeDasharray","strokeLinecap","strokeOpacity","strokeWidth","textAnchor","transform","version","viewBox","x1","x2","x","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlSpace","y1","y2","y"])),e.const_set(y[0],"HASH_ATTRIBUTES",["data","aria"]),e.const_set(y[0],"HTML_TAGS",e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(y,"Hyperstack"),"Internal"),"Component"),"Tags"),"HTML_TAGS")),e.defs(h,"$html_tag?",s=function(t){var n=a;n=e.const_get_relative(y,"HTML_TAGS");for(var r=0;r<n.length;r++)if(n[r]===t)return!0;return!1},s.$$arity=1),e.defs(h,"$html_attr?",c=function(t){var n=a;n=e.const_get_relative(y,"ATTRIBUTES");for(var r=0;r<n.length;r++)if(n[r]===t)return!0;return!1},c.$$arity=1),e.defs(h,"$create_element",l=function(t){var n,r=l.$$p,i=r||a,$=arguments.length,s=$-1;s<0&&(s=0),n=new Array(s);for(var c=1;c<$;c++)n[c-1]=arguments[c];return r&&(l.$$p=null),o(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(y,"Hyperstack"),"Internal"),"Component"),"ReactWrapper"),"create_element",[t].concat(e.to_a(n)),i.$to_proc())},l.$$arity=-2),e.defs(h,"$render",u=function(t,n){var r=this,i=u.$$p,o=i||a,s=a,c=a;return i&&(u.$$p=null),$("undefined"==typeof ReactDOM)&&r.$raise("ReactDOM.render is not defined.  In React >= v15 you must import it with ReactDOM"),n=n.$$class?n[0]:n,o!==a?(s=function(){setTimeout(function(){e.yieldX(o,[])},0)},c=ReactDOM.render(t.$to_n(),n,s)):c=ReactDOM.render(t.$to_n(),n),$(null!==c)?$(c.__opalInstance!==undefined&&null!==c.__opalInstance)?c.__opalInstance:$(ReactDOM.findDOMNode!==undefined&&c.nodeType===undefined)?ReactDOM.findDOMNode(c):c:a},u.$$arity=2),e.defs(h,"$is_valid_element",_=function(t){var n
;return console.error("Warning: `is_valid_element` is deprecated in favor of `is_valid_element?`."),$(n=t["$kind_of?"](e.const_get_qualified(e.const_get_qualified(e.const_get_relative(y,"Hyperstack"),"Component"),"Element")))?React.isValidElement(t.$to_n()):n},_.$$arity=1),e.defs(h,"$is_valid_element?",f=function(t){var n;return $(n=t["$kind_of?"](e.const_get_qualified(e.const_get_qualified(e.const_get_relative(y,"Hyperstack"),"Component"),"Element")))?React.isValidElement(t.$to_n()):n},f.$$arity=1),e.defs(h,"$render_to_string",p=function(t){var n,r=this;return console.error("Warning: `Hyperstack::Component::ReactAPI.render_to_string` is deprecated in favor of `React::Server.render_to_string`."),$(("undefined"==typeof ReactDOMServer)["$!"]())?o(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(y,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"build",[],((n=function(){n.$$s;return ReactDOMServer.renderToString(t.$to_n())}).$$s=r,n.$$arity=0,n)):r.$raise("renderToString is not defined.  In React >= v15 you must import it with ReactDOMServer")},p.$$arity=1),e.defs(h,"$render_to_static_markup",d=function(t){var n,r=this;return console.error("Warning: `Hyperstack::Component::ReactAPI.render_to_static_markup` is deprecated in favor of `React::Server.render_to_static_markup`."),$(("undefined"==typeof ReactDOMServer)["$!"]())?o(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(y,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"build",[],((n=function(){n.$$s;return ReactDOMServer.renderToStaticMarkup(t.$to_n())}).$$s=r,n.$$arity=0,n)):r.$raise("renderToStaticMarkup is not defined.  In React >= v15 you must import it with ReactDOMServer")},d.$$arity=1),e.defs(h,"$unmount_component_at_node",v=function(e){var t=this;return $(("undefined"==typeof ReactDOM)["$!"]())?ReactDOM.unmountComponentAtNode(e.$$class?e[0]:e):t.$raise("unmountComponentAtNode is not defined.  In React >= v15 you must import it with ReactDOM")},v.$$arity=1)}(c[0],c)}(c[0],c)}(r[0],r)},Opal.modules["hyperstack/internal/component/top_level_rails_component"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.send;return e.add_stubs(["$include","$export_component","$param","$backtrace","$top_level_render","$start_with?","$<<","$const_get","$each","$search_path","$class","$name","$!=","$method_defined?","$render","$raise","$join","$search_path=","$-","$!","$include?","$add_to_react_search_path"]),function(t,n){var s=a(t,"Hyperstack"),c=(s.$$proto,[s].concat(n));!function(t,n){var s=a(t,"Internal"),c=(s.$$proto,[s].concat(n));!function(t,n){var s=a(t,"Component"),c=(s.$$proto,[s].concat(n));!function(t,$super,n){function a(){}var s,c,l,u,_=a=i(t,null,"TopLevelRailsComponent",a),f=_.$$proto,p=[_].concat(n);f.ComponentName=f.RenderParams=f.Controller=r,_.$include(e.const_get_qualified(e.const_get_relative(p,"Hyperstack"),"Component")),e.defs(_,"$search_path",s=function(){var t,n=this;return null==n.search_path&&(n.search_path=r),n.search_path=o(t=n.search_path)?t:[e.const_get_relative(p,"Object")]},s.$$arity=0),_.$export_component(),_.$param("component_name"),_.$param("controller"),_.$param("render_params"),_.$backtrace("off"),e.defs(_,"$allow_deprecated_render_definition?",c=function(){return!0},c.$$arity=0),e.defn(_,"$render",l=function(){return this.$top_level_render()},l.$$arity=0),e.defn(_,"$top_level_render",u=function(){var t,n,a,i=this,s=r,c=r;return s=[],c=r,o(i.ComponentName["$start_with?"]("::"))?(s["$<<"](i.ComponentName),c=function(){try{return e.const_get_relative(p,"Object").$const_get(i.ComponentName)}catch(t){if(!e.rescue(t,[e.const_get_relative(p,"NameError")]))throw t;try{return r}finally{e.pop_exception()}}}()):(function(){var n=e.new_brk();try{$(i.$class().$search_path(),"each",[],((t=function(a){var i=t.$$s||this;if(null==i.Controller&&(i.Controller=r),null==i.ComponentName&&(i.ComponentName=r),null==a&&(a=r),s["$<<"](a.$name()+"::"+i.Controller+"::"+i.ComponentName),c=function(){try{return a.$const_get(i.Controller,!1).$const_get(i.ComponentName,!1)}catch(t){if(!e.rescue(t,[e.const_get_relative(p,"NameError")]))throw t;try{return r}finally{e.pop_exception()}}}(),!o(c["$!="](r)))return r;e.brk(r,n)}).$$s=i,t.$$brk=n,t.$$arity=1,t))}catch(a){if(a===n)return a.$v;throw a}}(),o(c)||function(){var t=e.new_brk();try{$(i.$class().$search_path(),"each",[],((n=function(a){var i=n.$$s||this;if(null==i.ComponentName&&(i.ComponentName=r),null==a&&(a=r),s["$<<"](a.$name()+"::"+i.ComponentName),c=function(){try{return a.$const_get(i.ComponentName,!1)}catch(t){if(!e.rescue(t,[e.const_get_relative(p,"NameError")]))throw t;try{return r}finally{e.pop_exception()}}}(),!o(c["$!="](r)))return r;e.brk(r,t)}).$$s=i,n.$$brk=t,n.$$arity=1,n))}catch(a){if(a===t)return a.$v;throw a}}()),o(o(a=c)?c["$method_defined?"]("render"):a)?e.const_get_relative(p,"RenderingContext").$render(c,i.RenderParams):i.$raise("Could not find component class '"+i.ComponentName+"' for @Controller '"+i.Controller+"' in any component directory. Tried ["+s.$join(", ")+"]")},u.$$arity=0)}(c[0],0,c)}(c[0],c)}(c[0],c)}(n[0],n),function(n,$super,a){function s(){}var c,l=s=i(n,null,"Module",s),u=(l.$$proto,[l].concat(a));e.defn(l,"$add_to_react_search_path",c=function(n){var a=this,i=r;return null==n&&(n=r),o(n)?(i=[[a]],$(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Hyperstack"),"Internal"),"Component"),"TopLevelRailsComponent"),"search_path=",e.to_a(i)),i[t(i.length,1)]):o(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Hyperstack"),"Internal"),"Component"),"TopLevelRailsComponent").$search_path()["$include?"](a)["$!"]())?e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Hyperstack"),"Internal"),"Component"),"TopLevelRailsComponent").$search_path()["$<<"](a):r},c.$$arity=-1)}(n[0],0,n),function(e,t){var n=a(e,"Components");n.$$proto,[n].concat(t);n.$add_to_react_search_path()}(n[0],n)},Opal.modules["hyperstack/component/while_loading"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.hash2,i=e.truthy;return e.add_stubs(["$WhileLoadingWrapper","$!","$on_opal_client?"]),function(t,o){var $=r(t,"Hyperstack"),s=($.$$proto,[$].concat(o));!function(t,o){var $=r(t,"Component"),s=($.$$proto,[$].concat(o));!function(t,o){var $,s,c,l=r(t,"WhileLoading"),u=(l.$$proto,[l].concat(o));if(e.defn(l,"$__hyperstack_component_rescue_wrapper",$=function(t){var n=this;return e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Hyperstack"),"Internal"),"Component").$WhileLoadingWrapper(a(["child","children_elements"],{child:n,children_elements:t}))},$.$$arity=1),e.defn(l,"$resources_loading?",s=function(){var e=this;return null==e.__hyperstack_while_loading_waiting_on_resources&&(e.__hyperstack_while_loading_waiting_on_resources=n),e.__hyperstack_while_loading_waiting_on_resources},s.$$arity=0),e.defn(l,"$resources_loaded?",c=function(){var e=this;return null==e.__hyperstack_while_loading_waiting_on_resources&&(e.__hyperstack_while_loading_waiting_on_resources=n),e.__hyperstack_while_loading_waiting_on_resources["$!"]()},c.$$arity=0),i(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Hyperstack"),"Component"),"IsomorphicHelpers")["$on_opal_client?"]())){function _(e){e.message.match(/^Uncaught NotQuiet: /)&&e.preventDefault()}window.addEventListener("error",_)}}(s[0],s)}(s[0],s)}(t[0],t)},Opal.modules["hyperstack/component/free_render"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.send,i=e.truthy;return e.add_stubs(["$instance_eval","$const_defined?","$const_get","$is_a?","$method_defined?","$include?","$render","$to_proc","$hyperstack_component_original_meth_missing"]),function(t,o){var $=r(t,"Hyperstack"),s=($.$$proto,[$].concat(o));!function(t,o){var $=r(t,"Component"),s=($.$$proto,[$].concat(o));!function(t,o){var $,s=r(t,"FreeRender"),c=(s.$$proto,[s].concat(o));e.defs(s,"$included",$=function(t){var r,o=this;return a(t,"instance_eval",[],((r=function(){var t,o=r.$$s||this;return e.alias(o,"hyperstack_component_original_meth_missing","method_missing"),e.def(o,"$method_missing",t=function(r){var o,$,s,l,u=this,_=t.$$p,f=_||n,p=n,d=arguments.length,v=d-1;v<0&&(v=0),l=new Array(v);for(var h=1;h<d;h++)l[h-1]=arguments[h];return _&&(t.$$p=null),i(i(o=i($=u["$const_defined?"](r))?p=u.$const_get(r):$)?i($=i(s=p["$is_a?"](e.const_get_relative(c,"Class")))?p["$method_defined?"]("render"):s)?$:e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(c,"Hyperstack"),"Internal"),"Component"),"Tags"),"HTML_TAGS")["$include?"](p):o)?a(u,"render",[p].concat(e.to_a(l)),f.$to_proc()):a(u,"hyperstack_component_original_meth_missing",[r].concat(e.to_a(l)),f.$to_proc())},t.$$arity=-2),n&&"method_missing"}).$$s=o,r.$$arity=0,r))},$.$$arity=1)}(s[0],s)}(s[0],s)}(t[0],t)},Opal.modules["hyperstack/internal/component/rescue_wrapper"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send,$=e.hash2,s=e.truthy;return e.add_stubs(["$include","$param","$render","$call","$attr_accessor","$RescueMetaWrapper","$after_error","$after_error_args","$run_callback","$after_error_args=","$-","$raise","$force_update!"]),function(n,c){var l=a(n,"Hyperstack"),u=(l.$$proto,[l].concat(c));!function(n,c){var l=a(n,"Internal"),u=(l.$$proto,[l].concat(c));!function(n,c){var l=a(n,"Component"),u=(l.$$proto,[l].concat(c));!function(t,$super,n){function a(){}var $,s=a=i(t,null,"RescueMetaWrapper",a),c=(s.$$proto,[s].concat(n));s.$include(e.const_get_qualified(e.const_get_relative(c,"Hyperstack"),"Component")),s.$param("children_elements"),o(s,"render",[],(($=function(){var e=$.$$s||this;return null==e.ChildrenElements&&(e.ChildrenElements=r),e.ChildrenElements.$call()}).$$s=s,$.$$arity=0,$))}(u[0],0,u),function(n,$super,a){function c(){}var l,u,_=c=i(n,null,"RescueWrapper",c),f=(_.$$proto,[_].concat(a));(function(e,t){e.$$proto,[e].concat(t);e.$attr_accessor("after_error_args")})(e.get_singleton_class(_),f),_.$include(e.const_get_qualified(e.const_get_relative(f,"Hyperstack"),"Component")),_.$param("child"),_.$param("children_elements"),o(_,"render",[],((l=function(){var e=l.$$s||this;return null==e.ChildrenElements&&(e.ChildrenElements=r),e.$RescueMetaWrapper($(["children_elements"],{children_elements:e.ChildrenElements}))}).$$s=_,l.$$arity=0,l)),o(_,"after_error",[],((u=function(n,a){var i,$,c,l=u.$$s||this,_=r,p=r,d=r;return null==l.Child&&(l.Child=r),null==n&&(n=r),null==a&&(a=r),_=s(i=e.const_get_relative(f,"RescueWrapper").$after_error_args())?i:[n,a],$=o(l.Child,"run_callback",["__hyperstack_component_rescue_hook",p].concat(e.to_a(_)),((c=function(e){c.$$s;return null==e&&(e=r),e}).$$s=l,c.$$arity=1,c)),p=null==(i=e.to_ary($))[0]?r:i[0],s(p)||(d=[_],o(e.const_get_relative(f,"RescueWrapper"),"after_error_args=",e.to_a(d)),d[t(d.length,1)],l.$raise(n)),l.Child["$force_update!"]()}).$$s=_,u.$$arity=2,u))}(u[0],0,u)}(u[0],u)}(u[0],u)}(n[0],n)},Opal.modules["hyperstack/internal/component/while_loading_wrapper"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send,$=e.truthy,s=e.hash2;return e.add_stubs(["$render","$!","$quiet?","$raise_if_not_quiet=","$-","$instance_eval","$mutate","$RescueMetaWrapper","$before_mount","$rescues","$class","$instance_variable_set"]),function(n,c){var l=a(n,"Hyperstack"),u=(l.$$proto,[l].concat(c));!function(n,c){var l=a(n,"Internal"),u=(l.$$proto,[l].concat(c));!function(n,c){var l=a(n,"Component"),u=(l.$$proto,[l].concat(c));!function(n,$super,a){function c(){}var l,u,_=c=i(n,$super,"WhileLoadingWrapper",c),f=(_.$$proto,[_].concat(a));o(_,"render",[],((l=function(){var n,a,i=l.$$s||this,c=r;return null==i.waiting_on_resources&&(i.waiting_on_resources=r),null==i.Child&&(i.Child=r),null==i.ChildrenElements&&(i.ChildrenElements=r),$($(n=i.waiting_on_resources)?i["$quiet?"]()["$!"]():n)?(c=[!1],o(e.const_get_relative(f,"RenderingContext"),"raise_if_not_quiet=",e.to_a(c)),c[t(c.length,1)]):(i.waiting_on_resources=!1,o(i.Child,"instance_eval",[],((a=function(){var e=a.$$s||this;return null==e.__hyperstack_while_loading_waiting_on_resources&&(e.__hyperstack_while_loading_waiting_on_resources=r),$(e.__hyperstack_while_loading_waiting_on_resources)&&e.$mutate(),e.__hyperstack_while_loading_waiting_on_resources=!1}).$$s=i,a.$$arity=0,a)),c=[!0],o(e.const_get_relative(f,"RenderingContext"),"raise_if_not_quiet=",e.to_a(c)),c[t(c.length,1)]),i.$RescueMetaWrapper(s(["children_elements"],{children_elements:i.ChildrenElements}))}).$$s=_,l.$$arity=0,l)),o(_,"before_mount",[],((u=function(){var t,n=u.$$s||this,a=r;return null==n.Child&&(n.Child=r),a=n,o(n.Child.$class(),"rescues",[e.const_get_qualified(e.const_get_relative(f,"RenderingContext"),"NotQuiet")],((t=function(){var e=t.$$s||this;return a.$instance_variable_set("@waiting_on_resources",!0),e.__hyperstack_while_loading_waiting_on_resources=!0}).$$s=n,t.$$arity=0,t))}).$$s=_,u.$$arity=0,u))}(u[0],e.const_get_relative(u,"RescueWrapper"),u)}(u[0],u)}(u[0],u)}(n[0],n)},Opal.modules["hyperstack/component/version"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module);return function(t,r){var a=n(t,"Hyperstack"),i=(a.$$proto,[a].concat(r));!function(t,r){var a=n(t,"Component"),i=(a.$$proto,[a].concat(r));e.const_set(i[0],"VERSION","1.0.alpha1.5")}(i[0],i)}(t[0],t)},Opal.modules["hyper-component"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.hash2);return e.add_stubs(["$require","$import","$js_import","$=="]),t.$require("hyperstack/internal/component"),e.const_get_relative(n,"Hyperstack").$import("hyper-state"),e.const_get_relative(n,"Hyperstack").$js_import("react/react-source-browser",a(["client_only","defines"],{client_only:!0,defines:["ReactDOM","React"]})),e.const_get_relative(n,"Hyperstack").$js_import("react/react-source-server",a(["server_only","defines"],{server_only:!0,defines:"React"})),e.const_get_relative(n,"Hyperstack").$import("browser/delay",a(["client_only"],{client_only:!0})),e.const_get_relative(n,"Hyperstack").$js_import("react_ujs",a(["defines"],{defines:"ReactRailsUJS"})),e.const_get_relative(n,"Hyperstack").$import("hyper-component"),e.const_get_relative(n,"Hyperstack").$import("hyperstack/component/auto-import"),e.const_get_relative(n,"RUBY_ENGINE")["$=="]("opal")?(t.$require("hyperstack/internal/callbacks"),t.$require("hyperstack/internal/auto_unmount"),t.$require("native"),t.$require("hyperstack/state/observer"),t.$require("hyperstack/internal/component/validator"),t.$require("hyperstack/component/element"),t.$require("hyperstack/internal/component/react_wrapper"),t.$require("hyperstack/component"),t.$require("hyperstack/internal/component/should_component_update"),t.$require("hyperstack/internal/component/tags"),t.$require("hyperstack/component/event"),t.$require("hyperstack/internal/component/rendering_context"),t.$require("hyperstack/ext/component/object"),t.$require("hyperstack/ext/component/kernel"),t.$require("hyperstack/ext/component/number"),t.$require("hyperstack/ext/component/boolean"),t.$require("hyperstack/ext/component/array"),t.$require("hyperstack/ext/component/enumerable"),t.$require("hyperstack/component/isomorphic_helpers"),t.$require("hyperstack/component/react_api"),t.$require("hyperstack/internal/component/top_level_rails_component"),t.$require("hyperstack/component/while_loading"),t.$require("hyperstack/component/free_render"),t.$require("hyperstack/internal/component/rescue_wrapper"),t.$require("hyperstack/internal/component/while_loading_wrapper"),t.$require("hyperstack/component/version")):r},Opal.modules["hyperstack/component/auto-import"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.truthy,i=e.send,o=e.module;return e.add_stubs(["$==","$_reactrb_original_const_missing","$import_const_from_native","$raise","$_reactrb_import_component_class","$_reactrb_original_method_missing","$to_proc","$render"]),e.const_get_relative(t,"RUBY_ENGINE")["$=="]("opal")?(function(t,$super,o){function $(){}var s=$=r(t,null,"Object",$),c=(s.$$proto,[s].concat(o));(function(t,r){t.$$proto;var o,$,s,c=[t].concat(r);e.alias(t,"_reactrb_original_const_missing","const_missing"),e.alias(t,"_reactrb_original_method_missing","method_missing"),e.defn(t,"$const_missing",o=function(t){var r,i=this,o=n;try{return i.$_reactrb_original_const_missing(t)}catch($){if(!e.rescue($,[e.const_get_relative(c,"StandardError")]))throw $;o=$;try{return a(r=e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(c,"Hyperstack"),"Internal"),"Component"),"NativeLibrary").$import_const_from_native(e.const_get_relative(c,"Object"),t,!0))?r:i.$raise(o)}finally{e.pop_exception()}}},o.$$arity=1),e.defn(t,"$_reactrb_import_component_class",$=function(t){var n=this;return e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(c,"Hyperstack"),"Internal"),"Component"),"NativeLibrary").$import_const_from_native(n,t,!1)},$.$$arity=1),e.defn(t,"$method_missing",s=function(t){var r,o=this,$=s.$$p,l=$||n,u=n,_=arguments.length,f=_-1;f<0&&(f=0),r=new Array(f);for(var p=1;p<_;p++)r[p-1]=arguments[p];return $&&(s.$$p=null),u=o.$_reactrb_import_component_class(t),a(u)||i(o,"_reactrb_original_method_missing",[t].concat(e.to_a(r)),l.$to_proc()),i(e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(c,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",[u].concat(e.to_a(r)),l.$to_proc())},s.$$arity=-2)})(e.get_singleton_class(s),c)}(t[0],0,t),function(t,n){var a=o(t,"Hyperstack"),i=(a.$$proto,[a].concat(n));!function(t,n){var a=o(t,"Internal"),i=(a.$$proto,[a].concat(n));!function(t,n){var a=o(t,"Component"),i=(a.$$proto,[a].concat(n));!function(e,$super,t){function n(){}var a=n=r(e,$super,"NativeLibrary",n);a.$$proto,[a].concat(t)}(i[0],e.const_get_qualified(e.const_get_qualified(e.const_get_relative(i,"Hyperstack"),"Component"),"NativeLibrary"),i)}(i[0],i)}(i[0],i)}(t[0],t)):n},Opal.modules["hyperstack/internal/state/mapper"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.truthy,$=e.send;return e.add_stubs(["$+","$observed!","$class","$update_objects_to_observe","$-","$<<","$[]","$new_objects","$update_exclusions","$delay_updates?","$schedule_delayed_updater","$zero?","$key?","$current_observers","$each","$mutations","$remove_current_observers_and_objects","$delete","$[]=","$current_objects","$new","$raise","$empty?","$on_client?","$!=","$after","$run_delayed_updater","$observers_to_update","$include?","$tap"]),function(r,s){var c=i(r,"Hyperstack"),l=(c.$$proto,[c].concat(s));!function(r,s){var c=i(r,"Internal"),l=(c.$$proto,[c].concat(s));!function(r,s){var c=i(r,"State"),l=(c.$$proto,[c].concat(s));!function(r,s){var c=i(r,"Mapper"),l=(c.$$proto,[c].concat(s));c.rendering_level=0,function(r,i){r.$$proto;var s,c,l,u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E=[r].concat(i);e.defn(r,"$observing",s=function(r,i,$,c){var l,u,_=this,f=s.$$p,p=f||a,d=a,v=a;return null==_.current_observer&&(_.current_observer=a),null==_.immediate_update&&(_.immediate_update=a),null==_.rendering_level&&(_.rendering_level=a),f&&(s.$$p=null),function(){try{return d=[_.current_observer,_.immediate_update],_.current_observer=r,_.immediate_update=o(l=i)?r:l,o($)&&(_.rendering_level=t(_.rendering_level,1),_["$observed!"](r),_["$observed!"](r.$class())),v=e.yieldX(p,[]),o(c)&&_.$update_objects_to_observe(r),v}finally{u=d,l=e.to_ary(u),_.current_observer=null==l[0]?a:l[0],_.immediate_update=null==l[1]?a:l[1],o($)&&(_.rendering_level=n(_.rendering_level,1))}}()},s.$$arity=4),e.defn(r,"$observed!",c=function(e){var t=this;return null==t.current_observer&&(t.current_observer=a),o(t.current_observer)?(t.$new_objects()["$[]"](t.current_observer)["$<<"](e),o(t.$update_exclusions()["$[]"](e))?t.$update_exclusions()["$[]"](e)["$<<"](t.current_observer):a):a},c.$$arity=1),e.defn(r,"$mutated!",l=function(e){var t,n=this;return null==n.ignore_mutations&&(n.ignore_mutations=a),null==n.rendering_level&&(n.rendering_level=a),o(n.ignore_mutations)?a:o(n["$delay_updates?"](e))?n.$schedule_delayed_updater(e):o(n.rendering_level["$zero?"]())&&o(n.$current_observers()["$key?"](e))?$(n.$current_observers()["$[]"](e),"each",[],((t=function(n){t.$$s;return null==n&&(n=a),n.$mutations([e])}).$$s=n,t.$$arity=1,t)):a},l.$$arity=1),e.defn(r,"$observed?",u=function(e){return this.$current_observers()["$key?"](e)},u.$$arity=1),e.defn(r,"$bulk_update",_=function(){var t=this,n=_.$$p,r=n||a,i=a;return null==t.bulk_update_flag&&(t.bulk_update_flag=a),n&&(_.$$p=null),function(){try{return i=t.bulk_update_flag,t.bulk_update_flag=!0,e.yieldX(r,[])}finally{t.bulk_update_flag=i}}()},_.$$arity=0),e.defn(r,"$ignore_bulk_updates",f=function(){var t,n=this,r=f.$$p,i=r||a,o=a;null==n.ignore_bulk_update_flag&&(n.ignore_bulk_update_flag=a);var $=arguments.length,s=$-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<$;c++)t[c-0]=arguments[c];return r&&(f.$$p=null),function(){try{return o=n.ignore_bulk_update_flag,n.ignore_bulk_update_flag=!0,e.yieldX(i,e.to_a(t))}finally{n.ignore_bulk_update_flag=o}}()},f.$$arity=-1),e.defn(r,"$ignore_mutations",p=function(){var t=this,n=p.$$p,r=n||a,i=a;return null==t.ignore_mutations&&(t.ignore_mutations=a),n&&(p.$$p=null),function(){try{return i=t.ignore_mutations,t.ignore_mutations=!0,e.yieldX(r,[])}finally{t.ignore_mutations=i}}()},p.$$arity=0),e.defn(r,"$update_objects_to_observe",d=function(t){var r,i=this,s=a,c=a;return null==i.current_observer&&(i.current_observer=a),null==t&&(t=i.current_observer),i.$remove_current_observers_and_objects(t),s=i.$new_objects().$delete(t),o(s)&&$(s,"each",[],((r=function(e){var n=r.$$s||this;return null==e&&(e=a),n.$current_observers()["$[]"](e)["$<<"](t)}).$$s=i,r.$$arity=1,r)),c=[t,s],$(i.$current_objects(),"[]=",e.to_a(c)),c[n(c.length,1)]},d.$$arity=-1),e.defn(r,"$remove",v=function(e){var t=this;return null==t.removed_observers&&(t.removed_observers=a),null==t.current_observer&&(t.current_observer=a),null==e&&(e=t.current_observer),t.$remove_current_observers_and_objects(e),t.$new_objects().$delete(e),o(t.removed_observers)?t.removed_observers["$<<"](e):a},v.$$arity=-1),e.defn(r,"$new_objects",h=function(){var t,r,i=this;return null==i.new_objects&&(i.new_objects=a),i.new_objects=o(t=i.new_objects)?t:$(e.const_get_relative(E,"Hash"),"new",[],((r=function(t,i){r.$$s;var o=a;return null==t&&(t=a),null==i&&(i=a),o=[i,e.const_get_relative(E,"Set").$new()],$(t,"[]=",e.to_a(o)),o[n(o.length,1)]}).$$s=i,r.$$arity=2,r))},h.$$arity=0),e.defn(r,"$current_observers",y=function(){var t,r,i=this;return null==i.current_observers&&(i.current_observers=a),i.current_observers=o(t=i.current_observers)?t:$(e.const_get_relative(E,"Hash"),"new",[],((r=function(t,i){r.$$s;var o=a;return null==t&&(t=a),null==i&&(i=a),o=[i,[]],$(t,"[]=",e.to_a(o)),o[n(o.length,1)]}).$$s=i,r.$$arity=2,r))},y.$$arity=0),e.defn(r,"$current_objects",m=function(){var t,r,i=this;return null==i.current_objects&&(i.current_objects=a),i.current_objects=o(t=i.current_objects)?t:$(e.const_get_relative(E,"Hash"),"new",[],((r=function(t,i){r.$$s;var o=a;return null==t&&(t=a),null==i&&(i=a),o=[i,[]],$(t,"[]=",e.to_a(o)),o[n(o.length,1)]}).$$s=i,r.$$arity=2,r))},m.$$arity=0),e.defn(r,"$update_exclusions",g=function(){var t,n=this;return null==n.update_exclusions&&(n.update_exclusions=a),n.update_exclusions=o(t=n.update_exclusions)?t:e.const_get_relative(E,"Hash").$new()},g.$$arity=0),e.defn(r,"$remove_current_observers_and_objects",b=function(e){var t,n=this,r=a;return o(e)||n.$raise("state management called outside of watch block"),r=n.$current_objects().$delete(e),o(r)?$(r,"each",[],((t=function(n){var r=t.$$s||this;return null==n&&(n=a),o(r.$current_observers()["$key?"](n))?(r.$current_observers()["$[]"](n).$delete(e),o(r.$current_observers()["$[]"](n)["$empty?"]())?r.$current_observers().$delete(n):a):a}).$$s=n,t.$$arity=1,t)):a},b.$$arity=1),e.defn(r,"$delay_updates?",w=function(t){var n,r=this;return null==r.ignore_bulk_update_flag&&(r.ignore_bulk_update_flag=a),null==r.bulk_update_flag&&(r.bulk_update_flag=a),null==r.immediate_update&&(r.immediate_update=a),null==r.current_observer&&(r.current_observer=a),!o(r.ignore_bulk_update_flag)&&(!!o(r.bulk_update_flag)||!!o(e.const_get_relative(E,"Hyperstack")["$on_client?"]())&&(o(n=r.immediate_update["$!="](r.current_observer))?n:r.current_observer["$!="](t)))},w.$$arity=1),e.defn(r,"$schedule_delayed_updater",k=function(t){var r,i,s=this,c=a;return null==s.delayed_updater&&(s.delayed_updater=a),c=[t,e.const_get_relative(E,"Set").$new()],$(s.$update_exclusions(),"[]=",e.to_a(c)),c[n(c.length,1)],s.delayed_updater=o(r=s.delayed_updater)?r:$(s,"after",[0],((i=function(){return(i.$$s||this).$run_delayed_updater()}).$$s=s,i.$$arity=0,i))},k.$$arity=1),e.defn(r,"$run_delayed_updater",O=function(){var t,n=this,r=a;return null==n.update_exclusions&&(n.update_exclusions=a),function(){try{return r=n.update_exclusions,n.update_exclusions=n.delayed_updater=a,n.removed_observers=e.const_get_relative(E,"Set").$new(),$(n.$observers_to_update(r),"each",[],((t=function(e,n){var r=t.$$s||this;return null==r.removed_observers&&(r.removed_observers=a),null==e&&(e=a),null==n&&(n=a),o(r.removed_observers["$include?"](e))?a:e.$mutations(n)}).$$s=n,t.$$arity=2,t))}finally{n.removed_observers=a}}()},O.$$arity=0),e.defn(r,"$observers_to_update",q=function(t){var r,i,s=this;return $($(e.const_get_relative(E,"Hash"),"new",[],((r=function(t,i){r.$$s;var o=a;return null==t&&(t=a),null==i&&(i=a),o=[i,e.const_get_relative(E,"Array").$new()],$(t,"[]=",e.to_a(o)),o[n(o.length,1)]}).$$s=s,r.$$arity=2,r)),"tap",[],((i=function(e){var n,r=i.$$s||this;return null==e&&(e=a),$(t,"each",[],((n=function(t,r){var i,s=n.$$s||this;return null==t&&(t=a),null==r&&(r=a),o(s.$current_observers()["$key?"](t))?$(s.$current_observers()["$[]"](t),"each",[],((i=function(n){i.$$s;return null==n&&(n=a),o(r["$include?"](n))?a:e["$[]"](n)["$<<"](t)}).$$s=s,i.$$arity=1,i)):a}).$$s=r,n.$$arity=2,n))}).$$s=s,i.$$arity=1,i))},q.$$arity=1)}(e.get_singleton_class(c),l)}(l[0],l)}(l[0],l)}(l[0],l)}(r[0],r)},Opal.modules["hyperstack/internal/state/variable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.truthy,o=e.send;return e.add_stubs(["$new","$[]=","$-","$[]","$legacy_map","$observed!","$object_id","$mutated!","$observed?"]),function(n,$){var s=a(n,"Hyperstack"),c=(s.$$proto,[s].concat($));!function(n,$){var s=a(n,"Internal"),c=(s.$$proto,[s].concat($));!function(n,$){var s=a(n,"State"),c=(s.$$proto,[s].concat($));!function(n,$){var s=a(n,"Variable"),c=(s.$$proto,[s].concat($));!function(n,a){n.$$proto;var $,s,c,l,u=[n].concat(a);e.defn(n,"$legacy_map",$=function(){var n,a,$=this;return null==$.legacy_map&&($.legacy_map=r),$.legacy_map=i(n=$.legacy_map)?n:o(e.const_get_relative(u,"Hash"),"new",[],((a=function(n,i){var $,s=a.$$s||this,c=r;return null==n&&(n=r),null==i&&(i=r),c=[i,o(e.const_get_relative(u,"Hash"),"new",[],($=function(n,a){$.$$s;return null==n&&(n=r),null==a&&(a=r),c=[a,e.const_get_relative(u,"Array").$new()],o(n,"[]=",e.to_a(c)),c[t(c.length,1)]},$.$$s=s,$.$$arity=2,$))],o(n,"[]=",e.to_a(c)),c[t(c.length,1)]}).$$s=$,a.$$arity=2,a))},$.$$arity=0),e.defn(n,"$get",s=function(t,n){var a=r;return a=this.$legacy_map()["$[]"](t)["$[]"](n),e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Hyperstack"),"Internal"),"State"),"Mapper")["$observed!"](a.$object_id()),a["$[]"](0)},s.$$arity=2),e.defn(n,"$set",c=function(n,a,i){var $=r,s=r;return $=this.$legacy_map()["$[]"](n)["$[]"](a),s=[0,i],o($,"[]=",e.to_a(s)),s[t(s.length,1)],e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Hyperstack"),"Internal"),"State"),"Mapper")["$mutated!"]($.$object_id()),i},c.$$arity=3),e.defn(n,"$observed?",l=function(t,n){var a=r;return a=this.$legacy_map()["$[]"](t)["$[]"](n),e.const_get_qualified(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(u,"Hyperstack"),"Internal"),"State"),"Mapper")["$observed?"](a.$object_id())},l.$$arity=2)}(e.get_singleton_class(s),c)}(c[0],c)}(c[0],c)}(c[0],c)}(n[0],n)},Opal.modules["hyperstack/internal/receiver"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.truthy,i=e.send;return e.add_stubs(["$respond_to?","$unmounted?","$format_callback","$each","$on_dispatch","$call","$<<","$[]","$objects_to_unmount","$is_a?","$last","$pop","$lambda","$send","$empty?","$raise"]),function(t,o){var $=r(t,"Hyperstack"),s=($.$$proto,[$].concat(o));!function(t,o){var $=r(t,"Internal"),s=($.$$proto,[$].concat(o));!function(t,o){var $=r(t,"Receiver"),s=($.$$proto,[$].concat(o));!function(t,r){t.$$proto;var o,$,s=[t].concat(r);e.defn(t,"$mount",o=function(t){var r,$,c,l=this,u=o.$$p,_=u||n,f=n,p=arguments.length,d=p-1;d<0&&(d=0),c=new Array(d);for(var v=1;v<p;v++)c[v-1]=arguments[v];return u&&(o.$$p=null),a(a(r=t["$respond_to?"]("unmounted?"))?t["$unmounted?"]():r)?n:(f=l.$format_callback(t,c),i(c,"each",[],(($=function(r){var o,c=$.$$s||this,l=n;return null==r&&(r=n),l=i(r,"on_dispatch",[],((o=function(t){o.$$s;return null==t&&(t=n),a(f)&&f.$call(t),a(_)?e.yield1(_,t):n}).$$s=c,o.$$arity=1,o)),a(t["$respond_to?"]("unmount"))?e.const_get_relative(s,"AutoUnmount").$objects_to_unmount()["$[]"](t)["$<<"](l):n}).$$s=l,$.$$arity=1,$)))},o.$$arity=-2),e.defn(t,"$format_callback",$=function(t,r){var o,$=this,c=n,l=n,u=n;return c=a(r.$last()["$is_a?"](e.const_get_relative(s,"Symbol")))?(l=r.$pop(),i($,"lambda",[],((o=function(){o.$$s;var n,r=arguments.length,a=r-0;a<0&&(a=0),n=new Array(a);for(var $=0;$<r;$++)n[$-0]=arguments[$];return i(t,"send",[""+l].concat(e.to_a(n)))}).$$s=$,o.$$arity=-1,o))):a(r.$last()["$is_a?"](e.const_get_relative(s,"Proc")))?r.$pop():n,a(r["$empty?"]())?(u="At least one operation must be passed in to the 'receives' macro",$.$raise(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(s,"Legacy"),"Store"),"InvalidOperationError"),u)):c},$.$$arity=2)}(e.get_singleton_class($),s)}(s[0],s)}(s[0],s)}(t[0],t)},Opal.modules["hyperstack/state/observable"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.send,i=e.truthy;return e.add_stubs(["$bulk_update","$to_proc","$include","$each","$send","$mount","$call","$last","$observed!","$mutated!","$instance_variable_set","$!","$instance_variable_get","$==","$naming_convention","$!~","$!=","$lambda","$mutate","$singleton_class","$define_method","$tap","$instance_exec","$state_reader","$state_writer"]),function(t,o){var $=r(t,"Hyperstack"),s=($.$$proto,[$].concat(o));!function(t,o){var $=r(t,"State"),s=($.$$proto,[$].concat(o));!function(t,o){var $,s,c=r(t,"Observable"),l=(c.$$proto,[c].concat(o));e.defs(c,"$bulk_update",$=function(){var t=$.$$p,r=t||n;return t&&($.$$p=null),a(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(l,"Internal"),"State"),"Mapper"),"bulk_update",[],r.$to_proc())},$.$$arity=0),e.defs(c,"$included",s=function(t){var r,o=this;return t.$include(e.const_get_qualified(e.const_get_relative(l,"Internal"),"AutoUnmount")),a(["singleton_method","method"],"each",[],((r=function(o){var $,s,c,u,_,f,p,d,v,h,y=r.$$s||this;return null==o&&(o=n),a(t,"send",["define_"+o,"receives"],(($=function(){var t,r,i=$.$$s||this;(t=$.$$p||n)&&($.$$p=null);var o=arguments.length,s=o-0;s<0&&(s=0),r=new Array(s);for(var c=0;c<o;c++)r[c-0]=arguments[c];return a(e.const_get_qualified(e.const_get_relative(l,"Internal"),"Receiver"),"mount",[i].concat(e.to_a(r)),t.$to_proc())}).$$s=y,$.$$arity=-1,$)),a(t,"send",["define_"+o,"observe"],((s=function(){var t,r,a,o,$=s.$$s||this,c=n;(t=s.$$p||n)&&(s.$$p=null);var u=arguments.length,_=u-0;_<0&&(_=0),r=new Array(_);for(var f=0;f<u;f++)r[f-0]=arguments[f];return c=i(a=i(o=t)?t.$call():o)?a:r.$last(),e.const_get_qualified(e.const_get_qualified(e.const_get_relative(l,"Internal"),"State"),"Mapper")["$observed!"]($),c}).$$s=y,s.$$arity=-1,s)),a(t,"send",["define_"+o,"mutate"],((c=function(){var t,r,a,o,$=c.$$s||this,s=n;(t=c.$$p||n)&&(c.$$p=null);var u=arguments.length,_=u-0;_<0&&(_=0),r=new Array(_);for(var f=0;f<u;f++)r[f-0]=arguments[f]
;return s=i(a=i(o=t)?t.$call():o)?a:r.$last(),e.const_get_qualified(e.const_get_qualified(e.const_get_relative(l,"Internal"),"State"),"Mapper")["$mutated!"]($),s}).$$s=y,c.$$arity=-1,c)),a(t,"send",["define_"+o,"toggle"],((u=function(t){var r=u.$$s||this,a=n;return null==t&&(t=n),t="@"+t,a=r.$instance_variable_set(t,r.$instance_variable_get(t)["$!"]()),e.const_get_qualified(e.const_get_qualified(e.const_get_relative(l,"Internal"),"State"),"Mapper")["$mutated!"](r),a}).$$s=y,u.$$arity=1,u)),e.const_get_relative(l,"RUBY_ENGINE")["$=="]("opal")&&a(t,"send",["define_"+o,"set"],((_=function(t){var r,o,$=_.$$s||this,s=n;return null==t&&(t=n),e.const_get_relative(l,"Hyperstack").$naming_convention()["$=="]("prefix_state")?i(t["$!~"](/^_/))&&(t="_"+t):i(i(r=e.const_get_relative(l,"Hyperstack").$naming_convention()["$!="]("none"))?t["$!~"](/^[a-z]/):r)&&(s=!0),a($,"lambda",[],((o=function(e){var r=o.$$s||this;return null==e&&(e=n),r[t]=e,i(s)?n:r.$mutate()}).$$s=$,o.$$arity=1,o))}).$$s=y,_.$$arity=1,_)),a(t.$singleton_class(),"send",["define_"+o,"observer"],((f=function(t){var r,i,o=f.$$s||this;return(r=f.$$p||n)&&(f.$$p=null),null==t&&(t=n),a(o,"define_method",[t],((i=function(){var t,n,o=i.$$s||this,$=arguments.length,s=$-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<$;c++)t[c-0]=arguments[c];return a(a(o,"instance_exec",e.to_a(t),r.$to_proc()),"tap",[],((n=function(){var t=n.$$s||this;return e.const_get_qualified(e.const_get_qualified(e.const_get_relative(l,"Internal"),"State"),"Mapper")["$observed!"](t)}).$$s=o,n.$$arity=0,n))}).$$s=o,i.$$arity=-1,i))}).$$s=y,f.$$arity=1,f)),a(t.$singleton_class(),"send",["define_"+o,"mutator"],((p=function(t){var r,i,o=p.$$s||this;return(r=p.$$p||n)&&(p.$$p=null),null==t&&(t=n),a(o,"define_method",[t],((i=function(){var t,n,o=i.$$s||this,$=arguments.length,s=$-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<$;c++)t[c-0]=arguments[c];return a(a(o,"instance_exec",e.to_a(t),r.$to_proc()),"tap",[],((n=function(){var t=n.$$s||this;return e.const_get_qualified(e.const_get_qualified(e.const_get_relative(l,"Internal"),"State"),"Mapper")["$mutated!"](t)}).$$s=o,n.$$arity=0,n))}).$$s=o,i.$$arity=-1,i))}).$$s=y,p.$$arity=1,p)),a(t.$singleton_class(),"send",["define_"+o,"state_reader"],((d=function(){var t,r,o=d.$$s||this,$=arguments.length,s=$-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<$;c++)t[c-0]=arguments[c];return a(t,"each",[],((r=function(t){var o,$=r.$$s||this,s=n;return null==t&&(t=n),s=i(e.const_get_relative(l,"Hyperstack").$naming_convention()["$=="]("prefix_state")?t["$!~"](/^_/):e.const_get_relative(l,"Hyperstack").$naming_convention()["$=="]("prefix_state"))?"_"+t:t,a($,"define_method",[t],((o=function(){var t,n=o.$$s||this;return a(n.$instance_variable_get("@"+s),"tap",[],((t=function(){var n=t.$$s||this;return e.const_get_qualified(e.const_get_qualified(e.const_get_relative(l,"Internal"),"State"),"Mapper")["$observed!"](n)}).$$s=n,t.$$arity=0,t))}).$$s=$,o.$$arity=0,o))}).$$s=o,r.$$arity=1,r))}).$$s=y,d.$$arity=-1,d)),a(t.$singleton_class(),"send",["define_"+o,"state_writer"],((v=function(){var t,r,o=v.$$s||this,$=arguments.length,s=$-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<$;c++)t[c-0]=arguments[c];return a(t,"each",[],((r=function(t){var o,$=r.$$s||this,s=n;return null==t&&(t=n),s=i(e.const_get_relative(l,"Hyperstack").$naming_convention()["$=="]("prefix_state")?t["$!~"](/^_/):e.const_get_relative(l,"Hyperstack").$naming_convention()["$=="]("prefix_state"))?"_"+t:t,a($,"define_method",[t+"="],((o=function(t){var r,i=o.$$s||this;return null==t&&(t=n),a(i.$instance_variable_set("@"+s,t),"tap",[],((r=function(){var t=r.$$s||this;return e.const_get_qualified(e.const_get_qualified(e.const_get_relative(l,"Internal"),"State"),"Mapper")["$mutated!"](t)}).$$s=i,r.$$arity=0,r))}).$$s=$,o.$$arity=1,o))}).$$s=o,r.$$arity=1,r))}).$$s=y,v.$$arity=-1,v)),a(t.$singleton_class(),"send",["define_"+o,"state_accessor"],((h=function(){var t,n=h.$$s||this,r=arguments.length,i=r-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<r;o++)t[o-0]=arguments[o];return a(n,"state_reader",e.to_a(t)),a(n,"state_writer",e.to_a(t))}).$$s=y,h.$$arity=-1,h))}).$$s=o,r.$$arity=1,r))},s.$$arity=1)}(s[0],s)}(s[0],s)}(t[0],t)},Opal.modules["hyperstack/state/version"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module);return function(t,r){var a=n(t,"Hyperstack"),i=(a.$$proto,[a].concat(r));!function(t,r){var a=n(t,"State"),i=(a.$$proto,[a].concat(r));e.const_set(i[0],"VERSION","1.0.alpha1.5")}(i[0],i)}(t[0],t)},Opal.modules["hyper-state"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.truthy);return e.add_stubs(["$require","$import","$!="]),t.$require("set"),t.$require("hyperstack-config"),e.const_get_relative(n,"Hyperstack").$import("hyper-state"),t.$require("hyperstack/internal/callbacks"),t.$require("hyperstack/internal/auto_unmount"),t.$require("hyperstack/internal/state/mapper"),t.$require("hyperstack/internal/state/variable"),t.$require("hyperstack/internal/auto_unmount"),t.$require("hyperstack/internal/receiver"),t.$require("hyperstack/state/observable"),t.$require("hyperstack/state/observer"),t.$require("hyperstack/state/version"),a(e.const_get_relative(n,"RUBY_ENGINE")["$!="]("opal")),r},Opal.modules["hyper-operation/version"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module),r=e.klass;return function(t,a){var i=n(t,"Hyperstack"),o=(i.$$proto,[i].concat(a));!function(t,$super,n){function a(){}var i=a=r(t,null,"Operation",a),o=(i.$$proto,[i].concat(n));e.const_set(o[0],"VERSION","1.0.alpha1.5")}(o[0],0,o)}(t[0],t)},Opal.modules.js=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.truthy;return e.add_stubs(["$insert","$<<","$global","$extend"]),function(t,i){var o,$,s,c,l,u,_,f,p,d=r(t,"JS");d.$$proto,[d].concat(i);e.defn(d,"$delete",o=function(e,t){return delete e[t]},o.$$arity=2),e.defn(d,"$global",$=function(){return e.global},$.$$arity=0),e.defn(d,"$in",s=function(e,t){return e in t},s.$$arity=2),e.defn(d,"$instanceof",c=function(e,t){return e instanceof t},c.$$arity=2),a("function"==typeof Function.prototype.bind)?e.defn(d,"$new",l=function(e){var t,r=l.$$p,i=r||n,o=arguments.length,$=o-1;$<0&&($=0),t=new Array($);for(var s=1;s<o;s++)t[s-1]=arguments[s];return r&&(l.$$p=null),t.$insert(0,this),a(i)&&t["$<<"](i),new(e.bind.apply(e,t))},l.$$arity=-2):e.defn(d,"$new",u=function(e){var t,r=u.$$p,i=r||n,o=n,$=arguments.length,s=$-1;s<0&&(s=0),t=new Array(s);for(var c=1;c<$;c++)t[c-1]=arguments[c];return r&&(u.$$p=null),a(i)&&t["$<<"](i),(o=function(){return e.apply(this,t)}).prototype=e.prototype,new o},u.$$arity=-2),e.defn(d,"$typeof",_=function(e){return typeof e},_.$$arity=1),e.defn(d,"$void",f=function(){},f.$$arity=1),e.defn(d,"$call",p=function(e){var t,r=this,i=p.$$p,o=i||n,$=n,s=arguments.length,c=s-1;c<0&&(c=0),t=new Array(c);for(var l=1;l<s;l++)t[l-1]=arguments[l];return i&&(p.$$p=null),$=r.$global(),a(o)&&t["$<<"](o),$[e].apply($,t)},p.$$arity=-2),e.alias(d,"method_missing","call"),d.$extend(d)}(t[0],t)},Opal.modules["bigdecimal/kernel"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$new"]),function(t,r){var a,i=n(t,"Kernel"),o=(i.$$proto,[i].concat(r));e.defn(i,"$BigDecimal",a=function(t,n){return null==n&&(n=0),e.const_get_relative(o,"BigDecimal").$new(t,n)},a.$$arity=-2)}(t[0],t)},Opal.modules["bigdecimal/bignumber"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.klass);return function(t,$super,r){function a(){}var i=a=n(t,null,"BigDecimal",a),o=(i.$$proto,[i].concat(r),function(t){e.const_set(i,"BigNumber",t())});o.amd=!0,function(e){"use strict";function t(e){function i(e,t){var n,r,a,$,s,c,l=this;if(!(l instanceof i))return F&&T(26,"constructor call without new",e),new i(e,t);if(null!=t&&W(t,2,64,D,"base")){if(c=e+"",10==(t|=0))return C(l=new i(e instanceof i?e:c),P+l.e+1,R);if(($="number"==typeof e)&&0*e!=0||!new RegExp("^-?"+(n="["+b.slice(0,t)+"]+")+"(?:\\."+n+")?$",37>t?"i":"").test(c))return p(l,c,$,t);$?(l.s=0>1/e?(c=c.slice(1),-1):1,F&&c.replace(/^0\.0*|\./,"").length>15&&T(D,g,e),$=!1):l.s=45===c.charCodeAt(0)?(c=c.slice(1),-1):1,c=o(c,10,t,l.s)}else{if(e instanceof i)return l.s=e.s,l.e=e.e,l.c=(e=e.c)?e.slice():e,void(D=0);if(($="number"==typeof e)&&0*e==0){if(l.s=0>1/e?(e=-e,-1):1,e===~~e){for(r=0,a=e;a>=10;a/=10,r++);return l.e=r,l.c=[e],void(D=0)}c=e+""}else{if(!d.test(c=e+""))return p(l,c,$);l.s=45===c.charCodeAt(0)?(c=c.slice(1),-1):1}}for((r=c.indexOf("."))>-1&&(c=c.replace(".","")),(a=c.search(/e/i))>0?(0>r&&(r=a),r+=+c.slice(a+1),c=c.substring(0,a)):0>r&&(r=c.length),a=0;48===c.charCodeAt(a);a++);for(s=c.length;48===c.charCodeAt(--s););if(c=c.slice(a,s+1))if(s=c.length,$&&F&&s>15&&T(D,g,l.s*e),(r=r-a-1)>U)l.c=l.e=null;else if(L>r)l.c=[l.e=0];else{if(l.e=r,l.c=[],a=(r+1)%k,0>r&&(a+=k),s>a){for(a&&l.c.push(+c.slice(0,a)),s-=k;s>a;)l.c.push(+c.slice(a,a+=k));c=c.slice(a),a=k-c.length}else a-=s;for(;a--;c+="0");l.c.push(+c)}else l.c=[l.e=0];D=0}function o(e,t,n,a){var o,$,s,l,_,f,p,d=e.indexOf("."),v=P,h=R;for(37>n&&(e=e.toLowerCase()),d>=0&&(s=K,K=0,e=e.replace(".",""),_=(p=new i(n)).pow(e.length-d),K=s,p.c=c(u(r(_.c),_.e),10,t),p.e=p.c.length),$=s=(f=c(e,n,t)).length;0==f[--s];f.pop());if(!f[0])return"0";if(0>d?--$:(_.c=f,_.e=$,_.s=a,f=(_=I(_,p,v,h,t)).c,l=_.r,$=_.e),d=f[o=$+v+1],s=t/2,l=l||0>o||null!=f[o+1],l=4>h?(null!=d||l)&&(0==h||h==(_.s<0?3:2)):d>s||d==s&&(4==h||l||6==h&&1&f[o-1]||h==(_.s<0?8:7)),1>o||!f[0])e=l?u("1",-v):"0";else{if(f.length=o,l)for(--t;++f[--o]>t;)f[o]=0,o||(++$,f.unshift(1));for(s=f.length;!f[--s];);for(d=0,e="";s>=d;e+=b.charAt(f[d++]));e=u(e,$)}return e}function A(e,t,n,a){var o,$,s,c,_;if(n=null!=n&&W(n,0,8,a,m)?0|n:R,!e.c)return e.toString();if(o=e.c[0],s=e.e,null==t)_=r(e.c),_=19==a||24==a&&j>=s?l(_,s):u(_,s);else if($=(e=C(new i(e),t,n)).e,c=(_=r(e.c)).length,19==a||24==a&&($>=t||j>=$)){for(;t>c;_+="0",c++);_=l(_,$)}else if(t-=s,_=u(_,$),$+1>c){if(--t>0)for(_+=".";t--;_+="0");}else if((t+=$-c)>0)for($+1==c&&(_+=".");t--;_+="0");return e.s<0&&o?"-"+_:_}function S(e,t){var n,r,a=0;for(s(e[0])&&(e=e[0]),n=new i(e[0]);++a<e.length;){if(!(r=new i(e[a])).s){n=r;break}t.call(n,r)&&(n=r)}return n}function M(e,t,n,r,a){return(t>e||e>n||e!=_(e))&&T(r,(a||"decimal places")+(t>e||e>n?" out of range":" not an integer"),e),!0}function N(e,t,n){for(var r=1,a=t.length;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,r++);return(n=r+n*k-1)>U?e.c=e.e=null:L>n?e.c=[e.e=0]:(e.e=n,e.c=t),e}function T(e,t,n){var r=new Error(["new BigNumber","cmp","config","div","divToInt","eq","gt","gte","lt","lte","minus","mod","plus","precision","random","round","shift","times","toDigits","toExponential","toFixed","toFormat","toFraction","pow","toPrecision","toString","BigNumber"][e]+"() "+t+": "+n);throw r.name="BigNumber Error",D=0,r}function C(e,t,n,r){var a,i,o,$,s,c,l,u=e.c,_=q;if(u){e:{for(a=1,$=u[0];$>=10;$/=10,a++);if(0>(i=t-a))i+=k,o=t,l=(s=u[c=0])/_[a-o-1]%10|0;else if((c=v((i+1)/k))>=u.length){if(!r)break e;for(;u.length<=c;u.push(0));s=l=0,a=1,o=(i%=k)-k+1}else{for(s=$=u[c],a=1;$>=10;$/=10,a++);l=0>(o=(i%=k)-k+a)?0:s/_[a-o-1]%10|0}if(r=r||0>t||null!=u[c+1]||(0>o?s:s%_[a-o-1]),r=4>n?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(i>0?o>0?s/_[a-o]:0:u[c-1])%10&1||n==(e.s<0?8:7)),1>t||!u[0])return u.length=0,r?(t-=e.e+1,u[0]=_[(k-t%k)%k],e.e=-t||0):u[0]=e.e=0,e;if(0==i?(u.length=c,$=1,c--):(u.length=c+1,$=_[k-i],u[c]=o>0?h(s/_[a-o]%_[o])*$:0),r)for(;;){if(0==c){for(i=1,o=u[0];o>=10;o/=10,i++);for(o=u[0]+=$,$=1;o>=10;o/=10,$++);i!=$&&(e.e++,u[0]==w&&(u[0]=1));break}if(u[c]+=$,u[c]!=w)break;u[c--]=0,$=1}for(i=u.length;0===u[--i];u.pop());}e.e>U?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}var I,D=0,H=i.prototype,z=new i(1),P=20,R=4,j=-7,B=21,L=-1e7,U=1e7,F=!0,W=M,Y=!1,G=1,K=100,X={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0};return i.another=t,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=function(){var e,t,n=0,r={},a=arguments,i=a[0],o=i&&"object"==typeof i?function(){return i.hasOwnProperty(t)?null!=(e=i[t]):void 0}:function(){return a.length>n?null!=(e=a[n++]):void 0};return o(t="DECIMAL_PLACES")&&W(e,0,x,2,t)&&(P=0|e),r[t]=P,o(t="ROUNDING_MODE")&&W(e,0,8,2,t)&&(R=0|e),r[t]=R,o(t="EXPONENTIAL_AT")&&(s(e)?W(e[0],-x,0,2,t)&&W(e[1],0,x,2,t)&&(j=0|e[0],B=0|e[1]):W(e,-x,x,2,t)&&(j=-(B=0|(0>e?-e:e)))),r[t]=[j,B],o(t="RANGE")&&(s(e)?W(e[0],-x,-1,2,t)&&W(e[1],1,x,2,t)&&(L=0|e[0],U=0|e[1]):W(e,-x,x,2,t)&&(0|e?L=-(U=0|(0>e?-e:e)):F&&T(2,t+" cannot be zero",e))),r[t]=[L,U],o(t="ERRORS")&&(e===!!e||1===e||0===e?(D=0,W=(F=!!e)?M:$):F&&T(2,t+y,e)),r[t]=F,o(t="CRYPTO")&&(e===!!e||1===e||0===e?(Y=!(!e||!f),e&&!Y&&F&&T(2,"crypto unavailable",f)):F&&T(2,t+y,e)),r[t]=Y,o(t="MODULO_MODE")&&W(e,0,9,2,t)&&(G=0|e),r[t]=G,o(t="POW_PRECISION")&&W(e,0,x,2,t)&&(K=0|e),r[t]=K,o(t="FORMAT")&&("object"==typeof e?X=e:F&&T(2,t+" not an object",e)),r[t]=X,r},i.max=function(){return S(arguments,H.lt)},i.min=function(){return S(arguments,H.gt)},i.random=function(){var e=9007199254740992,t=Math.random()*e&2097151?function(){return h(Math.random()*e)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var n,r,a,o,$,s=0,c=[],l=new i(z);if(e=null!=e&&W(e,0,x,14)?0|e:P,o=v(e/k),Y)if(f&&f.getRandomValues){for(n=f.getRandomValues(new Uint32Array(o*=2));o>s;)($=131072*n[s]+(n[s+1]>>>11))>=9e15?(r=f.getRandomValues(new Uint32Array(2)),n[s]=r[0],n[s+1]=r[1]):(c.push($%1e14),s+=2);s=o/2}else if(f&&f.randomBytes){for(n=f.randomBytes(o*=7);o>s;)($=281474976710656*(31&n[s])+1099511627776*n[s+1]+4294967296*n[s+2]+16777216*n[s+3]+(n[s+4]<<16)+(n[s+5]<<8)+n[s+6])>=9e15?f.randomBytes(7).copy(n,s):(c.push($%1e14),s+=7);s=o/7}else F&&T(14,"crypto unavailable",f);if(!s)for(;o>s;)9e15>($=t())&&(c[s++]=$%1e14);for(o=c[--s],e%=k,o&&e&&($=q[k-e],c[s]=h(o/$)*$);0===c[s];c.pop(),s--);if(0>s)c=[a=0];else{for(a=-1;0===c[0];c.shift(),a-=k);for(s=1,$=c[0];$>=10;$/=10,s++);k>s&&(a-=k-s)}return l.e=a,l.c=c,l}}(),I=function(){function e(e,t,n){var r,a,i,o,$=0,s=e.length,c=t%E,l=t/E|0;for(e=e.slice();s--;)$=((a=c*(i=e[s]%E)+(r=l*i+(o=e[s]/E|0)*c)%E*E+$)/n|0)+(r/E|0)+l*o,e[s]=a%n;return $&&e.unshift($),e}function t(e,t,n,r){var a,i;if(n!=r)i=n>r?1:-1;else for(a=i=0;n>a;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}return i}function r(e,t,n,r){for(var a=0;n--;)e[n]-=a,a=e[n]<t[n]?1:0,e[n]=a*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.shift());}return function(a,o,$,s,c){var l,u,_,f,p,d,v,y,m,g,b,O,q,E,x,A,S,M=a.s==o.s?1:-1,N=a.c,T=o.c;if(!(N&&N[0]&&T&&T[0]))return new i(a.s&&o.s&&(N?!T||N[0]!=T[0]:T)?N&&0==N[0]||!T?0*M:M/0:NaN);for(m=(y=new i(M)).c=[],M=$+(u=a.e-o.e)+1,c||(c=w,u=n(a.e/k)-n(o.e/k),M=M/k|0),_=0;T[_]==(N[_]||0);_++);if(T[_]>(N[_]||0)&&u--,0>M)m.push(1),f=!0;else{for(E=N.length,A=T.length,_=0,M+=2,(p=h(c/(T[0]+1)))>1&&(T=e(T,p,c),N=e(N,p,c),A=T.length,E=N.length),q=A,b=(g=N.slice(0,A)).length;A>b;g[b++]=0);(S=T.slice()).unshift(0),x=T[0],T[1]>=c/2&&x++;do{if(p=0,0>(l=t(T,g,A,b))){if(O=g[0],A!=b&&(O=O*c+(g[1]||0)),(p=h(O/x))>1)for(p>=c&&(p=c-1),v=(d=e(T,p,c)).length,b=g.length;1==t(d,g,v,b);)p--,r(d,v>A?S:T,v,c),v=d.length,l=1;else 0==p&&(l=p=1),v=(d=T.slice()).length;if(b>v&&d.unshift(0),r(g,d,b,c),b=g.length,-1==l)for(;t(T,g,A,b)<1;)p++,r(g,b>A?S:T,b,c),b=g.length}else 0===l&&(p++,g=[0]);m[_++]=p,g[0]?g[b++]=N[q]||0:(g=[N[q]],b=1)}while((q++<E||null!=g[0])&&M--);f=null!=g[0],m[0]||m.shift()}if(c==w){for(_=1,M=m[0];M>=10;M/=10,_++);C(y,$+(y.e=_+u*k-1)+1,s,f)}else y.e=u,y.r=+f;return y}}(),p=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,n=/^\.([^.]+)$/,r=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,$,s,c){var l,u=s?$:$.replace(a,"");if(r.test(u))o.s=isNaN(u)?null:0>u?-1:1;else{if(!s&&(u=u.replace(e,function(e,t,n){return l="x"==(n=n.toLowerCase())?16:"b"==n?2:8,c&&c!=l?e:t}),c&&(l=c,u=u.replace(t,"$1").replace(n,"0.$1")),$!=u))return new i(u,l);F&&T(D,"not a"+(c?" base "+c:"")+" number",$),o.s=null}o.c=o.e=null,D=0}}(),H.absoluteValue=H.abs=function(){var e=new i(this);return e.s<0&&(e.s=1),e},H.ceil=function(){return C(new i(this),this.e+1,2)},H.comparedTo=H.cmp=function(e,t){return D=1,a(this,new i(e,t))},H.decimalPlaces=H.dp=function(){var e,t,r=this.c;if(!r)return null;if(e=((t=r.length-1)-n(this.e/k))*k,t=r[t])for(;t%10==0;t/=10,e--);return 0>e&&(e=0),e},H.dividedBy=H.div=function(e,t){return D=3,I(this,new i(e,t),P,R)},H.dividedToIntegerBy=H.divToInt=function(e,t){return D=4,I(this,new i(e,t),0,1)},H.equals=H.eq=function(e,t){return D=5,0===a(this,new i(e,t))},H.floor=function(){return C(new i(this),this.e+1,3)},H.greaterThan=H.gt=function(e,t){return D=6,a(this,new i(e,t))>0},H.greaterThanOrEqualTo=H.gte=function(e,t){return D=7,1===(t=a(this,new i(e,t)))||0===t},H.isFinite=function(){return!!this.c},H.isInteger=H.isInt=function(){return!!this.c&&n(this.e/k)>this.c.length-2},H.isNaN=function(){return!this.s},H.isNegative=H.isNeg=function(){return this.s<0},H.isZero=function(){return!!this.c&&0==this.c[0]},H.lessThan=H.lt=function(e,t){return D=8,a(this,new i(e,t))<0},H.lessThanOrEqualTo=H.lte=function(e,t){return D=9,-1===(t=a(this,new i(e,t)))||0===t},H.minus=H.sub=function(e,t){var r,a,o,$,s=this,c=s.s;if(D=10,t=(e=new i(e,t)).s,!c||!t)return new i(NaN);if(c!=t)return e.s=-t,s.plus(e);var l=s.e/k,u=e.e/k,_=s.c,f=e.c;if(!l||!u){if(!_||!f)return _?(e.s=-t,e):new i(f?s:NaN);if(!_[0]||!f[0])return f[0]?(e.s=-t,e):new i(_[0]?s:3==R?-0:0)}if(l=n(l),u=n(u),_=_.slice(),c=l-u){for(($=0>c)?(c=-c,o=_):(u=l,o=f),o.reverse(),t=c;t--;o.push(0));o.reverse()}else for(a=($=(c=_.length)<(t=f.length))?c:t,c=t=0;a>t;t++)if(_[t]!=f[t]){$=_[t]<f[t];break}if($&&(o=_,_=f,f=o,e.s=-e.s),(t=(a=f.length)-(r=_.length))>0)for(;t--;_[r++]=0);for(t=w-1;a>c;){if(_[--a]<f[a]){for(r=a;r&&!_[--r];_[r]=t);--_[r],_[a]+=w}_[a]-=f[a]}for(;0==_[0];_.shift(),--u);return _[0]?N(e,_,u):(e.s=3==R?-1:1,e.c=[e.e=0],e)},H.modulo=H.mod=function(e,t){var n,r,a=this;return D=11,e=new i(e,t),!a.c||!e.s||e.c&&!e.c[0]?new i(NaN):!e.c||a.c&&!a.c[0]?new i(a):(9==G?(r=e.s,e.s=1,n=I(a,e,0,3),e.s=r,n.s*=r):n=I(a,e,0,G),a.minus(n.times(e)))},H.negated=H.neg=function(){var e=new i(this);return e.s=-e.s||null,e},H.plus=H.add=function(e,t){var r,a=this,o=a.s;if(D=12,t=(e=new i(e,t)).s,!o||!t)return new i(NaN);if(o!=t)return e.s=-t,a.minus(e);var $=a.e/k,s=e.e/k,c=a.c,l=e.c;if(!$||!s){if(!c||!l)return new i(o/0);if(!c[0]||!l[0])return l[0]?e:new i(c[0]?a:0*o)}if($=n($),s=n(s),c=c.slice(),o=$-s){for(o>0?(s=$,r=l):(o=-o,r=c),r.reverse();o--;r.push(0));r.reverse()}for(0>(o=c.length)-(t=l.length)&&(r=l,l=c,c=r,t=o),o=0;t;)o=(c[--t]=c[t]+l[t]+o)/w|0,c[t]%=w;return o&&(c.unshift(o),++s),N(e,c,s)},H.precision=H.sd=function(e){var t,n,r=this,a=r.c;if(null!=e&&e!==!!e&&1!==e&&0!==e&&(F&&T(13,"argument"+y,e),e!=!!e&&(e=null)),!a)return null;if(t=(n=a.length-1)*k+1,n=a[n]){for(;n%10==0;n/=10,t--);for(n=a[0];n>=10;n/=10,t++);}return e&&r.e+1>t&&(t=r.e+1),t},H.round=function(e,t){var n=new i(this);return(null==e||W(e,0,x,15))&&C(n,~~e+this.e+1,null!=t&&W(t,0,8,15,m)?0|t:R),n},H.shift=function(e){var t=this;return W(e,-O,O,16,"argument")?t.times("1e"+_(e)):new i(t.c&&t.c[0]&&(-O>e||e>O)?t.s*(0>e?0:1/0):t)},H.squareRoot=H.sqrt=function(){var e,t,a,o,$,s=this,c=s.c,l=s.s,u=s.e,_=P+4,f=new i("0.5");if(1!==l||!c||!c[0])return new i(!l||0>l&&(!c||c[0])?NaN:c?s:1/0);if(0==(l=Math.sqrt(+s))||l==1/0?(((t=r(c)).length+u)%2==0&&(t+="0"),l=Math.sqrt(t),u=n((u+1)/2)-(0>u||u%2),l==1/0?t="1e"+u:t=(t=l.toExponential()).slice(0,t.indexOf("e")+1)+u,a=new i(t)):a=new i(l+""),a.c[0])for(3>(l=(u=a.e)+_)&&(l=0);;)if($=a,a=f.times($.plus(I(s,$,_,1))),r($.c).slice(0,l)===(t=r(a.c)).slice(0,l)){if(a.e<u&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(o||"4999"!=t)){(!+t||!+t.slice(1)&&"5"==t.charAt(0))&&(C(a,a.e+P+2,1),e=!a.times(a).eq(s));break}if(!o&&(C($,$.e+P+2,0),$.times($).eq(s))){a=$;break}_+=4,l+=4,o=1}return C(a,a.e+P+1,R,e)},H.times=H.mul=function(e,t){var r,a,o,$,s,c,l,u,_,f,p,d,v,h,y,m=this,g=m.c,b=(D=17,e=new i(e,t)).c;if(!(g&&b&&g[0]&&b[0]))return!m.s||!e.s||g&&!g[0]&&!b||b&&!b[0]&&!g?e.c=e.e=e.s=null:(e.s*=m.s,g&&b?(e.c=[0],e.e=0):e.c=e.e=null),e;for(a=n(m.e/k)+n(e.e/k),e.s*=m.s,l=g.length,(f=b.length)>l&&(v=g,g=b,b=v,o=l,l=f,f=o),o=l+f,v=[];o--;v.push(0));for(h=w,y=E,o=f;--o>=0;){for(r=0,p=b[o]%y,d=b[o]/y|0,$=o+(s=l);$>o;)r=((u=p*(u=g[--s]%y)+(c=d*u+(_=g[s]/y|0)*p)%y*y+v[$]+r)/h|0)+(c/y|0)+d*_,v[$--]=u%h;v[$]=r}return r?++a:v.shift(),N(e,v,a)},H.toDigits=function(e,t){var n=new i(this);return e=null!=e&&W(e,1,x,18,"precision")?0|e:null,t=null!=t&&W(t,0,8,18,m)?0|t:R,e?C(n,e,t):n},H.toExponential=function(e,t){return A(this,null!=e&&W(e,0,x,19)?1+~~e:null,t,19)},H.toFixed=function(e,t){return A(this,null!=e&&W(e,0,x,20)?~~e+this.e+1:null,t,20)},H.toFormat=function(e,t){var n=A(this,null!=e&&W(e,0,x,21)?~~e+this.e+1:null,t,21);if(this.c){var r,a=n.split("."),i=+X.groupSize,o=+X.secondaryGroupSize,$=X.groupSeparator,s=a[0],c=a[1],l=this.s<0,u=l?s.slice(1):s,_=u.length;if(o&&(r=i,i=o,o=r,_-=r),i>0&&_>0){for(r=_%i||i,s=u.substr(0,r);_>r;r+=i)s+=$+u.substr(r,i);o>0&&(s+=$+u.slice(r)),l&&(s="-"+s)}n=c?s+X.decimalSeparator+((o=+X.fractionGroupSize)?c.replace(new RegExp("\\d{"+o+"}\\B","g"),"$&"+X.fractionGroupSeparator):c):s}return n},H.toFraction=function(e){var t,n,a,o,$,s,c,l,u,_=F,f=this,p=f.c,d=new i(z),v=n=new i(z),h=c=new i(z);if(null!=e&&(F=!1,s=new i(e),F=_,(!(_=s.isInt())||s.lt(z))&&(F&&T(22,"max denominator "+(_?"out of range":"not an integer"),e),e=!_&&s.c&&C(s,s.e+1,1).gte(z)?s:null)),!p)return f.toString();for(u=r(p),o=d.e=u.length-f.e-1,d.c[0]=q[($=o%k)<0?k+$:$],e=!e||s.cmp(d)>0?o>0?d:v:s,$=U,U=1/0,s=new i(u),c.c[0]=0;l=I(s,d,0,1),1!=(a=n.plus(l.times(h))).cmp(e);)n=h,h=a,v=c.plus(l.times(a=v)),c=a,d=s.minus(l.times(a=d)),s=a;return a=I(e.minus(n),h,0,1),c=c.plus(a.times(v)),n=n.plus(a.times(h)),c.s=v.s=f.s,t=I(v,h,o*=2,R).minus(f).abs().cmp(I(c,n,o,R).minus(f).abs())<1?[v.toString(),h.toString()]:[c.toString(),n.toString()],U=$,t},H.toNumber=function(){return+this},H.toPower=H.pow=function(e){var t,n,r=h(0>e?-e:+e),a=this;if(!W(e,-O,O,23,"exponent")&&(!isFinite(e)||r>O&&(e/=0)||parseFloat(e)!=e&&!(e=NaN)))return new i(Math.pow(+a,e));for(t=K?v(K/k+2):0,n=new i(z);;){if(r%2){if(!(n=n.times(a)).c)break;t&&n.c.length>t&&(n.c.length=t)}if(!(r=h(r/2)))break;a=a.times(a),t&&a.c&&a.c.length>t&&(a.c.length=t)}return 0>e&&(n=z.div(n)),t?C(n,K,R):n},H.toPrecision=function(e,t){return A(this,null!=e&&W(e,1,x,24,"precision")?0|e:null,t,24)},H.toString=function(e){var t,n=this,a=n.s,i=n.e;return null===i?a?(t="Infinity",0>a&&(t="-"+t)):t="NaN":(t=r(n.c),t=null!=e&&W(e,2,64,25,"base")?o(u(t,i),0|e,10,a):j>=i||i>=B?l(t,i):u(t,i),0>a&&n.c[0]&&(t="-"+t)),t},H.truncated=H.trunc=function(){return C(new i(this),this.e+1,1)},H.valueOf=H.toJSON=function(){var e,t=this,n=t.e;return null===n?t.toString():(e=r(t.c),e=j>=n||n>=B?l(e,n):u(e,n),t.s<0?"-"+e:e)},null!=e&&i.config(e),i}function n(e){var t=0|e;return e>0||e===t?t:t-1}function r(e){for(var t,n,r=1,a=e.length,i=e[0]+"";a>r;){for(t=e[r++]+"",n=k-t.length;n--;t="0"+t);i+=t}for(a=i.length;48===i.charCodeAt(--a););return i.slice(0,a+1||1)}function a(e,t){var n,r,a=e.c,i=t.c,o=e.s,$=t.s,s=e.e,c=t.e;if(!o||!$)return null;if(n=a&&!a[0],r=i&&!i[0],n||r)return n?r?0:-$:o;if(o!=$)return o;if(n=0>o,r=s==c,!a||!i)return r?0:!a^n?1:-1;if(!r)return s>c^n?1:-1;for($=(s=a.length)<(c=i.length)?s:c,o=0;$>o;o++)if(a[o]!=i[o])return a[o]>i[o]^n?1:-1;return s==c?0:s>c^n?1:-1}function $(e,t,n){return(e=_(e))>=t&&n>=e}function s(e){return"[object Array]"==Object.prototype.toString.call(e)}function c(e,t,n){for(var r,a,i=[0],o=0,$=e.length;$>o;){for(a=i.length;a--;i[a]*=t);for(i[r=0]+=b.indexOf(e.charAt(o++));r<i.length;r++)i[r]>n-1&&(null==i[r+1]&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function l(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(0>t?"e":"e+")+t}function u(e,t){var n,r;if(0>t){for(r="0.";++t;r+="0");e=r+e}else if(++t>(n=e.length)){for(r="0",t-=n;--t;r+="0");e+=r}else n>t&&(e=e.slice(0,t)+"."+e.slice(t));return e}function _(e){return 0>(e=parseFloat(e))?v(e):h(e)}var f,p,d=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,v=Math.ceil,h=Math.floor,y=" not a boolean or binary digit",m="rounding mode",g="number type has more than 15 significant digits",b="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",w=1e14,k=14,O=9007199254740991,q=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],E=1e7,x=1e9;if("undefined"!=typeof crypto&&(f=crypto),"function"==typeof o&&o.amd)o(function(){return t()});else if("undefined"!=typeof module&&module.exports){if(module.exports=t(),!f)try{f=require("crypto")}catch(A){}}else e||(e=void 0!==i?i:Function("return this")()),e.BigNumber=t()}(this)}(t[0],0,t)},Opal.modules.bigdecimal=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}var i=e.top,o=[],$=e.nil,s=(e.breaker,e.slice,e.klass),c=e.truthy,l=e.send;return e.add_stubs(["$require","$===","$attr_reader","$new","$class","$bignumber","$nan?","$==","$raise","$<","$coerce","$>","$mode","$>=","$/","$zero?","$infinite?","$finite?"]),function(e,$super,t){function n(){}var r=n=s(e,$super,"BigDecimal",n);r.$$proto,[r].concat(t)}(o[0],e.const_get_relative(o,"Numeric"),o),i.$require("js"),i.$require("bigdecimal/kernel"),i.$require("bigdecimal/bignumber.js"),function(i,$super,o){function u(){}var _,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C,I,D,H,z=u=s(i,null,"BigDecimal",u),P=(z.$$proto,[z].concat(o));return e.const_set(P[0],"ROUND_MODE",256),e.const_set(P[0],"ROUND_UP",0),e.const_set(P[0],"ROUND_DOWN",1),e.const_set(P[0],"ROUND_CEILING",2),e.const_set(P[0],"ROUND_FLOOR",3),e.const_set(P[0],"ROUND_HALF_UP",4),e.const_set(P[0],"ROUND_HALF_DOWN",5),e.const_set(P[0],"ROUND_HALF_EVEN",6),e.const_set(P[0],"SIGN_NaN",0),e.const_set(P[0],"SIGN_POSITIVE_ZERO",1),e.const_set(P[0],"SIGN_NEGATIVE_ZERO",-1),e.const_set(P[0],"SIGN_POSITIVE_FINITE",2),e.const_set(P[0],"SIGN_NEGATIVE_FINITE",-2),e.const_set(P[0],"SIGN_POSITIVE_INFINITE",3),e.const_set(P[0],"SIGN_NEGATIVE_INFINITE",-3),e.defs(z,"$limit",_=function(e){var t=this;return null==t.digits&&(t.digits=$),null==e&&(e=$),c(e)&&(t.digits=e),t.digits},_.$$arity=-1),e.defs(z,"$mode",f=function(t,n){var r,a=this,i=$;return null==a.round_mode&&(a.round_mode=$),null==n&&(n=$),i=t,e.const_get_relative(P,"ROUND_MODE")["$==="](i)?(c(n)&&(a.round_mode=n),c(r=a.round_mode)?r:e.const_get_relative(P,"ROUND_HALF_UP")):$},f.$$arity=-2),z.$attr_reader("bignumber"),e.defn(z,"$initialize",p=function(t,n){return null==n&&(n=0),this.bignumber=e.const_get_relative(P,"JS").$new(e.const_get_relative(P,"BigNumber"),t)},p.$$arity=-2),e.defn(z,"$==",d=function(t){var n=this,r=$;return r=t,n.$class()["$==="](r)?n.$bignumber().equals(t.$bignumber()):!!e.const_get_relative(P,"Number")["$==="](r)&&n.$bignumber().equals(t)},d.$$arity=1),e.alias(z,"===","=="),e.defn(z,"$<=>",v=function(t){var n=this,r=$,a=$;return r=t,null===(a=n.$class()["$==="](r)?n.$bignumber().comparedTo(t.$bignumber()):e.const_get_relative(P,"Number")["$==="](r)?n.$bignumber().comparedTo(t):$)?$:a},v.$$arity=1),e.defn(z,"$<",h=function(t){var n,r,a=this,i=h.$$p,o=$,s=$,u=$;for(i&&(h.$$p=null),s=0,u=arguments.length,o=new Array(u);s<u;s++)o[s]=arguments[s];return!c(c(n=a["$nan?"]())?n:c(r=t)?t["$nan?"]():r)&&l(a,e.find_super_dispatcher(a,"<",h,!1),o,i)},h.$$arity=1),e.defn(z,"$<=",y=function(t){var n,r,a=this,i=y.$$p,o=$,s=$,u=$;for(i&&(y.$$p=null),s=0,u=arguments.length,o=new Array(u);s<u;s++)o[s]=arguments[s];return!c(c(n=a["$nan?"]())?n:c(r=t)?t["$nan?"]():r)&&l(a,e.find_super_dispatcher(a,"<=",y,!1),o,i)},y.$$arity=1),e.defn(z,"$>",m=function(t){var n,r,a=this,i=m.$$p,o=$,s=$,u=$;for(i&&(m.$$p=null),s=0,u=arguments.length,o=new Array(u);s<u;s++)o[s]=arguments[s];return!c(c(n=a["$nan?"]())?n:c(r=t)?t["$nan?"]():r)&&l(a,e.find_super_dispatcher(a,">",m,!1),o,i)},m.$$arity=1),e.defn(z,"$>=",g=function(t){var n,r,a=this,i=g.$$p,o=$,s=$,u=$;for(i&&(g.$$p=null),s=0,u=arguments.length,o=new Array(u);s<u;s++)o[s]=arguments[s];return!c(c(n=a["$nan?"]())?n:c(r=t)?t["$nan?"]():r)&&l(a,e.find_super_dispatcher(a,">=",g,!1),o,i)},g.$$arity=1),e.defn(z,"$abs",b=function(){var e=this;return e.$class().$new(e.$bignumber().abs())},b.$$arity=0),e.defn(z,"$add",w=function(r,a){var i,o,s=this,l=$;return null==a&&(a=0),a["$=="]($)&&s.$raise(e.const_get_relative(P,"TypeError"),"wrong argument type nil (expected Fixnum)"),c(t(a,0))&&s.$raise(e.const_get_relative(P,"ArgumentError"),"argument must be positive"),o=s.$coerce(r),r=null==(i=e.to_ary(o))[0]?$:i[0],null==i[1]?$:i[1],l=s.$bignumber().plus(r.$bignumber()),c(n(a,0))&&(l=l.toDigits(a,s.$class().$mode(e.const_get_relative(P,"ROUND_MODE")))),s.$class().$new(l)},w.$$arity=-2),e.alias(z,"+","add"),e.defn(z,"$ceil",k=function(t){var n=this;return null==t&&(t=$),c(n.$bignumber().isFinite())||n.$raise(e.const_get_relative(P,"FloatDomainError"),"Computation results to 'Infinity'"),t["$=="]($)?n.$bignumber().round(0,e.const_get_relative(P,"ROUND_CEILING")).toNumber():c(r(t,0))?n.$class().$new(n.$bignumber().round(t,e.const_get_relative(P,"ROUND_CEILING"))):n.$class().$new(n.$bignumber().round(0,e.const_get_relative(P,"ROUND_CEILING")))},k.$$arity=-1),e.defn(z,"$coerce",O=function(t){var n=this,r=$;return r=t,n.$class()["$==="](r)?[t,n]:e.const_get_relative(P,"Number")["$==="](r)?[n.$class().$new(t),n]:n.$raise(e.const_get_relative(P,"TypeError"),t.$class()+" can't be coerced into "+n.$class())},O.$$arity=1),e.defn(z,"$div",q=function(t,n){var r,i,o=this;return null==n&&(n=$),n["$=="](0)?a(o,t):(i=o.$coerce(t),t=null==(r=e.to_ary(i))[0]?$:r[0],null==r[1]?$:r[1],c(c(r=o["$nan?"]())?r:t["$nan?"]())&&o.$raise(e.const_get_relative(P,"FloatDomainError"),"Computation results to 'NaN'(Not a Number)"),n["$=="]($)?(c(t["$zero?"]())&&o.$raise(e.const_get_relative(P,"ZeroDivisionError"),"divided by 0"),c(o["$infinite?"]())&&o.$raise(e.const_get_relative(P,"FloatDomainError"),"Computation results to 'Infinity'"),o.$class().$new(o.$bignumber().dividedToIntegerBy(t.$bignumber()))):o.$class().$new(o.$bignumber().dividedBy(t.$bignumber()).round(n,o.$class().$mode(e.const_get_relative(P,"ROUND_MODE")))))},q.$$arity=-2),e.defn(z,"$finite?",E=function(){return this.$bignumber().isFinite()},E.$$arity=0),e.defn(z,"$infinite?",x=function(){var e,t=this;return c(c(e=t["$finite?"]())?e:t["$nan?"]())?$:c(t.$bignumber().isNegative())?-1:1},x.$$arity=0),e.defn(z,"$minus",A=function(t){var n,r,a=this;return r=a.$coerce(t),t=null==(n=e.to_ary(r))[0]?$:n[0],null==n[1]?$:n[1],a.$class().$new(a.$bignumber().minus(t.$bignumber()))},A.$$arity=1),e.alias(z,"-","minus"),e.defn(z,"$mult",S=function(t,n){var r,a,i=this;return null==n&&(n=$),a=i.$coerce(t),t=null==(r=e.to_ary(a))[0]?$:r[0],null==r[1]?$:r[1],n["$=="]($)?i.$class().$new(i.$bignumber().times(t.$bignumber())):i.$class().$new(i.$bignumber().times(t.$bignumber()).round(n,i.$class().$mode(e.const_get_relative(P,"ROUND_MODE"))))},S.$$arity=-2),e.alias(z,"*","mult"),e.defn(z,"$nan?",M=function(){return this.$bignumber().isNaN()},M.$$arity=0),e.defn(z,"$quo",N=function(t){var n,r,a=this;return r=a.$coerce(t),t=null==(n=e.to_ary(r))[0]?$:n[0],null==n[1]?$:n[1],a.$class().$new(a.$bignumber().dividedBy(t.$bignumber()))},N.$$arity=1),e.alias(z,"/","quo"),e.defn(z,"$sign",T=function(){var t=this;return c(t.$bignumber().isNaN())?e.const_get_relative(P,"SIGN_NaN"):c(t.$bignumber().isZero())?c(t.$bignumber().isNegative())?e.const_get_relative(P,"SIGN_NEGATIVE_ZERO"):e.const_get_relative(P,"SIGN_POSITIVE_ZERO"):$},T.$$arity=0),e.defn(z,"$sub",C=function(t){var n,r,a=this;return r=a.$coerce(t),t=null==(n=e.to_ary(r))[0]?$:n[0],null==n[1]?$:n[1],a.$class().$new(a.$bignumber().minus(t.$bignumber()))},C.$$arity=2),e.defn(z,"$to_f",I=function(){return this.$bignumber().toNumber()},I.$$arity=0),e.defn(z,"$to_s",D=function(e){return null==e&&(e=""),this.$bignumber().toString()},D.$$arity=-1),e.defn(z,"$zero?",H=function(){return this.$bignumber().isZero()},H.$$arity=0),$&&"zero?"}(o[0],0,o)},Opal.modules["mutations/version"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module);return function(t,r){var a=n(t,"Mutations"),i=(a.$$proto,[a].concat(r));e.const_set(i[0],"VERSION","0.9.0")}(t[0],t)},Opal.modules["mutations/exception"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send
;return e.add_stubs(["$attr_accessor","$errors=","$-","$join","$message_list","$errors"]),function(n,$){var s=a(n,"Mutations"),c=(s.$$proto,[s].concat($));!function(n,$super,a){function $(){}var s,c,l=$=i(n,$super,"ValidationException",$);l.$$proto,[l].concat(a);l.$attr_accessor("errors"),e.defn(l,"$initialize",s=function(n){var a=r;return a=[n],o(this,"errors=",e.to_a(a)),a[t(a.length,1)]},s.$$arity=1),e.defn(l,"$to_s",c=function(){return""+this.$errors().$message_list().$join("; ")},c.$$arity=0)}(c[0],e.const_get_qualified("::","StandardError"),c)}(n[0],n)},Opal.modules["mutations/errors"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send,$=e.hash2,s=e.truthy;return e.add_stubs(["$tap","$new","$merge!","$[]","$titleize","$downcase","$to_s","$==","$end_with?","$message","$error_message_creator","$Array","$each","$symbolic","$[]=","$-","$concat","$message_list","$map","$flatten","$compact"]),function(n,c){var l=a(n,"Mutations"),u=(l.$$proto,[l].concat(c));!function(t,$super,n){function a(){}var c,l,u,_=a=i(t,null,"DefaultErrorMessageCreator",a),f=(_.$$proto,[_].concat(n));e.const_set(f[0],"MESSAGES",o(e.const_get_relative(f,"Hash").$new("is invalid"),"tap",[],((c=function(e){c.$$s;return null==e&&(e=r),e["$merge!"]($(["nils","required","string","integer","boolean","hash","array","model","date","before","after","empty","max_length","min_length","matches","in","class","min","max","new_records"],{nils:"can't be nil",required:"is required",string:"isn't a string",integer:"isn't an integer",boolean:"isn't a boolean",hash:"isn't a hash",array:"isn't an array",model:"isn't the right class",date:"date doesn't exist",before:"isn't before given date",after:"isn't after given date",empty:"can't be blank",max_length:"is too long",min_length:"is too short",matches:"isn't in the right format","in":"isn't an option","class":"isn't the right class",min:"is too small",max:"is too big",new_records:"isn't a saved model"}))}).$$s=_,c.$$arity=1,c))),e.defn(_,"$message",l=function(t,n,r){var a,i=this;return null==r&&(r=$([],{})),s(r["$[]"]("index"))?i.$titleize(s(a=t)?a:"array")+"["+r["$[]"]("index")+"] "+e.const_get_relative(f,"MESSAGES")["$[]"](n):i.$titleize(t)+" "+e.const_get_relative(f,"MESSAGES")["$[]"](n)},l.$$arity=-3),e.defn(_,"$titleize",u=function(e){return(e=e.$to_s().$downcase())["$=="]("id")?"ID":s(e["$end_with?"]("_id"))?e.$titleize()+" ID":e.$titleize()},u.$$arity=1)}(u[0],0,u),function(t,$super,n){function a(){}var o,c,l,u,_=a=i(t,null,"ErrorAtom",a),f=_.$$proto,p=[_].concat(n);f.symbol=f.message=f.key=f.index=r,e.defn(_,"$initialize",o=function(e,t,n){var r=this;return null==n&&(n=$([],{})),r.key=e,r.symbol=t,r.message=n["$[]"]("message"),r.index=n["$[]"]("index")},o.$$arity=-3),e.defn(_,"$symbolic",c=function(){return this.symbol},c.$$arity=0),e.defn(_,"$message",l=function(){var t,n=this;return n.message=s(t=n.message)?t:e.const_get_relative(p,"Mutations").$error_message_creator().$message(n.key,n.symbol,$(["index"],{index:n.index}))},l.$$arity=0),e.defn(_,"$message_list",u=function(){var e=this;return e.$Array(e.$message())},u.$$arity=0)}(u[0],0,u),function(n,$super,a){function $(){}var s,c,l,u=$=i(n,$super,"ErrorHash",$),_=(u.$$proto,[u].concat(a));e.defn(u,"$symbolic",s=function(){var n,a=this;return o(e.const_get_relative(_,"HashWithIndifferentAccess").$new(),"tap",[],((n=function(a){var i,$=n.$$s||this;return null==a&&(a=r),o($,"each",[],((i=function(n,$){i.$$s;var s=r;return null==n&&(n=r),null==$&&($=r),s=[n,$.$symbolic()],o(a,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,i.$$arity=2,i))}).$$s=a,n.$$arity=1,n))},s.$$arity=0),e.defn(u,"$message",c=function(){var n,a=this;return o(e.const_get_relative(_,"HashWithIndifferentAccess").$new(),"tap",[],((n=function(a){var i,$=n.$$s||this;return null==a&&(a=r),o($,"each",[],((i=function(n,$){i.$$s;var s=r;return null==n&&(n=r),null==$&&($=r),s=[n,$.$message()],o(a,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,i.$$arity=2,i))}).$$s=a,n.$$arity=1,n))},c.$$arity=0),e.defn(u,"$message_list",l=function(){var e,t=this,n=r;return n=[],o(t,"each",[],((e=function(t,a){e.$$s;return null==t&&(t=r),null==a&&(a=r),n.$concat(a.$message_list())}).$$s=t,e.$$arity=2,e)),n},l.$$arity=0)}(u[0],e.const_get_relative(u,"Hash"),u),function(t,$super,n){function a(){}var $,c,l,u=a=i(t,$super,"ErrorArray",a);u.$$proto,[u].concat(n);e.defn(u,"$symbolic",$=function(){var e,t=this;return o(t,"map",[],((e=function(t){var n;e.$$s;return null==t&&(t=r),s(n=t)?t.$symbolic():n}).$$s=t,e.$$arity=1,e))},$.$$arity=0),e.defn(u,"$message",c=function(){var e,t=this;return o(t,"map",[],((e=function(t){var n;e.$$s;return null==t&&(t=r),s(n=t)?t.$message():n}).$$s=t,e.$$arity=1,e))},c.$$arity=0),e.defn(u,"$message_list",l=function(){var e,t=this;return o(t.$compact(),"map",[],(e=function(t){e.$$s;return null==t&&(t=r),t.$message_list()},e.$$s=t,e.$$arity=1,e)).$flatten()},l.$$arity=0)}(u[0],e.const_get_relative(u,"Array"),u)}(n[0],n)},Opal.modules["mutations/input_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.hash2,s=e.send;return e.add_stubs(["$attr_accessor","$merge","$default_options","$class","$options=","$-","$has_key?","$options","$[]","$!"]),function(n,c){var l=a(n,"Mutations"),u=(l.$$proto,[l].concat(c));!function(n,$super,a){function c(){}var l,u,_,f,p,d,v,h,y=c=i(n,null,"InputFilter",c);y.$$proto,[y].concat(a);e.defs(y,"$default_options",l=function(){var e,t=this;return null==t.default_options&&(t.default_options=r),t.default_options=o(e=t.default_options)?e:$([],{})},l.$$arity=0),y.$attr_accessor("options"),e.defn(y,"$initialize",u=function(n){var a,i=this,c=r;return null==n&&(n=$([],{})),c=[(o(a=i.$class().$default_options())?a:$([],{})).$merge(n)],s(i,"options=",e.to_a(c)),c[t(c.length,1)]},u.$$arity=-1),e.defn(y,"$filter",_=function(e){return[e,r]},_.$$arity=1),e.defn(y,"$has_default?",f=function(){return this.$options()["$has_key?"]("default")},f.$$arity=0),e.defn(y,"$default",p=function(){return this.$options()["$[]"]("default")},p.$$arity=0),e.defn(y,"$discard_nils?",d=function(){return this.$options()["$[]"]("nils")["$!"]()},d.$$arity=0),e.defn(y,"$discard_empty?",v=function(){return this.$options()["$[]"]("discard_empty")},v.$$arity=0),e.defn(y,"$discard_invalid?",h=function(){return this.$options()["$[]"]("discard_invalid")},h.$$arity=0)}(u[0],0,u)}(n[0],n)},Opal.modules["mutations/hash_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send,$=e.truthy,s=e.hash2;return e.add_stubs(["$define_method","$[]","$to_sym","$new","$to_proc","$[]=","$-","$attr_accessor","$instance_eval","$each_pair","$optional_inputs","$required_inputs","$keys","$nil?","$options","$respond_to?","$is_a?","$with_indifferent_access","$to_hash","$each","$==","$has_key?","$filter","$!","$discard_invalid?","$delete","$discard_empty?","$discard_nils?","$has_default?","$default","$any?"]),function(n,c){var l=a(n,"Mutations"),u=(l.$$proto,[l].concat(c));!function(n,$super,a){function c(){}var l,u,_,f,p,d,v,h,y,m,g,b=c=i(n,$super,"HashFilter",c),w=b.$$proto,k=[b].concat(a);w.required_inputs=w.optional_inputs=w.current_inputs=r,e.defs(b,"$register_additional_filter",l=function(n,a){var i,c=this;return o(c,"define_method",[a],((i=function(){var a,c,l,u=i.$$s||this,_=r,f=r,p=r;null==u.current_inputs&&(u.current_inputs=r),(a=i.$$p||r)&&(i.$$p=null);var d=arguments.length,v=d-0;v<0&&(v=0),c=new Array(v);for(var h=0;h<d;h++)c[h-0]=arguments[h];return _=c["$[]"](0),f=$(l=c["$[]"](1))?l:s([],{}),p=[_.$to_sym(),o(n,"new",[f],a.$to_proc())],o(u.current_inputs,"[]=",e.to_a(p)),p[t(p.length,1)]}).$$s=c,i.$$arity=-1,i))},l.$$arity=2),b.default_options=s(["nils"],{nils:!1}),b.$attr_accessor("optional_inputs"),b.$attr_accessor("required_inputs"),e.defn(b,"$initialize",u=function(t){var n=this,a=u.$$p,i=a||r;return null==t&&(t=s([],{})),a&&(u.$$p=null),o(n,e.find_super_dispatcher(n,"initialize",u,!1),[t],null),n.optional_inputs=s([],{}),n.required_inputs=s([],{}),n.current_inputs=n.required_inputs,i!==r?o(n,"instance_eval",[],i.$to_proc()):r},u.$$arity=-1),e.defn(b,"$dup",_=function(){var n,a,i=this,$=r;return $=e.const_get_relative(k,"HashFilter").$new(),o(i.optional_inputs,"each_pair",[],((n=function(a,i){n.$$s;var s=r;return null==a&&(a=r),null==i&&(i=r),s=[a,i],o($.$optional_inputs(),"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=i,n.$$arity=2,n)),o(i.required_inputs,"each_pair",[],((a=function(n,i){a.$$s;var s=r;return null==n&&(n=r),null==i&&(i=r),s=[n,i],o($.$required_inputs(),"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=i,a.$$arity=2,a)),$},_.$$arity=0),e.defn(b,"$required",f=function(){var e=this,t=f.$$p,n=t||r;return t&&(f.$$p=null),e.current_inputs=e.required_inputs,o(e,"instance_eval",[],n.$to_proc())},f.$$arity=0),e.defn(b,"$optional",p=function(){var e=this,t=p.$$p,n=t||r;return t&&(p.$$p=null),e.current_inputs=e.optional_inputs,o(e,"instance_eval",[],n.$to_proc())},p.$$arity=0),e.defn(b,"$required_keys",d=function(){return this.required_inputs.$keys()},d.$$arity=0),e.defn(b,"$optional_keys",v=function(){return this.optional_inputs.$keys()},v.$$arity=0),e.defn(b,"$hash",h=function(n,a){var i=this,$=h.$$p,c=$||r,l=r;return null==a&&(a=s([],{})),$&&(h.$$p=null),l=[n.$to_sym(),o(e.const_get_relative(k,"HashFilter"),"new",[a],c.$to_proc())],o(i.current_inputs,"[]=",e.to_a(l)),l[t(l.length,1)]},h.$$arity=-2),e.defn(b,"$model",y=function(n,a){var i=this,$=r;return null==a&&(a=s([],{})),$=[n.$to_sym(),e.const_get_relative(k,"ModelFilter").$new(n.$to_sym(),a)],o(i.current_inputs,"[]=",e.to_a($)),$[t($.length,1)]},y.$$arity=-2),e.defn(b,"$array",m=function(n,a){var i=this,$=m.$$p,c=$||r,l=r,u=r;return null==a&&(a=s([],{})),$&&(m.$$p=null),l=n.$to_sym(),u=[n.$to_sym(),o(e.const_get_relative(k,"ArrayFilter"),"new",[l,a],c.$to_proc())],o(i.current_inputs,"[]=",e.to_a(u)),u[t(u.length,1)]},m.$$arity=-2),e.defn(b,"$filter",g=function(n){var a,i,s=this,c=r,l=r,u=r,_=r;return $(n["$nil?"]())?$(s.$options()["$[]"]("nils"))?[r,r]:[r,"nils"]:$(n["$respond_to?"]("to_hash"))?($(n["$is_a?"](e.const_get_relative(k,"HashWithIndifferentAccess")))||(n=n.$to_hash().$with_indifferent_access()),c=e.const_get_relative(k,"ErrorHash").$new(),l=e.const_get_relative(k,"HashWithIndifferentAccess").$new(),u=r,o([[s.required_inputs,!0],[s.optional_inputs,!1]],"each",[],((a=function(i){var s,_,f,p,d=a.$$s||this;return null==i&&(i=r),i=e.to_ary(i),null==(_=(s=e.slice.call(i,0,i.length)).splice(0,1)[0])&&(_=r),null==(f=s.splice(0,1)[0])&&(f=r),o(_,"each_pair",[],((p=function(a,i){p.$$s;var s,_,d=r,v=r,h=r,y=r,m=r;return null==a&&(a=r),null==i&&(i=r),a["$=="]("*")?(u=i,r):(d=n["$[]"](a),$(n["$has_key?"](a))&&(_=i.$filter(d),v=null==(s=e.to_ary(_))[0]?r:s[0],h=null==s[1]?r:s[1],$(h["$nil?"]())?(y=[a,v],o(l,"[]=",e.to_a(y)),y[t(y.length,1)]):$($(s=f["$!"]())?i["$discard_invalid?"]():s)?n.$delete(a):$($(s=$(_=f["$!"]())?h["$=="]("empty"):_)?i["$discard_empty?"]():s)?n.$delete(a):$($(s=$(_=f["$!"]())?h["$=="]("nils"):_)?i["$discard_nils?"]():s)?n.$delete(a):(m=$(s=i.$options()["$[]"]("error_key"))?s:a,$(h["$is_a?"](e.const_get_relative(k,"Symbol")))&&(h=e.const_get_relative(k,"ErrorAtom").$new(m,h)),y=[a,h],o(c,"[]=",e.to_a(y)),y[t(y.length,1)])),$(n["$has_key?"](a)["$!"]())?$(i["$has_default?"]())?(y=[a,i.$default()],o(l,"[]=",e.to_a(y)),y[t(y.length,1)]):$(f)?(m=$(s=i.$options()["$[]"]("error_key"))?s:a,y=[a,e.const_get_relative(k,"ErrorAtom").$new(m,"required")],o(c,"[]=",e.to_a(y)),y[t(y.length,1)]):r:r)}).$$s=d,p.$$arity=2,p))}).$$s=s,a.$$arity=1,a.$$has_top_level_mlhs_arg=!0,a)),$(u)&&(_=t(n.$keys(),l.$keys()),o(_,"each",[],((i=function(a){i.$$s;var s,_,f=r,p=r,d=r,v=r;return null==a&&(a=r),f=n["$[]"](a),_=u.$filter(f),p=null==(s=e.to_ary(_))[0]?r:s[0],d=null==s[1]?r:s[1],$(d["$nil?"]())?(v=[a,p],o(l,"[]=",e.to_a(v)),v[t(v.length,1)]):$(u["$discard_invalid?"]())?n.$delete(a):$((s=d["$=="]("empty"))?u["$discard_empty?"]():d["$=="]("empty"))?n.$delete(a):$((s=d["$=="]("nils"))?u["$discard_nils?"]():d["$=="]("nils"))?n.$delete(a):($(d["$is_a?"](e.const_get_relative(k,"Symbol")))&&(d=e.const_get_relative(k,"ErrorAtom").$new(a,d)),v=[a,d],o(c,"[]=",e.to_a(v)),v[t(v.length,1)])}).$$s=s,i.$$arity=1,i))),$(c["$any?"]())?[n,c]:[l,r]):[n,"hash"]},g.$$arity=1)}(u[0],e.const_get_relative(u,"InputFilter"),u)}(n[0],n)},Opal.modules["mutations/array_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var a=[],i=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass,s=e.send,c=e.truthy,l=e.hash2;return e.add_stubs(["$define_method","$[]","$new","$to_proc","$instance_eval","$options","$raise","$to_sym","$is_a?","$constantize","$[]=","$-","$cache_constants?","$to_s","$initialize_constants!","$nil?","$!","$==","$Array","$<","$length","$>","$each_with_index","$filter_element","$<<","$discard_invalid?","$filter"]),function(a,u){var _=o(a,"Mutations"),f=(_.$$proto,[_].concat(u));!function(a,$super,o){function u(){}var _,f,p,d,v,h,y,m,g=u=$(a,$super,"ArrayFilter",u),b=g.$$proto,w=[g].concat(o);b.element_filter=b.initialize_constants=i,e.defs(g,"$register_additional_filter",_=function(e,t){var n,r=this;return s(r,"define_method",[t],((n=function(){var t,r,a,o=n.$$s||this,$=i;(t=n.$$p||i)&&(n.$$p=null);var u=arguments.length,_=u-0;_<0&&(_=0),r=new Array(_);for(var f=0;f<u;f++)r[f-0]=arguments[f];return $=c(a=r["$[]"](0))?a:l([],{}),o.element_filter=s(e,"new",[$],t.$to_proc())}).$$s=r,n.$$arity=-1,n))},_.$$arity=2),g.default_options=l(["nils","class","arrayize","min_length","max_length"],{nils:!1,"class":i,arrayize:!1,min_length:i,max_length:i}),e.defn(g,"$initialize",f=function(t,n){var r,a=this,o=f.$$p,$=o||i;return null==n&&(n=l([],{})),o&&(f.$$p=null),s(a,e.find_super_dispatcher(a,"initialize",f,!1),[n],null),a.name=t,a.element_filter=i,$!==i&&s(a,"instance_eval",[],$.$to_proc()),c(c(r=a.element_filter)?a.$options()["$[]"]("class"):r)?a.$raise(e.const_get_relative(w,"ArgumentError").$new("Can't supply both a class and a filter")):i},f.$$arity=-2),e.defn(g,"$hash",p=function(t){var n=this,r=p.$$p,a=r||i;return null==t&&(t=l([],{})),r&&(p.$$p=null),n.element_filter=s(e.const_get_relative(w,"HashFilter"),"new",[t],a.$to_proc())},p.$$arity=-1),e.defn(g,"$model",d=function(t,n){var r=this;return null==n&&(n=l([],{})),r.element_filter=e.const_get_relative(w,"ModelFilter").$new(t.$to_sym(),n)},d.$$arity=-2),e.defn(g,"$array",v=function(t){var n=this,r=v.$$p,a=r||i;return null==t&&(t=l([],{})),r&&(v.$$p=null),n.element_filter=s(e.const_get_relative(w,"ArrayFilter"),"new",[i,t],a.$to_proc())},v.$$arity=-1),e.defn(g,"$initialize_constants!",h=function(){var n,r=this,a=i;return r.initialize_constants=c(n=r.initialize_constants)?n:(c(r.$options()["$[]"]("class"))&&c(r.$options()["$[]"]("class")["$is_a?"](e.const_get_relative(w,"String")))&&(a=["class",r.$options()["$[]"]("class").$constantize()],s(r.$options(),"[]=",e.to_a(a)),a[t(a.length,1)]),!0),c(e.const_get_relative(w,"Mutations")["$cache_constants?"]())?i:c(r.$options()["$[]"]("class"))?(a=["class",r.$options()["$[]"]("class").$to_s().$constantize()],s(r.$options(),"[]=",e.to_a(a)),a[t(a.length,1)]):i},h.$$arity=0),e.defn(g,"$filter",y=function(t){var a,o,$,u=this,_=i,f=i,p=i;if(u["$initialize_constants!"](),c(t["$nil?"]()))return c(u.$options()["$[]"]("nils"))?[i,i]:[i,"nils"];if(c(c(a=t["$is_a?"](e.const_get_relative(w,"Array"))["$!"]())?u.$options()["$[]"]("arrayize"):a)){if(t["$=="](""))return[[],i];t=u.$Array(t)}return c(t["$is_a?"](e.const_get_relative(w,"Array")))?(_=e.const_get_relative(w,"ErrorArray").$new(),f=[],p=!1,c(c(a=u.$options()["$[]"]("min_length"))?n(t.$length(),u.$options()["$[]"]("min_length")):a)?[t,"min_length"]:c(c(a=u.$options()["$[]"]("max_length"))?r(t.$length(),u.$options()["$[]"]("max_length")):a)?[t,"max_length"]:(s(t,"each_with_index",[],((o=function(t,n){var r,a,$=o.$$s||this,s=i,u=i;return null==$.name&&($.name=i),null==t&&(t=i),null==n&&(n=i),a=$.$filter_element(t),s=null==(r=e.to_ary(a))[0]?i:r[0],u=null==r[1]?i:r[1],c(u["$is_a?"](e.const_get_relative(w,"Symbol")))&&(u=e.const_get_relative(w,"ErrorAtom").$new($.name,u,l(["index"],{index:n}))),_["$<<"](u),c(u)?p=!0:f["$<<"](s)}).$$s=u,o.$$arity=2,o)),c(c(a=p)?(c($=u.element_filter)?u.element_filter["$discard_invalid?"]():$)["$!"]():a)?[t,_]:[f,i])):[t,"array"]},y.$$arity=1),e.defn(g,"$filter_element",m=function(t){var n,r,a=this,o=i;if(c(a.element_filter)){if(r=a.element_filter.$filter(t),t=null==(n=e.to_ary(r))[0]?i:n[0],o=null==n[1]?i:n[1],c(o))return[t,o]}else if(c(a.$options()["$[]"]("class"))&&c(t["$is_a?"](a.$options()["$[]"]("class"))["$!"]()))return[t,"class"];return[t,i]},m.$$arity=1)}(f[0],e.const_get_relative(f,"InputFilter"),f)}(a[0],a)},Opal.modules["mutations/additional_filter"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass;return e.add_stubs(["$require","$underscore","$[]","$name","$register_additional_filter"]),t.$require("mutations/hash_filter"),t.$require("mutations/array_filter"),function(t,n){var o=a(t,"Mutations"),$=(o.$$proto,[o].concat(n));!function(t,$super,n){function a(){}var o,$=a=i(t,$super,"AdditionalFilter",a),s=($.$$proto,[$].concat(n));e.defs($,"$inherited",o=function(t){var n=r;return n=t.$name()["$[]"](/^Mutations::([a-zA-Z]*)Filter$/,1).$underscore(),e.const_get_qualified(e.const_get_relative(s,"Mutations"),"HashFilter").$register_additional_filter(t,n),e.const_get_qualified(e.const_get_relative(s,"Mutations"),"ArrayFilter").$register_additional_filter(t,n)},o.$$arity=1)}($[0],e.const_get_relative($,"InputFilter"),$)}(n[0],n)},Opal.modules["mutations/string_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2,s=e.truthy,c=e.send;return e.add_stubs(["$[]","$options","$==","$nil?","$!","$any?","$is_a?","$to_s","$gsub","$strip","$<","$length","$>","$include?","$!~"]),function(r,l){var u=i(r,"Mutations"),_=(u.$$proto,[u].concat(l));!function(r,$super,i){function l(){}var u,_=l=o(r,$super,"StringFilter",l),f=(_.$$proto,[_].concat(i));_.default_options=$(["strip","strict","nils","empty_is_nil","empty","min_length","max_length","matches","in","discard_empty","allow_control_characters"],{strip:!0,strict:!1,nils:!1,empty_is_nil:!1,empty:!1,min_length:a,max_length:a,matches:a,"in":a,discard_empty:!1,allow_control_characters:!1}),e.defn(_,"$filter",u=function(r){var i,o,$=this;return s(s(i=$.$options()["$[]"]("empty_is_nil"))?r["$=="](""):i)&&(r=a),s(r["$nil?"]())?s($.$options()["$[]"]("nils"))?[a,a]:[a,"nils"]:(s(s(i=$.$options()["$[]"]("strict")["$!"]())?c([e.const_get_relative(f,"TrueClass"),e.const_get_relative(f,"FalseClass"),e.const_get_relative(f,"Integer"),e.const_get_relative(f,"Float"),e.const_get_relative(f,"BigDecimal"),e.const_get_relative(f,"Symbol")],"any?",[],((o=function(e){o.$$s;return null==e&&(e=a),r["$is_a?"](e)}).$$s=$,o.$$arity=1,o)):i)&&(r=r.$to_s()),s(r["$is_a?"](e.const_get_relative(f,"String")))?(s($.$options()["$[]"]("allow_control_characters"))||(r=r.$gsub(/[^[:print:]\t\r\n]+/," ")),s($.$options()["$[]"]("strip"))&&(r=r.$strip()),r["$=="]("")?s($.$options()["$[]"]("empty"))?[r,a]:[r,"empty"]:s(s(i=$.$options()["$[]"]("min_length"))?t(r.$length(),$.$options()["$[]"]("min_length")):i)?[r,"min_length"]:s(s(i=$.$options()["$[]"]("max_length"))?n(r.$length(),$.$options()["$[]"]("max_length")):i)?[r,"max_length"]:s(s(i=$.$options()["$[]"]("in"))?$.$options()["$[]"]("in")["$include?"](r)["$!"]():i)?[r,"in"]:s(s(i=$.$options()["$[]"]("matches"))?$.$options()["$[]"]("matches")["$!~"](r):i)?[r,"matches"]:[r,a]):[r,"string"])},u.$$arity=1)}(_[0],e.const_get_relative(_,"AdditionalFilter"),_)}(r[0],r)},Opal.modules["mutations/integer_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2,s=e.truthy;return e.add_stubs(["$[]","$options","$==","$nil?","$!","$is_a?","$=~","$to_i","$<","$>","$include?"]),function(r,c){var l=i(r,"Mutations"),u=(l.$$proto,[l].concat(c));!function(r,$super,i){function c(){}var l,u=c=o(r,$super,"IntegerFilter",c),_=(u.$$proto,[u].concat(i));u.default_options=$(["nils","empty_is_nil","min","max","in"],{nils:!1,empty_is_nil:!1,min:a,max:a,"in":a}),e.defn(u,"$filter",l=function(r){var i,o=this;if(s(s(i=o.$options()["$[]"]("empty_is_nil"))?r["$=="](""):i)&&(r=a),s(r["$nil?"]()))return s(o.$options()["$[]"]("nils"))?[a,a]:[a,"nils"];if(r["$=="](""))return[r,"empty"];if(s(r["$is_a?"](e.const_get_relative(_,"Integer"))["$!"]())){if(!s(s(i=r["$is_a?"](e.const_get_relative(_,"String")))?r["$=~"](/^-?\d/):i))return[r,"integer"];r=r.$to_i()}return s(s(i=o.$options()["$[]"]("min"))?t(r,o.$options()["$[]"]("min")):i)?[r,"min"]:s(s(i=o.$options()["$[]"]("max"))?n(r,o.$options()["$[]"]("max")):i)?[r,"max"]:s(s(i=o.$options()["$[]"]("in"))?o.$options()["$[]"]("in")["$include?"](r)["$!"]():i)?[r,"in"]:[r,a]},l.$$arity=1)}(u[0],e.const_get_relative(u,"AdditionalFilter"),u)}(r[0],r)},Opal.modules["mutations/float_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2,s=e.truthy;return e.add_stubs(["$nil?","$[]","$options","$==","$!","$is_a?","$=~","$to_f","$<","$>"]),function(r,c){var l=i(r,"Mutations"),u=(l.$$proto,[l].concat(c));!function(r,$super,i){function c(){}var l,u=c=o(r,$super,"FloatFilter",c),_=(u.$$proto,[u].concat(i));u.default_options=$(["nils","min","max"],{nils:!1,min:a,max:a}),e.defn(u,"$filter",l=function(r){var i,o=this;if(s(r["$nil?"]()))return s(o.$options()["$[]"]("nils"))?[a,a]:[a,"nils"];if(r["$=="](""))return[r,"empty"];if(s(r["$is_a?"](e.const_get_relative(_,"Float"))["$!"]()))if(s(s(i=r["$is_a?"](e.const_get_relative(_,"String")))?r["$=~"](/^[-+]?\d*\.?\d+/):i))r=r.$to_f();else{if(!s(r["$is_a?"](e.const_get_relative(_,"Integer"))))return[r,"float"];r=r.$to_f()}return s(s(i=o.$options()["$[]"]("min"))?t(r,o.$options()["$[]"]("min")):i)?[r,"min"]:s(s(i=o.$options()["$[]"]("max"))?n(r,o.$options()["$[]"]("max")):i)?[r,"max"]:[r,a]},l.$$arity=1)}(u[0],e.const_get_relative(u,"AdditionalFilter"),u)}(r[0],r)},Opal.modules["mutations/boolean_filter"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.hash2,o=e.truthy;return e.add_stubs(["$nil?","$[]","$options","$==","$is_a?","$to_s","$downcase"]),function(t,$){var s=r(t,"Mutations"),c=(s.$$proto,[s].concat($));!function(t,$super,r){function $(){}var s,c=$=a(t,$super,"BooleanFilter",$),l=(c.$$proto,[c].concat(r));c.default_options=i(["nils"],{nils:!1}),e.const_set(l[0],"BOOL_MAP",i(["true","1","false","0"],{"true":!0,1:!0,"false":!1,0:!1})),e.defn(c,"$filter",s=function(t){var r,a=this,i=n;return o(t["$nil?"]())?o(a.$options()["$[]"]("nils"))?[n,n]:[n,"nils"]:t["$=="]("")?[t,"empty"]:o(o(r=t["$=="](!0))?r:t["$=="](!1))?[t,n]:(o(t["$is_a?"](e.const_get_relative(l,"Integer")))&&(t=t.$to_s()),o(t["$is_a?"](e.const_get_relative(l,"String")))?(i=e.const_get_relative(l,"BOOL_MAP")["$[]"](t.$downcase()),o(i["$nil?"]())?[t,"boolean"]:[i,n]):[t,"boolean"])},s.$$arity=1)}(c[0],e.const_get_relative(c,"AdditionalFilter"),c)}(t[0],t)},Opal.modules["mutations/duck_filter"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.hash2,o=e.truthy,$=e.send;return e.add_stubs(["$nil?","$[]","$options","$each","$Array","$respond_to?"]),function(t,s){var c=r(t,"Mutations"),l=(c.$$proto,[c].concat(s));!function(t,$super,r){function s(){}var c,l=s=a(t,$super,"DuckFilter",s);l.$$proto,[l].concat(r);l.default_options=i(["nils","methods"],{nils:!1,methods:n}),e.defn(l,"$filter",c=function(t){try{var r,a=this;return o(t["$nil?"]())?o(a.$options()["$[]"]("nils"))?[n,n]:[n,"nils"]:($(a.$Array(a.$options()["$[]"]("methods")),"each",[],((r=function(a){r.$$s;if(null==a&&(a=n),o(t["$respond_to?"](a)))return n;e.ret([t,"duck"])}).$$s=a,r.$$arity=1,r)),[t,n])}catch(i){if(i===e.returner)return i.$v;throw i}},c.$$arity=1)}(l[0],e.const_get_relative(l,"AdditionalFilter"),l)}(t[0],t)},Opal.modules["mutations/date_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2,s=e.truthy;return e.add_stubs(["$[]","$options","$==","$nil?","$is_a?","$strptime","$parse","$respond_to?","$to_date","$<=","$>="]),function(r,c){var l=i(r,"Mutations"),u=(l.$$proto,[l].concat(c));!function(r,$super,i){function c(){}var l,u=c=o(r,$super,"DateFilter",c),_=(u.$$proto,[u].concat(i));u.default_options=$(["nils","empty_is_nil","format","after","before"],{nils:!1,empty_is_nil:!1,format:a,after:a,before:a}),e.defn(u,"$filter",l=function(r){var i,o=this,$=a;if(s(s(i=o.$options()["$[]"]("empty_is_nil"))?r["$=="](""):i)&&(r=a),s(r["$nil?"]()))return s(o.$options()["$[]"]("nils"))?[a,a]:[a,"nils"];if(""["$=="](r))return[r,"empty"];if(s(r["$is_a?"](e.const_get_relative(_,"Date"))))$=r;else if(s(r["$is_a?"](e.const_get_relative(_,"String"))))try{$=s(o.$options()["$[]"]("format"))?e.const_get_relative(_,"Date").$strptime(r,o.$options()["$[]"]("format")):e.const_get_relative(_,"Date").$parse(r)}catch(c){if(!e.rescue(c,[e.const_get_relative(_,"ArgumentError")]))throw c;try{return[a,"date"]}finally{e.pop_exception()}}else{if(!s(r["$respond_to?"]("to_date")))return[a,"date"];$=r.$to_date()}return s(o.$options()["$[]"]("after"))&&s(t($,o.$options()["$[]"]("after")))?[a,"after"]:s(o.$options()["$[]"]("before"))&&s(n($,o.$options()["$[]"]("before")))?[a,"before"]:[$,a]},l.$$arity=1)}(u[0],e.const_get_relative(u,"AdditionalFilter"),u)}(r[0],r)},Opal.modules["mutations/time_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2,s=e.truthy;return e.add_stubs(["$nil?","$[]","$options","$==","$is_a?","$strptime","$parse","$respond_to?","$to_time","$<=","$>="]),function(r,c){var l=i(r,"Mutations"),u=(l.$$proto,[l].concat(c));!function(r,$super,i){function c(){}var l,u=c=o(r,$super,"TimeFilter",c),_=(u.$$proto,[u].concat(i));u.default_options=$(["nils","format","after","before"],{nils:!1,format:a,after:a,before:a}),e.defn(u,"$filter",l=function(r){var i=this,o=a;if(s(r["$nil?"]()))return s(i.$options()["$[]"]("nils"))?[a,a]:[a,"nils"];if(""["$=="](r))return[r,"empty"];if(s(r["$is_a?"](e.const_get_relative(_,"Time"))))o=r;else if(s(r["$is_a?"](e.const_get_relative(_,"String"))))try{o=s(i.$options()["$[]"]("format"))?e.const_get_relative(_,"Time").$strptime(r,i.$options()["$[]"]("format")):e.const_get_relative(_,"Time").$parse(r)}catch($){if(!e.rescue($,[e.const_get_relative(_,"ArgumentError")]))throw $;try{return[a,"time"]}finally{e.pop_exception()}}else{if(!s(r["$respond_to?"]("to_time")))return[a,"time"];o=r.$to_time()}return s(i.$options()["$[]"]("after"))&&s(t(o,i.$options()["$[]"]("after")))?[a,"after"]:s(i.$options()["$[]"]("before"))&&s(n(o,i.$options()["$[]"]("before")))?[a,"before"]:[o,a]},l.$$arity=1)}(u[0],e.const_get_relative(u,"AdditionalFilter"),u)}(r[0],r)},Opal.modules["mutations/file_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.hash2,$=e.truthy,s=e.send;return e.add_stubs(["$nil?","$[]","$options","$==","$concat","$each","$respond_to?","$is_a?","$>","$size"]),function(n,c){var l=a(n,"Mutations"),u=(l.$$proto,[l].concat(c));!function(n,$super,a){function c(){}var l,u=c=i(n,$super,"FileFilter",c),_=(u.$$proto,[u].concat(a));u.default_options=o(["nils","upload","size"],{nils:!1,upload:!1,size:r}),e.defn(u,"$filter",l=function(n){try{var a,i=this,o=r;return $(n["$nil?"]())?$(i.$options()["$[]"]("nils"))?[r,r]:[r,"nils"]:n["$=="]("")?[n,"empty"]:(o=["read","size"],$(i.$options()["$[]"]("upload"))&&o.$concat(["original_filename","content_type"]),s(o,"each",[],((a=function(t){a.$$s;if(null==t&&(t=r),$(n["$respond_to?"](t)))return r;e.ret([n,"file"])}).$$s=i,a.$$arity=1,a)),$(i.$options()["$[]"]("size")["$is_a?"](e.const_get_relative(_,"Integer")))&&$(t(n.$size(),i.$options()["$[]"]("size")))?[n,"size"]:[n,r])}catch(c){if(c===e.returner)return c.$v;throw c}},l.$$arity=1)}(u[0],e.const_get_relative(u,"AdditionalFilter"),u)}(n[0],n)},Opal.modules["mutations/model_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.hash2,$=e.send,s=e.truthy;return e.add_stubs(["$[]","$options","$camelize","$to_s","$is_a?","$constantize","$[]=","$-","$cache_constants?","$initialize_constants!","$nil?","$run","$success?","$result","$errors","$!","$respond_to?","$new_record?"]),function(n,c){var l=a(n,"Mutations"),u=(l.$$proto,[l].concat(c));!function(n,$super,a){function c(){}var l,u,_,f=c=i(n,$super,"ModelFilter",c),p=f.$$proto,d=[f].concat(a);p.initialize_constants=p.name=r,f.default_options=o(["nils","class","builder","new_records"],{nils:!1,"class":r,builder:r,new_records:!1}),e.defn(f,"$initialize",l=function(t,n){var r=this,a=l.$$p;return null==n&&(n=o([],{})),a&&(l.$$p=null),$(r,e.find_super_dispatcher(r,"initialize",l,!1),[n],null),r.name=t},l.$$arity=-2),e.defn(f,"$initialize_constants!",u=function(){var n,a,i=this,o=r,c=r;return i.initialize_constants=s(n=i.initialize_constants)?n:(o=s(a=i.$options()["$[]"]("class"))?a:i.name.$to_s().$camelize(),s(o["$is_a?"](e.const_get_relative(d,"String")))&&(o=o.$constantize()),c=["class",o],$(i.$options(),"[]=",e.to_a(c)),c[t(c.length,1)],s(i.$options()["$[]"]("builder"))&&s(i.$options()["$[]"]("builder")["$is_a?"](e.const_get_relative(d,"String")))&&(c=["builder",i.$options()["$[]"]("builder").$constantize()],$(i.$options(),"[]=",e.to_a(c)),c[t(c.length,1)]),!0),s(e.const_get_relative(d,"Mutations")["$cache_constants?"]())?r:(s(i.$options()["$[]"]("class"))&&(c=["class",i.$options()["$[]"]("class").$to_s().$constantize()],$(i.$options(),"[]=",e.to_a(c)),c[t(c.length,1)]),s(i.$options()["$[]"]("builder"))?(c=["builder",i.$options()["$[]"]("builder").$to_s().$constantize()],$(i.$options(),"[]=",e.to_a(c)),c[t(c.length,1)]):r)},u.$$arity=0),e.defn(f,"$filter",_=function(t){var n,a,i=this,o=r;if(i["$initialize_constants!"](),s(t["$nil?"]()))return s(i.$options()["$[]"]("nils"))?[r,r]:[r,"nils"];if(s(s(n=t["$is_a?"](e.const_get_relative(d,"Hash")))?i.$options()["$[]"]("builder"):n)){if(o=i.$options()["$[]"]("builder").$run(t),!s(o["$success?"]()))return[t,o.$errors()];t=o.$result()}return s(t["$is_a?"](i.$options()["$[]"]("class")))?s(s(n=i.$options()["$[]"]("new_records")["$!"]())?s(a=t["$respond_to?"]("new_record?"))?t["$new_record?"]():a:n)?[t,"new_records"]:[t,r]:[t,"model"]},_.$$arity=1)}(u[0],e.const_get_relative(u,"InputFilter"),u)}(n[0],n)},Opal.modules["mutations/symbol_filter"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.hash2,o=e.truthy;return e.add_stubs(["$nil?","$[]","$options","$===","$to_sym","$!","$include?"]),function(t,$){var s=r(t,"Mutations"),c=(s.$$proto,[s].concat($));!function(t,$super,r){function $(){}var s,c=$=a(t,$super,"SymbolFilter",$),l=(c.$$proto,[c].concat(r));c.default_options=i(["nils","in"],{nils:!1,"in":n}),e.defn(c,"$filter",s=function(t){var r,a=this,i=n;if(o(t["$nil?"]()))return o(a.$options()["$[]"]("nils"))?[n,n]:[n,"nils"];if(i=t,e.const_get_relative(l,"Symbol")["$==="](i));else{if(!e.const_get_relative(l,"String")["$==="](i))return[n,"symbol"];t=t.$to_sym()}return o(o(r=a.$options()["$[]"]("in"))?a.$options()["$[]"]("in")["$include?"](t)["$!"]():r)?[t,"in"]:[t,n]},s.$$arity=1)}(c[0],e.const_get_relative(c,"AdditionalFilter"),c)}(t[0],t)},Opal.modules["mutations/outcome"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$attr_reader"]),function(t,i){var o=r(t,"Mutations"),$=(o.$$proto,[o].concat(i));!function(t,$super,r){function i(){}var o,$,s=i=a(t,null,"Outcome",i),c=s.$$proto;[s].concat(r);c.success=n,
s.$attr_reader("result","errors","inputs"),e.defn(s,"$initialize",o=function(e,t,n,r){var a,i=this;return a=[e,t,n,r],i.success=a[0],i.result=a[1],i.errors=a[2],i.inputs=a[3],a},o.$$arity=4),e.defn(s,"$success?",$=function(){return this.success},$.$$arity=0)}($[0],0,$)}(t[0],t)},Opal.modules["mutations/command"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send,$=e.truthy,s=e.hash2;return e.add_stubs(["$send","$input_filters","$to_proc","$each","$define_method","$[]","$has_key?","$[]=","$-","$private","$create_attr_methods","$run","$new","$run!","$validation_outcome","$==","$superclass","$dup","$inject","$with_indifferent_access","$respond_to?","$raise","$merge!","$filter","$has_errors?","$validate","$class","$!","$nil?","$execute","$success?","$result","$errors","$protected","$attr_reader","$is_a?","$tap","$split","$to_s","$pop","$to_sym","$any?"]),function(n,c){var l=a(n,"Mutations"),u=(l.$$proto,[l].concat(c));!function(n,$super,a){function c(){}var l,u,_,f,p,d,v,h,y,m,g=c=i(n,null,"Command",c),b=g.$$proto,w=[g].concat(a);b.raw_inputs=b.errors=b.inputs=r,function(n,a){n.$$proto;var i,s,c,l,u,_,f,p=[n].concat(a);e.defn(n,"$create_attr_methods",i=function(n){var a,$=this,s=i.$$p,c=s||r,l=r;return s&&(i.$$p=null),o($.$input_filters(),"send",[n],c.$to_proc()),l=$.$input_filters().$send(n+"_keys"),o(l,"each",[],((a=function(n){var i,$,s,c=a.$$s||this;return null==n&&(n=r),o(c,"define_method",[n],((i=function(){var e=i.$$s||this;return null==e.inputs&&(e.inputs=r),e.inputs["$[]"](n)}).$$s=c,i.$$arity=0,i)),o(c,"define_method",[n+"_present?"],(($=function(){var e=$.$$s||this;return null==e.inputs&&(e.inputs=r),e.inputs["$has_key?"](n)}).$$s=c,$.$$arity=0,$)),o(c,"define_method",[n+"="],((s=function(a){var i=s.$$s||this,$=r;return null==i.inputs&&(i.inputs=r),null==a&&(a=r),$=[n,a],o(i.inputs,"[]=",e.to_a($)),$[t($.length,1)]}).$$s=c,s.$$arity=1,s))}).$$s=$,a.$$arity=1,a))},i.$$arity=1),n.$private("create_attr_methods"),e.defn(n,"$required",s=function(){var e=this,t=s.$$p,n=t||r;return t&&(s.$$p=null),o(e,"create_attr_methods",["required"],n.$to_proc())},s.$$arity=0),e.defn(n,"$optional",c=function(){var e=this,t=c.$$p,n=t||r;return t&&(c.$$p=null),o(e,"create_attr_methods",["optional"],n.$to_proc())},c.$$arity=0),e.defn(n,"$run",l=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return o(n,"new",e.to_a(t)).$run()},l.$$arity=-1),e.defn(n,"$run!",u=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return o(n,"new",e.to_a(t))["$run!"]()},u.$$arity=-1),e.defn(n,"$validate",_=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return o(n,"new",e.to_a(t)).$validation_outcome()},_.$$arity=-1),e.defn(n,"$input_filters",f=function(){var t,n=this;return null==n.input_filters&&(n.input_filters=r),n.input_filters=$(t=n.input_filters)?t:e.const_get_relative(p,"Command")["$=="](n.$superclass())?e.const_get_relative(p,"HashFilter").$new():n.$superclass().$input_filters().$dup()},f.$$arity=0)}(e.get_singleton_class(g),w),e.defn(g,"$initialize",l=function(){var t,n,a,i,c=this,l=arguments.length,u=l-0;u<0&&(u=0),i=new Array(u);for(var _=0;_<l;_++)i[_-0]=arguments[_];return c.raw_inputs=o(i,"inject",[s([],{}).$with_indifferent_access()],((t=function(n,a){var i=t.$$s||this;return null==n&&(n=r),null==a&&(a=r),$(a["$respond_to?"]("to_hash"))||i.$raise(e.const_get_relative(w,"ArgumentError").$new("All arguments must be hashes")),n["$merge!"](a)}).$$s=c,t.$$arity=2,t)),a=c.$input_filters().$filter(c.raw_inputs),n=e.to_ary(a),c.inputs=null==n[0]?r:n[0],c.errors=null==n[1]?r:n[1],$(c["$has_errors?"]())?r:c.$validate()},l.$$arity=-1),e.defn(g,"$input_filters",u=function(){return this.$class().$input_filters()},u.$$arity=0),e.defn(g,"$has_errors?",_=function(){return this.errors["$nil?"]()["$!"]()},_.$$arity=0),e.defn(g,"$run",f=function(){var e=this;return $(e["$has_errors?"]())?e.$validation_outcome():e.$validation_outcome(e.$execute())},f.$$arity=0),e.defn(g,"$run!",p=function(){var t=this,n=r;return n=t.$run(),$(n["$success?"]())?n.$result():t.$raise(e.const_get_relative(w,"ValidationException").$new(n.$errors()))},p.$$arity=0),e.defn(g,"$validation_outcome",d=function(t){var n=this;return null==t&&(t=r),e.const_get_relative(w,"Outcome").$new(n["$has_errors?"]()["$!"](),$(n["$has_errors?"]())?r:t,n.errors,n.inputs)},d.$$arity=-1),g.$protected(),g.$attr_reader("inputs","raw_inputs"),e.defn(g,"$validate",v=function(){return r},v.$$arity=0),e.defn(g,"$execute",h=function(){return r},h.$$arity=0),e.defn(g,"$add_error",y=function(n,a,i){var c,l,u=this;return null==i&&(i=r),$(a["$is_a?"](e.const_get_relative(w,"Symbol")))||u.$raise(e.const_get_relative(w,"ArgumentError").$new("Invalid kind")),u.errors=$(c=u.errors)?c:e.const_get_relative(w,"ErrorHash").$new(),o(u.errors,"tap",[],((l=function(c){var u,_=l.$$s||this,f=r,p=r,d=r,v=r;return null==c&&(c=r),p=(f=n.$to_s().$split(".")).$pop(),d=o(f,"inject",[c],((u=function(n,a){u.$$s;var i,s=r;return null==n&&(n=r),null==a&&(a=r),$(i=n["$[]"](a.$to_sym()))?i:(s=[a.$to_sym(),e.const_get_relative(w,"ErrorHash").$new()],o(n,"[]=",e.to_a(s)),s[t(s.length,1)])}).$$s=_,u.$$arity=2,u)),v=[p,e.const_get_relative(w,"ErrorAtom").$new(n,a,s(["message"],{message:i}))],o(d,"[]=",e.to_a(v)),v[t(v.length,1)]}).$$s=u,l.$$arity=1,l))},y.$$arity=-3),e.defn(g,"$merge_errors",m=function(t){var n,a=this;return $(t["$any?"]())?(a.errors=$(n=a.errors)?n:e.const_get_relative(w,"ErrorHash").$new(),a.errors["$merge!"](t)):r},m.$$arity=1)}(u[0],0,u)}(n[0],n)},Opal.modules.mutations=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n=e.top,r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.truthy,$=e.send,s=a;return e.add_stubs(["$require","$new","$cache_constants=","$-"]),n.$require("active_support/core_ext/hash/indifferent_access"),n.$require("active_support/core_ext/string/inflections"),n.$require("date"),n.$require("time"),n.$require("bigdecimal"),n.$require("mutations/version"),n.$require("mutations/exception"),n.$require("mutations/errors"),n.$require("mutations/input_filter"),n.$require("mutations/additional_filter"),n.$require("mutations/string_filter"),n.$require("mutations/integer_filter"),n.$require("mutations/float_filter"),n.$require("mutations/boolean_filter"),n.$require("mutations/duck_filter"),n.$require("mutations/date_filter"),n.$require("mutations/time_filter"),n.$require("mutations/file_filter"),n.$require("mutations/model_filter"),n.$require("mutations/array_filter"),n.$require("mutations/hash_filter"),n.$require("mutations/symbol_filter"),n.$require("mutations/outcome"),n.$require("mutations/command"),function(t,n){var r=i(t,"Mutations"),$=(r.$$proto,[r].concat(n));!function(t,n){t.$$proto;var r,i,$,s,c=[t].concat(n);e.defn(t,"$error_message_creator",r=function(){var t,n=this;return null==n.error_message_creator&&(n.error_message_creator=a),n.error_message_creator=o(t=n.error_message_creator)?t:e.const_get_relative(c,"DefaultErrorMessageCreator").$new()},r.$$arity=0),e.defn(t,"$error_message_creator=",i=function(e){return this.error_message_creator=e},i.$$arity=1),e.defn(t,"$cache_constants=",$=function(e){return this.cache_constants=e},$.$$arity=1),e.defn(t,"$cache_constants?",s=function(){var e=this;return null==e.cache_constants&&(e.cache_constants=a),e.cache_constants},s.$$arity=0)}(e.get_singleton_class(r),$)}(r[0],r),s=[!0],$(e.const_get_relative(r,"Mutations"),"cache_constants=",e.to_a(s)),s[t(s.length,1)]},Opal.modules["hyper-operation/filters/outbound_filter"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module),r=e.klass,a=e.hash2;return function(t,i){var o=n(t,"Mutations"),$=(o.$$proto,[o].concat(i));!function(t,$super,n){function i(){}var o,$=i=r(t,$super,"OutboundFilter",i);$.$$proto,[$].concat(n);$.default_options=a([],{}),e.defn($,"$filter",o=function(e){return[e,"outbound"]},o.$$arity=1)}($[0],e.const_get_relative($,"AdditionalFilter"),$)}(t[0],t)},Opal.modules["hyper-operation/http"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}e.top;var i=[],o=e.nil,$=(e.breaker,e.slice,e.module),s=e.klass,c=e.send,l=e.hash2,u=e.truthy;return e.add_stubs(["$each","$define_singleton_method","$send","$new","$define_method","$attr_reader","$>","$+","$-","$<","$delete","$succeed","$fail","$promise","$parse","$private","$tap","$proc","$ok?","$resolve","$reject","$from_object","$call"]),function(i,_){var f=$(i,"Hyperstack"),p=(f.$$proto,[f].concat(_));!function(i,$super,$){function _(){}var f,p,d,v,h,y,m,g,b,w,k,O,q,E,x=_=s(i,null,"HTTP",_),A=x.$$proto,S=[x].concat($);A.handler=A.json=A.body=A.ok=A.xhr=A.url=A.method=A.promise=A.status_code=o,e.const_set(S[0],"ACTIONS",["get","post","put","delete","patch","head"]),c(e.const_get_relative(S,"ACTIONS"),"each",[],((f=function(e){var t,n,r=f.$$s||this;return null==e&&(e=o),c(r,"define_singleton_method",[e],((t=function(n,r){var a,i=t.$$s||this;return(a=t.$$p||o)&&(t.$$p=null),null==r&&(r=l([],{})),null==n&&(n=o),i.$new().$send(e,n,r,a)}).$$s=r,t.$$arity=-2,t)),c(r,"define_method",[e],((n=function(t,r){var a,i=n.$$s||this;return(a=n.$$p||o)&&(n.$$p=null),null==r&&(r=l([],{})),null==t&&(t=o),i.$send(e,t,r,a)}).$$s=r,n.$$arity=-2,n))}).$$s=x,f.$$arity=1,f)),x.$attr_reader("body","error_message","method","status_code","url","xhr"),e.defn(x,"$initialize",p=function(){return this.ok=!0},p.$$arity=0),e.defs(x,"$active?",d=function(){var e=this,r=o;return null==e.active_requests&&(e.active_requests=o),r=0,"undefined"!=typeof jQuery&&"undefined"!=typeof jQuery.active&&null!==jQuery.active&&(r=jQuery.active),t(n(r,e.active_requests),0)},d.$$arity=0),e.defs(x,"$active_requests",v=function(){var e,t=this;return null==t.active_requests&&(t.active_requests=o),t.active_requests=u(e=t.active_requests)?e:0,t.active_requests},v.$$arity=0),e.defs(x,"$incr_active_requests",h=function(){var e,t=this;return null==t.active_requests&&(t.active_requests=o),t.active_requests=u(e=t.active_requests)?e:0,t.active_requests=n(t.active_requests,1)},h.$$arity=0),e.defs(x,"$decr_active_requests",y=function(){var e,t=this;return null==t.active_requests&&(t.active_requests=o),t.active_requests=u(e=t.active_requests)?e:0,t.active_requests=r(t.active_requests,1),u(a(t.active_requests,0))?(console.log("Ooops, Hyperstack::HTTP active_requests out of sync!"),t.active_requests=0):o},y.$$arity=0),e.defn(x,"$send",m=function(e,t,n,r){var a=this;a.method=e,a.url=t,a.payload=n.$delete("payload"),a.handler=r;var i=null,$=null;"string"==typeof this.payload?i=this.payload:this.payload!=o&&(i=this.payload.$to_json(),$="application/json");var s=new XMLHttpRequest;if(s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.DONE)return a.$class().$decr_active_requests(),s.status>=200&&s.status<300||304==s.status?a.$succeed(s.responseText,s.status,s):a.$fail(s,s.status,s.statusText)},s.open(this.method.toUpperCase(),this.url),null!==i&&null!==$&&s.setRequestHeader("Content-Type",$),n["$has_key?"]("headers"))for(var c=n["$[]"]("headers"),l=c.$keys(),_=l.length,f=0;f<_;f++)s.setRequestHeader(l[f],c["$[]"](l[f]));return null!==i?(a.$class().$incr_active_requests(),s.send(i)):(a.$class().$incr_active_requests(),s.send()),u(a.handler)?a:a.$promise()},m.$$arity=4),e.defn(x,"$json",g=function(){var t,n=this;return n.json=u(t=n.json)?t:e.const_get_relative(S,"JSON").$parse(n.body)},g.$$arity=0),e.defn(x,"$ok?",b=function(){return this.ok},b.$$arity=0),e.defn(x,"$get_header",w=function(e){var t=this.xhr.getResponseHeader(e);return null===t?o:t},w.$$arity=1),e.defn(x,"$inspect",k=function(){var e=this;return"#<HTTP @url="+e.url+" @method="+e.method+">"},k.$$arity=0),x.$private(),e.defn(x,"$promise",O=function(){var t,n=this;return u(n.promise)?n.promise:n.promise=c(e.const_get_relative(S,"Promise").$new(),"tap",[],((t=function(e){var n,r=t.$$s||this;return null==e&&(e=o),r.handler=c(r,"proc",[],((n=function(t){n.$$s;return null==t&&(t=o),u(t["$ok?"]())?e.$resolve(t):e.$reject(t)}).$$s=r,n.$$arity=1,n))}).$$s=n,t.$$arity=1,t))},O.$$arity=0),e.defn(x,"$succeed",q=function(t,n,r){var a=this;return a.body=t,a.xhr=r,a.status_code=r.status,"object"==typeof t&&(a.json=e.const_get_relative(S,"JSON").$from_object(t)),u(a.handler)?a.handler.$call(a):o},q.$$arity=3),e.defn(x,"$fail",E=function(e){var t=this;return t.body=e.responseText,t.xhr=e,t.status_code=e.status,t.ok=!1,u(t.handler)?t.handler.$call(t):o},E.$$arity=3)}(p[0],0,p)}(i[0],i)},Opal.modules["hyper-operation/transport/client_drivers"]=function(Opal){function $rb_plus(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function $rb_minus(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var self=Opal.top,$nesting=[],nil=Opal.nil,$breaker=Opal.breaker,$slice=Opal.slice,$module=Opal.module,$klass=Opal.klass,$truthy=Opal.truthy,$send=Opal.send,$hash2=Opal.hash2;return Opal.add_stubs(["$[]","$opts","$extend","$on_opal_client?","$client_drivers_get_acting_user_id","$env","$==","$respond_to?","$tap","$new","$resolve","$each","$is_a?","$connect_to","$name","$then","$load","$id","$raise","$inspect","$class","$connect","$last","$split","$+","$to_s","$include?","$open_channels","$<<","$add_connection","$gsub","$lambda","$get_queued_data","$post","$polling_path","$action_cable_consumer","$json","$complete_connection","$sync_dispatch","$parse","$get","$include","$dispatch_from_server","$constantize","$!=","$attr_reader","$isomorphic_method","$send_to_server","$when_on_server","$acting_user","$controller","$when_on_client","$fail","$zero?","$after","$-","$[]=","$every"]),function($base,$parent_nesting){var $Hyperstack,self=$Hyperstack=$module($base,"Hyperstack"),def=self.$$proto,$nesting=[self].concat($parent_nesting),TMP_Hyperstack_anti_csrf_token_1,TMP_Hyperstack_connect_11,TMP_Hyperstack_connect_session_12,TMP_Hyperstack_action_cable_consumer_13;Opal.defs(self,"$anti_csrf_token",TMP_Hyperstack_anti_csrf_token_1=function(){return Opal.const_get_relative($nesting,"ClientDrivers").$opts()["$[]"]("form_authenticity_token")},TMP_Hyperstack_anti_csrf_token_1.$$arity=0),function(e,$super,t){function n(){}var r,a,i,o,$=n=$klass(e,null,"Application",n),s=($.$$proto,[$].concat(t));$.$extend(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative(s,"Component"),"IsomorphicHelpers"),"ClassMethods")),$truthy($["$on_opal_client?"]())?Opal.defs($,"$acting_user_id",r=function(){return Opal.const_get_relative(s,"ClientDrivers").$opts()["$[]"]("acting_user_id")},r.$$arity=0):Opal.defs($,"$acting_user_id",a=function(){return Opal.const_get_relative(s,"ClientDrivers").$client_drivers_get_acting_user_id()},a.$$arity=0),Opal.defs($,"$env",i=function(){var e=this;return null==e.env&&(e.env=nil),$truthy(e.env)||(e.env=Opal.const_get_relative(s,"ClientDrivers").$env()),e.env},i.$$arity=0),Opal.defs($,"$production?",o=function(){return this.$env()["$=="]("production")},o.$$arity=0)}($nesting[0],0,$nesting),Opal.const_get_relative($nesting,"RUBY_ENGINE")["$=="]("opal")&&(function(e,t){var n,r=$module(e,"Model"),a=(r.$$proto,[r].concat(t));$truthy(r["$respond_to?"]("load"))||Opal.defs(r,"$load",n=function(){var e,t=this,r=n.$$p,i=r||nil;return r&&(n.$$p=null),$send(Opal.const_get_relative(a,"Promise").$new(),"tap",[],((e=function(t){e.$$s;return null==t&&(t=nil),t.$resolve(Opal.yieldX(i,[]))}).$$s=t,e.$$arity=1,e))},n.$$arity=0)}($nesting[0],$nesting),Opal.defs(self,"$connect",TMP_Hyperstack_connect_11=function(){var e,t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return $send(t,"each",[],((e=function(t){var n,r,a,i=e.$$s||this;return null==t&&(t=nil),$truthy(t["$is_a?"](Opal.const_get_relative($nesting,"Class")))?Opal.const_get_relative($nesting,"IncomingBroadcast").$connect_to(t.$name()):$truthy($truthy(n=t["$is_a?"](Opal.const_get_relative($nesting,"String")))?n:t["$is_a?"](Opal.const_get_relative($nesting,"Array")))?$send(Opal.const_get_relative($nesting,"IncomingBroadcast"),"connect_to",Opal.to_a(t)):$truthy(t["$respond_to?"]("id"))?$send($send(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Model"),"load",[],((r=function(){r.$$s;return t.$id()}).$$s=i,r.$$arity=0,r)),"then",[],((a=function(e){var n=a.$$s||this;return null==e&&(e=nil),$truthy(e)||n.$raise("Hyperstack.connect cannot connect to "+t.$inspect()+".  The id is nil. This can be caused by connecting to a model that is not saved, or that does not exist."),Opal.const_get_relative($nesting,"IncomingBroadcast").$connect_to(t.$class().$name(),e)}).$$s=i,a.$$arity=1,a)):i.$raise("Hyperstack.connect cannot connect to "+t.$inspect()+".\nChannels must be either a class, or a class name,\na string in the form 'ClassName-id',\nan array in the form [class, id] or [class-name, id],\nor an object that responds to the id method with a non-nil value")}).$$s=n,e.$$arity=1,e))},TMP_Hyperstack_connect_11.$$arity=-1),Opal.defs(self,"$connect_session",TMP_Hyperstack_connect_session_12=function(){return this.$connect(["Hyperstack::Session",Opal.const_get_relative($nesting,"ClientDrivers").$opts()["$[]"]("id").$split("-").$last()])},TMP_Hyperstack_connect_session_12.$$arity=0),Opal.defs(self,"$action_cable_consumer",TMP_Hyperstack_action_cable_consumer_13=function(){return Opal.const_get_relative($nesting,"ClientDrivers").$opts()["$[]"]("action_cable_consumer")},TMP_Hyperstack_action_cable_consumer_13.$$arity=0),function(e,$super,t){function n(){}var r,a,i,o=n=$klass(e,null,"IncomingBroadcast",n),$=(o.$$proto,[o].concat(t));Opal.defs(o,"$open_channels",r=function(){var e,t=this;return null==t.open_channels&&(t.open_channels=nil),t.open_channels=$truthy(e=t.open_channels)?e:Opal.const_get_relative($,"Set").$new()},r.$$arity=0),Opal.defs(o,"$add_connection",a=function(e,t){var n=this,r=nil;return null==t&&(t=nil),r=""+e+($truthy(t)?$rb_plus("-",t.$to_s()):nil),$truthy(n.$open_channels()["$include?"](r))?nil:(n.$open_channels()["$<<"](r),r)},a.$$arity=-2),Opal.defs(o,"$connect_to",i=function(e,t){var n,r,a=this,i=nil,o=nil;return null==t&&(t=nil),i=a.$add_connection(e,t),$truthy(i)?Opal.const_get_relative($,"ClientDrivers").$opts()["$[]"]("transport")["$=="]("pusher")?(o=Opal.const_get_relative($,"ClientDrivers").$opts()["$[]"]("channel")+"-"+i,(o=Opal.const_get_relative($,"ClientDrivers").$opts()["$[]"]("pusher_api").subscribe(o.$gsub("::","=="))).bind("dispatch",Opal.const_get_relative($,"ClientDrivers").$opts()["$[]"]("dispatch")),o.bind("pusher:subscription_succeeded",$send(a,"lambda",[],((n=function(){n.$$s;return Opal.const_get_relative($,"ClientDrivers").$get_queued_data("connect-to-transport",i)}).$$s=a,n.$$arity=0,n))),a.pusher_dispatcher_registered=!0):Opal.const_get_relative($,"ClientDrivers").$opts()["$[]"]("transport")["$=="]("action_cable")?(o=Opal.const_get_relative($,"ClientDrivers").$opts()["$[]"]("channel")+"-"+i,$send(Opal.const_get_qualified(Opal.const_get_relative($,"Hyperstack"),"HTTP").$post(Opal.const_get_relative($,"ClientDrivers").$polling_path("action-cable-auth",o),$hash2(["headers"],{headers:$hash2(["X-CSRF-Token"],{"X-CSRF-Token":Opal.const_get_relative($,"ClientDrivers").$opts()["$[]"]("form_authenticity_token")})})),"then",[],((r=function(e){r.$$s;null==e&&(e=nil);Opal.const_get_relative($,"Hyperstack").$action_cable_consumer().subscriptions.create({channel:"Hyperstack::ActionCableChannel",client_id:Opal.const_get_relative($,"ClientDrivers").$opts()["$[]"]("id"),hyperstack_channel:i,authorization:e.$json()["$[]"]("authorization"),salt:e.$json()["$[]"]("salt")},{connected:function(){Opal.const_get_relative($,"ClientDrivers").$env()["$=="]("development")&&console.log("ActionCable connected to: ",i),Opal.const_get_relative($,"ClientDrivers").$complete_connection(i)},received:function(e){Opal.const_get_relative($,"ClientDrivers").$env()["$=="]("development")&&console.log("ActionCable received: ",e),Opal.const_get_relative($,"ClientDrivers").$sync_dispatch(Opal.const_get_relative($,"JSON").$parse(JSON.stringify(e))["$[]"]("data"))}})}).$$s=a,r.$$arity=1,r))):Opal.const_get_qualified(Opal.const_get_relative($,"Hyperstack"),"HTTP").$get(Opal.const_get_relative($,"ClientDrivers").$polling_path("subscribe",i)):nil},i.$$arity=-2)}($nesting[0],0,$nesting)),function($base,$super,$parent_nesting){function $ClientDrivers(){}var self=$ClientDrivers=$klass($base,$super,"ClientDrivers",$ClientDrivers),def=self.$$proto,$nesting=[self].concat($parent_nesting),TMP_ClientDrivers_sync_dispatch_19,TMP_ClientDrivers_20,TMP_ClientDrivers_22,TMP_ClientDrivers_complete_connection_27,TMP_ClientDrivers_get_queued_data_30,TMP_ClientDrivers_initialize_client_drivers_on_boot_35,TMP_ClientDrivers_polling_path_36;self.$include(Opal.const_get_qualified(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"Component"),"IsomorphicHelpers")),Opal.defs(self,"$sync_dispatch",TMP_ClientDrivers_sync_dispatch_19=function(e){return e["$[]"]("operation").$constantize().$dispatch_from_server(e["$[]"]("params"))},TMP_ClientDrivers_sync_dispatch_19.$$arity=1),$truthy(Opal.const_get_relative($nesting,"RUBY_ENGINE")["$!="]("opal")),function(e,t){e.$$proto,[e].concat(t);e.$attr_reader("opts")}(Opal.get_singleton_class(self),$nesting),$send(self,"isomorphic_method",["client_drivers_get_acting_user_id"],(TMP_ClientDrivers_20=function(e){var t,n=TMP_ClientDrivers_20.$$s||this;return null==e&&(e=nil),Opal.const_get_relative($nesting,"RUBY_ENGINE")["$=="]("opal")&&e.$send_to_server(),$send(e,"when_on_server",[],((t=function(){var e,n=t.$$s||this;return $truthy(e=n.$controller().$acting_user())?n.$controller().$acting_user().$id():e}).$$s=n,t.$$arity=0,t))},TMP_ClientDrivers_20.$$s=self,TMP_ClientDrivers_20.$$arity=1,TMP_ClientDrivers_20)),$send(self,"isomorphic_method",["env"],(TMP_ClientDrivers_22=function(e){var t,n,r=TMP_ClientDrivers_22.$$s||this;return null==e&&(e=nil),$send(e,"when_on_client",[],((t=function(){return(t.$$s||this).$opts()["$[]"]("env")}).$$s=r,t.$$arity=0,t)),e.$send_to_server(),$send(e,"when_on_server",[],((n=function(){n.$$s;return Opal.const_get_qualified("::","Rails").$env()}).$$s=r,n.$$arity=0,n))},TMP_ClientDrivers_22.$$s=self,TMP_ClientDrivers_22.$$arity=1,TMP_ClientDrivers_22)),Opal.defs(self,"$complete_connection",TMP_ClientDrivers_complete_connection_27=function(e,t){var n,r=this;return null==t&&(t=10),$send(r.$get_queued_data("connect-to-transport",e),"fail",[],((n=function(){var r,a=n.$$s||this;return $truthy(t["$zero?"]())?nil:$send(a,"after",[.25],((r=function(){return(r.$$s||this).$complete_connection(e,$rb_minus(t,1))}).$$s=a,r.$$arity=0,r))}).$$s=r,n.$$arity=0,n))},TMP_ClientDrivers_complete_connection_27.$$arity=-2),Opal.defs(self,"$get_queued_data",TMP_ClientDrivers_get_queued_data_30=function(e,t,n){var r,a=this;return null==t&&(t=nil),null==n&&(n=$hash2([],{})),$send(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"HTTP").$get(a.$polling_path(e,t),n),"then",[],((r=function(e){var t,n=r.$$s||this;return null==e&&(e=nil),$send(e.$json(),"each",[],((t=function(e){var n=t.$$s||this;return null==e&&(e=nil),Opal.const_get_relative($nesting,"ClientDrivers").$env()["$=="]("development")&&console.log("simple_poller received: ",e),n.$sync_dispatch(e["$[]"](1))}).$$s=n,t.$$arity=1,t))}).$$s=a,r.$$arity=1,r))},TMP_ClientDrivers_get_queued_data_30.$$arity=-2),Opal.defs(self,"$initialize_client_drivers_on_boot",TMP_ClientDrivers_initialize_client_drivers_on_boot_35=function $$initialize_client_drivers_on_boot(){var $a,TMP_31,TMP_32,TMP_33,TMP_34,self=this,$writer=nil,h=nil,pusher_api=nil;return null==self.initialized&&(self.initialized=nil),Opal.const_get_relative($nesting,"Hyperstack").$env()["$=="]("express")?nil:$truthy(self.initialized)?($truthy($truthy($a=self["$on_opal_client?"]())?Opal.const_get_relative($nesting,"Hyperstack").$action_cable_consumer():$a)&&$send(Opal.const_get_qualified(Opal.const_get_relative($nesting,"Hyperstack"),"HTTP"),"get",[window.HyperstackEnginePath+"/server_up"],(TMP_31=function(){TMP_31.$$s;return $truthy(Opal.const_get_relative($nesting,"Hyperstack").$action_cable_consumer().connection.disconnected)?Opal.const_get_relative($nesting,"Hyperstack").$action_cable_consumer().connection.open():nil},TMP_31.$$s=self,TMP_31.$$arity=0,TMP_31)),nil):(self.initialized=!0,self.opts=$hash2([],{}),$truthy(self["$on_opal_client?"]())?(self.opts=Opal.const_get_relative($nesting,"Hash").$new(window.HyperstackOpts),$truthy($truthy($a=self.$opts()["$[]"]("transport")["$!="]("none"))?"undefined"==typeof window.HyperstackEnginePath:$a)&&self.$raise("No hyperstack mount point found!\nCheck your Rails routes.rb file"),self.$opts()["$[]"]("transport")["$=="]("pusher")?($writer=["dispatch",$send(self,"lambda",[],(TMP_32=function(e){var t=TMP_32.$$s||this;return null==e&&(e=nil),t.$sync_dispatch(Opal.const_get_relative($nesting,"JSON").$parse(JSON.stringify(e)))},TMP_32.$$s=self,TMP_32.$$arity=1,TMP_32))],$send(self.$opts(),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$truthy($truthy($a=self.$opts()["$[]"]("client_logging"))?window.console&&window.console.log:$a)&&(Pusher.log=function(e){window.console.log(e)}),$truthy(self.$opts()["$[]"]("pusher_fake_js"))?($writer=["pusher_api",eval(self.$opts()["$[]"]("pusher_fake_js"))],$send(self.$opts(),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]):(h=nil,pusher_api=nil,h={encrypted:self.$opts()["$[]"]("encrypted"),cluster:self.$opts()["$[]"]("cluster"),authEndpoint:window.HyperstackEnginePath+"/hyperstack-pusher-auth",auth:{headers:{"X-CSRF-Token":self.$opts()["$[]"]("form_authenticity_token")}}},pusher_api=new Pusher(self.$opts()["$[]"]("key"),h),$writer=["pusher_api",pusher_api],$send(self.$opts(),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$send(Opal.const_get_relative($nesting,"Hyperstack"),"connect",Opal.to_a(self.$opts()["$[]"]("auto_connect")))):self.$opts()["$[]"]("transport")["$=="]("action_cable")?($writer=["action_cable_consumer",ActionCable.createConsumer.apply(ActionCable,[].concat(Opal.to_a(self.$opts()["$[]"]("action_cable_consumer_url"))))],$send(self.$opts(),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send(Opal.const_get_relative($nesting,"Hyperstack"),"connect",Opal.to_a(self.$opts()["$[]"]("auto_connect")))):self.$opts()["$[]"]("transport")["$=="]("simple_poller")?($send(self.$opts()["$[]"]("auto_connect"),"each",[],(TMP_33=function(e){TMP_33.$$s;return null==e&&(e=nil),$send(Opal.const_get_relative($nesting,"IncomingBroadcast"),"add_connection",Opal.to_a(e))},TMP_33.$$s=self,TMP_33.$$arity=1,TMP_33)),$send(self,"every",[self.$opts()["$[]"]("seconds_between_poll")],(TMP_34=function(){return(TMP_34.$$s||this).$get_queued_data("read",nil)},TMP_34.$$s=self,TMP_34.$$arity=0,TMP_34))):nil):nil)},TMP_ClientDrivers_initialize_client_drivers_on_boot_35.$$arity=0),Opal.defs(self,"$polling_path",TMP_ClientDrivers_polling_path_36=function(e,t){var n=this,r=nil;return null==t&&(t=nil),r=window.HyperstackEnginePath+"/hyperstack-"+e+"/"+n.$opts()["$[]"]("id"),$truthy(t)&&(r=r+"/"+t),r},TMP_ClientDrivers_polling_path_36.$$arity=-2)}($nesting[0],null,$nesting)}($nesting[0],$nesting)},Opal.modules["hyper-operation/exception"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.send,$=e.truthy;return e.add_stubs(["$new","$collect","$[]","$attr_accessor","$+","$to_s","$on_error","$as_json","$errors","$is_a?","$new_from_error_hash"]),function(t,n){var $=a(t,"Mutations"),s=($.$$proto,[$].concat(n));!function(t,$super,n){function a(){}var $,s=a=i(t,null,"ErrorArray",a),c=(s.$$proto,[s].concat(n));e.defs(s,"$new_from_error_hash",$=function(t){var n,a=this;return a.$new(o(t,"collect",[],((n=function(t,a){n.$$s;return null==t&&(t=r),null==a&&(a=r),e.const_get_relative(c,"ErrorAtom").$new(t,a["$[]"]("symbol"),a)}).$$s=a,n.$$arity=2,n)))},$.$$arity=1)}(s[0],0,s)}(n[0],n),function(n,s){var c=a(n,"Hyperstack"),l=(c.$$proto,[c].concat(s));!function(n,$super,a){function s(){}var c,l,u=s=i(n,$super,"AccessViolation",s),_=(u.$$proto,[u].concat(a));u.$attr_accessor("details"),e.defn(u,"$initialize",c=function(n,a){var i=this,s=c.$$p;return null==n&&(n=r),null==a&&(a=r),s&&(c.$$p=null),o(i,e.find_super_dispatcher(i,"initialize",c,!1),["Hyperstack::AccessViolation"+($(n)?t(":",n.$to_s()):r)],null),i.details=a},c.$$arity=-1),e.defn(u,"$__hyperstack_on_error",l=function(t,n,r){var a=this;return e.const_get_relative(_,"Hyperstack").$on_error(t,a,n,r)},l.$$arity=3)}(l[0],e.const_get_relative(l,"StandardError"),l),function(t,$super,n){function r(){}var a=r=i(t,null,"Operation",r),s=(a.$$proto,[a].concat(n));(function(t,$super,n){function r(){}var a,s,c=r=i(t,$super,"ValidationException",r),l=(c.$$proto,[c].concat(n));e.defn(c,"$as_json",a=function(){return this.$errors().$as_json()},a.$$arity=-1),e.defn(c,"$initialize",s=function(t){var n=this,r=s.$$p;return r&&(s.$$p=null),$(t["$is_a?"](e.const_get_qualified(e.const_get_relative(l,"Mutations"),"ErrorHash")))||(t=e.const_get_qualified(e.const_get_relative(l,"Mutations"),"ErrorArray").$new_from_error_hash(t)),o(n,e.find_super_dispatcher(n,"initialize",s,!1),[t],null)},s.$$arity=1)})(s[0],e.const_get_qualified(e.const_get_relative(s,"Mutations"),"ValidationException"),s)}(l[0],0,l)}(n[0],n)},Opal.modules["hyper-operation/promise"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var a=[],i=e.nil,o=(e.breaker,e.slice,e.klass),$=e.hash2,s=e.truthy,c=e.send;return e.add_stubs(["$resolve","$new","$reject","$attr_reader","$===","$value","$has_key?","$keys","$!","$==","$realized?","$<<","$>>","$exception?","$[]","$resolved?","$rejected?","$error","$include?","$action","$raise","$^","$call","$resolve!","$exception!","$any?","$each","$reject!","$is_a?","$result","$there_can_be_only_one!","$then","$to_proc","$fail","$always","$trace","$class","$object_id","$+","$inspect","$act?","$nil?","$prev","$push","$concat","$it","$proc","$reverse","$pop","$<=","$length","$shift","$-","$wait","$map","$reduce","$try","$tap","$all?","$find"]),function(a,$super,l){function u(){}var _,f,p,d,v,h,y,m,g,b,w,k,O,q,E,x,A,S,M,N,T,C,I,D,H,z,P,R,j,B,L=u=o(a,null,"Promise",u),U=L.$$proto,F=[L].concat(l);return U.value=U.action=U.exception=U.realized=U.next=U.delayed=U.error=U.prev=i,e.defs(L,"$value",_=function(e){return this.$new().$resolve(e)},_.$$arity=1),e.defs(L,"$error",f=function(e){return this.$new().$reject(e)},f.$$arity=1),e.defs(L,"$when",p=function(){var t,n=arguments.length,r=n-0;r<0&&(r=0),t=new Array(r);for(var a=0;a<n;a++)t[a-0]=arguments[a];return e.const_get_relative(F,"When").$new(t)},p.$$arity=-1),function(t,$super,n){function r(){}var a,i=r=o(t,$super,"Fail",r);i.$$proto,[i].concat(n);i.$attr_reader("result"),e.defn(i,"$initialize",a=function(e){return this.result=e},a.$$arity=1)}(F[0],e.const_get_relative(F,"StandardError"),F),L.$attr_reader("error","prev","next"),e.defn(L,"$initialize",d=function(e){var t=this;return null==e&&(e=$([],{})),t.action=e,t.realized=!1,t.exception=!1,t.value=i,t.error=i,t.delayed=!1,t.prev=i,t.next=[]},d.$$arity=-1),e.defn(L,"$value",v=function(){var t=this;return s(e.const_get_relative(F,"Promise")["$==="](t.value))?t.value.$value():t.value},v.$$arity=0),e.defn(L,"$act?",h=function(){var e,t=this;return s(e=t.action["$has_key?"]("success"))?e:t.action["$has_key?"]("always")},h.$$arity=0),e.defn(L,"$action",y=function(){return this.action.$keys()},y.$$arity=0),e.defn(L,"$exception?",m=function(){return this.exception},m.$$arity=0),e.defn(L,"$realized?",g=function(){return this.realized["$!"]()["$!"]()},g.$$arity=0),e.defn(L,"$resolved?",b=function(){return this.realized["$=="]("resolve")},b.$$arity=0),e.defn(L,"$rejected?",w=function(){return this.realized["$=="]("reject")},w.$$arity=0),e.defn(L,"$pending?",k=function(){return this["$realized?"]()["$!"]()},k.$$arity=0),e.defn(L,"$^",O=function(e){var t=this;return e["$<<"](t),t["$>>"](e),e},O.$$arity=1),e.defn(L,"$<<",q=function(e){var t=this;return t.prev=e,t},q.$$arity=1),e.defn(L,"$>>",E=function(t){var n,r=this;return r.next["$<<"](t),
s(r["$exception?"]())?t.$reject(r.delayed["$[]"](0)):s(r["$resolved?"]())?t.$resolve(s(r.delayed)?r.delayed["$[]"](0):r.$value()):s(r["$rejected?"]())&&(s(s(n=r.action["$has_key?"]("failure")["$!"]())?n:e.const_get_relative(F,"Promise")["$==="](s(r.delayed)?r.delayed["$[]"](0):r.error))?t.$reject(s(r.delayed)?r.delayed["$[]"](0):r.$error()):s(t.$action()["$include?"]("always"))&&t.$reject(s(r.delayed)?r.delayed["$[]"](0):r.$error())),r},E.$$arity=1),e.defn(L,"$resolve",x=function(t){var n,r=this,a=i,o=i;if(null==t&&(t=i),s(r["$realized?"]())&&r.$raise(e.const_get_relative(F,"ArgumentError"),"the promise has already been realized"),s(e.const_get_relative(F,"Promise")["$==="](t)))return t["$<<"](r.prev)["$^"](r);try{s(a=s(n=r.action["$[]"]("success"))?n:r.action["$[]"]("always"))&&(t=a.$call(t)),r["$resolve!"](t)}catch($){if(!e.rescue($,[e.const_get_relative(F,"Exception")]))throw $;o=$;try{r["$exception!"](o)}finally{e.pop_exception()}}return r},x.$$arity=-1),e.defn(L,"$resolve!",A=function(e){var t,n=this;return n.realized="resolve",n.value=e,s(n.next["$any?"]())?c(n.next,"each",[],((t=function(n){t.$$s;return null==n&&(n=i),n.$resolve(e)}).$$s=n,t.$$arity=1,t)):n.delayed=[e]},A.$$arity=1),e.defn(L,"$reject",S=function(t){var n,r=this,a=i,o=i;if(null==t&&(t=i),s(r["$realized?"]())&&r.$raise(e.const_get_relative(F,"ArgumentError"),"the promise has already been realized"),s(e.const_get_relative(F,"Promise")["$==="](t)))return t["$<<"](r.prev)["$^"](r);try{s(a=s(n=r.action["$[]"]("failure"))?n:r.action["$[]"]("always"))&&(t=a.$call(t)),s(r.action["$has_key?"]("always"))?r["$resolve!"](t):r["$reject!"](t)}catch($){if(!e.rescue($,[e.const_get_relative(F,"Exception")]))throw $;o=$;try{r["$exception!"](o)}finally{e.pop_exception()}}return r},S.$$arity=-1),e.defn(L,"$reject!",M=function(e){var t,n=this;return n.realized="reject",n.error=e,s(n.next["$any?"]())?c(n.next,"each",[],((t=function(n){t.$$s;return null==n&&(n=i),n.$reject(e)}).$$s=n,t.$$arity=1,t)):n.delayed=[e]},M.$$arity=1),e.defn(L,"$exception!",N=function(t){var n=this;return s(t["$is_a?"](e.const_get_qualified(e.const_get_relative(F,"Promise"),"Fail")))?t=t.$result():n.exception=!0,n["$reject!"](t)},N.$$arity=1),e.defn(L,"$then",T=function(){var t=this,n=T.$$p,r=n||i;return n&&(T.$$p=null),t["$^"](e.const_get_relative(F,"Promise").$new($(["success"],{success:r})))},T.$$arity=0),e.defn(L,"$then!",C=function(){var e=this,t=C.$$p,n=t||i;return t&&(C.$$p=null),e["$there_can_be_only_one!"](),c(e,"then",[],n.$to_proc())},C.$$arity=0),e.alias(L,"do","then"),e.alias(L,"do!","then!"),e.defn(L,"$fail",I=function(){var t=this,n=I.$$p,r=n||i;return n&&(I.$$p=null),t["$^"](e.const_get_relative(F,"Promise").$new($(["failure"],{failure:r})))},I.$$arity=0),e.defn(L,"$fail!",D=function(){var e=this,t=D.$$p,n=t||i;return t&&(D.$$p=null),e["$there_can_be_only_one!"](),c(e,"fail",[],n.$to_proc())},D.$$arity=0),e.alias(L,"rescue","fail"),e.alias(L,"catch","fail"),e.alias(L,"rescue!","fail!"),e.alias(L,"catch!","fail!"),e.defn(L,"$always",H=function(){var t=this,n=H.$$p,r=n||i;return n&&(H.$$p=null),t["$^"](e.const_get_relative(F,"Promise").$new($(["always"],{always:r})))},H.$$arity=0),e.defn(L,"$always!",z=function(){var e=this,t=z.$$p,n=t||i;return t&&(z.$$p=null),e["$there_can_be_only_one!"](),c(e,"always",[],n.$to_proc())},z.$$arity=0),e.alias(L,"finally","always"),e.alias(L,"ensure","always"),e.alias(L,"finally!","always!"),e.alias(L,"ensure!","always!"),e.defn(L,"$trace",P=function(t){var n=this,r=P.$$p,a=r||i;return null==t&&(t=i),r&&(P.$$p=null),n["$^"](e.const_get_relative(F,"Trace").$new(t,a))},P.$$arity=-1),e.defn(L,"$trace!",R=function(){var t,n=this,r=R.$$p,a=r||i,o=arguments.length,$=o-0;$<0&&($=0),t=new Array($);for(var s=0;s<o;s++)t[s-0]=arguments[s];return r&&(R.$$p=null),n["$there_can_be_only_one!"](),c(n,"trace",e.to_a(t),a.$to_proc())},R.$$arity=-1),e.defn(L,"$there_can_be_only_one!",j=function(){var t=this;return s(t.next["$any?"]())?t.$raise(e.const_get_relative(F,"ArgumentError"),"a promise has already been chained"):i},j.$$arity=0),e.defn(L,"$inspect",B=function(){var e,n=this,r=i;return r="#<"+n.$class()+"("+n.$object_id()+")",s(n.next["$any?"]())&&(r=t(r," >> "+n.next.$inspect())),r=s(n["$realized?"]())?t(r,": "+(s(e=n.value)?e:n.error).$inspect()+">"):t(r,">")},B.$$arity=0),function(t,$super,a){function l(){}var u,_,f=l=o(t,$super,"Trace",l),p=(f.$$proto,[f].concat(a));e.defs(f,"$it",u=function(e){var t,n=this,r=i,a=i;return r=[],s(s(t=e["$act?"]())?t:e.$prev()["$nil?"]())&&r.$push(e.$value()),s(a=e.$prev())?r.$concat(n.$it(a)):r},u.$$arity=1),e.defn(f,"$initialize",_=function(t,a){var o,l=this,u=_.$$p;return u&&(_.$$p=null),l.depth=t,c(l,e.find_super_dispatcher(l,"initialize",_,!1),[$(["success"],{success:c(l,"proc",[],(o=function(){var $,l=o.$$s||this,u=i;return(u=e.const_get_relative(p,"Trace").$it(l).$reverse()).$pop(),s(s($=t)?n(t,u.$length()):$)&&u.$shift(r(u.$length(),t)),c(a,"call",e.to_a(u))},o.$$s=l,o.$$arity=0,o))})],null)},_.$$arity=2)}(F[0],L,F),function(t,$super,n){function r(){}var a,$,l,u,_,f,p,d=r=o(t,$super,"When",r),v=d.$$proto,h=[d].concat(n);return v.wait=i,e.defn(d,"$initialize",a=function(t){var n,r=this,o=a.$$p;return null==t&&(t=[]),o&&(a.$$p=null),c(r,e.find_super_dispatcher(r,"initialize",a,!1),[],null),r.wait=[],c(t,"each",[],((n=function(e){var t=n.$$s||this;return null==e&&(e=i),t.$wait(e)}).$$s=r,n.$$arity=1,n))},a.$$arity=-1),e.defn(d,"$each",$=function(){var t,n=this,r=$.$$p,a=r||i;return r&&($.$$p=null),s(a)||n.$raise(e.const_get_relative(h,"ArgumentError"),"no block given"),c(n,"then",[],((t=function(e){t.$$s;return null==e&&(e=i),c(e,"each",[],a.$to_proc())}).$$s=n,t.$$arity=1,t))},$.$$arity=0),e.defn(d,"$collect",l=function(){var t,n=this,r=l.$$p,a=r||i;return r&&(l.$$p=null),s(a)||n.$raise(e.const_get_relative(h,"ArgumentError"),"no block given"),c(n,"then",[],((t=function(n){t.$$s;return null==n&&(n=i),e.const_get_relative(h,"When").$new(c(n,"map",[],a.$to_proc()))}).$$s=n,t.$$arity=1,t))},l.$$arity=0),e.defn(d,"$inject",u=function(){var t,n,r=this,a=u.$$p,o=a||i,$=arguments.length,s=$-0;s<0&&(s=0),n=new Array(s);for(var l=0;l<$;l++)n[l-0]=arguments[l];return a&&(u.$$p=null),c(r,"then",[],((t=function(r){t.$$s;return null==r&&(r=i),c(r,"reduce",e.to_a(n),o.$to_proc())}).$$s=r,t.$$arity=1,t))},u.$$arity=-1),e.alias(d,"map","collect"),e.alias(d,"reduce","inject"),e.defn(d,"$wait",_=function(t){var n,r=this;return s(e.const_get_relative(h,"Promise")["$==="](t))||(t=e.const_get_relative(h,"Promise").$value(t)),s(t["$act?"]())&&(t=t.$then()),r.wait["$<<"](t),c(t,"always",[],((n=function(){var e=n.$$s||this;return null==e.next&&(e.next=i),s(e.next["$any?"]())?e.$try():i}).$$s=r,n.$$arity=0,n)),r},_.$$arity=1),e.alias(d,"and","wait"),e.defn(d,"$>>",f=function(){var t,n=this,r=f.$$p,a=i,o=i,$=i;for(r&&(f.$$p=null),o=0,$=arguments.length,a=new Array($);o<$;o++)a[o]=arguments[o];return c(c(n,e.find_super_dispatcher(n,">>",f,!1),a,r),"tap",[],((t=function(){return(t.$$s||this).$try()}).$$s=n,t.$$arity=0,t))},f.$$arity=-1),e.defn(d,"$try",p=function(){var e=this,t=i;return s(c(e.wait,"all?",[],"realized?".$to_proc()))?s(t=c(e.wait,"find",[],"rejected?".$to_proc()))?e.$reject(t.$error()):e.$resolve(c(e.wait,"map",[],"value".$to_proc())):i},p.$$arity=0),i&&"try"}(F[0],L,F)}(a[0],0,a)},Opal.modules["hyper-operation/railway"]=function(e){e.top;var t=[],n=(e.nil,e.breaker,e.slice,e.module),r=e.klass;return function(e,t){var a=n(e,"Hyperstack"),i=(a.$$proto,[a].concat(t));!function(e,$super,t){function n(){}var a=n=r(e,null,"Operation",n);a.$$proto,[a].concat(t)}(i[0],0,i)}(t[0],t)},Opal.modules["hyper-operation/api"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.send,s=e.hash2,c=e.hash;return e.add_stubs(["$is_a?","$raise","$new","$tap","$split","$to_s","$pop","$inject","$[]","$to_sym","$[]=","$-","$!","$nil?","$abort!","$succeed!","$_Railway","$class","$_run","$instance_eval","$process_params","$process_validations","$run","$dispatch","$result","$then","$to_proc","$fail","$add_param","$get_name_and_opts","$merge","$each","$add_validation","$add_error","$add_step","$add_failed","$add_async","$add_receiver","$singleton_class","$define_singleton_method","$set_var","$superclass","$==","$instance_variable_get","$instance_variable_set","$dup"]),function(n,l){var u=a(n,"Hyperstack"),_=(u.$$proto,[u].concat(l));!function(n,$super,a){function l(){}var u,_,f,p,d,v,h=l=i(n,null,"Operation",l),y=h.$$proto,m=[h].concat(a);y.errors=y.params=r,e.defn(h,"$add_error",u=function(n,a,i){var c,l,u=this;return null==i&&(i=r),o(a["$is_a?"](e.const_get_relative(m,"Symbol")))||u.$raise(e.const_get_relative(m,"ArgumentError").$new("Invalid kind")),u.errors=o(c=u.errors)?c:e.const_get_qualified(e.const_get_relative(m,"Mutations"),"ErrorHash").$new(),$(u.errors,"tap",[],((l=function(c){var u,_=l.$$s||this,f=r,p=r,d=r,v=r;return null==c&&(c=r),p=(f=n.$to_s().$split(".")).$pop(),d=$(f,"inject",[c],((u=function(n,a){u.$$s;var i,s=r;return null==n&&(n=r),null==a&&(a=r),o(i=n["$[]"](a.$to_sym()))?i:(s=[a.$to_sym(),e.const_get_qualified(e.const_get_relative(m,"Mutations"),"ErrorHash").$new()],$(n,"[]=",e.to_a(s)),s[t(s.length,1)])}).$$s=_,u.$$arity=2,u)),v=[p,e.const_get_qualified(e.const_get_relative(m,"Mutations"),"ErrorAtom").$new(n,a,s(["message"],{message:i}))],$(d,"[]=",e.to_a(v)),v[t(v.length,1)]}).$$s=u,l.$$arity=1,l))},u.$$arity=-3),e.defn(h,"$has_errors?",_=function(){return this.errors["$nil?"]()["$!"]()},_.$$arity=0),e.defn(h,"$params",f=function(){return this.params},f.$$arity=0),e.defn(h,"$abort!",p=function(t){return null==t&&(t=r),e.const_get_relative(m,"Railway")["$abort!"](t)},p.$$arity=-1),e.defn(h,"$succeed!",d=function(t){return null==t&&(t=r),e.const_get_relative(m,"Railway")["$succeed!"](t)},d.$$arity=-1),e.defn(h,"$initialize",v=function(){var e=this;return e._railway=e.$class().$_Railway().$new(e)},v.$$arity=0),function(t,n){t.$$proto;var a,i,l,u,_,f,p,d,v,h,y,m,g,b,w,k=[t].concat(n);e.defn(t,"$run",a=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return $(n,"_run",e.to_a(t))},a.$$arity=-1),e.defn(t,"$_run",i=function(){var e,t,n=this,a=arguments.length,i=a-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<a;o++)t[o-0]=arguments[o];return $(n.$new(),"instance_eval",[],((e=function(){var n=e.$$s||this;return null==n._railway&&(n._railway=r),n._railway.$process_params(t),n._railway.$process_validations(),n._railway.$run(),n._railway.$dispatch(),n._railway.$result()}).$$s=n,e.$$arity=0,e))},i.$$arity=-1),e.defn(t,"$then",l=function(){var t,n=this,a=l.$$p,i=a||r,o=arguments.length,s=o-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<o;c++)t[c-0]=arguments[c];return a&&(l.$$p=null),$($(n,"run",e.to_a(t)),"then",[],i.$to_proc())},l.$$arity=-1),e.defn(t,"$fail",u=function(){var t,n=this,a=u.$$p,i=a||r,o=arguments.length,s=o-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<o;c++)t[c-0]=arguments[c];return a&&(u.$$p=null),$($(n,"run",e.to_a(t)),"fail",[],i.$to_proc())},u.$$arity=-1),e.defn(t,"$param",_=function(){var t,n=this,a=_.$$p,i=a||r,o=arguments.length,s=o-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<o;c++)t[c-0]=arguments[c];return a&&(_.$$p=null),$(n.$_Railway(),"add_param",e.to_a(t),i.$to_proc())},_.$$arity=-1),e.defn(t,"$inbound",f=function(){var t,n,a,i=this,o=f.$$p,c=o||r,l=r,u=r,_=arguments.length,p=_-0;p<0&&(p=0),a=new Array(p);for(var d=0;d<_;d++)a[d-0]=arguments[d];return o&&(f.$$p=null),n=$(e.const_get_relative(k,"ParamsWrapper"),"get_name_and_opts",e.to_a(a)),l=null==(t=e.to_ary(n))[0]?r:t[0],u=null==t[1]?r:t[1],$(i.$_Railway(),"add_param",[l,u.$merge(s(["inbound"],{inbound:"true"}))],c.$to_proc())},f.$$arity=-1),e.defn(t,"$outbound",p=function(){var e,t,n=this,a=arguments.length,i=a-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<a;o++)t[o-0]=arguments[o];return $(t,"each",[],((e=function(t){var n=e.$$s||this;return null==t&&(t=r),n.$_Railway().$add_param(c(t,r,"type","outbound"))}).$$s=n,e.$$arity=1,e))},p.$$arity=-1),e.defn(t,"$validate",d=function(){var t,n=this,a=d.$$p,i=a||r,o=arguments.length,s=o-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<o;c++)t[c-0]=arguments[c];return a&&(d.$$p=null),$(n.$_Railway(),"add_validation",e.to_a(t),i.$to_proc())},d.$$arity=-1),e.defn(t,"$add_error",v=function(t,n,a){var i,o=this,s=v.$$p,c=s||r,l=arguments.length,u=l-3;u<0&&(u=0),i=new Array(u);for(var _=3;_<l;_++)i[_-3]=arguments[_];return s&&(v.$$p=null),$(o.$_Railway(),"add_error",[t,n,a].concat(e.to_a(i)),c.$to_proc())},v.$$arity=-4),e.defn(t,"$step",h=function(){var t,n=this,a=h.$$p,i=a||r,o=arguments.length,s=o-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<o;c++)t[c-0]=arguments[c];return a&&(h.$$p=null),$(n.$_Railway(),"add_step",e.to_a(t),i.$to_proc())},h.$$arity=-1),e.defn(t,"$failed",y=function(){var t,n=this,a=y.$$p,i=a||r,o=arguments.length,s=o-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<o;c++)t[c-0]=arguments[c];return a&&(y.$$p=null),$(n.$_Railway(),"add_failed",e.to_a(t),i.$to_proc())},y.$$arity=-1),e.defn(t,"$async",m=function(){var t,n=this,a=m.$$p,i=a||r,o=arguments.length,s=o-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<o;c++)t[c-0]=arguments[c];return a&&(m.$$p=null),$(n.$_Railway(),"add_async",e.to_a(t),i.$to_proc())},m.$$arity=-1),e.defn(t,"$on_dispatch",g=function(){var e=this,t=g.$$p,n=t||r;return t&&(g.$$p=null),$(e.$_Railway(),"add_receiver",[],n.$to_proc())},g.$$arity=0),e.defn(t,"$_Railway",b=function(){return this.$singleton_class().$_Railway()},b.$$arity=0),e.defn(t,"$inherited",w=function(t){var n,a,i,l,u,_,f,p,d,v=this;return $(t.$singleton_class(),"define_singleton_method",["param"],((n=function(){var t,a,i=n.$$s||this;(t=n.$$p||r)&&(n.$$p=null);var o=arguments.length,s=o-0;s<0&&(s=0),a=new Array(s);for(var c=0;c<o;c++)a[c-0]=arguments[c];return $(i.$_Railway(),"add_param",e.to_a(a),t.$to_proc())}).$$s=v,n.$$arity=-1,n)),$(t.$singleton_class(),"define_singleton_method",["inbound"],((a=function(){var t,n,i,o,c=a.$$s||this,l=r,u=r;(t=a.$$p||r)&&(a.$$p=null);var _=arguments.length,f=_-0;f<0&&(f=0),n=new Array(f);for(var p=0;p<_;p++)n[p-0]=arguments[p];return o=$(e.const_get_relative(k,"ParamsWrapper"),"get_name_and_opts",e.to_a(n)),l=null==(i=e.to_ary(o))[0]?r:i[0],u=null==i[1]?r:i[1],$(c.$_Railway(),"add_param",[l,u.$merge(s(["inbound"],{inbound:"true"}))],t.$to_proc())}).$$s=v,a.$$arity=-1,a)),$(t.$singleton_class(),"define_singleton_method",["outbound"],((i=function(){var e,t,n=i.$$s||this,a=arguments.length,o=a-0;o<0&&(o=0),e=new Array(o);for(var s=0;s<a;s++)e[s-0]=arguments[s];return $(e,"each",[],((t=function(e){var n=t.$$s||this;return null==e&&(e=r),n.$_Railway().$add_param(c(e,r,"type","outbound"))}).$$s=n,t.$$arity=1,t))}).$$s=v,i.$$arity=-1,i)),$(t.$singleton_class(),"define_singleton_method",["validate"],((l=function(){var t,n,a=l.$$s||this;(t=l.$$p||r)&&(l.$$p=null);var i=arguments.length,o=i-0;o<0&&(o=0),n=new Array(o);for(var s=0;s<i;s++)n[s-0]=arguments[s];return $(a.$_Railway(),"add_validation",e.to_a(n),t.$to_proc())}).$$s=v,l.$$arity=-1,l)),$(t.$singleton_class(),"define_singleton_method",["add_error"],((u=function(t,n,a){var i,o,s=u.$$s||this;(i=u.$$p||r)&&(u.$$p=null);var c=arguments.length,l=c-3;l<0&&(l=0),o=new Array(l);for(var _=3;_<c;_++)o[_-3]=arguments[_];return null==t&&(t=r),null==n&&(n=r),null==a&&(a=r),$(s.$_Railway(),"add_error",[t,n,a].concat(e.to_a(o)),i.$to_proc())}).$$s=v,u.$$arity=-4,u)),$(t.$singleton_class(),"define_singleton_method",["step"],((_=function(){var t,n,a=_.$$s||this;(t=_.$$p||r)&&(_.$$p=null);var i=arguments.length,o=i-0;o<0&&(o=0),n=new Array(o);for(var c=0;c<i;c++)n[c-0]=arguments[c];return $(a.$_Railway(),"add_step",[s(["scope"],{scope:"class"})].concat(e.to_a(n)),t.$to_proc())}).$$s=v,_.$$arity=-1,_)),$(t.$singleton_class(),"define_singleton_method",["failed"],((f=function(){var t,n,a=f.$$s||this;(t=f.$$p||r)&&(f.$$p=null);var i=arguments.length,o=i-0;o<0&&(o=0),n=new Array(o);for(var c=0;c<i;c++)n[c-0]=arguments[c];return $(a.$_Railway(),"add_failed",[s(["scope"],{scope:"class"})].concat(e.to_a(n)),t.$to_proc())}).$$s=v,f.$$arity=-1,f)),$(t.$singleton_class(),"define_singleton_method",["async"],((p=function(){var t,n,a=p.$$s||this;(t=p.$$p||r)&&(p.$$p=null);var i=arguments.length,o=i-0;o<0&&(o=0),n=new Array(o);for(var c=0;c<i;c++)n[c-0]=arguments[c];return $(a.$_Railway(),"add_async",[s(["scope"],{scope:"class"})].concat(e.to_a(n)),t.$to_proc())}).$$s=v,p.$$arity=-1,p)),$(t.$singleton_class(),"define_singleton_method",["_Railway"],((d=function(){var t,n=d.$$s||this;return $(e.const_get_qualified(e.const_get_relative(k,"Hyperstack"),"Context"),"set_var",[n,"@_railway"],((t=function(){var n,a,i=t.$$s||this,s=r;return(s=o(n=i.$superclass())?n:i.$$singleton_of.$superclass().$singleton_class())["$=="](e.const_get_relative(k,"Operation").$singleton_class())?e.const_get_relative(k,"Class").$new(e.const_get_relative(k,"Railway")):$(e.const_get_relative(k,"Class").$new(s.$_Railway()),"tap",[],((a=function(e){var t,n=a.$$s||this;return null==e&&(e=r),$(["@validations","@tracks","@receivers"],"each",[],((t=function(n){t.$$s;var a,i=r;return null==n&&(n=r),i=s.$_Railway().$instance_variable_get(n),e.$instance_variable_set(n,o(a=i)?i.$dup():a)}).$$s=n,t.$$arity=1,t))}).$$s=i,a.$$arity=1,a))}).$$s=n,t.$$arity=0,t))}).$$s=v,d.$$arity=0,d))},w.$$arity=1)}(e.get_singleton_class(h),m),function(t,$super,n){function r(){}var a,o=r=i(t,null,"Railway",r);o.$$proto,[o].concat(n);e.defn(o,"$initialize",a=function(e){return this.operation=e},a.$$arity=1)}(m[0],0,m)}(_[0],0,_)}(n[0],n)},Opal.modules["hyper-operation/railway/dispatcher"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.send,o=e.hash2;return e.add_stubs(["$receivers","$class","$set_var","$lambda","$call","$to_proc","$define_singleton_method","$delete","$<<","$then","$result","$each","$dispatch_params","$params_wrapper","$params"]),function(t,$){var s=r(t,"Hyperstack"),c=(s.$$proto,[s].concat($));!function(t,$super,r){function $(){}var s=$=a(t,null,"Operation",$),c=(s.$$proto,[s].concat(r));(function(t,$super,r){function $(){}var s,c,l=$=a(t,null,"Railway",$),u=(l.$$proto,[l].concat(r));e.defn(l,"$receivers",s=function(){return this.$class().$receivers()},s.$$arity=0),function(t,r){t.$$proto;var a,$,s=[t].concat(r);e.defn(t,"$receivers",a=function(){var t,n=this;return i(e.const_get_qualified(e.const_get_relative(s,"Hyperstack"),"Context"),"set_var",[n,"@receivers",o(["force"],{force:!0})],((t=function(){t.$$s;return[]}).$$s=n,t.$$arity=0,t))},a.$$arity=0),e.defn(t,"$add_receiver",$=function(){var t,r,a=this,o=$.$$p,s=o||n,c=n,l=n;return o&&($.$$p=null),c=i(a,"lambda",[],((t=function(){var r,a;t.$$s;(r=t.$$p||n)&&(t.$$p=null);var o=arguments.length,$=o-0;$<0&&($=0),a=new Array($);for(var c=0;c<o;c++)a[c-0]=arguments[c];return i(s,"call",e.to_a(a),r.$to_proc())}).$$s=a,t.$$arity=-1,t)),l=a,i(c,"define_singleton_method",["unmount"],((r=function(){r.$$s;return l.$receivers().$delete(c)}).$$s=a,r.$$arity=0,r)),a.$receivers()["$<<"](c),c},$.$$arity=0)}(e.get_singleton_class(l),u),e.defn(l,"$dispatch",c=function(){var e,t=this;return i(t.$result(),"then",[],((e=function(){var t,r=e.$$s||this;return i(r.$receivers(),"each",[],((t=function(e){var r=t.$$s||this;return null==r.operation&&(r.operation=n),null==e&&(e=n),e.$call(r.$class().$params_wrapper().$dispatch_params(r.operation.$params()),r.operation)}).$$s=r,t.$$arity=1,t))}).$$s=t,e.$$arity=0,e))},c.$$arity=0)})(c[0],0,c)}(c[0],0,c)}(t[0],t)},Opal.modules["hyper-operation/railway/params_wrapper"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.truthy,s=e.send,c=e.hash2;return e.add_stubs(["$dup","$each","$inbound_params","$class","$delete","$with_indifferent_access","$to_s","$to_h","$inject","$respond_to?","$raise","$new","$merge!","$combine_arg_array","$filter","$hash_filter","$instance_eval","$translate_args","$to_proc","$<<","$key?","$optional","$send","$required","$define_method","$[]","$method_missing","$[]=","$-","$lock","$get_name_and_opts","$is_a?","$>","$count","$first","$==","$proc","$duck","$underscore","$last","$process_params","$params_wrapper","$add_param","$set_var","$superclass","$tap","$instance_variable_set"]),function(r,l){var u=i(r,"Hyperstack"),_=(u.$$proto,[u].concat(l));!function(r,$super,i){function l(){}var u=l=o(r,null,"Operation",l),_=(u.$$proto,[u].concat(i));(function(r,$super,i){function l(){}var u,_,f,p,d=l=o(r,null,"ParamsWrapper",l),v=d.$$proto,h=[d].concat(i);v.inputs=v.locked=a,e.defn(d,"$initialize",u=function(e){return this.inputs=e},u.$$arity=1),e.defn(d,"$lock",_=function(){var e=this;return e.locked=!0,e},_.$$arity=0),e.defn(d,"$to_h",f=function(){var e,t=this,n=a;return n=t.inputs,$(t.locked)&&(n=n.$dup(),s(t.$class().$inbound_params(),"each",[],((e=function(t){e.$$s;return null==t&&(t=a),n.$delete(""+t)}).$$s=t,e.$$arity=1,e))),n.$with_indifferent_access()},f.$$arity=0),e.defn(d,"$to_s",p=function(){return this.$to_h().$to_s()},p.$$arity=0),function(r,i){r.$$proto;var o,l,u,_,f,p,d,v,h=[r].concat(i);e.defn(r,"$combine_arg_array",o=function(t){var n,r=this;return s(t,"inject",[c([],{}).$with_indifferent_access()],((n=function(t,r){var i=n.$$s||this;return null==t&&(t=a),null==r&&(r=a),$(r["$respond_to?"]("to_h"))||i.$raise(e.const_get_relative(h,"ArgumentError").$new("All arguments must be hashes")),t["$merge!"](r.$to_h())}).$$s=r,n.$$arity=2,n))},o.$$arity=1),e.defn(r,"$process_params",l=function(t,n){var r,i,o,$=this,c=a,l=a,u=a,_=a;return c=$.$combine_arg_array(n),i=$.$hash_filter().$filter(c),l=null==(r=e.to_ary(i))[0]?a:r[0],u=null==r[1]?a:r[1],_=$.$new(l),s(t,"instance_eval",[],((o=function(){var e,t=o.$$s||this;return e=[c,_,u],t.raw_inputs=e[0],t.params=e[1],t.errors=e[2],e}).$$s=$,o.$$arity=0,o))},l.$$arity=2),e.defn(r,"$add_param",u=function(){var n,r,i,o,c,l,_,f=this,p=u.$$p,d=p||a,v=a,h=a,y=a,m=arguments.length,g=m-0;g<0&&(g=0),_=new Array(g);for(var b=0;b<m;b++)_[b-0]=arguments[b];return p&&(u.$$p=null),r=s(f,"translate_args",e.to_a(_),d.$to_proc()),n=e.to_ary(r),v=null==n[0]?a:n[0],h=null==n[1]?a:n[1],y=null==n[2]?a:n[2],d=null==n[3]?a:n[3],$(y.$delete("inbound"))&&f.$inbound_params()["$<<"](""+h),$(y["$key?"]("default"))?s(f.$hash_filter(),"optional",[],((i=function(){var e=i.$$s||this;return s(e,"send",[v,h,y],d.$to_proc())}).$$s=f,i.$$arity=0,i)):s(f.$hash_filter(),"required",[],((o=function(){var e=o.$$s||this;return s(e,"send",[v,h,y],d.$to_proc())}).$$s=f,o.$$arity=0,o)),s(f,"define_method",[h],((c=function(){var e=c.$$s||this;return null==e.inputs&&(e.inputs=a),e.inputs["$[]"](h)}).$$s=f,c.$$arity=0,c)),s(f,"define_method",[h+"="],((l=function(n){var r=l.$$s||this,i=a;return null==r.locked&&(r.locked=a),null==r.inputs&&(r.inputs=a),null==n&&(n=a),$(r.locked)&&r.$method_missing(h+"=",n),i=[h,n],s(r.inputs,"[]=",e.to_a(i)),i[t(i.length,1)]}).$$s=f,l.$$arity=1,l))},u.$$arity=-1),e.defn(r,"$dispatch_params",_=function(e,t){var n,r=this;return null==t&&(t=c([],{})),e=e.$dup(),s(t,"each",[],((n=function(t){var r,i=n.$$s||this;return null==t&&(t=a),s(t,"each",[],((r=function(t,n){r.$$s;return null==t&&(t=a),null==n&&(n=a),e.$send(t+"=",n)}).$$s=i,r.$$arity=2,r))}).$$s=r,n.$$arity=1,n)),e.$lock()},_.$$arity=-2),e.defn(r,"$hash_filter",f=function(){var t,n=this;return null==n.hash_filter&&(n.hash_filter=a),n.hash_filter=$(t=n.hash_filter)?t:e.const_get_qualified(e.const_get_relative(h,"Mutations"),"HashFilter").$new()},f.$$arity=0),e.defn(r,"$inbound_params",p=function(){var t,n=this;return null==n.inbound_params&&(n.inbound_params=a),n.inbound_params=$(t=n.inbound_params)?t:e.const_get_relative(h,"Set").$new()},p.$$arity=0),e.defn(r,"$translate_args",d=function(){var r,i,o,c,l,u=this,_=d.$$p,f=_||a,p=a,v=a,y=a,m=a,g=arguments.length,b=g-0;b<0&&(b=0),l=new Array(b);for(var w=0;w<g;w++)l[w-0]=arguments[w];return _&&(d.$$p=null),i=s(u,"get_name_and_opts",e.to_a(l)),p=null==(r=e.to_ary(i))[0]?a:r[0],v=null==r[1]?a:r[1],$(v["$key?"]("type"))?(y=v.$delete("type"),$(y["$is_a?"](e.const_get_relative(h,"Array")))?($(n(y.$count(),0))&&(m=["class",y.$first()],s(v,"[]=",e.to_a(m)),m[t(m.length,1)]),y=e.const_get_relative(h,"Array")):$($(r=y["$is_a?"](e.const_get_relative(h,"Hash")))?r:y["$=="](e.const_get_relative(h,"Hash")))&&(y=e.const_get_relative(h,"Hash"),f=$(r=f)?r:s(u,"proc",[],((o=function(){return(o.$$s||this).$duck("*")}).$$s=u,o.$$arity=0,o))),y=y.$to_s().$underscore()):y="duck",[y,p,v,$(r=f)?r:s(u,"proc",[],(c=function(){c.$$s;return a},c.$$s=u,c.$$arity=0,c))]},d.$$arity=-1),e.defn(r,"$get_name_and_opts",v=function(){var n,r,i=a,o=a,l=a,u=arguments.length,_=u-0;_<0&&(_=0),r=new Array(_);for(var f=0;f<u;f++)r[f-0]=arguments[f];return $(r["$[]"](0)["$is_a?"](e.const_get_relative(h,"Hash")))?(o=(i=r["$[]"](0)).$first().$first(),l=["default",i.$first().$last()],s(i,"[]=",e.to_a(l)),l[t(l.length,1)],i.$delete(o)):(o=r["$[]"](0),i=$(n=r["$[]"](1))?n:c([],{})),[o,i]},v.$$arity=-1)}(e.get_singleton_class(d),h)})(_[0],0,_),function(t,$super,n){function r(){}var i,c,l,u=r=o(t,null,"Railway",r),_=u.$$proto,f=[u].concat(n);_.operation=a,e.defn(u,"$process_params",i=function(e){var t=this;return t.$class().$params_wrapper().$process_params(t.operation,e)},i.$$arity=1),e.defs(u,"$add_param",c=function(){var t,n=this,r=c.$$p,i=r||a,o=arguments.length,$=o-0;$<0&&($=0),t=new Array($);for(var l=0;l<o;l++)t[l-0]=arguments[l];return r&&(c.$$p=null),s(n.$params_wrapper(),"add_param",e.to_a(t),i.$to_proc())},c.$$arity=-1),e.defs(u,"$params_wrapper",l=function(){var t,n=this;return s(e.const_get_qualified(e.const_get_relative(f,"Hyperstack"),"Context"),"set_var",[n,"@params_wrapper"],((t=function(){var n,r=t.$$s||this;return e.const_get_relative(f,"Railway")["$=="](r.$superclass())?e.const_get_relative(f,"Class").$new(e.const_get_relative(f,"ParamsWrapper")):s(e.const_get_relative(f,"Class").$new(r.$superclass().$params_wrapper()),"tap",[],((n=function(e){var t,r=n.$$s||this,i=a,o=a;return null==e&&(e=a),i=r.$superclass().$params_wrapper().$hash_filter(),e.$instance_variable_set("@hash_filter",$(t=i)?i.$dup():t),o=r.$superclass().$params_wrapper().$inbound_params(),e.$instance_variable_set("@inbound_params",$(t=o)?o.$dup():t)}).$$s=r,n.$$arity=1,n))}).$$s=n,t.$$arity=0,t))},l.$$arity=0)}(_[0],0,_)}(_[0],0,_)}(r[0],r)},Opal.modules["hyper-operation/railway/run"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.hash2,s=e.send;return e.add_stubs(["$attr_reader","$tracks","$class","$merge","$zero?","$count","$is_a?","$[]","$==","$<","$proc","$run","$params","$instance_method","$each","$define_method","$<<","$build_tie","$raise","$new","$then","$apply","$always","$resolve","$step","$method","$arity","$instance_exec","$to_proc","$state","$result","$call","$bind","$include?"]),function(n,c){var l=a(n,"Hyperstack"),u=(l.$$proto,[l].concat(c));!function(n,$super,a){function c(){}var l=c=i(n,null,"Operation",c),u=(l.$$proto,[l].concat(a));(function(t,$super,n){function r(){}var a,o=r=i(t,$super,"Exit",r);o.$$proto,[o].concat(n);o.$attr_reader("state"),o.$attr_reader("result"),e.defn(o,"$initialize",a=function(e,t){var n=this;return n.state=e,n.result=t},a.$$arity=2)})(u[0],e.const_get_relative(u,"StandardError"),u),function(n,$super,a){function c(){}var l,u,_,f,p,d,v,h=c=i(n,null,"Railway",c),y=h.$$proto,m=[h].concat(a);y.promise_chain=y.last_async_result=y.state=y.operation=y.promise_chain_start=y.last_result=y.result=r,e.defn(h,"$tracks",l=function(){return this.$class().$tracks()},l.$$arity=0),function(n,a){n.$$proto;var i,c,l,u,_,f=[n].concat(a);e.defn(n,"$tracks",i=function(){var e,t=this;return null==t.tracks&&(t.tracks=r),t.tracks=o(e=t.tracks)?e:[]},i.$$arity=0),e.defn(n,"$build_tie",c=function(n,a,i){var c,l,u,_=this,p=r;return(o(a.$count()["$zero?"]())?$(["run"],{run:i}):o(a["$[]"](0)["$is_a?"](e.const_get_relative(f,"Hash")))?$(["scope","run"],{scope:o(a["$[]"](0)["$[]"]("class"))?"class":a["$[]"](0)["$[]"]("scope"),run:o(c=o(l=a["$[]"](0)["$[]"]("class"))?l:a["$[]"](0)["$[]"]("run"))?c:i}):o((c=a["$[]"](0)["$=="]("class"))?i:a["$[]"](0)["$=="]("class"))?$(["run","scope"],{run:i,scope:"class"}):o(o(c=a["$[]"](0)["$is_a?"](e.const_get_relative(f,"Class")))?t(a["$[]"](0),e.const_get_relative(f,"Operation")):c)?$(["run"],{run:s(_,"proc",[],(u=function(){var e=u.$$s||this;return a["$[]"](0).$run(e.$params())},u.$$s=_,u.$$arity=0,u))}):(o(a["$[]"](1)["$is_a?"](e.const_get_relative(f,"Hash")))&&(p=a["$[]"](1)["$[]"]("scope")),$(["run","scope"],{run:a["$[]"](0),scope:p}))).$merge($(["tie"],{tie:_.$instance_method(n)}))},c.$$arity=3),s(["step","failed","async"],"each",[],((l=function(e){var t,n=l.$$s||this;return null==e&&(e=r),s(n,"define_method",["add_"+e],((t=function(){var n,a,i=t.$$s||this;(n=t.$$p||r)&&(t.$$p=null);var o=arguments.length,$=o-0;$<0&&($=0),a=new Array($);for(var s=0;s<o;s++)a[s-0]=arguments[s];return i.$tracks()["$<<"](i.$build_tie(e,a,n))}).$$s=n,t.$$arity=-1,t))}).$$s=n,l.$$arity=1,l)),e.defn(n,"$abort!",u=function(t){return this.$raise(e.const_get_relative(f,"Exit").$new("failed",t))},u.$$arity=1),e.defn(n,"$succeed!",_=function(t){return this.$raise(e.const_get_relative(f,"Exit").$new("success",t))},_.$$arity=1)}(e.get_singleton_class(h),m),e.defn(h,"$step",u=function(e){var t,n=this;return n.promise_chain=s(n.promise_chain,"then",[],((t=function(n){var a=t.$$s||this;return null==n&&(n=r),a.$apply(n,"success",e)}).$$s=n,t.$$arity=1,t))},u.$$arity=1),e.defn(h,"$failed",_=function(e){var t,n=this;return n.promise_chain=s(n.promise_chain,"always",[],((t=function(n){var a=t.$$s||this;return null==n&&(n=r),a.$apply(n,"failed",e)}).$$s=n,t.$$arity=1,t))},_.$$arity=1),e.defn(h,"$async",f=function(t){var n=this;return n.promise_chain=n.promise_chain_start=e.const_get_relative(m,"Promise").$new(),n.promise_chain.$resolve(n.last_async_result),n.$step(t)},f.$$arity=1),e.defn(h,"$apply",p=function(t,n,a){var i,$=this,c=r,l=r,u=r,_=r,f=r;try{return $.state["$=="](n)?(a["$[]"]("scope")["$=="]("class")?(c=[$.operation].concat(e.to_a(t)),l=$.operation.$class()):(c=t,l=$.operation),u=a["$[]"]("run"),o(u["$is_a?"](e.const_get_relative(m,"Symbol")))&&(u=l.$method(u)),_=o(u.$arity()["$zero?"]())?s(l,"instance_exec",[],u.$to_proc()):o(o(i=c["$is_a?"](e.const_get_relative(m,"Array")))?u.$arity()["$=="](c.$count()):i)?s(l,"instance_exec",e.to_a(c),u.$to_proc()):s(l,"instance_exec",[c],u.$to_proc()),o(_["$is_a?"](e.const_get_relative(m,"Promise")))||($.last_async_result=_),_):t}catch(p){if(e.rescue(p,[e.const_get_relative(m,"Exit")])){f=p;try{return f.$state()["$=="]("failed")?($.state="abort",$.$raise(o(f.$result()["$is_a?"](e.const_get_relative(m,"Exception")))?f.$result():f)):($.state="succeed",f.$result())}finally{e.pop_exception()}}else{if(!e.rescue(p,[e.const_get_relative(m,"Exception")]))throw p;f=p;try{return $.state="failed",$.$raise(f)}finally{e.pop_exception()}}}},p.$$arity=3),e.defn(h,"$run",d=function(){var t,n,a=this;return a.state=o(t=a.state)?t:"success",a.promise_chain_start=a.promise_chain=e.const_get_relative(m,"Promise").$new(),a.promise_chain_start.$resolve(a.last_result),a.state["$=="]("abort")?r:s(a.$tracks(),"each",[],((n=function(e){var t=n.$$s||this;return null==e&&(e=r),e["$[]"]("tie").$bind(t).$call(e)}).$$s=a,n.$$arity=1,n))},d.$$arity=0),e.defn(h,"$result",v=function(){var t,n,a=this;return a.result=o(t=a.result)?t:s(a.promise_chain,"always",[],((n=function(t){var a=n.$$s||this;return null==a.state&&(a.state=r),null==t&&(t=r),o(["abort","failed"]["$include?"](a.state))?o(t["$is_a?"](e.const_get_relative(m,"Exception")))?a.$raise(t):a.$raise(e.const_get_qualified(e.const_get_relative(m,"Promise"),"Fail").$new(t)):t}).$$s=a,n.$$arity=1,n))},v.$$arity=0)}(u[0],0,u)}(u[0],0,u)}(n[0],n)},Opal.modules["hyper-operation/railway/validations"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass,o=e.truthy,$=e.send;return e.add_stubs(["$validations","$class","$add_error","$+","$to_s","$[]","$<<","$add_validation","$instance_eval","$to_proc","$==","$state","$raise","$new","$result","$each_with_index","$is_a?","$method","$instance_exec","$add_validation_error","$===","$has_errors?","$instance_variable_get"]),function(n,s){var c=a(n,"Hyperstack"),l=(c.$$proto,[c].concat(s));!function(n,$super,a){function s(){}var c=s=i(n,null,"Operation",s),l=(c.$$proto,[c].concat(a));(function(n,$super,a){function s(){}var c,l,u,_=s=i(n,null,"Railway",s),f=_.$$proto,p=[_].concat(a)
;f.operation=f.last_result=f.state=r,e.defn(_,"$validations",c=function(){return this.$class().$validations()},c.$$arity=0),e.defn(_,"$add_validation_error",l=function(e,n){return this.operation.$add_error("param validation "+t(e,1),"validation_error",n.$to_s())},l.$$arity=2),function(t,n){t.$$proto;var a,i,s,c=[t].concat(n);e.defn(t,"$validations",a=function(){var e,t=this;return null==t.validations&&(t.validations=r),t.validations=o(e=t.validations)?e:[]},a.$$arity=0),e.defn(t,"$add_validation",i=function(){var e,t=this,n=i.$$p,a=n||r,$=arguments.length,s=$-0;s<0&&(s=0),e=new Array(s);for(var c=0;c<$;c++)e[c-0]=arguments[c];return n&&(i.$$p=null),o(e["$[]"](0))&&(a=e["$[]"](0)),t.$validations()["$<<"](a)},i.$$arity=-1),e.defn(t,"$add_error",s=function(t,n,a){var i,l,u=this,_=s.$$p,f=_||r,p=arguments.length,d=p-3;d<0&&(d=0),l=new Array(d);for(var v=3;v<p;v++)l[v-3]=arguments[v];return _&&(s.$$p=null),$(u,"add_validation",[],((i=function(){var s=i.$$s||this,l=r;try{return o($(s,"instance_eval",[],f.$to_proc()))&&s.$add_error(t,n,a),!0}catch(u){if(!e.rescue(u,[e.const_get_relative(c,"Exit")]))throw u;l=u;try{return l.$state()["$=="]("failed")||s.$raise(l),s.$add_error(t,n,a),s.$raise(e.const_get_relative(c,"Exit").$new("abort_from_add_error",l.$result()))}finally{e.pop_exception()}}}).$$s=u,i.$$arity=0,i))},s.$$arity=-4)}(e.get_singleton_class(_),p),e.defn(_,"$process_validations",u=function(){try{var n,a,i=this;return function(){try{return $(i.$validations(),"each_with_index",[],((n=function(a,i){var s=n.$$s||this,c=r,l=r;null==s.operation&&(s.operation=r),null==a&&(a=r),null==i&&(i=r);try{return o(a["$is_a?"](e.const_get_relative(p,"Symbol")))&&(a=s.operation.$method(a)),o($(s.operation,"instance_exec",[],a.$to_proc()))?r:s.$add_validation_error(i,"param validation "+t(i,1)+" failed")}catch(u){if(e.rescue(u,[e.const_get_relative(p,"Exit")])){c=u;try{l=c.$state(),"success"["$==="](l)?s.$add_validation_error(i,"illegal use of succeed! in validation"):"failed"["$==="](l)&&s.$add_validation_error(i,"param validation "+t(i,1)+" aborted"),s.state="abort",e.ret(r)}finally{e.pop_exception()}}else if(e.rescue(u,[e.const_get_relative(p,"AccessViolation")])){c=u;try{s.$add_validation_error(i,c),s.state="abort",s.last_result=c,e.ret(r)}finally{e.pop_exception()}}else{if(!e.rescue(u,[e.const_get_relative(p,"Exception")]))throw u;c=u;try{return s.$add_validation_error(i,c)}finally{e.pop_exception()}}}}).$$s=i,n.$$arity=2,n))}finally{o(i.operation["$has_errors?"]())&&(i.last_result=o(a=i.last_result)?a:e.const_get_relative(p,"ValidationException").$new(i.operation.$instance_variable_get("@errors")),i.state=o(a=i.state)?a:"failed")}}()}catch(s){if(s===e.returner)return s.$v;throw s}},u.$$arity=0)})(l[0],0,l)}(l[0],0,l)}(n[0],n)},Opal.modules["hyper-operation/server_op"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var r=[],a=e.nil,i=(e.breaker,e.slice,e.module),o=e.klass,$=e.truthy,s=e.send,c=e.hash2;return e.add_stubs(["$==","$include","$on_opal_client?","$combine_arg_array","$params_wrapper","$_Railway","$serialize_params","$fail","$then","$post","$to_json","$name","$merge","$headers","$[]","$opts","$deserialize_response","$json","$new","$const_get","$on_opal_server?","$internal_iso_run","$resolve","$reject","$isomorphic_method","$send_to_server","$when_on_server","$run_from_client","$controller","$map","$descendants","$to_proc","$production?","$env","$include?","$descendants_map_cache","$raise_operation_access_violation","$<","$class_eval","$constantize","$method_defined?","$[]=","$-","$!","$raise","$run","$deserialize_params","$serialize_response","$handle_exception","$is_a?","$respond_to?","$to_h","$<<","$red","$inspect","$each","$truncate","$details","$__hyperstack_on_error","$join","$to_s","$class","$status","$URI","$host","$port","$path","$scheme","$use_ssl=","$body=","$request","$!=","$lock","$deserialize_dispatch","$receivers","$call","$inbound","$params","$send","$pre_controller_op_method_missing"]),e.const_get_relative(r,"RUBY_ENGINE")["$=="]("opal"),function(r,l){var u=i(r,"Hyperstack"),_=(u.$$proto,[u].concat(l));!function(r,$super,i){function l(){}var u=l=o(r,$super,"ServerOp",l),_=(u.$$proto,[u].concat(i));(function(r,i){r.$$proto;var o,l,u,_,f,p,d,v,h,y,m,g,b,w,k,O,q,E=[r].concat(i);r.$include(e.const_get_qualified(e.const_get_qualified(e.const_get_relative(E,"Hyperstack"),"Component"),"IsomorphicHelpers")),e.const_get_relative(E,"RUBY_ENGINE")["$=="]("opal")&&($(r["$on_opal_client?"]())?e.defn(r,"$run",o=function(){var t,n,r,i=this,o=a,$=arguments.length,l=$-0;l<0&&(l=0),r=new Array(l);for(var u=0;u<$;u++)r[u-0]=arguments[u];return o=i.$_Railway().$params_wrapper().$combine_arg_array(r),o=i.$serialize_params(o),s(s(e.const_get_qualified(e.const_get_relative(E,"Hyperstack"),"HTTP").$post(window.HyperstackEnginePath+"/execute_remote",c(["payload","headers"],{payload:c(["hyperstack_secured_json"],{hyperstack_secured_json:c(["operation","params"],{operation:i.$name(),params:o}).$to_json()}),headers:i.$headers().$merge(c(["X-CSRF-Token"],{"X-CSRF-Token":e.const_get_qualified(e.const_get_relative(E,"Hyperstack"),"ClientDrivers").$opts()["$[]"]("form_authenticity_token")}))})),"then",[],((t=function(e){var n=t.$$s||this;return null==e&&(e=a),n.$deserialize_response(e.$json()["$[]"]("response"))}).$$s=i,t.$$arity=1,t)),"fail",[],((n=function(t){var r=n.$$s||this;null==t&&(t=a);try{return r.$const_get(t.$json()["$[]"]("error_class")).$new(t.$json()["$[]"]("error"))}catch(i){if(!e.rescue(i,[e.const_get_relative(E,"StandardError")]))throw i;try{return e.const_get_relative(E,"Exception").$new(t.$json()["$[]"]("error"))}finally{e.pop_exception()}}}).$$s=i,n.$$arity=1,n))},o.$$arity=-1):$(r["$on_opal_server?"]())&&e.defn(r,"$run",l=function(){var t,n=this,r=a,i=a,o=arguments.length,s=o-0;s<0&&(s=0),t=new Array(s);for(var c=0;c<o;c++)t[c-0]=arguments[c];return r=e.const_get_relative(E,"Promise").$new(),i=n.$internal_iso_run(n.$name(),t),$(i["$[]"]("json")["$[]"]("response"))?r.$resolve(i["$[]"]("json")["$[]"]("response")):r.$reject(e.const_get_relative(E,"Exception").$new(i["$[]"]("json")["$[]"]("error"))),r},l.$$arity=-1)),s(r,"isomorphic_method",["internal_iso_run"],((u=function(t,n,r){var i,o=u.$$s||this;return null==t&&(t=a),null==n&&(n=a),null==r&&(r=a),t.$send_to_server(n,r),s(t,"when_on_server",[],((i=function(){var t=i.$$s||this;return s(e.const_get_qualified(e.const_get_relative(E,"Hyperstack"),"ServerOp"),"run_from_client",["acting_user",t.$controller(),n].concat(e.to_a(r)))}).$$s=o,i.$$arity=0,i))}).$$s=r,u.$$arity=3,u)),e.defn(r,"$descendants_map_cache",_=function(){var t,n=this;return null==n.cached_descendants&&(n.cached_descendants=a),n.cached_descendants=$(t=n.cached_descendants)?t:s(e.const_get_qualified(e.const_get_relative(E,"Hyperstack"),"ServerOp").$descendants(),"map",[],"to_s".$to_proc())},_.$$arity=0),e.defn(r,"$run_from_client",f=function(r,i,o,l){try{var u,_=this,f=a,p=a;try{if($(e.const_get_relative(E,"Rails").$env()["$production?"]()))$(e.const_get_qualified(e.const_get_relative(E,"Hyperstack"),"ServerOp").$descendants_map_cache()["$include?"](o))||e.const_get_qualified(e.const_get_relative(E,"Hyperstack"),"InternalPolicy").$raise_operation_access_violation("illegal_remote_op_call","Operation: "+o+" (in production)");else{try{f=e.const_get_relative(E,"Object").$const_get(o)}catch(d){if(!e.rescue(d,[e.const_get_relative(E,"NameError")]))throw d;try{e.const_get_qualified(e.const_get_relative(E,"Hyperstack"),"InternalPolicy").$raise_operation_access_violation("illegal_remote_op_call","Operation: "+o+" (const not found)")}finally{e.pop_exception()}}$(t(f,e.const_get_qualified(e.const_get_relative(E,"Hyperstack"),"ServerOp")))||e.const_get_qualified(e.const_get_relative(E,"Hyperstack"),"InternalPolicy").$raise_operation_access_violation("illegal_remote_op_call","Operation: "+o+" (not a ServerOp subclass)")}return s(o.$constantize(),"class_eval",[],((u=function(){var t,_,f=u.$$s||this,p=a;return $(f.$_Railway().$params_wrapper()["$method_defined?"]("controller"))?(p=["controller",i],s(l,"[]=",e.to_a(p)),p[n(p.length,1)]):$(f.$_Railway().$params_wrapper()["$method_defined?"](r)["$!"]())&&f.$raise(e.const_get_relative(E,"AccessViolation").$new("remote_access_not_allowed")),s(s(f.$run(f.$deserialize_params(l)),"then",[],((t=function(n){var r=t.$$s||this;null==n&&(n=a),e.ret(c(["json"],{json:c(["response"],{response:r.$serialize_response(n)})}))}).$$s=f,t.$$arity=1,t)),"fail",[],((_=function(t){var n=_.$$s||this;null==t&&(t=a),e.ret(n.$handle_exception(t,o,l))}).$$s=f,_.$$arity=1,_))}).$$s=_,u.$$arity=0,u))}catch(d){if(!e.rescue(d,[e.const_get_relative(E,"Exception")]))throw d;p=d;try{return _.$handle_exception(p,o,l)}finally{e.pop_exception()}}}catch(v){if(v===e.returner)return v.$v;throw v}},f.$$arity=4),e.defn(r,"$status",p=function(t){return $(t["$is_a?"](e.const_get_relative(E,"AccessViolation")))?403:$(t["$is_a?"](e.const_get_qualified(e.const_get_relative(E,"Operation"),"ValidationException")))?400:500},p.$$arity=1),e.defn(r,"$handle_exception",d=function(t,n,r){var i,o=this,l=a;return $(t["$respond_to?"]("__hyperstack_on_error"))&&(r=r.$to_h(),(l=[])["$<<"](e.const_get_relative(E,"Pastel").$new().$red("HYPERSTACK ERROR during "+n+" "+t.$inspect())),s(r,"each",[],((i=function(e,t){i.$$s;return null==e&&(e=a),null==t&&(t=a),l["$<<"]("  "+e+" => "+t.$inspect().$truncate(120,c(["separator"],{separator:"..."})))}).$$s=o,i.$$arity=2,i)),$(t["$respond_to?"]("details"))&&l["$<<"]("\n"+t.$details()),t.$__hyperstack_on_error(n,r,l.$join("\n"))),c(["json","status"],{json:c(["error_class","error"],{error_class:t.$class().$to_s(),error:t}),status:o.$status(t)})},d.$$arity=3),e.defn(r,"$remote",v=function(t){var r,i=this,o=a,$=a,l=a,u=a,_=a,f=a,p=arguments.length,d=p-1;d<0&&(d=0),r=new Array(d);for(var v=1;v<p;v++)r[v-1]=arguments[v];try{return o=e.const_get_relative(E,"Promise").$new(),$=i.$URI(t+"execute_remote_api"),l=e.const_get_qualified(e.const_get_relative(E,"Net"),"HTTP").$new($.$host(),$.$port()),u=e.const_get_qualified(e.const_get_qualified(e.const_get_relative(E,"Net"),"HTTP"),"Post").$new($.$path(),c(["Content-Type"],{"Content-Type":"application/json"})),$.$scheme()["$=="]("https")&&(_=[!0],s(l,"use_ssl=",e.to_a(_)),_[n(_.length,1)]),_=[c(["operation","params"],{operation:i.$name(),params:e.const_get_qualified(e.const_get_qualified(e.const_get_relative(E,"Hyperstack"),"Operation"),"ParamsWrapper").$combine_arg_array(r)}).$to_json()],s(u,"body=",e.to_a(_)),_[n(_.length,1)],o.$resolve(l.$request(u))}catch(h){if(!e.rescue(h,[e.const_get_relative(E,"Exception")]))throw h;f=h;try{return o.$reject(f)}finally{e.pop_exception()}}},v.$$arity=-2),e.defn(r,"$headers",h=function(){return c([],{})},h.$$arity=0),e.defn(r,"$serialize_params",y=function(e){return e},y.$$arity=1),e.defn(r,"$deserialize_params",m=function(e){return e},m.$$arity=1),e.defn(r,"$serialize_response",g=function(e){return e},g.$$arity=1),e.defn(r,"$deserialize_response",b=function(e){return e},b.$$arity=1),e.defn(r,"$serialize_dispatch",w=function(e){return e},w.$$arity=1),e.defn(r,"$deserialize_dispatch",k=function(e){return e},k.$$arity=1),e.defn(r,"$dispatch_to",O=function(){var t,n=O.$$p,r=arguments.length,i=r-0;i<0&&(i=0),t=new Array(i);for(var o=0;o<r;o++)t[o-0]=arguments[o];return n&&(O.$$p=null),$(e.const_get_relative(E,"RUBY_ENGINE")["$!="]("opal")),a},O.$$arity=-1),$(e.const_get_relative(E,"RUBY_ENGINE")["$!="]("opal")),e.defn(r,"$dispatch_from_server",q=function(e){var t,n=this,r=a;return r=n.$_Railway().$params_wrapper().$new(n.$deserialize_dispatch(e)).$lock(),s(n.$_Railway().$receivers(),"each",[],((t=function(e){t.$$s;return null==e&&(e=a),e.$call(r)}).$$s=n,t.$$arity=1,t))},q.$$arity=1)})(e.get_singleton_class(u),_)}(_[0],e.const_get_relative(_,"Operation"),_),function(t,$super,n){function r(){}var i,c=r=o(t,$super,"ControllerOp",r);c.$$proto,[c].concat(n);c.$inbound("controller"),e.alias(c,"pre_controller_op_method_missing","method_missing"),e.defn(c,"$method_missing",i=function(t){var n,r=this,o=i.$$p,c=o||a,l=arguments.length,u=l-1;u<0&&(u=0),n=new Array(u);for(var _=1;_<l;_++)n[_-1]=arguments[_];return o&&(i.$$p=null),$(r.$params().$controller()["$respond_to?"](t))?s(r.$params().$controller(),"send",[t].concat(e.to_a(n)),c.$to_proc()):s(r,"pre_controller_op_method_missing",[t].concat(e.to_a(n)),c.$to_proc())},i.$$arity=-2)}(_[0],e.const_get_relative(_,"ServerOp"),_)}(r[0],r)},Opal.modules["hyper-operation/boot"]=function(e){e.top;var t=[],n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,i=e.truthy,o=e.send;return e.add_stubs(["$inherited","$add_receiver","$_Railway","$to_proc","$initialize_client_drivers_on_boot","$_run","$respond_to?","$each","$receivers","$on_dispatch"]),function(t,$){var s=r(t,"Hyperstack"),c=(s.$$proto,[s].concat($));!function(t,$super,r){function $(){}var s,c=$=a(t,null,"Application",$),l=(c.$$proto,[c].concat(r));i(e.const_get_relative(l,"Boot","skip_raise")?"constant":n)&&e.const_get_relative(l,"Operation").$inherited(e.const_get_relative(l,"Boot")),function(t,$super,r){function i(){}var $,s,c=i=a(t,$super,"Boot",i),l=(c.$$proto,[c].concat(r));e.defs(c,"$on_dispatch",$=function(){var e=this,t=$.$$p,r=t||n;return t&&($.$$p=null),o(e.$_Railway(),"add_receiver",[],r.$to_proc())},$.$$arity=0),e.defs(c,"$run",s=function(){var t,n=this,r=arguments.length,a=r-0;a<0&&(a=0),t=new Array(a);for(var i=0;i<r;i++)t[i-0]=arguments[i];return e.const_get_relative(l,"ClientDrivers").$initialize_client_drivers_on_boot(),o(n,"_run",e.to_a(t))},s.$$arity=-1)}(l[0],e.const_get_relative(l,"Operation"),l),i(e.const_get_relative(l,"Boot")["$respond_to?"]("receivers"))&&o(e.const_get_relative(l,"Boot").$receivers(),"each",[],((s=function(t){s.$$s;return null==t&&(t=n),o(e.const_get_relative(l,"Boot"),"on_dispatch",[],t.$to_proc())}).$$s=c,s.$$arity=1,s))}(c[0],0,c)}(t[0],t)},Opal.modules["hyper-operation"]=function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$import","$==","$register_additional_filter"]),t.$require("hyper-operation/version"),t.$require("hyperstack-config"),e.const_get_relative(n,"Hyperstack").$import("hyper-operation"),e.const_get_relative(n,"RUBY_ENGINE")["$=="]("opal")?(t.$require("active_support/core_ext/string"),t.$require("mutations"),e.const_get_qualified(e.const_get_relative(n,"Mutations"),"HashFilter").$register_additional_filter(e.const_get_qualified(e.const_get_relative(n,"Mutations"),"DuckFilter"),"duck"),t.$require("hyper-operation/filters/outbound_filter"),t.$require("hyper-component"),t.$require("hyper-operation/http"),t.$require("hyper-operation/transport/client_drivers"),function(e,$super,t){function n(){}var r=n=a(e,$super,"HashWithIndifferentAccess",n);r.$$proto,[r].concat(t)}(n[0],e.const_get_relative(n,"Hash"),n),function(t,$super,n){function r(){}var i,o=r=a(t,null,"String",r);o.$$proto,[o].concat(n);e.defn(o,"$titleize",i=function(){return this},i.$$arity=0)}(n[0],0,n),t.$require("hyper-operation/exception"),t.$require("hyper-operation/promise"),t.$require("hyper-operation/railway"),t.$require("hyper-operation/api"),t.$require("hyper-operation/railway/dispatcher"),t.$require("hyper-operation/railway/params_wrapper"),t.$require("hyper-operation/railway/run"),t.$require("hyper-operation/railway/validations"),t.$require("hyper-operation/server_op"),t.$require("hyper-operation/boot")):r},function(e){var t=e.top,n=[],r=e.nil,a=(e.breaker,e.slice,e.module),i=e.truthy;e.add_stubs(["$require","$new"]),t.$require("active_support"),t.$require("time"),t.$require("date"),t.$require("opal-jquery"),t.$require("browser"),t.$require("browser/interval"),t.$require("browser/delay"),t.$require("hyperstack-config"),function(t,n){var o,$=a(t,"Hyperstack"),s=($.$$proto,[$].concat(n));e.defs($,"$env",o=function(){var t,n=this;return null==n.environment&&(n.environment=r),n.environment=i(t=n.environment)?t:e.const_get_qualified(e.const_get_relative(s,"ActiveSupport"),"StringInquirer").$new("express")},o.$$arity=0)}(n[0],n),t.$require("hyperstack/autoloader"),t.$require("hyperstack/autoloader_starter"),t.$require("hyper-component"),t.$require("hyperstack/component/auto-import"),t.$require("hyper-state"),t.$require("hyper-operation")}(Opal);